(self["webpackChunkwallet_vue"]=self["webpackChunkwallet_vue"]||[]).push([[7308],{655:function(e,t,r){"use strict";var n=r(36955),i=String;e.exports=function(e){if("Symbol"===n(e))throw new TypeError("Cannot convert a Symbol value to a string");return i(e)}},815:function(e,t,r){"use strict";r.d(t,{A7:function(){return s}});var n=r(56001),i=r(22626);class s extends i.C{constructor({cause:e,message:t}={}){const r=t?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(s,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(s,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class o extends i.C{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${(0,n.Q)(t)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(o,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class a extends i.C{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${(0,n.Q)(t)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(a,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class c extends i.C{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(c,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class u extends i.C{constructor({cause:e,nonce:t}={}){super([`Nonce provided for the transaction ${t?`(${t}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join("\n"),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(u,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class l extends i.C{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(l,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class h extends i.C{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join("\n"),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(h,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class d extends i.C{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(d,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class p extends i.C{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(p,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class f extends i.C{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(f,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class g extends i.C{constructor({cause:e,maxPriorityFeePerGas:t,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${t?` = ${(0,n.Q)(t)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${(0,n.Q)(r)} gwei`:""}).`].join("\n"),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(g,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});i.C},1255:function(e,t,r){"use strict";r.d(t,{l:function(){return s}});var n=r(63558),i=r(44521);const s=e=>{const t=(0,n.u8)(e),{encode:r,decode:s}=(0,i.P)(t),o=t;return o.decode=(e,t)=>{const r=s(e,t);return!!r},o.encode=(e,t,n)=>{const i=Number(e);return r(i,t,n)},o}},1548:function(e,t,r){"use strict";var n=r(44576),i=r(79039),s=r(39519),o=r(84215),a=n.structuredClone;e.exports=!!a&&!i((function(){if("DENO"===o&&s>92||"NODE"===o&&s>94||"BROWSER"===o&&s>97)return!1;var e=new ArrayBuffer(8),t=a(e,{transfer:[e]});return 0!==e.byteLength||8!==t.byteLength}))},1555:function(e,t,r){"use strict";r.d(t,{OH:function(){return s},Vl:function(){return c},gS:function(){return o},hy:function(){return i},s1:function(){return a}});const n="https://secure.walletconnect.org/sdk",i=("undefined"!==typeof process?{NODE_ENV:"production",BASE_URL:""}["NEXT_PUBLIC_SECURE_SITE_SDK_URL"]:void 0)||n,s=("undefined"!==typeof process?{NODE_ENV:"production",BASE_URL:""}["NEXT_PUBLIC_DEFAULT_LOG_LEVEL"]:void 0)||"error",o=("undefined"!==typeof process?{NODE_ENV:"production",BASE_URL:""}["NEXT_PUBLIC_SECURE_SITE_SDK_VERSION"]:void 0)||"4",a={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},c={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}}},1576:function(e){!function(t,r){e.exports=r()}(0,(function(){"use strict";var e=1e3,t=6e4,r=36e5,n="millisecond",i="second",s="minute",o="hour",a="day",c="week",u="month",l="quarter",h="year",d="date",p="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],r=e%100;return"["+e+(t[(r-20)%10]||t[r]||t[0])+"]"}},y=function(e,t,r){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(r)+e},w={s:y,z:function(e){var t=-e.utcOffset(),r=Math.abs(t),n=Math.floor(r/60),i=r%60;return(t<=0?"+":"-")+y(n,2,"0")+":"+y(i,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var n=12*(r.year()-t.year())+(r.month()-t.month()),i=t.clone().add(n,u),s=r-i<0,o=t.clone().add(n+(s?-1:1),u);return+(-(n+(r-i)/(s?i-o:o-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:u,y:h,w:c,d:a,D:d,h:o,m:s,s:i,ms:n,Q:l}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},b="en",v={};v[b]=m;var _="$isDayjsObject",E=function(e){return e instanceof C||!(!e||!e[_])},A=function e(t,r,n){var i;if(!t)return b;if("string"==typeof t){var s=t.toLowerCase();v[s]&&(i=s),r&&(v[s]=r,i=s);var o=t.split("-");if(!i&&o.length>1)return e(o[0])}else{var a=t.name;v[a]=t,i=a}return!n&&i&&(b=i),i||!n&&b},I=function(e,t){if(E(e))return e.clone();var r="object"==typeof t?t:{};return r.date=e,r.args=arguments,new C(r)},S=w;S.l=A,S.i=E,S.w=function(e,t){return I(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var C=function(){function m(e){this.$L=A(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[_]=!0}var y=m.prototype;return y.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(S.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(f);if(n){var i=n[2]-1||0,s=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,s)):new Date(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,s)}}return new Date(t)}(e),this.init()},y.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},y.$utils=function(){return S},y.isValid=function(){return!(this.$d.toString()===p)},y.isSame=function(e,t){var r=I(e);return this.startOf(t)<=r&&r<=this.endOf(t)},y.isAfter=function(e,t){return I(e)<this.startOf(t)},y.isBefore=function(e,t){return this.endOf(t)<I(e)},y.$g=function(e,t,r){return S.u(e)?this[t]:this.set(r,e)},y.unix=function(){return Math.floor(this.valueOf()/1e3)},y.valueOf=function(){return this.$d.getTime()},y.startOf=function(e,t){var r=this,n=!!S.u(t)||t,l=S.p(e),p=function(e,t){var i=S.w(r.$u?Date.UTC(r.$y,t,e):new Date(r.$y,t,e),r);return n?i:i.endOf(a)},f=function(e,t){return S.w(r.toDate()[e].apply(r.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(t)),r)},g=this.$W,m=this.$M,y=this.$D,w="set"+(this.$u?"UTC":"");switch(l){case h:return n?p(1,0):p(31,11);case u:return n?p(1,m):p(0,m+1);case c:var b=this.$locale().weekStart||0,v=(g<b?g+7:g)-b;return p(n?y-v:y+(6-v),m);case a:case d:return f(w+"Hours",0);case o:return f(w+"Minutes",1);case s:return f(w+"Seconds",2);case i:return f(w+"Milliseconds",3);default:return this.clone()}},y.endOf=function(e){return this.startOf(e,!1)},y.$set=function(e,t){var r,c=S.p(e),l="set"+(this.$u?"UTC":""),p=(r={},r[a]=l+"Date",r[d]=l+"Date",r[u]=l+"Month",r[h]=l+"FullYear",r[o]=l+"Hours",r[s]=l+"Minutes",r[i]=l+"Seconds",r[n]=l+"Milliseconds",r)[c],f=c===a?this.$D+(t-this.$W):t;if(c===u||c===h){var g=this.clone().set(d,1);g.$d[p](f),g.init(),this.$d=g.set(d,Math.min(this.$D,g.daysInMonth())).$d}else p&&this.$d[p](f);return this.init(),this},y.set=function(e,t){return this.clone().$set(e,t)},y.get=function(e){return this[S.p(e)]()},y.add=function(n,l){var d,p=this;n=Number(n);var f=S.p(l),g=function(e){var t=I(p);return S.w(t.date(t.date()+Math.round(e*n)),p)};if(f===u)return this.set(u,this.$M+n);if(f===h)return this.set(h,this.$y+n);if(f===a)return g(1);if(f===c)return g(7);var m=(d={},d[s]=t,d[o]=r,d[i]=e,d)[f]||1,y=this.$d.getTime()+n*m;return S.w(y,this)},y.subtract=function(e,t){return this.add(-1*e,t)},y.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return r.invalidDate||p;var n=e||"YYYY-MM-DDTHH:mm:ssZ",i=S.z(this),s=this.$H,o=this.$m,a=this.$M,c=r.weekdays,u=r.months,l=r.meridiem,h=function(e,r,i,s){return e&&(e[r]||e(t,n))||i[r].slice(0,s)},d=function(e){return S.s(s%12||12,e,"0")},f=l||function(e,t,r){var n=e<12?"AM":"PM";return r?n.toLowerCase():n};return n.replace(g,(function(e,n){return n||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return S.s(t.$y,4,"0");case"M":return a+1;case"MM":return S.s(a+1,2,"0");case"MMM":return h(r.monthsShort,a,u,3);case"MMMM":return h(u,a);case"D":return t.$D;case"DD":return S.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return h(r.weekdaysMin,t.$W,c,2);case"ddd":return h(r.weekdaysShort,t.$W,c,3);case"dddd":return c[t.$W];case"H":return String(s);case"HH":return S.s(s,2,"0");case"h":return d(1);case"hh":return d(2);case"a":return f(s,o,!0);case"A":return f(s,o,!1);case"m":return String(o);case"mm":return S.s(o,2,"0");case"s":return String(t.$s);case"ss":return S.s(t.$s,2,"0");case"SSS":return S.s(t.$ms,3,"0");case"Z":return i}return null}(e)||i.replace(":","")}))},y.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},y.diff=function(n,d,p){var f,g=this,m=S.p(d),y=I(n),w=(y.utcOffset()-this.utcOffset())*t,b=this-y,v=function(){return S.m(g,y)};switch(m){case h:f=v()/12;break;case u:f=v();break;case l:f=v()/3;break;case c:f=(b-w)/6048e5;break;case a:f=(b-w)/864e5;break;case o:f=b/r;break;case s:f=b/t;break;case i:f=b/e;break;default:f=b}return p?f:S.a(f)},y.daysInMonth=function(){return this.endOf(u).$D},y.$locale=function(){return v[this.$L]},y.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),n=A(e,t,!0);return n&&(r.$L=n),r},y.clone=function(){return S.w(this.$d,this)},y.toDate=function(){return new Date(this.valueOf())},y.toJSON=function(){return this.isValid()?this.toISOString():null},y.toISOString=function(){return this.$d.toISOString()},y.toString=function(){return this.$d.toUTCString()},m}(),k=C.prototype;return I.prototype=k,[["$ms",n],["$s",i],["$m",s],["$H",o],["$W",a],["$M",u],["$y",h],["$D",d]].forEach((function(e){k[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),I.extend=function(e,t){return e.$i||(e(t,C,I),e.$i=!0),I},I.locale=A,I.isDayjs=E,I.unix=function(e){return I(1e3*e)},I.en=v[b],I.Ls=v,I.p={},I}))},2043:function(e,t,r){"use strict";r(18111),r(22489);const n=r(51386);e.exports=a;const i=I().console||{},s={mapHttpRequest:y,mapHttpResponse:y,wrapRequestSerializer:w,wrapResponseSerializer:w,wrapErrorSerializer:w,req:y,res:y,err:g};function o(e,t){if(Array.isArray(e)){const t=e.filter((function(e){return"!stdSerializers.err"!==e}));return t}return!0===e&&Object.keys(t)}function a(e){e=e||{},e.browser=e.browser||{};const t=e.browser.transmit;if(t&&"function"!==typeof t.send)throw Error("pino: transmit option must have a send function");const r=e.browser.write||i;e.browser.write&&(e.browser.asObject=!0);const n=e.serializers||{},s=o(e.browser.serialize,n);let u=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(u=!1);const l=["error","fatal","warn","info","debug","trace"];"function"===typeof r&&(r.error=r.fatal=r.warn=r.info=r.debug=r.trace=r),!1===e.enabled&&(e.level="silent");const p=e.level||"info",g=Object.create(r);g.log||(g.log=b),Object.defineProperty(g,"levelVal",{get:w}),Object.defineProperty(g,"level",{get:v,set:_});const y={transmit:t,serialize:s,asObject:e.browser.asObject,levels:l,timestamp:m(e)};function w(){return"silent"===this.level?1/0:this.levels.values[this.level]}function v(){return this._level}function _(e){if("silent"!==e&&!this.levels.values[e])throw Error("unknown level "+e);this._level=e,c(y,g,"error","log"),c(y,g,"fatal","error"),c(y,g,"warn","error"),c(y,g,"info","log"),c(y,g,"debug","log"),c(y,g,"trace","log")}function E(r,i){if(!r)throw new Error("missing bindings for child Pino");i=i||{},s&&r.serializers&&(i.serializers=r.serializers);const o=i.serializers;if(s&&o){var a=Object.assign({},n,o),c=!0===e.browser.serialize?Object.keys(a):s;delete r.serializers,h([r],c,a,this._stdErrSerialize)}function u(e){this._childLevel=1+(0|e._childLevel),this.error=d(e,r,"error"),this.fatal=d(e,r,"fatal"),this.warn=d(e,r,"warn"),this.info=d(e,r,"info"),this.debug=d(e,r,"debug"),this.trace=d(e,r,"trace"),a&&(this.serializers=a,this._serialize=c),t&&(this._logEvent=f([].concat(e._logEvent.bindings,r)))}return u.prototype=this,new u(this)}return g.levels=a.levels,g.level=p,g.setMaxListeners=g.getMaxListeners=g.emit=g.addListener=g.on=g.prependListener=g.once=g.prependOnceListener=g.removeListener=g.removeAllListeners=g.listeners=g.listenerCount=g.eventNames=g.write=g.flush=b,g.serializers=n,g._serialize=s,g._stdErrSerialize=u,g.child=E,t&&(g._logEvent=f()),g}function c(e,t,r,n){const s=Object.getPrototypeOf(t);t[r]=t.levelVal>t.levels.values[r]?b:s[r]?s[r]:i[r]||i[n]||b,u(e,t,r)}function u(e,t,r){(e.transmit||t[r]!==b)&&(t[r]=function(n){return function(){const s=e.timestamp(),o=new Array(arguments.length),c=Object.getPrototypeOf&&Object.getPrototypeOf(this)===i?i:this;for(var u=0;u<o.length;u++)o[u]=arguments[u];if(e.serialize&&!e.asObject&&h(o,this._serialize,this.serializers,this._stdErrSerialize),e.asObject?n.call(c,l(this,r,o,s)):n.apply(c,o),e.transmit){const n=e.transmit.level||t.level,i=a.levels.values[n],c=a.levels.values[r];if(c<i)return;p(this,{ts:s,methodLevel:r,methodValue:c,transmitLevel:n,transmitValue:a.levels.values[e.transmit.level||t.level],send:e.transmit.send,val:t.levelVal},o)}}}(t[r]))}function l(e,t,r,i){e._serialize&&h(r,e._serialize,e.serializers,e._stdErrSerialize);const s=r.slice();let o=s[0];const c={};i&&(c.time=i),c.level=a.levels.values[t];let u=1+(0|e._childLevel);if(u<1&&(u=1),null!==o&&"object"===typeof o){while(u--&&"object"===typeof s[0])Object.assign(c,s.shift());o=s.length?n(s.shift(),s):void 0}else"string"===typeof o&&(o=n(s.shift(),s));return void 0!==o&&(c.msg=o),c}function h(e,t,r,n){for(const i in e)if(n&&e[i]instanceof Error)e[i]=a.stdSerializers.err(e[i]);else if("object"===typeof e[i]&&!Array.isArray(e[i]))for(const n in e[i])t&&t.indexOf(n)>-1&&n in r&&(e[i][n]=r[n](e[i][n]))}function d(e,t,r){return function(){const n=new Array(1+arguments.length);n[0]=t;for(var i=1;i<n.length;i++)n[i]=arguments[i-1];return e[r].apply(this,n)}}function p(e,t,r){const n=t.send,i=t.ts,s=t.methodLevel,o=t.methodValue,a=t.val,c=e._logEvent.bindings;h(r,e._serialize||Object.keys(e.serializers),e.serializers,void 0===e._stdErrSerialize||e._stdErrSerialize),e._logEvent.ts=i,e._logEvent.messages=r.filter((function(e){return-1===c.indexOf(e)})),e._logEvent.level.label=s,e._logEvent.level.value=o,n(s,e._logEvent,a),e._logEvent=f(c)}function f(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function g(e){const t={type:e.constructor.name,msg:e.message,stack:e.stack};for(const r in e)void 0===t[r]&&(t[r]=e[r]);return t}function m(e){return"function"===typeof e.timestamp?e.timestamp:!1===e.timestamp?v:_}function y(){return{}}function w(e){return e}function b(){}function v(){return!1}function _(){return Date.now()}function E(){return Math.round(Date.now()/1e3)}function A(){return new Date(Date.now()).toISOString()}function I(){function e(e){return"undefined"!==typeof e&&e}try{return"undefined"!==typeof globalThis||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch(t){return e(self)||e(window)||e(this)||{}}}a.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},a.stdSerializers=s,a.stdTimeFunctions=Object.assign({},{nullTime:v,epochTime:_,unixTime:E,isoTime:A})},2294:function(e,t,r){"use strict";r.d(t,{d:function(){return i}});r(44114);var n=r(96030);function i(e,t,r){if(r.length){e.push({pubkey:t,isSigner:!1,isWritable:!1});for(const t of r)e.push({pubkey:t instanceof n.PublicKey?t:t.publicKey,isSigner:!0,isWritable:!1})}else e.push({pubkey:t,isSigner:!0,isWritable:!1});return e}},2843:function(e,t,r){"use strict";r.d(t,{y:function(){return i}});r(18111),r(7588);var n=r(53291);const i={getCaipTokens(e){if(!e)return;const t={};return Object.entries(e).forEach((([e,r])=>{t[`${n.o.EIP155}:${e}`]=r})),t},isLowerCaseMatch(e,t){return e?.toLowerCase()===t?.toLowerCase()}}},2916:function(e,t,r){"use strict";function n(){return{current:0,take(){return this.current++},reset(){this.current=0}}}r.d(t,{q:function(){return i}});const i=n()},3413:function(e,t,r){"use strict";r.d(t,{A:function(){return h}});r(18111),r(22489),r(61701),r(18237),r(13579);var n=r(64529),i=r(25638),s=r(81653),o=r(81753),a=r(65768),c=r(2843),u=r(7085),l=r(67495);const h={filterOutDuplicatesByRDNS(e){const t=n.H.state.enableEIP6963?i.a.state.connectors:[],r=s.i.getRecentWallets(),a=t.map((e=>e.info?.rdns)).filter(Boolean),c=r.map((e=>e.rdns)).filter(Boolean),u=a.concat(c);if(u.includes("io.metamask.mobile")&&o.w.isMobile()){const e=u.indexOf("io.metamask.mobile");u[e]="io.metamask"}const l=e.filter((e=>!u.includes(String(e?.rdns))));return l},filterOutDuplicatesByIds(e){const t=i.a.state.connectors.filter((e=>"ANNOUNCED"===e.type||"INJECTED"===e.type)),r=s.i.getRecentWallets(),n=t.map((e=>e.explorerId)),o=r.map((e=>e.id)),a=n.concat(o),c=e.filter((e=>!a.includes(e?.id)));return c},filterOutDuplicateWallets(e){const t=this.filterOutDuplicatesByRDNS(e),r=this.filterOutDuplicatesByIds(t);return r},markWalletsAsInstalled(e){const{connectors:t}=i.a.state,r=t.filter((e=>"ANNOUNCED"===e.type)).reduce(((e,t)=>t.info?.rdns?(e[t.info.rdns]=!0,e):e),{}),n=e.map((e=>({...e,installed:Boolean(e.rdns)&&Boolean(r[e.rdns??""])}))),s=n.sort(((e,t)=>Number(t.installed)-Number(e.installed)));return s},getConnectOrderMethod(e,t){const r=e?.connectMethodsOrder||n.H.state.features?.connectMethodsOrder,s=t||i.a.state.connectors;if(r)return r;const{injected:o,announced:c}=u.g.getConnectorsByType(s,a.N.state.recommended,a.N.state.featured),h=o.filter(u.g.showConnector),d=c.filter(u.g.showConnector);return h.length||d.length?["wallet","email","social"]:l.o.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(e){const t=Boolean(e.rdns)&&a.N.state.excludedWallets.some((t=>t.rdns===e.rdns)),r=Boolean(e.name)&&a.N.state.excludedWallets.some((t=>c.y.isLowerCaseMatch(t.name,e.name)));return t||r}}},3819:function(e,t,r){"use strict";var n=r(74013);r(16371);new n.A("1e+18")},4319:function(e,t,r){"use strict";r.d(t,{L:function(){return o}});const n=256;let i,s=n;function o(e=11){if(!i||s+e>2*n){i="",s=0;for(let e=0;e<n;e++)i+=(256+256*Math.random()|0).toString(16).substring(1)}return i.substring(s,s+++e)}},4528:function(e,t,r){r(44114),r(18111),r(7588),r(61701);var n="undefined"!==typeof globalThis&&globalThis||"undefined"!==typeof self&&self||"undefined"!==typeof r.g&&r.g,i=function(){function e(){this.fetch=!1,this.DOMException=n.DOMException}return e.prototype=n,new e}();(function(e){(function(t){var n="undefined"!==typeof e&&e||"undefined"!==typeof self&&self||"undefined"!==typeof r.g&&r.g||{},i={searchParams:"URLSearchParams"in n,iterable:"Symbol"in n&&"iterator"in Symbol,blob:"FileReader"in n&&"Blob"in n&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in n,arrayBuffer:"ArrayBuffer"in n};function s(e){return e&&DataView.prototype.isPrototypeOf(e)}if(i.arrayBuffer)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],a=ArrayBuffer.isView||function(e){return e&&o.indexOf(Object.prototype.toString.call(e))>-1};function c(e){if("string"!==typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function u(e){return"string"!==typeof e&&(e=String(e)),e}function l(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return i.iterable&&(t[Symbol.iterator]=function(){return t}),t}function h(e){this.map={},e instanceof h?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){if(2!=e.length)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function d(e){if(!e._noBody)return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function p(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function f(e){var t=new FileReader,r=p(t);return t.readAsArrayBuffer(e),r}function g(e){var t=new FileReader,r=p(t),n=/charset=([A-Za-z0-9_-]+)/.exec(e.type),i=n?n[1]:"utf-8";return t.readAsText(e,i),r}function m(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}function y(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function w(){return this.bodyUsed=!1,this._initBody=function(e){this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"===typeof e?this._bodyText=e:i.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:i.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:i.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():i.arrayBuffer&&i.blob&&s(e)?(this._bodyArrayBuffer=y(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):i.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||a(e))?this._bodyArrayBuffer=y(e):this._bodyText=e=Object.prototype.toString.call(e):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||("string"===typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i.blob&&(this.blob=function(){var e=d(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=d(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}if(i.blob)return this.blob().then(f);throw new Error("could not read as ArrayBuffer")},this.text=function(){var e=d(this);if(e)return e;if(this._bodyBlob)return g(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(m(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i.formData&&(this.formData=function(){return this.text().then(E)}),this.json=function(){return this.text().then(JSON.parse)},this}h.prototype.append=function(e,t){e=c(e),t=u(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},h.prototype["delete"]=function(e){delete this.map[c(e)]},h.prototype.get=function(e){return e=c(e),this.has(e)?this.map[e]:null},h.prototype.has=function(e){return this.map.hasOwnProperty(c(e))},h.prototype.set=function(e,t){this.map[c(e)]=u(t)},h.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},h.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),l(e)},h.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),l(e)},h.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),l(e)},i.iterable&&(h.prototype[Symbol.iterator]=h.prototype.entries);var b=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function v(e){var t=e.toUpperCase();return b.indexOf(t)>-1?t:e}function _(e,t){if(!(this instanceof _))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t=t||{};var r=t.body;if(e instanceof _){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new h(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new h(t.headers)),this.method=v(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal||function(){if("AbortController"in n){var e=new AbortController;return e.signal}}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(r),("GET"===this.method||"HEAD"===this.method)&&("no-store"===t.cache||"no-cache"===t.cache)){var i=/([?&])_=[^&]*/;if(i.test(this.url))this.url=this.url.replace(i,"$1_="+(new Date).getTime());else{var s=/\?/;this.url+=(s.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function E(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}})),t}function A(e){var t=new h,r=e.replace(/\r?\n[\t ]+/g," ");return r.split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();try{t.append(n,i)}catch(s){console.warn("Response "+s.message)}}})),t}function I(e,t){if(!(this instanceof I))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new h(t.headers),this.url=t.url||"",this._initBody(e)}_.prototype.clone=function(){return new _(this,{body:this._bodyInit})},w.call(_.prototype),w.call(I.prototype),I.prototype.clone=function(){return new I(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},I.error=function(){var e=new I(null,{status:200,statusText:""});return e.ok=!1,e.status=0,e.type="error",e};var S=[301,302,303,307,308];I.redirect=function(e,t){if(-1===S.indexOf(t))throw new RangeError("Invalid status code");return new I(null,{status:t,headers:{location:e}})},t.DOMException=n.DOMException;try{new t.DOMException}catch(k){t.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function C(e,r){return new Promise((function(s,o){var a=new _(e,r);if(a.signal&&a.signal.aborted)return o(new t.DOMException("Aborted","AbortError"));var l=new XMLHttpRequest;function d(){l.abort()}function p(e){try{return""===e&&n.location.href?n.location.href:e}catch(t){return e}}if(l.onload=function(){var e={statusText:l.statusText,headers:A(l.getAllResponseHeaders()||"")};0===a.url.indexOf("file://")&&(l.status<200||l.status>599)?e.status=200:e.status=l.status,e.url="responseURL"in l?l.responseURL:e.headers.get("X-Request-URL");var t="response"in l?l.response:l.responseText;setTimeout((function(){s(new I(t,e))}),0)},l.onerror=function(){setTimeout((function(){o(new TypeError("Network request failed"))}),0)},l.ontimeout=function(){setTimeout((function(){o(new TypeError("Network request timed out"))}),0)},l.onabort=function(){setTimeout((function(){o(new t.DOMException("Aborted","AbortError"))}),0)},l.open(a.method,p(a.url),!0),"include"===a.credentials?l.withCredentials=!0:"omit"===a.credentials&&(l.withCredentials=!1),"responseType"in l&&(i.blob?l.responseType="blob":i.arrayBuffer&&(l.responseType="arraybuffer")),r&&"object"===typeof r.headers&&!(r.headers instanceof h||n.Headers&&r.headers instanceof n.Headers)){var f=[];Object.getOwnPropertyNames(r.headers).forEach((function(e){f.push(c(e)),l.setRequestHeader(e,u(r.headers[e]))})),a.headers.forEach((function(e,t){-1===f.indexOf(t)&&l.setRequestHeader(t,e)}))}else a.headers.forEach((function(e,t){l.setRequestHeader(t,e)}));a.signal&&(a.signal.addEventListener("abort",d),l.onreadystatechange=function(){4===l.readyState&&a.signal.removeEventListener("abort",d)}),l.send("undefined"===typeof a._bodyInit?null:a._bodyInit)}))}C.polyfill=!0,n.fetch||(n.fetch=C,n.Headers=h,n.Request=_,n.Response=I),t.Headers=h,t.Request=_,t.Response=I,t.fetch=C,Object.defineProperty(t,"__esModule",{value:!0})})({})})(i),i.fetch.ponyfill=!0,delete i.fetch.polyfill;var s=n.fetch?n:i;t=s.fetch,t["default"]=s.fetch,t.fetch=s.fetch,t.Headers=s.Headers,t.Request=s.Request,t.Response=s.Response,e.exports=t},4545:function(e,t,r){"use strict";r.d(t,{Y:function(){return n}});r(44114),r(18111),r(22489),r(7588);class n{constructor(){this.listeners={accountsChanged:[],chainChanged:[],connect:[],disconnect:[],pendingTransaction:[],auth_rpcRequest:[],auth_rpcSuccess:[],auth_rpcError:[]}}on(e,t){this.listeners[e].push(t)}removeListener(e,t){this.listeners[e]=this.listeners[e].filter((e=>e!==t))}emit(e,t){this.listeners[e].forEach((e=>e(t)))}}},6147:function(e,t,r){var n=r(42892),i="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";e.exports=n(i)},6521:function(e,t,r){"use strict";function n(e){return"version"in e}r.d(t,{Y:function(){return n}})},6775:function(e,t,r){"use strict";r.d(t,{F:function(){return n.F}});var n=r(80699)},7085:function(e,t,r){"use strict";r.d(t,{g:function(){return p}});r(18111),r(22489),r(61701),r(13579),r(17642),r(58004),r(33853),r(45876),r(32475),r(15024),r(31698);var n=r(80955),i=r(64529),s=r(81653),o=r(65768),a=r(81753),c=r(78134),u=r(37903),l=r(25638),h=r(2843),d=r(3413);const p={getConnectorsByType(e,t,r){const{customWallets:n}=i.H.state,o=s.i.getRecentWallets(),a=d.A.filterOutDuplicateWallets(t),c=d.A.filterOutDuplicateWallets(r),u=e.filter((e=>"MULTI_CHAIN"===e.type)),l=e.filter((e=>"ANNOUNCED"===e.type)),h=e.filter((e=>"INJECTED"===e.type)),p=e.filter((e=>"EXTERNAL"===e.type));return{custom:n,recent:o,external:p,multiChain:u,announced:l,injected:h,recommended:a,featured:c}},showConnector(e){const t=e.info?.rdns,r=Boolean(t)&&o.N.state.excludedWallets.some((e=>Boolean(e.rdns)&&e.rdns===t)),n=Boolean(e.name)&&o.N.state.excludedWallets.some((t=>h.y.isLowerCaseMatch(t.name,e.name)));if("INJECTED"===e.type){const i="Browser Wallet"===e.name;if(i){if(!a.w.isMobile())return!1;if(a.w.isMobile()&&!t&&!c.x.checkInstalled())return!1}if(r||n)return!1}return"ANNOUNCED"!==e.type&&"EXTERNAL"!==e.type||!r&&!n},getIsConnectedWithWC(){const e=Array.from(u.W.state.chains.values()),t=e.some((e=>{const t=l.a.getConnectorId(e.namespace);return t===n.o.CONNECTOR_ID.WALLET_CONNECT}));return t},getConnectorTypeOrder({recommended:e,featured:t,custom:r,recent:n,announced:s,injected:o,multiChain:a,external:c,overriddenConnectors:u=i.H.state.features?.connectorTypeOrder??[]}){const l=p.getIsConnectedWithWC(),h=i.H.state.enableWalletConnect,d=[{type:"walletConnect",isEnabled:h&&!l},{type:"recent",isEnabled:n.length>0},{type:"injected",isEnabled:[...o,...s,...a].length>0},{type:"featured",isEnabled:t.length>0},{type:"custom",isEnabled:r&&r.length>0},{type:"external",isEnabled:c.length>0},{type:"recommended",isEnabled:e.length>0}],f=d.filter((e=>e.isEnabled)),g=new Set(f.map((e=>e.type))),m=u.filter((e=>g.has(e))).map((e=>({type:e,isEnabled:!0}))),y=f.filter((({type:e})=>{const t=m.some((({type:t})=>t===e));return!t}));return Array.from(new Set([...m,...y].map((({type:e})=>e))))}}},8148:function(e,t,r){"use strict";function n(e,{errorInstance:t=new Error("timed out"),timeout:r,signal:n}){return new Promise(((i,s)=>{(async()=>{let o;try{const a=new AbortController;r>0&&(o=setTimeout((()=>{n?a.abort():s(t)}),r)),i(await e({signal:a?.signal||null}))}catch(a){"AbortError"===a?.name&&s(t),s(a)}finally{clearTimeout(o)}})()}))}r.d(t,{w:function(){return n}})},8596:function(e,t,r){"use strict";r.d(t,{C3:function(){return l}});var n=r(63558),i=r(93514),s=r(96030),o=r(33580),a=r(2294),c=r(27382);const u=(0,n.w3)([(0,n.u8)("instruction"),(0,i._l)("amount")]);function l(e,t,r,n,i=[],l=o.x5){const h=(0,a.d)([{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0}],r,i),d=Buffer.alloc(u.span);return u.encode({instruction:c._.Transfer,amount:BigInt(n)},d),new s.TransactionInstruction({keys:h,programId:l,data:d})}},8639:function(e,t,r){"use strict";r.d(t,{eV:function(){return i}});var n=r(73331);function i(e,{dir:t,size:r=32}={}){return"string"===typeof e?s(e,{dir:t,size:r}):o(e,{dir:t,size:r})}function s(e,{dir:t,size:r=32}={}){if(null===r)return e;const i=e.replace("0x","");if(i.length>2*r)throw new n.Fl({size:Math.ceil(i.length/2),targetSize:r,type:"hex"});return`0x${i["right"===t?"padEnd":"padStart"](2*r,"0")}`}function o(e,{dir:t,size:r=32}={}){if(null===r)return e;if(e.length>r)throw new n.Fl({size:e.length,targetSize:r,type:"bytes"});const i=new Uint8Array(r);for(let n=0;n<r;n++){const s="right"===t;i[s?n:r-n-1]=e[s?n:e.length-n-1]}return i}},9047:function(e,t,r){"use strict";r.d(t,{F:function(){return n}});const n="solana:signMessage"},9051:function(e,t,r){"use strict";function n(e,t){return"light"===t?{"--w3m-accent":e?.["--w3m-accent"]||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":e?.["--w3m-accent"]||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}r.d(t,{o:function(){return n}})},9306:function(e,t,r){"use strict";r.d(t,{ev:function(){return C}});var n=r(67166),i=r(86330),s=(r(18111),r(61701),r(81062)),o=r(59383),a=r(75404);
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const c=BigInt(0),u=BigInt(1),l=BigInt(2),h=BigInt(8),d={zip215:!0};function p(e){const t=(0,s.hp)(e);return(0,a.Q5)(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function f(e){const t=p(e),{Fp:r,n:n,prehash:i,hash:f,randomBytes:g,nByteLength:m,h:y}=t,w=l<<BigInt(8*m)-u,b=r.create,v=(0,o.D0)(t.n,t.nBitLength),_=t.uvRatio||((e,t)=>{try{return{isValid:!0,value:r.sqrt(e*r.inv(t))}}catch(n){return{isValid:!1,value:c}}}),E=t.adjustScalarBytes||(e=>e),A=t.domain||((e,t,r)=>{if((0,a.e8)("phflag",r),t.length||r)throw new Error("Contexts/pre-hash are not supported");return e});function I(e,t,r=!1){const n=r?u:c;(0,a.aK)("coordinate "+e,t,n,w)}function S(e){if(!(e instanceof N))throw new Error("ExtendedPoint expected")}const C=(0,a.x)(((e,t)=>{const{ex:n,ey:i,ez:s}=e,o=e.is0();null==t&&(t=o?h:r.inv(s));const a=b(n*t),l=b(i*t),d=b(s*t);if(o)return{x:c,y:u};if(d!==u)throw new Error("invZ was invalid");return{x:a,y:l}})),k=(0,a.x)((e=>{const{a:r,d:n}=t;if(e.is0())throw new Error("bad point: ZERO");const{ex:i,ey:s,ez:o,et:a}=e,c=b(i*i),u=b(s*s),l=b(o*o),h=b(l*l),d=b(c*r),p=b(l*b(d+u)),f=b(h+b(n*b(c*u)));if(p!==f)throw new Error("bad point: equation left != right (1)");const g=b(i*s),m=b(o*a);if(g!==m)throw new Error("bad point: equation left != right (2)");return!0}));class N{constructor(e,t,r,n){I("x",e),I("y",t),I("z",r,!0),I("t",n),this.ex=e,this.ey=t,this.ez=r,this.et=n,Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(e){if(e instanceof N)throw new Error("extended point not allowed");const{x:t,y:r}=e||{};return I("x",t),I("y",r),new N(t,r,u,b(t*r))}static normalizeZ(e){const t=(0,o.pS)(r,e.map((e=>e.ez)));return e.map(((e,r)=>e.toAffine(t[r]))).map(N.fromAffine)}static msm(e,t){return(0,s.Xf)(N,v,e,t)}_setWindowSize(e){R.setWindowSize(this,e)}assertValidity(){k(this)}equals(e){S(e);const{ex:t,ey:r,ez:n}=this,{ex:i,ey:s,ez:o}=e,a=b(t*o),c=b(i*n),u=b(r*o),l=b(s*n);return a===c&&u===l}is0(){return this.equals(N.ZERO)}negate(){return new N(b(-this.ex),this.ey,this.ez,b(-this.et))}double(){const{a:e}=t,{ex:r,ey:n,ez:i}=this,s=b(r*r),o=b(n*n),a=b(l*b(i*i)),c=b(e*s),u=r+n,h=b(b(u*u)-s-o),d=c+o,p=d-a,f=c-o,g=b(h*p),m=b(d*f),y=b(h*f),w=b(p*d);return new N(g,m,w,y)}add(e){S(e);const{a:r,d:n}=t,{ex:i,ey:s,ez:o,et:a}=this,{ex:c,ey:u,ez:l,et:h}=e,d=b(i*c),p=b(s*u),f=b(a*n*h),g=b(o*l),m=b((i+s)*(c+u)-d-p),y=g-f,w=g+f,v=b(p-r*d),_=b(m*y),E=b(w*v),A=b(m*v),I=b(y*w);return new N(_,E,I,A)}subtract(e){return this.add(e.negate())}wNAF(e){return R.wNAFCached(this,e,N.normalizeZ)}multiply(e){const t=e;(0,a.aK)("scalar",t,u,n);const{p:r,f:i}=this.wNAF(t);return N.normalizeZ([r,i])[0]}multiplyUnsafe(e,t=N.ZERO){const r=e;return(0,a.aK)("scalar",r,c,n),r===c?T:this.is0()||r===u?this:R.wNAFCachedUnsafe(this,r,N.normalizeZ,t)}isSmallOrder(){return this.multiplyUnsafe(y).is0()}isTorsionFree(){return R.unsafeLadder(this,n).is0()}toAffine(e){return C(this,e)}clearCofactor(){const{h:e}=t;return e===u?this:this.multiplyUnsafe(e)}static fromHex(e,n=!1){const{d:i,a:s}=t,o=r.BYTES;e=(0,a.qj)("pointHex",e,o),(0,a.e8)("zip215",n);const l=e.slice(),h=e[o-1];l[o-1]=-129&h;const d=(0,a.lX)(l),p=n?w:r.ORDER;(0,a.aK)("pointHex.y",d,c,p);const f=b(d*d),g=b(f-u),m=b(i*f-s);let{isValid:y,value:v}=_(g,m);if(!y)throw new Error("Point.fromHex: invalid y coordinate");const E=(v&u)===u,A=0!==(128&h);if(!n&&v===c&&A)throw new Error("Point.fromHex: x=0 and x_0=1");return A!==E&&(v=b(-v)),N.fromAffine({x:v,y:d})}static fromPrivateKey(e){const{scalar:t}=M(e);return O.multiply(t)}toRawBytes(){const{x:e,y:t}=this.toAffine(),n=(0,a.z)(t,r.BYTES);return n[n.length-1]|=e&u?128:0,n}toHex(){return(0,a.My)(this.toRawBytes())}}N.BASE=new N(t.Gx,t.Gy,u,b(t.Gx*t.Gy)),N.ZERO=new N(c,u,u,c);const{BASE:O,ZERO:T}=N,R=(0,s.hT)(N,8*m);function x(e){return(0,o.zi)(e,n)}function P(e){return x((0,a.lX)(e))}function M(e){const t=r.BYTES;e=(0,a.qj)("private key",e,t);const n=(0,a.qj)("hashed private key",f(e),2*t),i=E(n.slice(0,t)),s=n.slice(t,2*t),o=P(i);return{head:i,prefix:s,scalar:o}}function B(e){const{head:t,prefix:r,scalar:n}=M(e),i=O.multiply(n),s=i.toRawBytes();return{head:t,prefix:r,scalar:n,point:i,pointBytes:s}}function U(e){return B(e).pointBytes}function L(e=Uint8Array.of(),...t){const r=(0,a.Id)(...t);return P(f(A(r,(0,a.qj)("context",e),!!i)))}function D(e,t,s={}){e=(0,a.qj)("message",e),i&&(e=i(e));const{prefix:o,scalar:u,pointBytes:l}=B(t),h=L(s.context,o,e),d=O.multiply(h).toRawBytes(),p=L(s.context,d,l,e),f=x(h+p*u);(0,a.aK)("signature.s",f,c,n);const g=(0,a.Id)(d,(0,a.z)(f,r.BYTES));return(0,a.qj)("result",g,2*r.BYTES)}const W=d;function j(e,t,n,s=W){const{context:o,zip215:c}=s,u=r.BYTES;e=(0,a.qj)("signature",e,2*u),t=(0,a.qj)("message",t),n=(0,a.qj)("publicKey",n,u),void 0!==c&&(0,a.e8)("zip215",c),i&&(t=i(t));const l=(0,a.lX)(e.slice(u,2*u));let h,d,p;try{h=N.fromHex(n,c),d=N.fromHex(e.slice(0,u),c),p=O.multiplyUnsafe(l)}catch(m){return!1}if(!c&&h.isSmallOrder())return!1;const f=L(o,d.toRawBytes(),h.toRawBytes(),t),g=d.add(h.multiplyUnsafe(f));return g.subtract(p).clearCofactor().equals(N.ZERO)}O._setWindowSize(8);const z={getExtendedPublicKey:B,randomPrivateKey:()=>g(r.BYTES),precompute(e=8,t=N.BASE){return t._setWindowSize(e),t.multiply(BigInt(3)),t}};return{CURVE:t,getPublicKey:U,sign:D,verify:j,ExtendedPoint:N,utils:z}}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const g=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),m=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),y=(BigInt(0),BigInt(1)),w=BigInt(2),b=(BigInt(3),BigInt(5)),v=BigInt(8);function _(e){const t=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),s=g,a=e*e%s,c=a*e%s,u=(0,o.zH)(c,w,s)*c%s,l=(0,o.zH)(u,y,s)*e%s,h=(0,o.zH)(l,b,s)*l%s,d=(0,o.zH)(h,t,s)*h%s,p=(0,o.zH)(d,r,s)*d%s,f=(0,o.zH)(p,n,s)*p%s,m=(0,o.zH)(f,i,s)*f%s,v=(0,o.zH)(m,i,s)*f%s,_=(0,o.zH)(v,t,s)*h%s,E=(0,o.zH)(_,w,s)*e%s;return{pow_p_5_8:E,b2:c}}function E(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function A(e,t){const r=g,n=(0,o.zi)(t*t*t,r),i=(0,o.zi)(n*n*t,r),s=_(e*i).pow_p_5_8;let a=(0,o.zi)(e*n*s,r);const c=(0,o.zi)(t*a*a,r),u=a,l=(0,o.zi)(a*m,r),h=c===e,d=c===(0,o.zi)(-e,r),p=c===(0,o.zi)(-e*m,r);return h&&(a=u),(d||p)&&(a=l),(0,o.dQ)(a,r)&&(a=(0,o.zi)(-a,r)),{isValid:h||d,value:a}}const I=(()=>(0,o.D0)(g,void 0,!0))(),S=(()=>({a:I.create(BigInt(-1)),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:I,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:v,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:n.Zf,randomBytes:i.po,adjustScalarBytes:E,uvRatio:A}))(),C=(()=>f(S))()},9516:function(e,t,r){var n=r(25367),i="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";e.exports=n(i)},9574:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromMiliseconds=t.toMiliseconds=void 0;const n=r(78725);function i(e){return e*n.ONE_THOUSAND}function s(e){return Math.floor(e/n.ONE_THOUSAND)}t.toMiliseconds=i,t.fromMiliseconds=s},9848:function(e,t,r){"use strict";r.d(t,{Rn0:function(){return n.Rn},gTy:function(){return n.gT},tWt:function(){return n.tW}});var n=r(88809);r(20166)},10396:function(e,t){"use strict";function r(){return"undefined"===typeof document&&"undefined"!==typeof navigator&&"ReactNative"===navigator.product}function n(){return"undefined"!==typeof process&&"undefined"!==typeof process.versions&&"undefined"!==typeof process.versions.node}function i(){return!r()&&!n()}Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowser=t.isNode=t.isReactNative=void 0,t.isReactNative=r,t.isNode=n,t.isBrowser=i},11274:function(e,t,r){"use strict";function n(e,t){let r=e.toString();const n=r.startsWith("-");n&&(r=r.slice(1)),r=r.padStart(t,"0");let[i,s]=[r.slice(0,r.length-t),r.slice(r.length-t)];return s=s.replace(/(0+)$/,""),`${n?"-":""}${i||"0"}${s?`.${s}`:""}`}r.d(t,{J:function(){return n}})},11734:function(e,t,r){"use strict";r.d(t,{u:function(){return s}});r(18111),r(61701);var n=r(31436);const i=new Map;function s({fn:e,id:t,shouldSplitBatch:r,wait:s=0,sort:o}){const a=async()=>{const t=l();c();const r=t.map((({args:e})=>e));0!==r.length&&e(r).then((e=>{o&&Array.isArray(e)&&e.sort(o);for(let r=0;r<t.length;r++){const{resolve:n}=t[r];n?.([e[r],e])}})).catch((e=>{for(let r=0;r<t.length;r++){const{reject:n}=t[r];n?.(e)}}))},c=()=>i.delete(t),u=()=>l().map((({args:e})=>e)),l=()=>i.get(t)||[],h=e=>i.set(t,[...l(),e]);return{flush:c,async schedule(e){const{promise:t,resolve:i,reject:o}=(0,n.Y)(),c=r?.([...u(),e]);c&&a();const d=l().length>0;return d?(h({args:e,resolve:i,reject:o}),t):(h({args:e,resolve:i,reject:o}),setTimeout(a,s),t)}}}},12607:function(e,t,r){"use strict";r.d(t,{W:function(){return d}});r(18111),r(81148),r(22489),r(7588);var n=r(69983),i=r(1555),s=r(58843),o=r(65642),a=r(37903),c=r(31843),u=r(64529),l=r(14210);const h=(0,n.BX)({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),d={state:h,subscribe(e){return(0,n.B1)(h,(()=>e(h)))},setLastNetworkInView(e){h.lastNetworkInView=e},async fetchTransactions(e,t){if(!e)throw new Error("Transactions can't be fetched without an accountAddress");h.loading=!0;try{const r=await o.T.fetchTransactions({account:e,cursor:h.next,onramp:t,cache:"coinbase"===t?"no-cache":void 0,chainId:a.W.state.activeCaipNetwork?.caipNetworkId}),n=this.filterSpamTransactions(r.data),i=this.filterByConnectedChain(n),s=[...h.transactions,...i];h.loading=!1,"coinbase"===t?h.coinbaseTransactions=this.groupTransactionsByYearAndMonth(h.coinbaseTransactions,r.data):(h.transactions=s,h.transactionsByYear=this.groupTransactionsByYearAndMonth(h.transactionsByYear,i)),h.empty=0===s.length,h.next=r.next?r.next:void 0}catch(r){const t=a.W.state.activeChain;c.E.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:e,projectId:u.H.state.projectId,cursor:h.next,isSmartAccount:s.U.state.preferredAccountTypes?.[t]===i.Vl.ACCOUNT_TYPES.SMART_ACCOUNT}}),l.P.showError("Failed to fetch transactions"),h.loading=!1,h.empty=!0,h.next=void 0}},groupTransactionsByYearAndMonth(e={},t=[]){const r=e;return t.forEach((e=>{const t=new Date(e.metadata.minedAt).getFullYear(),n=new Date(e.metadata.minedAt).getMonth(),i=r[t]??{},s=i[n]??[],o=s.filter((t=>t.id!==e.id));r[t]={...i,[n]:[...o,e].sort(((e,t)=>new Date(t.metadata.minedAt).getTime()-new Date(e.metadata.minedAt).getTime()))}})),r},filterSpamTransactions(e){return e.filter((e=>{const t=e.transfers.every((e=>!0===e.nft_info?.flags.is_spam));return!t}))},filterByConnectedChain(e){const t=a.W.state.activeCaipNetwork?.caipNetworkId,r=e.filter((e=>e.metadata.chain===t));return r},clearCursor(){h.next=void 0},resetTransactions(){h.transactions=[],h.transactionsByYear={},h.lastNetworkInView=void 0,h.loading=!1,h.empty=!1,h.next=void 0}}},12745:function(e,t,r){"use strict";r.d(t,{A:function(){return cC}});var n={};r.r(n),r.d(n,{identity:function(){return va}});var i={};r.r(i),r.d(i,{base2:function(){return _a}});var s={};r.r(s),r.d(s,{base8:function(){return Ea}});var o={};r.r(o),r.d(o,{base10:function(){return Aa}});var a={};r.r(a),r.d(a,{base16:function(){return Ia},base16upper:function(){return Sa}});var c={};r.r(c),r.d(c,{base32:function(){return Ca},base32hex:function(){return Ta},base32hexpad:function(){return xa},base32hexpadupper:function(){return Pa},base32hexupper:function(){return Ra},base32pad:function(){return Na},base32padupper:function(){return Oa},base32upper:function(){return ka},base32z:function(){return Ma}});var u={};r.r(u),r.d(u,{base36:function(){return Ba},base36upper:function(){return Ua}});var l={};r.r(l),r.d(l,{base58btc:function(){return La},base58flickr:function(){return Da}});var h={};r.r(h),r.d(h,{base64:function(){return Wa},base64pad:function(){return ja},base64url:function(){return za},base64urlpad:function(){return Ha}});var d={};r.r(d),r.d(d,{base256emoji:function(){return Ya}});var p={};r.r(p),r.d(p,{sha256:function(){return Sc},sha512:function(){return Cc}});var f={};r.r(f),r.d(f,{identity:function(){return Rc}});var g={};r.r(g),r.d(g,{code:function(){return Pc},decode:function(){return Bc},encode:function(){return Mc},name:function(){return xc}});var m={};r.r(m),r.d(m,{code:function(){return Wc},decode:function(){return zc},encode:function(){return jc},name:function(){return Dc}});r(44114),r(18111),r(22489),r(7588),r(61701),r(17642),r(58004),r(33853),r(45876),r(32475),r(15024),r(31698),r(81148),r(20116),r(18237),r(13579);var y=r(99774),w=r.n(y),b=r(75731);class v{}class _ extends v{constructor(e){super()}}const E=b.FIVE_SECONDS,A={pulse:"heartbeat_pulse"};class I extends _{constructor(e){super(e),this.events=new y.EventEmitter,this.interval=E,this.interval=e?.interval||E}static async init(e){const t=new I(e);return await t.init(),t}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async initialize(){this.intervalRef=setInterval((()=>this.pulse()),(0,b.toMiliseconds)(this.interval))}pulse(){this.events.emit(A.pulse)}}const S=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,C=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,k=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function N(e,t){if(!("__proto__"===e||"constructor"===e&&t&&"object"===typeof t&&"prototype"in t))return t;O(e)}function O(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}function T(e,t={}){if("string"!==typeof e)return e;if('"'===e[0]&&'"'===e[e.length-1]&&-1===e.indexOf("\\"))return e.slice(1,-1);const r=e.trim();if(r.length<=9)switch(r.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!k.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(S.test(e)||C.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,N)}return JSON.parse(e)}catch(n){if(t.strict)throw n;return e}}r(64979);function R(e){return e&&"function"===typeof e.then?e:Promise.resolve(e)}function x(e,...t){try{return R(e(...t))}catch(r){return Promise.reject(r)}}function P(e){const t=typeof e;return null===e||"object"!==t&&"function"!==t}function M(e){const t=Object.getPrototypeOf(e);return!t||t.isPrototypeOf(Object)}function B(e){if(P(e))return String(e);if(M(e)||Array.isArray(e))return JSON.stringify(e);if("function"===typeof e.toJSON)return B(e.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const U="base64:";function L(e){return"string"===typeof e?e:U+j(e)}function D(e){return"string"!==typeof e?e:e.startsWith(U)?W(e.slice(U.length)):e}function W(e){return globalThis.Buffer?Buffer.from(e,"base64"):Uint8Array.from(globalThis.atob(e),(e=>e.codePointAt(0)))}function j(e){return globalThis.Buffer?Buffer.from(e).toString("base64"):globalThis.btoa(String.fromCodePoint(...e))}function z(e){return e&&e.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function H(...e){return z(e.join(":"))}function q(e){return e=z(e),e?e+":":""}function $(e,t){if(void 0===t)return!0;let r=0,n=e.indexOf(":");while(n>-1)r++,n=e.indexOf(":",n+1);return r<=t}function F(e,t){return t?e.startsWith(t)&&"$"!==e[e.length-1]:"$"!==e[e.length-1]}function K(e){return e}const V="memory",Y=K((()=>{const e=new Map;return{name:V,getInstance:()=>e,hasItem(t){return e.has(t)},getItem(t){return e.get(t)??null},getItemRaw(t){return e.get(t)??null},setItem(t,r){e.set(t,r)},setItemRaw(t,r){e.set(t,r)},removeItem(t){e.delete(t)},getKeys(){return[...e.keys()]},clear(){e.clear()},dispose(){e.clear()}}}));function G(e={}){const t={mounts:{"":e.driver||Y()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=e=>{for(const r of t.mountpoints)if(e.startsWith(r))return{base:r,relativeKey:e.slice(r.length),driver:t.mounts[r]};return{base:"",relativeKey:e,driver:t.mounts[""]}},n=(e,r)=>t.mountpoints.filter((t=>t.startsWith(e)||r&&e.startsWith(t))).map((r=>({relativeBase:e.length>r.length?e.slice(r.length):void 0,mountpoint:r,driver:t.mounts[r]}))),i=(e,r)=>{if(t.watching){r=z(r);for(const n of t.watchListeners)n(e,r)}},s=async()=>{if(!t.watching){t.watching=!0;for(const e in t.mounts)t.unwatch[e]=await Z(t.mounts[e],i,e)}},o=async()=>{if(t.watching){for(const e in t.unwatch)await t.unwatch[e]();t.unwatch={},t.watching=!1}},a=(e,t,n)=>{const i=new Map,s=e=>{let t=i.get(e.base);return t||(t={driver:e.driver,base:e.base,items:[]},i.set(e.base,t)),t};for(const o of e){const e="string"===typeof o,n=z(e?o:o.key),i=e?void 0:o.value,a=e||!o.options?t:{...t,...o.options},c=r(n);s(c).items.push({key:n,value:i,relativeKey:c.relativeKey,options:a})}return Promise.all([...i.values()].map((e=>n(e)))).then((e=>e.flat()))},c={hasItem(e,t={}){e=z(e);const{relativeKey:n,driver:i}=r(e);return x(i.hasItem,n,t)},getItem(e,t={}){e=z(e);const{relativeKey:n,driver:i}=r(e);return x(i.getItem,n,t).then((e=>T(e)))},getItems(e,t={}){return a(e,t,(e=>e.driver.getItems?x(e.driver.getItems,e.items.map((e=>({key:e.relativeKey,options:e.options}))),t).then((t=>t.map((t=>({key:H(e.base,t.key),value:T(t.value)}))))):Promise.all(e.items.map((t=>x(e.driver.getItem,t.relativeKey,t.options).then((e=>({key:t.key,value:T(e)}))))))))},getItemRaw(e,t={}){e=z(e);const{relativeKey:n,driver:i}=r(e);return i.getItemRaw?x(i.getItemRaw,n,t):x(i.getItem,n,t).then((e=>D(e)))},async setItem(e,t,n={}){if(void 0===t)return c.removeItem(e);e=z(e);const{relativeKey:s,driver:o}=r(e);o.setItem&&(await x(o.setItem,s,B(t),n),o.watch||i("update",e))},async setItems(e,t){await a(e,t,(async e=>{if(e.driver.setItems)return x(e.driver.setItems,e.items.map((e=>({key:e.relativeKey,value:B(e.value),options:e.options}))),t);e.driver.setItem&&await Promise.all(e.items.map((t=>x(e.driver.setItem,t.relativeKey,B(t.value),t.options))))}))},async setItemRaw(e,t,n={}){if(void 0===t)return c.removeItem(e,n);e=z(e);const{relativeKey:s,driver:o}=r(e);if(o.setItemRaw)await x(o.setItemRaw,s,t,n);else{if(!o.setItem)return;await x(o.setItem,s,L(t),n)}o.watch||i("update",e)},async removeItem(e,t={}){"boolean"===typeof t&&(t={removeMeta:t}),e=z(e);const{relativeKey:n,driver:s}=r(e);s.removeItem&&(await x(s.removeItem,n,t),(t.removeMeta||t.removeMata)&&await x(s.removeItem,n+"$",t),s.watch||i("remove",e))},async getMeta(e,t={}){"boolean"===typeof t&&(t={nativeOnly:t}),e=z(e);const{relativeKey:n,driver:i}=r(e),s=Object.create(null);if(i.getMeta&&Object.assign(s,await x(i.getMeta,n,t)),!t.nativeOnly){const e=await x(i.getItem,n+"$",t).then((e=>T(e)));e&&"object"===typeof e&&("string"===typeof e.atime&&(e.atime=new Date(e.atime)),"string"===typeof e.mtime&&(e.mtime=new Date(e.mtime)),Object.assign(s,e))}return s},setMeta(e,t,r={}){return this.setItem(e+"$",t,r)},removeMeta(e,t={}){return this.removeItem(e+"$",t)},async getKeys(e,t={}){e=q(e);const r=n(e,!0);let i=[];const s=[];let o=!0;for(const n of r){n.driver.flags?.maxDepth||(o=!1);const e=await x(n.driver.getKeys,n.relativeBase,t);for(const t of e){const e=n.mountpoint+z(t);i.some((t=>e.startsWith(t)))||s.push(e)}i=[n.mountpoint,...i.filter((e=>!e.startsWith(n.mountpoint)))]}const a=void 0!==t.maxDepth&&!o;return s.filter((r=>(!a||$(r,t.maxDepth))&&F(r,e)))},async clear(e,t={}){e=q(e),await Promise.all(n(e,!1).map((async e=>{if(e.driver.clear)return x(e.driver.clear,e.relativeBase,t);if(e.driver.removeItem){const r=await e.driver.getKeys(e.relativeBase||"",t);return Promise.all(r.map((r=>e.driver.removeItem(r,t))))}})))},async dispose(){await Promise.all(Object.values(t.mounts).map((e=>J(e))))},async watch(e){return await s(),t.watchListeners.push(e),async()=>{t.watchListeners=t.watchListeners.filter((t=>t!==e)),0===t.watchListeners.length&&await o()}},async unwatch(){t.watchListeners=[],await o()},mount(e,r){if(e=q(e),e&&t.mounts[e])throw new Error(`already mounted at ${e}`);return e&&(t.mountpoints.push(e),t.mountpoints.sort(((e,t)=>t.length-e.length))),t.mounts[e]=r,t.watching&&Promise.resolve(Z(r,i,e)).then((r=>{t.unwatch[e]=r})).catch(console.error),c},async unmount(e,r=!0){e=q(e),e&&t.mounts[e]&&(t.watching&&e in t.unwatch&&(t.unwatch[e]?.(),delete t.unwatch[e]),r&&await J(t.mounts[e]),t.mountpoints=t.mountpoints.filter((t=>t!==e)),delete t.mounts[e])},getMount(e=""){e=z(e)+":";const t=r(e);return{driver:t.driver,base:t.base}},getMounts(e="",t={}){e=z(e);const r=n(e,t.parents);return r.map((e=>({driver:e.driver,base:e.mountpoint})))},keys:(e,t={})=>c.getKeys(e,t),get:(e,t={})=>c.getItem(e,t),set:(e,t,r={})=>c.setItem(e,t,r),has:(e,t={})=>c.hasItem(e,t),del:(e,t={})=>c.removeItem(e,t),remove:(e,t={})=>c.removeItem(e,t)};return c}function Z(e,t,r){return e.watch?e.watch(((e,n)=>t(e,r+n))):()=>{}}async function J(e){"function"===typeof e.dispose&&await x(e.dispose)}function X(e){return new Promise(((t,r)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>r(e.error)}))}function Q(e,t){const r=indexedDB.open(e);r.onupgradeneeded=()=>r.result.createObjectStore(t);const n=X(r);return(e,r)=>n.then((n=>r(n.transaction(t,e).objectStore(t))))}let ee;function te(){return ee||(ee=Q("keyval-store","keyval")),ee}function re(e,t=te()){return t("readonly",(t=>X(t.get(e))))}function ne(e,t,r=te()){return r("readwrite",(r=>(r.put(t,e),X(r.transaction))))}function ie(e,t=te()){return t("readwrite",(t=>(t.delete(e),X(t.transaction))))}function se(e=te()){return e("readwrite",(e=>(e.clear(),X(e.transaction))))}function oe(e,t){return e.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},X(e.transaction)}function ae(e=te()){return e("readonly",(e=>{if(e.getAllKeys)return X(e.getAllKeys());const t=[];return oe(e,(e=>t.push(e.key))).then((()=>t))}))}var ce=r(74087);const ue="idb-keyval";var le=(e={})=>{const t=e.base&&e.base.length>0?`${e.base}:`:"",r=e=>t+e;let n;return e.dbName&&e.storeName&&(n=Q(e.dbName,e.storeName)),{name:ue,options:e,async hasItem(e){return!(typeof await re(r(e),n)>"u")},async getItem(e){return await re(r(e),n)??null},setItem(e,t){return ne(r(e),t,n)},removeItem(e){return ie(r(e),n)},getKeys(){return ae(n)},clear(){return se(n)}}};const he="WALLET_CONNECT_V2_INDEXED_DB",de="keyvaluestorage";class pe{constructor(){this.indexedDb=G({driver:le({dbName:he,storeName:de})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map((e=>[e.key,e.value]))}async getItem(e){const t=await this.indexedDb.getItem(e);if(null!==t)return t}async setItem(e,t){await this.indexedDb.setItem(e,(0,ce.h)(t))}async removeItem(e){await this.indexedDb.removeItem(e)}}var fe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof r.g<"u"?r.g:typeof self<"u"?self:{},ge={exports:{}};function me(e){var t;return[e[0],(0,ce.j)(null!=(t=e[1])?t:"")]}(function(){let e;function t(){}e=t,e.prototype.getItem=function(e){return this.hasOwnProperty(e)?String(this[e]):null},e.prototype.setItem=function(e,t){this[e]=String(t)},e.prototype.removeItem=function(e){delete this[e]},e.prototype.clear=function(){const e=this;Object.keys(e).forEach((function(t){e[t]=void 0,delete e[t]}))},e.prototype.key=function(e){return e=e||0,Object.keys(this)[e]},e.prototype.__defineGetter__("length",(function(){return Object.keys(this).length})),typeof fe<"u"&&fe.localStorage?ge.exports=fe.localStorage:typeof window<"u"&&window.localStorage?ge.exports=window.localStorage:ge.exports=new t})();class ye{constructor(){this.localStorage=ge.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(me)}async getItem(e){const t=this.localStorage.getItem(e);if(null!==t)return(0,ce.j)(t)}async setItem(e,t){this.localStorage.setItem(e,(0,ce.h)(t))}async removeItem(e){this.localStorage.removeItem(e)}}const we="wc_storage_version",be=1,ve=async(e,t,r)=>{const n=we,i=await t.getItem(n);if(i&&i>=be)return void r(t);const s=await e.getKeys();if(!s.length)return void r(t);const o=[];for(;s.length;){const r=s.shift();if(!r)continue;const n=r.toLowerCase();if(n.includes("wc@")||n.includes("walletconnect")||n.includes("wc_")||n.includes("wallet_connect")){const n=await e.getItem(r);await t.setItem(r,n),o.push(r)}}await t.setItem(n,be),r(t),_e(e,o)},_e=async(e,t)=>{t.length&&t.forEach((async t=>{await e.removeItem(t)}))};class Ee{constructor(){this.initialized=!1,this.setInitialized=e=>{this.storage=e,this.initialized=!0};const e=new ye;this.storage=e;try{const t=new pe;ve(e,t,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,t){return await this.initialize(),this.storage.setItem(e,t)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise((e=>{const t=setInterval((()=>{this.initialized&&(clearInterval(t),e())}),20)}))}}var Ae=r(26351),Ie=Object.defineProperty,Se=(e,t,r)=>t in e?Ie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ce=(e,t,r)=>Se(e,"symbol"!=typeof t?t+"":t,r);class ke extends v{constructor(e){super(),this.opts=e,Ce(this,"protocol","wc"),Ce(this,"version",2)}}var Ne=Object.defineProperty,Oe=(e,t,r)=>t in e?Ne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Te=(e,t,r)=>Oe(e,"symbol"!=typeof t?t+"":t,r);class Re extends v{constructor(e,t){super(),this.core=e,this.logger=t,Te(this,"records",new Map)}}class xe{constructor(e,t){this.logger=e,this.core=t}}class Pe extends v{constructor(e,t){super(),this.relayer=e,this.logger=t}}class Me extends v{constructor(e){super()}}class Be{constructor(e,t,r,n){this.core=e,this.logger=t,this.name=r}}Object.defineProperty;class Ue extends v{constructor(e,t){super(),this.relayer=e,this.logger=t}}class Le extends v{constructor(e,t){super(),this.core=e,this.logger=t}}class De{constructor(e,t,r){this.core=e,this.logger=t,this.store=r}}class We{constructor(e,t){this.projectId=e,this.logger=t}}class je{constructor(e,t,r){this.core=e,this.logger=t,this.telemetryEnabled=r}}var ze=Object.defineProperty,He=(e,t,r)=>t in e?ze(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,qe=(e,t,r)=>He(e,"symbol"!=typeof t?t+"":t,r);w();class $e{constructor(e){this.opts=e,qe(this,"protocol","wc"),qe(this,"version",2)}}y.EventEmitter;class Fe{constructor(e){this.client=e}}function Ke(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function Ve(e,...t){if(!Ke(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function Ye(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Ge(e,t){Ve(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const Ze="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,Je=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Xe(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function Qe(e){return"string"==typeof e&&(e=Xe(e)),Ve(e),e}class et{clone(){return this._cloneInto()}}function tt(e){const t=t=>e().update(Qe(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function rt(e=32){if(Ze&&"function"==typeof Ze.getRandomValues)return Ze.getRandomValues(new Uint8Array(e));if(Ze&&"function"==typeof Ze.randomBytes)return Ze.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}function nt(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),c=n?4:0,u=n?0:4;e.setUint32(t+c,o,n),e.setUint32(t+u,a,n)}class it extends et{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Je(this.buffer)}update(e){Ye(this);const{view:t,buffer:r,blockLen:n}=this;e=Qe(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);if(o!==n)r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===n&&(this.process(t,0),this.pos=0);else{const t=Je(e);for(;n<=i-s;s+=n)this.process(t,s)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){Ye(this),Ge(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:n,isLE:i}=this;let{pos:s}=this;t[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>n-s&&(this.process(r,0),s=0);for(let l=s;l<n;l++)t[l]=0;nt(r,n-8,BigInt(8*this.length),i),this.process(r,0);const o=Je(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<c;l++)o.setUint32(4*l,u[l],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:n,finished:i,destroyed:s,pos:o}=this;return e.length=n,e.pos=o,e.finished=i,e.destroyed=s,n%t&&e.buffer.set(r),e}}const st=BigInt(2**32-1),ot=BigInt(32);function at(e,t=!1){return t?{h:Number(e&st),l:Number(e>>ot&st)}:{h:0|Number(e>>ot&st),l:0|Number(e&st)}}function ct(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:o}=at(e[i],t);[r[i],n[i]]=[s,o]}return[r,n]}const ut=(e,t)=>BigInt(e>>>0)<<ot|BigInt(t>>>0),lt=(e,t,r)=>e>>>r,ht=(e,t,r)=>e<<32-r|t>>>r,dt=(e,t,r)=>e>>>r|t<<32-r,pt=(e,t,r)=>e<<32-r|t>>>r,ft=(e,t,r)=>e<<64-r|t>>>r-32,gt=(e,t,r)=>e>>>r-32|t<<64-r,mt=(e,t)=>t,yt=(e,t)=>e,wt=(e,t,r)=>e<<r|t>>>32-r,bt=(e,t,r)=>t<<r|e>>>32-r,vt=(e,t,r)=>t<<r-32|e>>>64-r,_t=(e,t,r)=>e<<r-32|t>>>64-r;function Et(e,t,r,n){const i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:0|i}}const At=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),It=(e,t,r,n)=>t+r+n+(e/2**32|0)|0,St=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),Ct=(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,kt=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0),Nt=(e,t,r,n,i,s)=>t+r+n+i+s+(e/2**32|0)|0,Ot={fromBig:at,split:ct,toBig:ut,shrSH:lt,shrSL:ht,rotrSH:dt,rotrSL:pt,rotrBH:ft,rotrBL:gt,rotr32H:mt,rotr32L:yt,rotlSH:wt,rotlSL:bt,rotlBH:vt,rotlBL:_t,add:Et,add3L:At,add3H:It,add4L:St,add4H:Ct,add5H:Nt,add5L:kt},[Tt,Rt]=(()=>Ot.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))))(),xt=new Uint32Array(80),Pt=new Uint32Array(80);class Mt extends it{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:n,Ch:i,Cl:s,Dh:o,Dl:a,Eh:c,El:u,Fh:l,Fl:h,Gh:d,Gl:p,Hh:f,Hl:g}=this;return[e,t,r,n,i,s,o,a,c,u,l,h,d,p,f,g]}set(e,t,r,n,i,s,o,a,c,u,l,h,d,p,f,g){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|n,this.Ch=0|i,this.Cl=0|s,this.Dh=0|o,this.Dl=0|a,this.Eh=0|c,this.El=0|u,this.Fh=0|l,this.Fl=0|h,this.Gh=0|d,this.Gl=0|p,this.Hh=0|f,this.Hl=0|g}process(e,t){for(let w=0;w<16;w++,t+=4)xt[w]=e.getUint32(t),Pt[w]=e.getUint32(t+=4);for(let w=16;w<80;w++){const e=0|xt[w-15],t=0|Pt[w-15],r=Ot.rotrSH(e,t,1)^Ot.rotrSH(e,t,8)^Ot.shrSH(e,t,7),n=Ot.rotrSL(e,t,1)^Ot.rotrSL(e,t,8)^Ot.shrSL(e,t,7),i=0|xt[w-2],s=0|Pt[w-2],o=Ot.rotrSH(i,s,19)^Ot.rotrBH(i,s,61)^Ot.shrSH(i,s,6),a=Ot.rotrSL(i,s,19)^Ot.rotrBL(i,s,61)^Ot.shrSL(i,s,6),c=Ot.add4L(n,a,Pt[w-7],Pt[w-16]),u=Ot.add4H(c,r,o,xt[w-7],xt[w-16]);xt[w]=0|u,Pt[w]=0|c}let{Ah:r,Al:n,Bh:i,Bl:s,Ch:o,Cl:a,Dh:c,Dl:u,Eh:l,El:h,Fh:d,Fl:p,Gh:f,Gl:g,Hh:m,Hl:y}=this;for(let w=0;w<80;w++){const e=Ot.rotrSH(l,h,14)^Ot.rotrSH(l,h,18)^Ot.rotrBH(l,h,41),t=Ot.rotrSL(l,h,14)^Ot.rotrSL(l,h,18)^Ot.rotrBL(l,h,41),b=l&d^~l&f,v=h&p^~h&g,_=Ot.add5L(y,t,v,Rt[w],Pt[w]),E=Ot.add5H(_,m,e,b,Tt[w],xt[w]),A=0|_,I=Ot.rotrSH(r,n,28)^Ot.rotrBH(r,n,34)^Ot.rotrBH(r,n,39),S=Ot.rotrSL(r,n,28)^Ot.rotrBL(r,n,34)^Ot.rotrBL(r,n,39),C=r&i^r&o^i&o,k=n&s^n&a^s&a;m=0|f,y=0|g,f=0|d,g=0|p,d=0|l,p=0|h,({h:l,l:h}=Ot.add(0|c,0|u,0|E,0|A)),c=0|o,u=0|a,o=0|i,a=0|s,i=0|r,s=0|n;const N=Ot.add3L(A,S,k);r=Ot.add3H(N,E,I,C),n=0|N}({h:r,l:n}=Ot.add(0|this.Ah,0|this.Al,0|r,0|n)),({h:i,l:s}=Ot.add(0|this.Bh,0|this.Bl,0|i,0|s)),({h:o,l:a}=Ot.add(0|this.Ch,0|this.Cl,0|o,0|a)),({h:c,l:u}=Ot.add(0|this.Dh,0|this.Dl,0|c,0|u)),({h:l,l:h}=Ot.add(0|this.Eh,0|this.El,0|l,0|h)),({h:d,l:p}=Ot.add(0|this.Fh,0|this.Fl,0|d,0|p)),({h:f,l:g}=Ot.add(0|this.Gh,0|this.Gl,0|f,0|g)),({h:m,l:y}=Ot.add(0|this.Hh,0|this.Hl,0|m,0|y)),this.set(r,n,i,s,o,a,c,u,l,h,d,p,f,g,m,y)}roundClean(){xt.fill(0),Pt.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Bt=tt((()=>new Mt)),Ut=BigInt(0),Lt=BigInt(1),Dt=BigInt(2);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Wt(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function jt(e){if(!Wt(e))throw new Error("Uint8Array expected")}function zt(e,t){if("boolean"!=typeof t)throw new Error(e+" boolean expected, got "+t)}const Ht=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function qt(e){jt(e);let t="";for(let r=0;r<e.length;r++)t+=Ht[e[r]];return t}function $t(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return""===e?Ut:BigInt("0x"+e)}const Ft={_0:48,_9:57,A:65,F:70,a:97,f:102};function Kt(e){return e>=Ft._0&&e<=Ft._9?e-Ft._0:e>=Ft.A&&e<=Ft.F?e-(Ft.A-10):e>=Ft.a&&e<=Ft.f?e-(Ft.a-10):void 0}function Vt(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let i=0,s=0;i<r;i++,s+=2){const t=Kt(e.charCodeAt(s)),r=Kt(e.charCodeAt(s+1));if(void 0===t||void 0===r){const t=e[s]+e[s+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+s)}n[i]=16*t+r}return n}function Yt(e){return $t(qt(e))}function Gt(e){return jt(e),$t(qt(Uint8Array.from(e).reverse()))}function Zt(e,t){return Vt(e.toString(16).padStart(2*t,"0"))}function Jt(e,t){return Zt(e,t).reverse()}function Xt(e,t,r){let n;if("string"==typeof t)try{n=Vt(t)}catch(E){throw new Error(e+" must be hex string or Uint8Array, cause: "+E)}else{if(!Wt(t))throw new Error(e+" must be hex string or Uint8Array");n=Uint8Array.from(t)}const i=n.length;if("number"==typeof r&&i!==r)throw new Error(e+" of length "+r+" expected, got "+i);return n}function Qt(...e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];jt(r),t+=r.length}const r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){const t=e[n];r.set(t,i),i+=t.length}return r}const er=e=>"bigint"==typeof e&&Ut<=e;function tr(e,t,r){return er(e)&&er(t)&&er(r)&&t<=e&&e<r}function rr(e,t,r,n){if(!tr(t,r,n))throw new Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}function nr(e){let t;for(t=0;e>Ut;e>>=Lt,t+=1);return t}const ir=e=>(Dt<<BigInt(e-1))-Lt,sr={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||Wt(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function or(e,t,r={}){const n=(t,r,n)=>{const i=sr[r];if("function"!=typeof i)throw new Error("invalid validator function");const s=e[t];if((!n||void 0!==s)&&!i(s,e))throw new Error("param "+String(t)+" is invalid. Expected "+r+", got "+s)};for(const[i,s]of Object.entries(t))n(i,s,!1);for(const[i,s]of Object.entries(r))n(i,s,!0);return e}function ar(e){const t=new WeakMap;return(r,...n)=>{const i=t.get(r);if(void 0!==i)return i;const s=e(r,...n);return t.set(r,s),s}}const cr=BigInt(0),ur=BigInt(1),lr=BigInt(2),hr=BigInt(3),dr=BigInt(4),pr=BigInt(5),fr=BigInt(8);function gr(e,t){const r=e%t;return r>=cr?r:t+r}function mr(e,t,r){if(t<cr)throw new Error("invalid exponent, negatives unsupported");if(r<=cr)throw new Error("invalid modulus");if(r===ur)return cr;let n=ur;for(;t>cr;)t&ur&&(n=n*e%r),e=e*e%r,t>>=ur;return n}function yr(e,t,r){let n=e;for(;t-- >cr;)n*=n,n%=r;return n}function wr(e,t){if(e===cr)throw new Error("invert: expected non-zero number");if(t<=cr)throw new Error("invert: expected positive modulus, got "+t);let r=gr(e,t),n=t,i=cr,s=ur;for(;r!==cr;){const e=n/r,t=n%r,o=i-s*e;n=r,r=t,i=s,s=o}if(n!==ur)throw new Error("invert: does not exist");return gr(i,t)}function br(e){const t=(e-ur)/lr;let r,n,i;for(r=e-ur,n=0;r%lr===cr;r/=lr,n++);for(i=lr;i<e&&mr(i,t,e)!==e-ur;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(1===n){const t=(e+ur)/dr;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}const s=(r+ur)/lr;return function(e,o){if(e.pow(o,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let a=n,c=e.pow(e.mul(e.ONE,i),r),u=e.pow(o,s),l=e.pow(o,r);for(;!e.eql(l,e.ONE);){if(e.eql(l,e.ZERO))return e.ZERO;let t=1;for(let n=e.sqr(l);t<a&&!e.eql(n,e.ONE);t++)n=e.sqr(n);const r=e.pow(c,ur<<BigInt(a-t-1));c=e.sqr(r),u=e.mul(u,r),l=e.mul(l,c),a=t}return u}}function vr(e){if(e%dr===hr){const t=(e+ur)/dr;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}if(e%fr===pr){const t=(e-pr)/fr;return function(e,r){const n=e.mul(r,lr),i=e.pow(n,t),s=e.mul(r,i),o=e.mul(e.mul(s,lr),i),a=e.mul(s,e.sub(o,e.ONE));if(!e.eql(e.sqr(a),r))throw new Error("Cannot find square root");return a}}return br(e)}const _r=(e,t)=>(gr(e,t)&ur)===ur,Er=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Ar(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=Er.reduce(((e,t)=>(e[t]="function",e)),t);return or(e,r)}function Ir(e,t,r){if(r<cr)throw new Error("invalid exponent, negatives unsupported");if(r===cr)return e.ONE;if(r===ur)return t;let n=e.ONE,i=t;for(;r>cr;)r&ur&&(n=e.mul(n,i)),i=e.sqr(i),r>>=ur;return n}function Sr(e,t){const r=new Array(t.length),n=t.reduce(((t,n,i)=>e.is0(n)?t:(r[i]=t,e.mul(t,n))),e.ONE),i=e.inv(n);return t.reduceRight(((t,n,i)=>e.is0(n)?t:(r[i]=e.mul(t,r[i]),e.mul(t,n))),i),r}function Cr(e,t){const r=void 0!==t?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function kr(e,t,r=!1,n={}){if(e<=cr)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:i,nByteLength:s}=Cr(e,t);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:e,isLE:r,BITS:i,BYTES:s,MASK:ir(i),ZERO:cr,ONE:ur,create:t=>gr(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("invalid field element: expected bigint, got "+typeof t);return cr<=t&&t<e},is0:e=>e===cr,isOdd:e=>(e&ur)===ur,neg:t=>gr(-t,e),eql:(e,t)=>e===t,sqr:t=>gr(t*t,e),add:(t,r)=>gr(t+r,e),sub:(t,r)=>gr(t-r,e),mul:(t,r)=>gr(t*r,e),pow:(e,t)=>Ir(a,e,t),div:(t,r)=>gr(t*wr(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>wr(t,e),sqrt:n.sqrt||(t=>(o||(o=vr(e)),o(a,t))),invertBatch:e=>Sr(a,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?Jt(e,s):Zt(e,s),fromBytes:e=>{if(e.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+e.length);return r?Gt(e):Yt(e)}});return Object.freeze(a)}const Nr=BigInt(0),Or=BigInt(1);function Tr(e,t){const r=t.negate();return e?r:t}function Rr(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function xr(e,t){Rr(e,t);const r=Math.ceil(t/e)+1,n=2**(e-1);return{windows:r,windowSize:n}}function Pr(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach(((e,r)=>{if(!(e instanceof t))throw new Error("invalid point at index "+r)}))}function Mr(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach(((e,r)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+r)}))}const Br=new WeakMap,Ur=new WeakMap;function Lr(e){return Ur.get(e)||1}function Dr(e,t){return{constTimeNegate:Tr,hasPrecomputes(e){return 1!==Lr(e)},unsafeLadder(t,r,n=e.ZERO){let i=t;for(;r>Nr;)r&Or&&(n=n.add(i)),i=i.double(),r>>=Or;return n},precomputeWindow(e,r){const{windows:n,windowSize:i}=xr(r,t),s=[];let o=e,a=o;for(let t=0;t<n;t++){a=o,s.push(a);for(let e=1;e<i;e++)a=a.add(o),s.push(a);o=a.double()}return s},wNAF(r,n,i){const{windows:s,windowSize:o}=xr(r,t);let a=e.ZERO,c=e.BASE;const u=BigInt(2**r-1),l=2**r,h=BigInt(r);for(let e=0;e<s;e++){const t=e*o;let r=Number(i&u);i>>=h,r>o&&(r-=l,i+=Or);const s=t,d=t+Math.abs(r)-1,p=e%2!==0,f=r<0;0===r?c=c.add(Tr(p,n[s])):a=a.add(Tr(f,n[d]))}return{p:a,f:c}},wNAFUnsafe(r,n,i,s=e.ZERO){const{windows:o,windowSize:a}=xr(r,t),c=BigInt(2**r-1),u=2**r,l=BigInt(r);for(let e=0;e<o;e++){const t=e*a;if(i===Nr)break;let r=Number(i&c);if(i>>=l,r>a&&(r-=u,i+=Or),0===r)continue;let o=n[t+Math.abs(r)-1];r<0&&(o=o.negate()),s=s.add(o)}return s},getPrecomputes(e,t,r){let n=Br.get(t);return n||(n=this.precomputeWindow(t,e),1!==e&&Br.set(t,r(n))),n},wNAFCached(e,t,r){const n=Lr(e);return this.wNAF(n,this.getPrecomputes(n,e,r),t)},wNAFCachedUnsafe(e,t,r,n){const i=Lr(e);return 1===i?this.unsafeLadder(e,t,n):this.wNAFUnsafe(i,this.getPrecomputes(i,e,r),t,n)},setWindowSize(e,r){Rr(r,t),Ur.set(e,r),Br.delete(e)}}}function Wr(e,t,r,n){if(Pr(r,e),Mr(n,t),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const i=e.ZERO,s=nr(BigInt(r.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,c=new Array(a+1).fill(i),u=Math.floor((t.BITS-1)/o)*o;let l=i;for(let h=u;h>=0;h-=o){c.fill(i);for(let t=0;t<n.length;t++){const e=n[t],i=Number(e>>BigInt(h)&BigInt(a));c[i]=c[i].add(r[t])}let e=i;for(let t=c.length-1,r=i;t>0;t--)r=r.add(c[t]),e=e.add(r);if(l=l.add(e),0!==h)for(let t=0;t<o;t++)l=l.double()}return l}function jr(e){return Ar(e.Fp),or(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Cr(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}const zr=BigInt(0),Hr=BigInt(1),qr=BigInt(2),$r=BigInt(8),Fr={zip215:!0};function Kr(e){const t=jr(e);return or(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function Vr(e){const t=Kr(e),{Fp:r,n:n,prehash:i,hash:s,randomBytes:o,nByteLength:a,h:c}=t,u=qr<<BigInt(8*a)-Hr,l=r.create,h=kr(t.n,t.nBitLength),d=t.uvRatio||((e,t)=>{try{return{isValid:!0,value:r.sqrt(e*r.inv(t))}}catch{return{isValid:!1,value:zr}}}),p=t.adjustScalarBytes||(e=>e),f=t.domain||((e,t,r)=>{if(zt("phflag",r),t.length||r)throw new Error("Contexts/pre-hash are not supported");return e});function g(e,t){rr("coordinate "+e,t,zr,u)}function m(e){if(!(e instanceof b))throw new Error("ExtendedPoint expected")}const y=ar(((e,t)=>{const{ex:n,ey:i,ez:s}=e,o=e.is0();null==t&&(t=o?$r:r.inv(s));const a=l(n*t),c=l(i*t),u=l(s*t);if(o)return{x:zr,y:Hr};if(u!==Hr)throw new Error("invZ was invalid");return{x:a,y:c}})),w=ar((e=>{const{a:r,d:n}=t;if(e.is0())throw new Error("bad point: ZERO");const{ex:i,ey:s,ez:o,et:a}=e,c=l(i*i),u=l(s*s),h=l(o*o),d=l(h*h),p=l(c*r),f=l(h*l(p+u)),g=l(d+l(n*l(c*u)));if(f!==g)throw new Error("bad point: equation left != right (1)");const m=l(i*s),y=l(o*a);if(m!==y)throw new Error("bad point: equation left != right (2)");return!0}));class b{constructor(e,t,r,n){this.ex=e,this.ey=t,this.ez=r,this.et=n,g("x",e),g("y",t),g("z",r),g("t",n),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(e){if(e instanceof b)throw new Error("extended point not allowed");const{x:t,y:r}=e||{};return g("x",t),g("y",r),new b(t,r,Hr,l(t*r))}static normalizeZ(e){const t=r.invertBatch(e.map((e=>e.ez)));return e.map(((e,r)=>e.toAffine(t[r]))).map(b.fromAffine)}static msm(e,t){return Wr(b,h,e,t)}_setWindowSize(e){E.setWindowSize(this,e)}assertValidity(){w(this)}equals(e){m(e);const{ex:t,ey:r,ez:n}=this,{ex:i,ey:s,ez:o}=e,a=l(t*o),c=l(i*n),u=l(r*o),h=l(s*n);return a===c&&u===h}is0(){return this.equals(b.ZERO)}negate(){return new b(l(-this.ex),this.ey,this.ez,l(-this.et))}double(){const{a:e}=t,{ex:r,ey:n,ez:i}=this,s=l(r*r),o=l(n*n),a=l(qr*l(i*i)),c=l(e*s),u=r+n,h=l(l(u*u)-s-o),d=c+o,p=d-a,f=c-o,g=l(h*p),m=l(d*f),y=l(h*f),w=l(p*d);return new b(g,m,w,y)}add(e){m(e);const{a:r,d:n}=t,{ex:i,ey:s,ez:o,et:a}=this,{ex:c,ey:u,ez:h,et:d}=e;if(r===BigInt(-1)){const e=l((s-i)*(u+c)),t=l((s+i)*(u-c)),r=l(t-e);if(r===zr)return this.double();const n=l(o*qr*d),p=l(a*qr*h),f=p+n,g=t+e,m=p-n,y=l(f*r),w=l(g*m),v=l(f*m),_=l(r*g);return new b(y,w,_,v)}const p=l(i*c),f=l(s*u),g=l(a*n*d),y=l(o*h),w=l((i+s)*(c+u)-p-f),v=y-g,_=y+g,E=l(f-r*p),A=l(w*v),I=l(_*E),S=l(w*E),C=l(v*_);return new b(A,I,C,S)}subtract(e){return this.add(e.negate())}wNAF(e){return E.wNAFCached(this,e,b.normalizeZ)}multiply(e){const t=e;rr("scalar",t,Hr,n);const{p:r,f:i}=this.wNAF(t);return b.normalizeZ([r,i])[0]}multiplyUnsafe(e,t=b.ZERO){const r=e;return rr("scalar",r,zr,n),r===zr?_:this.is0()||r===Hr?this:E.wNAFCachedUnsafe(this,r,b.normalizeZ,t)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return E.unsafeLadder(this,n).is0()}toAffine(e){return y(this,e)}clearCofactor(){const{h:e}=t;return e===Hr?this:this.multiplyUnsafe(e)}static fromHex(e,n=!1){const{d:i,a:s}=t,o=r.BYTES;e=Xt("pointHex",e,o),zt("zip215",n);const a=e.slice(),c=e[o-1];a[o-1]=-129&c;const h=Gt(a),p=n?u:r.ORDER;rr("pointHex.y",h,zr,p);const f=l(h*h),g=l(f-Hr),m=l(i*f-s);let{isValid:y,value:w}=d(g,m);if(!y)throw new Error("Point.fromHex: invalid y coordinate");const v=(w&Hr)===Hr,_=0!==(128&c);if(!n&&w===zr&&_)throw new Error("Point.fromHex: x=0 and x_0=1");return _!==v&&(w=l(-w)),b.fromAffine({x:w,y:h})}static fromPrivateKey(e){return S(e).point}toRawBytes(){const{x:e,y:t}=this.toAffine(),n=Jt(t,r.BYTES);return n[n.length-1]|=e&Hr?128:0,n}toHex(){return qt(this.toRawBytes())}}b.BASE=new b(t.Gx,t.Gy,Hr,l(t.Gx*t.Gy)),b.ZERO=new b(zr,Hr,Hr,zr);const{BASE:v,ZERO:_}=b,E=Dr(b,8*a);function A(e){return gr(e,n)}function I(e){return A(Gt(e))}function S(e){const t=r.BYTES;e=Xt("private key",e,t);const n=Xt("hashed private key",s(e),2*t),i=p(n.slice(0,t)),o=n.slice(t,2*t),a=I(i),c=v.multiply(a),u=c.toRawBytes();return{head:i,prefix:o,scalar:a,point:c,pointBytes:u}}function C(e){return S(e).pointBytes}function k(e=new Uint8Array,...t){const r=Qt(...t);return I(s(f(r,Xt("context",e),!!i)))}function N(e,t,s={}){e=Xt("message",e),i&&(e=i(e));const{prefix:o,scalar:a,pointBytes:c}=S(t),u=k(s.context,o,e),l=v.multiply(u).toRawBytes(),h=k(s.context,l,c,e),d=A(u+h*a);rr("signature.s",d,zr,n);const p=Qt(l,Jt(d,r.BYTES));return Xt("result",p,2*r.BYTES)}const O=Fr;function T(e,t,n,s=O){const{context:o,zip215:a}=s,c=r.BYTES;e=Xt("signature",e,2*c),t=Xt("message",t),n=Xt("publicKey",n,c),void 0!==a&&zt("zip215",a),i&&(t=i(t));const u=Gt(e.slice(c,2*c));let l,h,d;try{l=b.fromHex(n,a),h=b.fromHex(e.slice(0,c),a),d=v.multiplyUnsafe(u)}catch{return!1}if(!a&&l.isSmallOrder())return!1;const p=k(o,h.toRawBytes(),l.toRawBytes(),t);return h.add(l.multiplyUnsafe(p)).subtract(d).clearCofactor().equals(b.ZERO)}return v._setWindowSize(8),{CURVE:t,getPublicKey:C,sign:N,verify:T,ExtendedPoint:b,utils:{getExtendedPublicKey:S,randomPrivateKey:()=>o(r.BYTES),precompute(e=8,t=b.BASE){return t._setWindowSize(e),t.multiply(BigInt(3)),t}}}}BigInt(0),BigInt(1);const Yr=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Gr=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const Zr=BigInt(1),Jr=BigInt(2);BigInt(3);const Xr=BigInt(5),Qr=BigInt(8);function en(e){const t=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),s=Yr,o=e*e%s*e%s,a=yr(o,Jr,s)*o%s,c=yr(a,Zr,s)*e%s,u=yr(c,Xr,s)*c%s,l=yr(u,t,s)*u%s,h=yr(l,r,s)*l%s,d=yr(h,n,s)*h%s,p=yr(d,i,s)*d%s,f=yr(p,i,s)*d%s,g=yr(f,t,s)*u%s;return{pow_p_5_8:yr(g,Jr,s)*e%s,b2:o}}function tn(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function rn(e,t){const r=Yr,n=gr(t*t*t,r),i=gr(n*n*t,r),s=en(e*i).pow_p_5_8;let o=gr(e*n*s,r);const a=gr(t*o*o,r),c=o,u=gr(o*Gr,r),l=a===e,h=a===gr(-e,r),d=a===gr(-e*Gr,r);return l&&(o=c),(h||d)&&(o=u),_r(o,r)&&(o=gr(-o,r)),{isValid:l||h,value:o}}const nn=(()=>kr(Yr,void 0,!0))(),sn=(()=>({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:nn,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Qr,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Bt,randomBytes:rt,adjustScalarBytes:tn,uvRatio:rn}))(),on=(()=>Vr(sn))(),an="EdDSA",cn="JWT",un=".",ln="base64url",hn="utf8",dn="utf8",pn=":",fn="did",gn="key",mn="base58btc",yn="z",wn="K36",bn=32;function vn(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function _n(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?vn(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function En(e,t){t||(t=e.reduce(((e,t)=>e+t.length),0));const r=_n(t);let n=0;for(const i of e)r.set(i,n),n+=i.length;return vn(r)}function An(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(255!==r[o])throw new TypeError(s+" is ambiguous");r[o]=i}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,s=t.length;i!==s&&0===t[i];)i++,r++;for(var o=(s-i)*l+1>>>0,u=new Uint8Array(o);i!==s;){for(var h=t[i],d=0,p=o-1;(0!==h||d<n)&&-1!==p;p--,d++)h+=256*u[p]>>>0,u[p]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");n=d,i++}for(var f=o-n;f!==o&&0===u[f];)f++;for(var g=c.repeat(r);f<o;++f)g+=e.charAt(u[f]);return g}function d(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,i=0;e[t]===c;)n++,t++;for(var s=(e.length-t)*u+1>>>0,o=new Uint8Array(s);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var h=0,d=s-1;(0!==l||h<i)&&-1!==d;d--,h++)l+=a*o[d]>>>0,o[d]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=h,t++}if(" "!==e[t]){for(var p=s-i;p!==s&&0===o[p];)p++;for(var f=new Uint8Array(n+(s-p)),g=n;p!==s;)f[g++]=o[p++];return f}}}function p(e){var r=d(e);if(r)return r;throw new Error(`Non-${t} character`)}return{encode:h,decodeUnsafe:d,decode:p}}var In=An,Sn=In;const Cn=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},kn=e=>(new TextEncoder).encode(e),Nn=e=>(new TextDecoder).decode(e);class On{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Tn{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return xn(this,e)}}class Rn{constructor(e){this.decoders=e}or(e){return xn(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const xn=(e,t)=>new Rn({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class Pn{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new On(e,t,r),this.decoder=new Tn(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Mn=({name:e,prefix:t,encode:r,decode:n})=>new Pn(e,t,r,n),Bn=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:i}=Sn(r,t);return Mn({prefix:e,name:t,encode:n,decode:e=>Cn(i(e))})},Un=(e,t,r,n)=>{const i={};for(let l=0;l<t.length;++l)i[t[l]]=l;let s=e.length;for(;"="===e[s-1];)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,u=0;for(let l=0;l<s;++l){const t=i[e[l]];if(void 0===t)throw new SyntaxError(`Non-${n} character`);c=c<<r|t,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Ln=(e,t,r)=>{const n="="===t[t.length-1],i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],o+=8;o>r;)o-=r,s+=t[i&a>>o];if(o&&(s+=t[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},Dn=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>Mn({prefix:t,name:e,encode(e){return Ln(e,n,r)},decode(t){return Un(t,n,r,e)}}),Wn=Mn({prefix:"\0",name:"identity",encode:e=>Nn(e),decode:e=>kn(e)});var jn=Object.freeze({__proto__:null,identity:Wn});const zn=Dn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Hn=Object.freeze({__proto__:null,base2:zn});const qn=Dn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var $n=Object.freeze({__proto__:null,base8:qn});const Fn=Bn({prefix:"9",name:"base10",alphabet:"0123456789"});var Kn=Object.freeze({__proto__:null,base10:Fn});const Vn=Dn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Yn=Dn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Gn=Object.freeze({__proto__:null,base16:Vn,base16upper:Yn});const Zn=Dn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Jn=Dn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Xn=Dn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Qn=Dn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),ei=Dn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),ti=Dn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),ri=Dn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),ni=Dn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),ii=Dn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var si=Object.freeze({__proto__:null,base32:Zn,base32upper:Jn,base32pad:Xn,base32padupper:Qn,base32hex:ei,base32hexupper:ti,base32hexpad:ri,base32hexpadupper:ni,base32z:ii});const oi=Bn({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),ai=Bn({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var ci=Object.freeze({__proto__:null,base36:oi,base36upper:ai});const ui=Bn({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),li=Bn({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var hi=Object.freeze({__proto__:null,base58btc:ui,base58flickr:li});const di=Dn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),pi=Dn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),fi=Dn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),gi=Dn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var mi=Object.freeze({__proto__:null,base64:di,base64pad:pi,base64url:fi,base64urlpad:gi});const yi=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),wi=yi.reduce(((e,t,r)=>(e[r]=t,e)),[]),bi=yi.reduce(((e,t,r)=>(e[t.codePointAt(0)]=r,e)),[]);function vi(e){return e.reduce(((e,t)=>(e+=wi[t],e)),"")}function _i(e){const t=[];for(const r of e){const e=bi[r.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}const Ei=Mn({prefix:"🚀",name:"base256emoji",encode:vi,decode:_i});var Ai=Object.freeze({__proto__:null,base256emoji:Ei}),Ii=Oi,Si=128,Ci=127,ki=~Ci,Ni=Math.pow(2,31);function Oi(e,t,r){t=t||[],r=r||0;for(var n=r;e>=Ni;)t[r++]=255&e|Si,e/=128;for(;e&ki;)t[r++]=255&e|Si,e>>>=7;return t[r]=0|e,Oi.bytes=r-n+1,t}var Ti=Pi,Ri=128,xi=127;function Pi(e,t){var r,n=0,i=(t=t||0,0),s=t,o=e.length;do{if(s>=o)throw Pi.bytes=0,new RangeError("Could not decode varint");r=e[s++],n+=i<28?(r&xi)<<i:(r&xi)*Math.pow(2,i),i+=7}while(r>=Ri);return Pi.bytes=s-t,n}var Mi=Math.pow(2,7),Bi=Math.pow(2,14),Ui=Math.pow(2,21),Li=Math.pow(2,28),Di=Math.pow(2,35),Wi=Math.pow(2,42),ji=Math.pow(2,49),zi=Math.pow(2,56),Hi=Math.pow(2,63),qi=function(e){return e<Mi?1:e<Bi?2:e<Ui?3:e<Li?4:e<Di?5:e<Wi?6:e<ji?7:e<zi?8:e<Hi?9:10},$i={encode:Ii,decode:Ti,encodingLength:qi},Fi=$i;const Ki=(e,t,r=0)=>(Fi.encode(e,t,r),t),Vi=e=>Fi.encodingLength(e),Yi=(e,t)=>{const r=t.byteLength,n=Vi(e),i=n+Vi(r),s=new Uint8Array(i+r);return Ki(e,s,0),Ki(r,s,n),s.set(t,i),new Gi(e,r,t,s)};class Gi{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}const Zi=({name:e,code:t,encode:r})=>new Ji(e,t,r);class Ji{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?Yi(this.code,t):t.then((e=>Yi(this.code,e)))}throw Error("Unknown type, must be binary type")}}const Xi=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),Qi=Zi({name:"sha2-256",code:18,encode:Xi("SHA-256")}),es=Zi({name:"sha2-512",code:19,encode:Xi("SHA-512")});Object.freeze({__proto__:null,sha256:Qi,sha512:es});const ts=0,rs="identity",ns=Cn,is=e=>Yi(ts,ns(e)),ss={code:ts,name:rs,encode:ns,digest:is};Object.freeze({__proto__:null,identity:ss});new TextEncoder,new TextDecoder;const os={...jn,...Hn,...$n,...Kn,...Gn,...si,...ci,...hi,...mi,...Ai};function as(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const cs=as("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),us=as("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(e=>{e=e.substring(1);const t=_n(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),ls={utf8:cs,"utf-8":cs,hex:os.base16,latin1:us,ascii:us,binary:us,...os};function hs(e,t="utf8"){const r=ls[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}function ds(e,t="utf8"){const r=ls[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode(`${r.prefix}${e}`):vn(globalThis.Buffer.from(e,"utf-8"))}function ps(e){return(0,ce.j)(hs(ds(e,ln),hn))}function fs(e){return hs(ds((0,ce.h)(e),hn),ln)}function gs(e){const t=ds(wn,mn),r=yn+hs(En([t,e]),mn);return[fn,gn,r].join(pn)}function ms(e){return hs(e,ln)}function ys(e){return ds(e,ln)}function ws(e){return ds([fs(e.header),fs(e.payload)].join(un),dn)}function bs(e){return[fs(e.header),fs(e.payload),ms(e.signature)].join(un)}function vs(e){const t=e.split(un),r=ps(t[0]),n=ps(t[1]),i=ys(t[2]),s=ds(t.slice(0,2).join(un),dn);return{header:r,payload:n,signature:i,data:s}}function _s(e=rt(bn)){const t=on.getPublicKey(e);return{secretKey:En([e,t]),publicKey:t}}async function Es(e,t,r,n,i=(0,b.fromMiliseconds)(Date.now())){const s={alg:an,typ:cn},o=gs(n.publicKey),a=i+r,c={iss:o,sub:e,aud:t,iat:i,exp:a},u=ws({header:s,payload:c}),l=on.sign(u,n.secretKey.slice(0,32));return bs({header:s,payload:c,signature:l})}var As=function(e,t,r){if(r||2===arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},Is=function(){function e(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"}return e}(),Ss=function(){function e(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return e}(),Cs=function(){function e(e,t,r,n){this.name=e,this.version=t,this.os=r,this.bot=n,this.type="bot-device"}return e}(),ks=function(){function e(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return e}(),Ns=function(){function e(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return e}(),Os=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Ts=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Rs=3,xs=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Os]],Ps=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Ms(e){return e?Us(e):"undefined"===typeof document&&"undefined"!==typeof navigator&&"ReactNative"===navigator.product?new Ns:"undefined"!==typeof navigator?Us(navigator.userAgent):Ds()}function Bs(e){return""!==e&&xs.reduce((function(t,r){var n=r[0],i=r[1];if(t)return t;var s=i.exec(e);return!!s&&[n,s]}),!1)}function Us(e){var t=Bs(e);if(!t)return null;var r=t[0],n=t[1];if("searchbot"===r)return new ks;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<Rs&&(i=As(As([],i,!0),Ws(Rs-i.length),!0)):i=[];var s=i.join("."),o=Ls(e),a=Ts.exec(e);return a&&a[1]?new Cs(r,s,o,a[1]):new Is(r,s,o)}function Ls(e){for(var t=0,r=Ps.length;t<r;t++){var n=Ps[t],i=n[0],s=n[1],o=s.exec(e);if(o)return i}return null}function Ds(){var e="undefined"!==typeof process&&process.version;return e?new Ss(process.version.slice(1)):null}function Ws(e){for(var t=[],r=0;r<e;r++)t.push("0");return t}var js=r(59515),zs=r(40206);const Hs="2.23.2";let qs={getDocsUrl:({docsBaseUrl:e,docsPath:t="",docsSlug:r})=>t?`${e??"https://viem.sh"}${t}${r?`#${r}`:""}`:void 0,version:`viem@${Hs}`};class $s extends Error{constructor(e,t={}){const r=(()=>t.cause instanceof $s?t.cause.details:t.cause?.message?t.cause.message:t.details)(),n=(()=>t.cause instanceof $s&&t.cause.docsPath||t.docsPath)(),i=qs.getDocsUrl?.({...t,docsPath:n}),s=[e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...qs.version?[`Version: ${qs.version}`]:[]].join("\n");super(s,t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=n,this.metaMessages=t.metaMessages,this.name=t.name??this.name,this.shortMessage=e,this.version=Hs}walk(e){return Fs(this,e)}}function Fs(e,t){return t?.(e)?e:e&&"object"===typeof e&&"cause"in e&&void 0!==e.cause?Fs(e.cause,t):t?null:e}function Ks(e,{strict:t=!0}={}){return!!e&&("string"===typeof e&&(t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x")))}class Vs extends $s{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`,{name:"SizeExceedsPaddingSizeError"})}}function Ys(e,{dir:t,size:r=32}={}){return"string"===typeof e?Gs(e,{dir:t,size:r}):Zs(e,{dir:t,size:r})}function Gs(e,{dir:t,size:r=32}={}){if(null===r)return e;const n=e.replace("0x","");if(n.length>2*r)throw new Vs({size:Math.ceil(n.length/2),targetSize:r,type:"hex"});return`0x${n["right"===t?"padEnd":"padStart"](2*r,"0")}`}function Zs(e,{dir:t,size:r=32}={}){if(null===r)return e;if(e.length>r)throw new Vs({size:e.length,targetSize:r,type:"bytes"});const n=new Uint8Array(r);for(let i=0;i<r;i++){const s="right"===t;n[s?i:r-i-1]=e[s?i:e.length-i-1]}return n}class Js extends $s{constructor({max:e,min:t,signed:r,size:n,value:i}){super(`Number "${i}" is not in safe ${n?`${8*n}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`,{name:"IntegerOutOfRangeError"})}}class Xs extends $s{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function Qs(e){return Ks(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}function eo(e,{size:t}){if(Qs(e)>t)throw new Xs({givenSize:Qs(e),maxSize:t})}function to(e,t={}){const{signed:r}=t;t.size&&eo(e,{size:t.size});const n=BigInt(e);if(!r)return n;const i=(e.length-2)/2,s=(1n<<8n*BigInt(i)-1n)-1n;return n<=s?n:n-BigInt(`0x${"f".padStart(2*i,"f")}`)-1n}function ro(e,t={}){return Number(to(e,t))}const no=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function io(e,t={}){return"number"===typeof e||"bigint"===typeof e?ao(e,t):"string"===typeof e?uo(e,t):"boolean"===typeof e?so(e,t):oo(e,t)}function so(e,t={}){const r=`0x${Number(e)}`;return"number"===typeof t.size?(eo(r,{size:t.size}),Ys(r,{size:t.size})):r}function oo(e,t={}){let r="";for(let i=0;i<e.length;i++)r+=no[e[i]];const n=`0x${r}`;return"number"===typeof t.size?(eo(n,{size:t.size}),Ys(n,{dir:"right",size:t.size})):n}function ao(e,t={}){const{signed:r,size:n}=t,i=BigInt(e);let s;n?s=r?(1n<<8n*BigInt(n)-1n)-1n:2n**(8n*BigInt(n))-1n:"number"===typeof e&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o="bigint"===typeof s&&r?-s-1n:0;if(s&&i>s||i<o){const t="bigint"===typeof e?"n":"";throw new Js({max:s?`${s}${t}`:void 0,min:`${o}${t}`,signed:r,size:n,value:`${e}${t}`})}const a=`0x${(r&&i<0?(1n<<BigInt(8*n))+BigInt(i):i).toString(16)}`;return n?Ys(a,{size:n}):a}const co=new TextEncoder;function uo(e,t={}){const r=co.encode(e);return oo(r,t)}const lo=new TextEncoder;function ho(e,t={}){return"number"===typeof e||"bigint"===typeof e?yo(e,t):"boolean"===typeof e?po(e,t):Ks(e)?mo(e,t):wo(e,t)}function po(e,t={}){const r=new Uint8Array(1);return r[0]=Number(e),"number"===typeof t.size?(eo(r,{size:t.size}),Ys(r,{size:t.size})):r}const fo={zero:48,nine:57,A:65,F:70,a:97,f:102};function go(e){return e>=fo.zero&&e<=fo.nine?e-fo.zero:e>=fo.A&&e<=fo.F?e-(fo.A-10):e>=fo.a&&e<=fo.f?e-(fo.a-10):void 0}function mo(e,t={}){let r=e;t.size&&(eo(r,{size:t.size}),r=Ys(r,{dir:"right",size:t.size}));let n=r.slice(2);n.length%2&&(n=`0${n}`);const i=n.length/2,s=new Uint8Array(i);for(let o=0,a=0;o<i;o++){const e=go(n.charCodeAt(a++)),t=go(n.charCodeAt(a++));if(void 0===e||void 0===t)throw new $s(`Invalid byte sequence ("${n[a-2]}${n[a-1]}" in "${n}").`);s[o]=16*e+t}return s}function yo(e,t){const r=ao(e,t);return mo(r)}function wo(e,t={}){const r=lo.encode(e);return"number"===typeof t.size?(eo(r,{size:t.size}),Ys(r,{dir:"right",size:t.size})):r}var bo=r(34732);const vo=BigInt(2**32-1),_o=BigInt(32);function Eo(e,t=!1){return t?{h:Number(e&vo),l:Number(e>>_o&vo)}:{h:0|Number(e>>_o&vo),l:0|Number(e&vo)}}function Ao(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:o}=Eo(e[i],t);[r[i],n[i]]=[s,o]}return[r,n]}const Io=(e,t,r)=>e<<r|t>>>32-r,So=(e,t,r)=>t<<r|e>>>32-r,Co=(e,t,r)=>t<<r-32|e>>>64-r,ko=(e,t,r)=>e<<r-32|t>>>64-r;var No=r(35065);const Oo=[],To=[],Ro=[],xo=BigInt(0),Po=BigInt(1),Mo=BigInt(2),Bo=BigInt(7),Uo=BigInt(256),Lo=BigInt(113);for(let uC=0,lC=Po,hC=1,dC=0;uC<24;uC++){[hC,dC]=[dC,(2*hC+3*dC)%5],Oo.push(2*(5*dC+hC)),To.push((uC+1)*(uC+2)/2%64);let e=xo;for(let t=0;t<7;t++)lC=(lC<<Po^(lC>>Bo)*Lo)%Uo,lC&Mo&&(e^=Po<<(Po<<BigInt(t))-Po);Ro.push(e)}const[Do,Wo]=Ao(Ro,!0),jo=(e,t,r)=>r>32?Co(e,t,r):Io(e,t,r),zo=(e,t,r)=>r>32?ko(e,t,r):So(e,t,r);function Ho(e,t=24){const r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let n=0;n<10;n++)r[n]=e[n]^e[n+10]^e[n+20]^e[n+30]^e[n+40];for(let n=0;n<10;n+=2){const t=(n+8)%10,i=(n+2)%10,s=r[i],o=r[i+1],a=jo(s,o,1)^r[t],c=zo(s,o,1)^r[t+1];for(let r=0;r<50;r+=10)e[n+r]^=a,e[n+r+1]^=c}let t=e[2],i=e[3];for(let r=0;r<24;r++){const n=To[r],s=jo(t,i,n),o=zo(t,i,n),a=Oo[r];t=e[a],i=e[a+1],e[a]=s,e[a+1]=o}for(let n=0;n<50;n+=10){for(let t=0;t<10;t++)r[t]=e[n+t];for(let t=0;t<10;t++)e[n+t]^=~r[(t+2)%10]&r[(t+4)%10]}e[0]^=Do[n],e[1]^=Wo[n]}r.fill(0)}class qo extends No.Vw{constructor(e,t,r,n=!1,i=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=n,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,bo.Fe)(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,No.DH)(this.state)}keccak(){No.qv||(0,No.Fc)(this.state32),Ho(this.state32,this.rounds),No.qv||(0,No.Fc)(this.state32),this.posOut=0,this.pos=0}update(e){(0,bo.CC)(this);const{blockLen:t,state:r}=this;e=(0,No.ZJ)(e);const n=e.length;for(let i=0;i<n;){const s=Math.min(t-this.pos,n-i);for(let t=0;t<s;t++)r[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,0!==(128&t)&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){(0,bo.CC)(this,!1),(0,bo.DO)(e),this.finish();const t=this.state,{blockLen:r}=this;for(let n=0,i=e.length;n<i;){this.posOut>=r&&this.keccak();const s=Math.min(r-this.posOut,i-n);e.set(t.subarray(this.posOut,this.posOut+s),n),this.posOut+=s,n+=s}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return(0,bo.Fe)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,bo.Ht)(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:n,rounds:i,enableXOF:s}=this;return e||(e=new qo(t,r,n,s,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=n,e.enableXOF=s,e.destroyed=this.destroyed,e}}const $o=(e,t,r)=>(0,No.ld)((()=>new qo(t,e,r))),Fo=$o(1,136,32);function Ko(e,t){const r=t||"hex",n=Fo(Ks(e,{strict:!1})?ho(e):e);return"bytes"===r?n:io(n)}class Vo extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const t=super.get(e);return super.has(e)&&void 0!==t&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){const e=this.keys().next().value;e&&this.delete(e)}return this}}const Yo=new Vo(8192);function Go(e,t){if(Yo.has(`${e}.${t}`))return Yo.get(`${e}.${t}`);const r=t?`${t}${e.toLowerCase()}`:e.substring(2).toLowerCase(),n=Ko(wo(r),"bytes"),i=(t?r.substring(`${t}0x`.length):r).split("");for(let o=0;o<40;o+=2)n[o>>1]>>4>=8&&i[o]&&(i[o]=i[o].toUpperCase()),(15&n[o>>1])>=8&&i[o+1]&&(i[o+1]=i[o+1].toUpperCase());const s=`0x${i.join("")}`;return Yo.set(`${e}.${t}`,s),s}function Zo(e){const t=Ko(`0x${e.substring(4)}`).substring(26);return Go(`0x${t}`)}async function Jo({hash:e,signature:t}){const n=Ks(e)?e:io(e),{secp256k1:i}=await r.e(7825).then(r.bind(r,47825)),s=(()=>{if("object"===typeof t&&"r"in t&&"s"in t){const{r:e,s:r,v:n,yParity:s}=t,o=Number(s??n),a=Xo(o);return new i.Signature(to(e),to(r)).addRecoveryBit(a)}const e=Ks(t)?t:io(t),r=ro(`0x${e.slice(130)}`),n=Xo(r);return i.Signature.fromCompact(e.substring(2,130)).addRecoveryBit(n)})(),o=s.recoverPublicKey(n.substring(2)).toHex(!1);return`0x${o}`}function Xo(e){if(0===e||1===e)return e;if(27===e)return 0;if(28===e)return 1;throw new Error("Invalid yParityOrV value")}async function Qo({hash:e,signature:t}){return Zo(await Jo({hash:e,signature:t}))}var ea=r(48016);function ta(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}function ra(e,t){t||(t=e.reduce(((e,t)=>e+t.length),0));const r=ta(t);let n=0;for(const i of e)r.set(i,n),n+=i.length;return r}function na(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(255!==r[o])throw new TypeError(s+" is ambiguous");r[o]=i}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";var r=0,n=0,i=0,s=t.length;while(i!==s&&0===t[i])i++,r++;var o=(s-i)*l+1>>>0,u=new Uint8Array(o);while(i!==s){for(var h=t[i],d=0,p=o-1;(0!==h||d<n)&&-1!==p;p--,d++)h+=256*u[p]>>>0,u[p]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");n=d,i++}var f=o-n;while(f!==o&&0===u[f])f++;for(var g=c.repeat(r);f<o;++f)g+=e.charAt(u[f]);return g}function d(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){var n=0,i=0;while(e[t]===c)n++,t++;var s=(e.length-t)*u+1>>>0,o=new Uint8Array(s);while(e[t]){var l=r[e.charCodeAt(t)];if(255===l)return;for(var h=0,d=s-1;(0!==l||h<i)&&-1!==d;d--,h++)l+=a*o[d]>>>0,o[d]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=h,t++}if(" "!==e[t]){var p=s-i;while(p!==s&&0===o[p])p++;var f=new Uint8Array(n+(s-p)),g=n;while(p!==s)f[g++]=o[p++];return f}}}function p(e){var r=d(e);if(r)return r;throw new Error(`Non-${t} character`)}return{encode:h,decodeUnsafe:d,decode:p}}var ia=na,sa=ia,oa=sa;new Uint8Array(0);const aa=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},ca=e=>(new TextEncoder).encode(e),ua=e=>(new TextDecoder).decode(e);class la{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class ha{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return pa(this,e)}}class da{constructor(e){this.decoders=e}or(e){return pa(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const pa=(e,t)=>new da({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class fa{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new la(e,t,r),this.decoder=new ha(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const ga=({name:e,prefix:t,encode:r,decode:n})=>new fa(e,t,r,n),ma=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:i}=oa(r,t);return ga({prefix:e,name:t,encode:n,decode:e=>aa(i(e))})},ya=(e,t,r,n)=>{const i={};for(let l=0;l<t.length;++l)i[t[l]]=l;let s=e.length;while("="===e[s-1])--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,u=0;for(let l=0;l<s;++l){const t=i[e[l]];if(void 0===t)throw new SyntaxError(`Non-${n} character`);c=c<<r|t,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},wa=(e,t,r)=>{const n="="===t[t.length-1],i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<e.length;++c){a=a<<8|e[c],o+=8;while(o>r)o-=r,s+=t[i&a>>o]}if(o&&(s+=t[i&a<<r-o]),n)while(s.length*r&7)s+="=";return s},ba=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>ga({prefix:t,name:e,encode(e){return wa(e,n,r)},decode(t){return ya(t,n,r,e)}}),va=ga({prefix:"\0",name:"identity",encode:e=>ua(e),decode:e=>ca(e)}),_a=ba({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Ea=ba({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Aa=ma({prefix:"9",name:"base10",alphabet:"0123456789"}),Ia=ba({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Sa=ba({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Ca=ba({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ka=ba({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Na=ba({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Oa=ba({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Ta=ba({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Ra=ba({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),xa=ba({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Pa=ba({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Ma=ba({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Ba=ma({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Ua=ma({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),La=ma({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Da=ma({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Wa=ba({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),ja=ba({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),za=ba({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Ha=ba({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),qa=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),$a=qa.reduce(((e,t,r)=>(e[r]=t,e)),[]),Fa=qa.reduce(((e,t,r)=>(e[t.codePointAt(0)]=r,e)),[]);function Ka(e){return e.reduce(((e,t)=>(e+=$a[t],e)),"")}function Va(e){const t=[];for(const r of e){const e=Fa[r.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}const Ya=ga({prefix:"🚀",name:"base256emoji",encode:Ka,decode:Va});var Ga=ec,Za=128,Ja=127,Xa=~Ja,Qa=Math.pow(2,31);function ec(e,t,r){t=t||[],r=r||0;var n=r;while(e>=Qa)t[r++]=255&e|Za,e/=128;while(e&Xa)t[r++]=255&e|Za,e>>>=7;return t[r]=0|e,ec.bytes=r-n+1,t}var tc=ic,rc=128,nc=127;function ic(e,t){var r,n=0,i=(t=t||0,0),s=t,o=e.length;do{if(s>=o)throw ic.bytes=0,new RangeError("Could not decode varint");r=e[s++],n+=i<28?(r&nc)<<i:(r&nc)*Math.pow(2,i),i+=7}while(r>=rc);return ic.bytes=s-t,n}var sc=Math.pow(2,7),oc=Math.pow(2,14),ac=Math.pow(2,21),cc=Math.pow(2,28),uc=Math.pow(2,35),lc=Math.pow(2,42),hc=Math.pow(2,49),dc=Math.pow(2,56),pc=Math.pow(2,63),fc=function(e){return e<sc?1:e<oc?2:e<ac?3:e<cc?4:e<uc?5:e<lc?6:e<hc?7:e<dc?8:e<pc?9:10},gc={encode:Ga,decode:tc,encodingLength:fc},mc=gc,yc=mc;const wc=(e,t,r=0)=>(yc.encode(e,t,r),t),bc=e=>yc.encodingLength(e),vc=(e,t)=>{const r=t.byteLength,n=bc(e),i=n+bc(r),s=new Uint8Array(i+r);return wc(e,s,0),wc(r,s,n),s.set(t,i),new _c(e,r,t,s)};class _c{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}const Ec=({name:e,code:t,encode:r})=>new Ac(e,t,r);class Ac{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?vc(this.code,t):t.then((e=>vc(this.code,e)))}throw Error("Unknown type, must be binary type")}}const Ic=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),Sc=Ec({name:"sha2-256",code:18,encode:Ic("SHA-256")}),Cc=Ec({name:"sha2-512",code:19,encode:Ic("SHA-512")}),kc=0,Nc="identity",Oc=aa,Tc=e=>vc(kc,Oc(e)),Rc={code:kc,name:Nc,encode:Oc,digest:Tc},xc="raw",Pc=85,Mc=e=>aa(e),Bc=e=>aa(e),Uc=new TextEncoder,Lc=new TextDecoder,Dc="json",Wc=512,jc=e=>Uc.encode(JSON.stringify(e)),zc=e=>JSON.parse(Lc.decode(e));Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom");Symbol.for("@ipld/js-cid/CID");const Hc={...n,...i,...s,...o,...a,...c,...u,...l,...h,...d};function qc(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const $c=qc("utf8","u",(e=>{const t=new TextDecoder("utf8");return"u"+t.decode(e)}),(e=>{const t=new TextEncoder;return t.encode(e.substring(1))})),Fc=qc("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(e=>{e=e.substring(1);const t=ta(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),Kc={utf8:$c,"utf-8":$c,hex:Hc.base16,latin1:Fc,ascii:Fc,binary:Fc,...Hc};var Vc=Kc;function Yc(e,t="utf8"){const r=Vc[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode(`${r.prefix}${e}`):globalThis.Buffer.from(e,"utf8")}function Gc(e,t="utf8"){const r=Vc[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}const Zc={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},Jc=":";function Xc(e){const[t,r]=e.split(Jc);return{namespace:t,reference:r}}function Qc(e,t){return e.includes(":")?[e]:t.chains||[]}var eu=Object.defineProperty,tu=Object.defineProperties,ru=Object.getOwnPropertyDescriptors,nu=Object.getOwnPropertySymbols,iu=Object.prototype.hasOwnProperty,su=Object.prototype.propertyIsEnumerable,ou=(e,t,r)=>t in e?eu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,au=(e,t)=>{for(var r in t||(t={}))iu.call(t,r)&&ou(e,r,t[r]);if(nu)for(var r of nu(t))su.call(t,r)&&ou(e,r,t[r]);return e},cu=(e,t)=>tu(e,ru(t));const uu="ReactNative",lu={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},hu="js";function du(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function pu(){return!(0,js.getDocument)()&&!!(0,js.getNavigator)()&&navigator.product===uu}function fu(){return pu()&&typeof r.g<"u"&&typeof(null==r.g?void 0:r.g.Platform)<"u"&&"android"===(null==r.g?void 0:r.g.Platform.OS)}function gu(){return pu()&&typeof r.g<"u"&&typeof(null==r.g?void 0:r.g.Platform)<"u"&&"ios"===(null==r.g?void 0:r.g.Platform.OS)}function mu(){return!du()&&!!(0,js.getNavigator)()&&!!(0,js.getDocument)()}function yu(){return pu()?lu.reactNative:du()?lu.node:mu()?lu.browser:lu.unknown}function wu(){var e;try{return pu()&&typeof r.g<"u"&&typeof(null==r.g?void 0:r.g.Application)<"u"?null==(e=r.g.Application)?void 0:e.applicationId:void 0}catch{return}}function bu(e,t){const r=new URLSearchParams(e);for(const n of Object.keys(t).sort())if(t.hasOwnProperty(n)){const e=t[n];void 0!==e&&r.set(n,e)}return r.toString()}function vu(e){var t,r;const n=_u();try{return null!=e&&e.url&&n.url&&e.url!==n.url&&(console.warn(`The configured WalletConnect 'metadata.url':${e.url} differs from the actual page url:${n.url}. This is probably unintended and can lead to issues.`),e.url=n.url),null!=(t=e?.icons)&&t.length&&e.icons.length>0&&(e.icons=e.icons.filter((e=>""!==e))),cu(au(au({},n),e),{url:e?.url||n.url,name:e?.name||n.name,description:e?.description||n.description,icons:null!=(r=e?.icons)&&r.length&&e.icons.length>0?e.icons:n.icons})}catch(i){return console.warn("Error populating app metadata",i),e||n}}function _u(){return(0,zs.g)()||{name:"",description:"",url:"",icons:[""]}}function Eu(){if(yu()===lu.reactNative&&typeof r.g<"u"&&typeof(null==r.g?void 0:r.g.Platform)<"u"){const{OS:e,Version:t}=r.g.Platform;return[e,t].join("-")}const e=Ms();if(null===e)return"unknown";const t=e.os?e.os.replace(" ","").toLowerCase():"unknown";return"browser"===e.type?[t,e.name,e.version].join("-"):[t,e.version].join("-")}function Au(){var e;const t=yu();return t===lu.browser?[t,(null==(e=(0,js.getLocation)())?void 0:e.host)||"unknown"].join(":"):t}function Iu(e,t,r){const n=Eu(),i=Au();return[[e,t].join("-"),[hu,r].join("-"),n,i].join("/")}function Su({protocol:e,version:t,relayUrl:r,sdkVersion:n,auth:i,projectId:s,useOnCloseEvent:o,bundleId:a,packageName:c}){const u=r.split("?"),l=Iu(e,t,n),h={auth:i,ua:l,projectId:s,useOnCloseEvent:o||void 0,packageName:c||void 0,bundleId:a||void 0},d=bu(u[1]||"",h);return u[0]+"?"+d}function Cu(e,t){return e.filter((e=>t.includes(e))).length===e.length}function ku(e){return Object.fromEntries(e.entries())}function Nu(e){return new Map(Object.entries(e))}function Ou(e=b.FIVE_MINUTES,t){const r=(0,b.toMiliseconds)(e||b.FIVE_MINUTES);let n,i,s,o;return{resolve:e=>{s&&n&&(clearTimeout(s),n(e),o=Promise.resolve(e))},reject:e=>{s&&i&&(clearTimeout(s),i(e))},done:()=>new Promise(((e,a)=>{if(o)return e(o);s=setTimeout((()=>{const e=new Error(t);o=Promise.reject(e),a(e)}),r),n=e,i=a}))}}function Tu(e,t,r){return new Promise((async(n,i)=>{const s=setTimeout((()=>i(new Error(r))),t);try{const t=await e;n(t)}catch(E){i(E)}clearTimeout(s)}))}function Ru(e,t){if("string"==typeof t&&t.startsWith(`${e}:`))return t;if("topic"===e.toLowerCase()){if("string"!=typeof t)throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}if("id"===e.toLowerCase()){if("number"!=typeof t)throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${e}`)}function xu(e){return Ru("topic",e)}function Pu(e){return Ru("id",e)}function Mu(e){const[t,r]=e.split(":"),n={id:void 0,topic:void 0};if("topic"===t&&"string"==typeof r)n.topic=r;else{if("id"!==t||!Number.isInteger(Number(r)))throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${r}`);n.id=Number(r)}return n}function Bu(e,t){return(0,b.fromMiliseconds)((t||Date.now())+(0,b.toMiliseconds)(e))}function Uu(e){return Date.now()>=(0,b.toMiliseconds)(e)}function Lu(e,t){return`${e}${t?`:${t}`:""}`}function Du(e=[],t=[]){return[...new Set([...e,...t])]}async function Wu({id:e,topic:t,wcDeepLink:n}){var i;try{if(!n)return;const s="string"==typeof n?JSON.parse(n):n,o=s?.href;if("string"!=typeof o)return;const a=ju(o,e,t),c=yu();if(c===lu.browser){if(null==(i=(0,js.getDocument)())||!i.hasFocus())return void console.warn("Document does not have focus, skipping deeplink.");zu(a)}else c===lu.reactNative&&typeof(null==r.g?void 0:r.g.Linking)<"u"&&await r.g.Linking.openURL(a)}catch(s){console.error(s)}}function ju(e,t,r){const n=`requestId=${t}&sessionTopic=${r}`;e.endsWith("/")&&(e=e.slice(0,-1));let i=`${e}`;if(e.startsWith("https://t.me")){const t=e.includes("?")?"&startapp=":"?startapp=";i=`${i}${t}${Yu(n,!0)}`}else i=`${i}/wc?${n}`;return i}function zu(e){let t="_self";Vu()?t="_top":(Ku()||e.startsWith("https://")||e.startsWith("http://"))&&(t="_blank"),window.open(e,t,"noreferrer noopener")}async function Hu(e,t){let r="";try{if(mu()&&(r=localStorage.getItem(t),r))return r;r=await e.getItem(t)}catch(A){console.error(A)}return r}function qu(e,t){if(!e.includes(t))return null;const r=e.split(/([&,?,=])/),n=r.indexOf(t);return r[n+2]}function $u(){return typeof crypto<"u"&&null!=crypto&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function Fu(){return typeof process<"u"&&"true"==={NODE_ENV:"production",BASE_URL:""}.IS_VITEST}function Ku(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function Vu(){try{return window.self!==window.top}catch{return!1}}function Yu(e,t=!1){const r=Buffer.from(e).toString("base64");return t?r.replace(/[=]/g,""):r}function Gu(e){return Buffer.from(e,"base64").toString("utf-8")}function Zu(e){return new Promise((t=>setTimeout(t,e)))}function Ju(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function Xu(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function Qu(e,...t){if(!Xu(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function el(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");Ju(e.outputLen),Ju(e.blockLen)}function tl(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function rl(e,t){Qu(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const nl=BigInt(2**32-1),il=BigInt(32);function sl(e,t=!1){return t?{h:Number(e&nl),l:Number(e>>il&nl)}:{h:0|Number(e>>il&nl),l:0|Number(e&nl)}}function ol(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:o}=sl(e[i],t);[r[i],n[i]]=[s,o]}return[r,n]}const al=(e,t,r)=>e<<r|t>>>32-r,cl=(e,t,r)=>t<<r|e>>>32-r,ul=(e,t,r)=>t<<r-32|e>>>64-r,ll=(e,t,r)=>e<<r-32|t>>>64-r,hl="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;function dl(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function pl(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function fl(e,t){return e<<32-t|e>>>t}const gl=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];function ml(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}function yl(e){for(let t=0;t<e.length;t++)e[t]=ml(e[t])}function wl(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function bl(e){return"string"==typeof e&&(e=wl(e)),Qu(e),e}function vl(...e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];Qu(r),t+=r.length}const r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){const t=e[n];r.set(t,i),i+=t.length}return r}class _l{clone(){return this._cloneInto()}}function El(e){const t=t=>e().update(bl(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function Al(e=32){if(hl&&"function"==typeof hl.getRandomValues)return hl.getRandomValues(new Uint8Array(e));if(hl&&"function"==typeof hl.randomBytes)return hl.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}const Il=[],Sl=[],Cl=[],kl=BigInt(0),Nl=BigInt(1),Ol=BigInt(2),Tl=BigInt(7),Rl=BigInt(256),xl=BigInt(113);for(let uC=0,lC=Nl,hC=1,dC=0;uC<24;uC++){[hC,dC]=[dC,(2*hC+3*dC)%5],Il.push(2*(5*dC+hC)),Sl.push((uC+1)*(uC+2)/2%64);let e=kl;for(let t=0;t<7;t++)lC=(lC<<Nl^(lC>>Tl)*xl)%Rl,lC&Ol&&(e^=Nl<<(Nl<<BigInt(t))-Nl);Cl.push(e)}const[Pl,Ml]=ol(Cl,!0),Bl=(e,t,r)=>r>32?ul(e,t,r):al(e,t,r),Ul=(e,t,r)=>r>32?ll(e,t,r):cl(e,t,r);function Ll(e,t=24){const r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let n=0;n<10;n++)r[n]=e[n]^e[n+10]^e[n+20]^e[n+30]^e[n+40];for(let n=0;n<10;n+=2){const t=(n+8)%10,i=(n+2)%10,s=r[i],o=r[i+1],a=Bl(s,o,1)^r[t],c=Ul(s,o,1)^r[t+1];for(let r=0;r<50;r+=10)e[n+r]^=a,e[n+r+1]^=c}let t=e[2],i=e[3];for(let r=0;r<24;r++){const n=Sl[r],s=Bl(t,i,n),o=Ul(t,i,n),a=Il[r];t=e[a],i=e[a+1],e[a]=s,e[a+1]=o}for(let n=0;n<50;n+=10){for(let t=0;t<10;t++)r[t]=e[n+t];for(let t=0;t<10;t++)e[n+t]^=~r[(t+2)%10]&r[(t+4)%10]}e[0]^=Pl[n],e[1]^=Ml[n]}r.fill(0)}class Dl extends _l{constructor(e,t,r,n=!1,i=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=n,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Ju(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=dl(this.state)}keccak(){gl||yl(this.state32),Ll(this.state32,this.rounds),gl||yl(this.state32),this.posOut=0,this.pos=0}update(e){tl(this);const{blockLen:t,state:r}=this;e=bl(e);const n=e.length;for(let i=0;i<n;){const s=Math.min(t-this.pos,n-i);for(let t=0;t<s;t++)r[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,0!==(128&t)&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){tl(this,!1),Qu(e),this.finish();const t=this.state,{blockLen:r}=this;for(let n=0,i=e.length;n<i;){this.posOut>=r&&this.keccak();const s=Math.min(r-this.posOut,i-n);e.set(t.subarray(this.posOut,this.posOut+s),n),this.posOut+=s,n+=s}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Ju(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(rl(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:n,rounds:i,enableXOF:s}=this;return e||(e=new Dl(t,r,n,s,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=n,e.enableXOF=s,e.destroyed=this.destroyed,e}}const Wl=(e,t,r)=>El((()=>new Dl(t,e,r))),jl=Wl(1,136,32),zl="https://rpc.walletconnect.org/v1";function Hl(e){const t=`Ethereum Signed Message:\n${e.length}`,r=(new TextEncoder).encode(t+e);return"0x"+Buffer.from(jl(r)).toString("hex")}async function ql(e,t,r,n,i,s){switch(r.t){case"eip191":return await $l(e,t,r.s);case"eip1271":return await Fl(e,t,r.s,n,i,s);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${r.t}`)}}async function $l(e,t,r){return(await Qo({hash:Hl(t),signature:r})).toLowerCase()===e.toLowerCase()}async function Fl(e,t,r,n,i,s){const o=Xc(n);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${n}`);try{const o="0x1626ba7e",a="0000000000000000000000000000000000000000000000000000000000000040",c="0000000000000000000000000000000000000000000000000000000000000041",u=r.substring(2),l=Hl(t).substring(2),h=o+l+a+c+u,d=await fetch(`${s||zl}/?chainId=${n}&projectId=${i}`,{method:"POST",body:JSON.stringify({id:Kl(),jsonrpc:"2.0",method:"eth_call",params:[{to:e,data:h},"latest"]})}),{result:p}=await d.json();return!!p&&p.slice(0,o.length).toLowerCase()===o.toLowerCase()}catch(ge){return console.error("isValidEip1271Signature: ",ge),!1}}function Kl(){return Date.now()+Math.floor(1e3*Math.random())}function Vl(e){const t=atob(e),r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);const n=r[0];if(0===n)throw new Error("No signatures found");const i=1+64*n;if(r.length<i)throw new Error("Transaction data too short for claimed signature count");if(r.length<100)throw new Error("Transaction too short");const s=Buffer.from(e,"base64").slice(1,65);return ea.A.encode(s)}var Yl=Object.defineProperty,Gl=Object.defineProperties,Zl=Object.getOwnPropertyDescriptors,Jl=Object.getOwnPropertySymbols,Xl=Object.prototype.hasOwnProperty,Ql=Object.prototype.propertyIsEnumerable,eh=(e,t,r)=>t in e?Yl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,th=(e,t)=>{for(var r in t||(t={}))Xl.call(t,r)&&eh(e,r,t[r]);if(Jl)for(var r of Jl(t))Ql.call(t,r)&&eh(e,r,t[r]);return e},rh=(e,t)=>Gl(e,Zl(t));const nh="did:pkh:",ih=e=>e?.split(":"),sh=e=>{const t=e&&ih(e);if(t)return e.includes(nh)?t[3]:t[1]},oh=e=>{const t=e&&ih(e);if(t)return t[2]+":"+t[3]},ah=e=>{const t=e&&ih(e);if(t)return t.pop()};async function ch(e){const{cacao:t,projectId:r}=e,{s:n,p:i}=t,s=uh(i,i.iss),o=ah(i.iss);return await ql(o,s,n,oh(i.iss),r)}const uh=(e,t)=>{const r=`${e.domain} wants you to sign in with your Ethereum account:`,n=ah(t);if(!e.aud&&!e.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let i=e.statement||void 0;const s=`URI: ${e.aud||e.uri}`,o=`Version: ${e.version}`,a=`Chain ID: ${sh(t)}`,c=`Nonce: ${e.nonce}`,u=`Issued At: ${e.iat}`,l=e.exp?`Expiration Time: ${e.exp}`:void 0,h=e.nbf?`Not Before: ${e.nbf}`:void 0,d=e.requestId?`Request ID: ${e.requestId}`:void 0,p=e.resources?`Resources:${e.resources.map((e=>`\n- ${e}`)).join("")}`:void 0,f=Ih(e.resources);if(f){const e=mh(f);i=_h(i,e)}return[r,n,"",i,"",s,o,a,c,u,l,h,d,p].filter((e=>null!=e)).join("\n")};function lh(e){return Buffer.from(JSON.stringify(e)).toString("base64")}function hh(e){return JSON.parse(Buffer.from(e,"base64").toString("utf-8"))}function dh(e){if(!e)throw new Error("No recap provided, value is undefined");if(!e.att)throw new Error("No `att` property found");const t=Object.keys(e.att);if(null==t||!t.length)throw new Error("No resources found in `att` property");t.forEach((t=>{const r=e.att[t];if(Array.isArray(r))throw new Error(`Resource must be an object: ${t}`);if("object"!=typeof r)throw new Error(`Resource must be an object: ${t}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${t}`);Object.keys(r).forEach((e=>{const t=r[e];if(!Array.isArray(t))throw new Error(`Ability limits ${e} must be an array of objects, found: ${t}`);if(!t.length)throw new Error(`Value of ${e} is empty array, must be an array with objects`);t.forEach((t=>{if("object"!=typeof t)throw new Error(`Ability limits (${e}) must be an array of objects, found: ${t}`)}))}))}))}function ph(e,t,r,n={}){return r?.sort(((e,t)=>e.localeCompare(t))),{att:{[e]:fh(t,r,n)}}}function fh(e,t,r={}){t=t?.sort(((e,t)=>e.localeCompare(t)));const n=t.map((t=>({[`${e}/${t}`]:[r]})));return Object.assign({},...n)}function gh(e){return dh(e),`urn:recap:${lh(e).replace(/=/g,"")}`}function mh(e){const t=hh(e.replace("urn:recap:",""));return dh(t),t}function yh(e,t,r){const n=ph(e,t,r);return gh(n)}function wh(e){return e&&e.includes("urn:recap:")}function bh(e,t){const r=mh(e),n=mh(t),i=vh(r,n);return gh(i)}function vh(e,t){dh(e),dh(t);const r=Object.keys(e.att).concat(Object.keys(t.att)).sort(((e,t)=>e.localeCompare(t))),n={att:{}};return r.forEach((r=>{var i,s;Object.keys((null==(i=e.att)?void 0:i[r])||{}).concat(Object.keys((null==(s=t.att)?void 0:s[r])||{})).sort(((e,t)=>e.localeCompare(t))).forEach((i=>{var s,o;n.att[r]=rh(th({},n.att[r]),{[i]:(null==(s=e.att[r])?void 0:s[i])||(null==(o=t.att[r])?void 0:o[i])})}))})),n}function _h(e="",t){dh(t);const r="I further authorize the stated URI to perform the following actions on my behalf: ";if(e.includes(r))return e;const n=[];let i=0;Object.keys(t.att).forEach((e=>{const r=Object.keys(t.att[e]).map((e=>({ability:e.split("/")[0],action:e.split("/")[1]})));r.sort(((e,t)=>e.action.localeCompare(t.action)));const s={};r.forEach((e=>{s[e.ability]||(s[e.ability]=[]),s[e.ability].push(e.action)}));const o=Object.keys(s).map((t=>(i++,`(${i}) '${t}': '${s[t].join("', '")}' for '${e}'.`)));n.push(o.join(", ").replace(".,","."))}));const s=n.join(" "),o=`${r}${s}`;return`${e?e+" ":""}${o}`}function Eh(e){var t;const r=mh(e);dh(r);const n=null==(t=r.att)?void 0:t.eip155;return n?Object.keys(n).map((e=>e.split("/")[1])):[]}function Ah(e){const t=mh(e);dh(t);const r=[];return Object.values(t.att).forEach((e=>{Object.values(e).forEach((e=>{var t;null!=(t=e?.[0])&&t.chains&&r.push(e[0].chains)}))})),[...new Set(r.flat())]}function Ih(e){if(!e)return;const t=e?.[e.length-1];return wh(t)?t:void 0}function Sh(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function Ch(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function kh(e,...t){if(!Ch(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function Nh(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Oh(e,t){kh(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function Th(e){if("boolean"!=typeof e)throw new Error(`boolean expected, not ${e}`)}const Rh=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),xh=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Ph=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];if(!Ph)throw new Error("Non little-endian hardware is not supported");function Mh(e){if("string"!=typeof e)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(e))}function Bh(e){if("string"==typeof e)e=Mh(e);else{if(!Ch(e))throw new Error("Uint8Array expected, got "+typeof e);e=Hh(e)}return e}function Uh(e,t){if(null==t||"object"!=typeof t)throw new Error("options must be defined");return Object.assign(e,t)}function Lh(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return 0===r}const Dh=(e,t)=>{function r(r,...n){if(kh(r),void 0!==e.nonceLength){const t=n[0];if(!t)throw new Error("nonce / iv required");e.varSizeNonce?kh(t):kh(t,e.nonceLength)}const i=e.tagLength;i&&void 0!==n[1]&&kh(n[1]);const s=t(r,...n),o=(e,t)=>{if(void 0!==t){if(2!==e)throw new Error("cipher output not supported");kh(t)}};let a=!1;return{encrypt(e,t){if(a)throw new Error("cannot encrypt() twice with same key + nonce");return a=!0,kh(e),o(s.encrypt.length,t),s.encrypt(e,t)},decrypt(e,t){if(kh(e),i&&e.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return o(s.decrypt.length,t),s.decrypt(e,t)}}}return Object.assign(r,e),r};function Wh(e,t,r=!0){if(void 0===t)return new Uint8Array(e);if(t.length!==e)throw new Error("invalid output length, expected "+e+", got: "+t.length);if(r&&!zh(t))throw new Error("invalid output, must be aligned");return t}function jh(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),c=n?4:0,u=n?0:4;e.setUint32(t+c,o,n),e.setUint32(t+u,a,n)}function zh(e){return e.byteOffset%4===0}function Hh(e){return Uint8Array.from(e)}function qh(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}const $h=e=>Uint8Array.from(e.split("").map((e=>e.charCodeAt(0)))),Fh=$h("expand 16-byte k"),Kh=$h("expand 32-byte k"),Vh=Rh(Fh),Yh=Rh(Kh);function Gh(e,t){return e<<t|e>>>32-t}function Zh(e){return e.byteOffset%4===0}const Jh=64,Xh=16,Qh=2**32-1,ed=new Uint32Array;function td(e,t,r,n,i,s,o,a){const c=i.length,u=new Uint8Array(Jh),l=Rh(u),h=Zh(i)&&Zh(s),d=h?Rh(i):ed,p=h?Rh(s):ed;for(let f=0;f<c;o++){if(e(t,r,n,l,o,a),o>=Qh)throw new Error("arx: counter overflow");const g=Math.min(Jh,c-f);if(h&&g===Jh){const e=f/4;if(f%4!==0)throw new Error("arx: invalid block position");for(let t,r=0;r<Xh;r++)t=e+r,p[t]=d[t]^l[r];f+=Jh}else{for(let e,t=0;t<g;t++)e=f+t,s[e]=i[e]^u[t];f+=g}}}function rd(e,t){const{allowShortKeys:r,extendNonceFn:n,counterLength:i,counterRight:s,rounds:o}=Uh({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if("function"!=typeof e)throw new Error("core must be a function");return Sh(i),Sh(o),Th(s),Th(r),(t,a,c,u,l=0)=>{kh(t),kh(a),kh(c);const h=c.length;if(void 0===u&&(u=new Uint8Array(h)),kh(u),Sh(l),l<0||l>=Qh)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const d=[];let p,f,g=t.length;if(32===g)d.push(p=Hh(t)),f=Yh;else{if(16!==g||!r)throw new Error(`arx: invalid 32-byte key, got length=${g}`);p=new Uint8Array(32),p.set(t),p.set(t,16),f=Vh,d.push(p)}Zh(a)||d.push(a=Hh(a));const m=Rh(p);if(n){if(24!==a.length)throw new Error("arx: extended nonce must be 24 bytes");n(f,m,Rh(a.subarray(0,16)),m),a=a.subarray(16)}const y=16-i;if(y!==a.length)throw new Error(`arx: nonce must be ${y} or 16 bytes`);if(12!==y){const e=new Uint8Array(12);e.set(a,s?0:12-a.length),a=e,d.push(a)}const w=Rh(a);return td(e,f,m,w,c,u,l,o),qh(...d),u}}const nd=(e,t)=>255&e[t++]|(255&e[t++])<<8;class id{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=Bh(e),kh(e,32);const t=nd(e,0),r=nd(e,2),n=nd(e,4),i=nd(e,6),s=nd(e,8),o=nd(e,10),a=nd(e,12),c=nd(e,14);this.r[0]=8191&t,this.r[1]=8191&(t>>>13|r<<3),this.r[2]=7939&(r>>>10|n<<6),this.r[3]=8191&(n>>>7|i<<9),this.r[4]=255&(i>>>4|s<<12),this.r[5]=s>>>1&8190,this.r[6]=8191&(s>>>14|o<<2),this.r[7]=8065&(o>>>11|a<<5),this.r[8]=8191&(a>>>8|c<<8),this.r[9]=c>>>5&127;for(let u=0;u<8;u++)this.pad[u]=nd(e,16+2*u)}process(e,t,r=!1){const n=r?0:2048,{h:i,r:s}=this,o=s[0],a=s[1],c=s[2],u=s[3],l=s[4],h=s[5],d=s[6],p=s[7],f=s[8],g=s[9],m=nd(e,t+0),y=nd(e,t+2),w=nd(e,t+4),b=nd(e,t+6),v=nd(e,t+8),_=nd(e,t+10),E=nd(e,t+12),A=nd(e,t+14);let I=i[0]+(8191&m),S=i[1]+(8191&(m>>>13|y<<3)),C=i[2]+(8191&(y>>>10|w<<6)),k=i[3]+(8191&(w>>>7|b<<9)),N=i[4]+(8191&(b>>>4|v<<12)),O=i[5]+(v>>>1&8191),T=i[6]+(8191&(v>>>14|_<<2)),R=i[7]+(8191&(_>>>11|E<<5)),x=i[8]+(8191&(E>>>8|A<<8)),P=i[9]+(A>>>5|n),M=0,B=M+I*o+S*(5*g)+C*(5*f)+k*(5*p)+N*(5*d);M=B>>>13,B&=8191,B+=O*(5*h)+T*(5*l)+R*(5*u)+x*(5*c)+P*(5*a),M+=B>>>13,B&=8191;let U=M+I*a+S*o+C*(5*g)+k*(5*f)+N*(5*p);M=U>>>13,U&=8191,U+=O*(5*d)+T*(5*h)+R*(5*l)+x*(5*u)+P*(5*c),M+=U>>>13,U&=8191;let L=M+I*c+S*a+C*o+k*(5*g)+N*(5*f);M=L>>>13,L&=8191,L+=O*(5*p)+T*(5*d)+R*(5*h)+x*(5*l)+P*(5*u),M+=L>>>13,L&=8191;let D=M+I*u+S*c+C*a+k*o+N*(5*g);M=D>>>13,D&=8191,D+=O*(5*f)+T*(5*p)+R*(5*d)+x*(5*h)+P*(5*l),M+=D>>>13,D&=8191;let W=M+I*l+S*u+C*c+k*a+N*o;M=W>>>13,W&=8191,W+=O*(5*g)+T*(5*f)+R*(5*p)+x*(5*d)+P*(5*h),M+=W>>>13,W&=8191;let j=M+I*h+S*l+C*u+k*c+N*a;M=j>>>13,j&=8191,j+=O*o+T*(5*g)+R*(5*f)+x*(5*p)+P*(5*d),M+=j>>>13,j&=8191;let z=M+I*d+S*h+C*l+k*u+N*c;M=z>>>13,z&=8191,z+=O*a+T*o+R*(5*g)+x*(5*f)+P*(5*p),M+=z>>>13,z&=8191;let H=M+I*p+S*d+C*h+k*l+N*u;M=H>>>13,H&=8191,H+=O*c+T*a+R*o+x*(5*g)+P*(5*f),M+=H>>>13,H&=8191;let q=M+I*f+S*p+C*d+k*h+N*l;M=q>>>13,q&=8191,q+=O*u+T*c+R*a+x*o+P*(5*g),M+=q>>>13,q&=8191;let $=M+I*g+S*f+C*p+k*d+N*h;M=$>>>13,$&=8191,$+=O*l+T*u+R*c+x*a+P*o,M+=$>>>13,$&=8191,M=(M<<2)+M|0,M=M+B|0,B=8191&M,M>>>=13,U+=M,i[0]=B,i[1]=U,i[2]=L,i[3]=D,i[4]=W,i[5]=j,i[6]=z,i[7]=H,i[8]=q,i[9]=$}finalize(){const{h:e,pad:t}=this,r=new Uint16Array(10);let n=e[1]>>>13;e[1]&=8191;for(let o=2;o<10;o++)e[o]+=n,n=e[o]>>>13,e[o]&=8191;e[0]+=5*n,n=e[0]>>>13,e[0]&=8191,e[1]+=n,n=e[1]>>>13,e[1]&=8191,e[2]+=n,r[0]=e[0]+5,n=r[0]>>>13,r[0]&=8191;for(let o=1;o<10;o++)r[o]=e[o]+n,n=r[o]>>>13,r[o]&=8191;r[9]-=8192;let i=(1^n)-1;for(let o=0;o<10;o++)r[o]&=i;i=~i;for(let o=0;o<10;o++)e[o]=e[o]&i|r[o];e[0]=65535&(e[0]|e[1]<<13),e[1]=65535&(e[1]>>>3|e[2]<<10),e[2]=65535&(e[2]>>>6|e[3]<<7),e[3]=65535&(e[3]>>>9|e[4]<<4),e[4]=65535&(e[4]>>>12|e[5]<<1|e[6]<<14),e[5]=65535&(e[6]>>>2|e[7]<<11),e[6]=65535&(e[7]>>>5|e[8]<<8),e[7]=65535&(e[8]>>>8|e[9]<<5);let s=e[0]+t[0];e[0]=65535&s;for(let o=1;o<8;o++)s=(e[o]+t[o]|0)+(s>>>16)|0,e[o]=65535&s;qh(r)}update(e){Nh(this);const{buffer:t,blockLen:r}=this;e=Bh(e);const n=e.length;for(let i=0;i<n;){const s=Math.min(r-this.pos,n-i);if(s!==r)t.set(e.subarray(i,i+s),this.pos),this.pos+=s,i+=s,this.pos===r&&(this.process(t,0,!1),this.pos=0);else for(;r<=n-i;i+=r)this.process(e,i)}return this}destroy(){qh(this.h,this.r,this.buffer,this.pad)}digestInto(e){Nh(this),Oh(e,this),this.finished=!0;const{buffer:t,h:r}=this;let{pos:n}=this;if(n){for(t[n++]=1;n<16;n++)t[n]=0;this.process(t,0,!0)}this.finalize();let i=0;for(let s=0;s<8;s++)e[i++]=r[s]>>>0,e[i++]=r[s]>>>8;return e}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}}function sd(e){const t=(t,r)=>e(r).update(Bh(t)).digest(),r=e(new Uint8Array(32));return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t}const od=sd((e=>new id(e)));function ad(e,t,r,n,i,s=20){let o=e[0],a=e[1],c=e[2],u=e[3],l=t[0],h=t[1],d=t[2],p=t[3],f=t[4],g=t[5],m=t[6],y=t[7],w=i,b=r[0],v=r[1],_=r[2],E=o,A=a,I=c,S=u,C=l,k=h,N=d,O=p,T=f,R=g,x=m,P=y,M=w,B=b,U=v,L=_;for(let W=0;W<s;W+=2)E=E+C|0,M=Gh(M^E,16),T=T+M|0,C=Gh(C^T,12),E=E+C|0,M=Gh(M^E,8),T=T+M|0,C=Gh(C^T,7),A=A+k|0,B=Gh(B^A,16),R=R+B|0,k=Gh(k^R,12),A=A+k|0,B=Gh(B^A,8),R=R+B|0,k=Gh(k^R,7),I=I+N|0,U=Gh(U^I,16),x=x+U|0,N=Gh(N^x,12),I=I+N|0,U=Gh(U^I,8),x=x+U|0,N=Gh(N^x,7),S=S+O|0,L=Gh(L^S,16),P=P+L|0,O=Gh(O^P,12),S=S+O|0,L=Gh(L^S,8),P=P+L|0,O=Gh(O^P,7),E=E+k|0,L=Gh(L^E,16),x=x+L|0,k=Gh(k^x,12),E=E+k|0,L=Gh(L^E,8),x=x+L|0,k=Gh(k^x,7),A=A+N|0,M=Gh(M^A,16),P=P+M|0,N=Gh(N^P,12),A=A+N|0,M=Gh(M^A,8),P=P+M|0,N=Gh(N^P,7),I=I+O|0,B=Gh(B^I,16),T=T+B|0,O=Gh(O^T,12),I=I+O|0,B=Gh(B^I,8),T=T+B|0,O=Gh(O^T,7),S=S+C|0,U=Gh(U^S,16),R=R+U|0,C=Gh(C^R,12),S=S+C|0,U=Gh(U^S,8),R=R+U|0,C=Gh(C^R,7);let D=0;n[D++]=o+E|0,n[D++]=a+A|0,n[D++]=c+I|0,n[D++]=u+S|0,n[D++]=l+C|0,n[D++]=h+k|0,n[D++]=d+N|0,n[D++]=p+O|0,n[D++]=f+T|0,n[D++]=g+R|0,n[D++]=m+x|0,n[D++]=y+P|0,n[D++]=w+M|0,n[D++]=b+B|0,n[D++]=v+U|0,n[D++]=_+L|0}const cd=rd(ad,{counterRight:!1,counterLength:4,allowShortKeys:!1}),ud=new Uint8Array(16),ld=(e,t)=>{e.update(t);const r=t.length%16;r&&e.update(ud.subarray(r))},hd=new Uint8Array(32);function dd(e,t,r,n,i){const s=e(t,r,hd),o=od.create(s);i&&ld(o,i),ld(o,n);const a=new Uint8Array(16),c=xh(a);jh(c,0,BigInt(i?i.length:0),!0),jh(c,8,BigInt(n.length),!0),o.update(a);const u=o.digest();return qh(s,a),u}const pd=e=>(t,r,n)=>({encrypt(i,s){const o=i.length;s=Wh(o+16,s,!1),s.set(i);const a=s.subarray(0,-16);e(t,r,a,a,1);const c=dd(e,t,r,a,n);return s.set(c,o),qh(c),s},decrypt(i,s){s=Wh(i.length-16,s,!1);const o=i.subarray(0,-16),a=i.subarray(-16),c=dd(e,t,r,o,n);if(!Lh(a,c))throw new Error("invalid tag");return s.set(i.subarray(0,-16)),e(t,r,s,s,1),qh(c),s}}),fd=Dh({blockSize:64,nonceLength:12,tagLength:16},pd(cd));class gd extends _l{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,el(e);const r=bl(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,i=new Uint8Array(n);i.set(r.length>n?e.create().update(r).digest():r);for(let s=0;s<i.length;s++)i[s]^=54;this.iHash.update(i),this.oHash=e.create();for(let s=0;s<i.length;s++)i[s]^=106;this.oHash.update(i),i.fill(0)}update(e){return tl(this),this.iHash.update(e),this}digestInto(e){tl(this),Qu(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:s,outputLen:o}=this;return e.finished=n,e.destroyed=i,e.blockLen=s,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const md=(e,t,r)=>new gd(e,t).update(r).digest();function yd(e,t,r){return el(e),void 0===r&&(r=new Uint8Array(e.outputLen)),md(e,bl(r),bl(t))}md.create=(e,t)=>new gd(e,t);const wd=new Uint8Array([0]),bd=new Uint8Array;function vd(e,t,r,n=32){if(el(e),Ju(n),n>255*e.outputLen)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(n/e.outputLen);void 0===r&&(r=bd);const s=new Uint8Array(i*e.outputLen),o=md.create(e,t),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let u=0;u<i;u++)wd[0]=u+1,a.update(0===u?bd:c).update(r).update(wd).digestInto(c),s.set(c,e.outputLen*u),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),wd.fill(0),s.slice(0,n)}const _d=(e,t,r,n,i)=>vd(e,yd(e,t,r),n,i);function Ed(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),c=n?4:0,u=n?0:4;e.setUint32(t+c,o,n),e.setUint32(t+u,a,n)}function Ad(e,t,r){return e&t^~e&r}function Id(e,t,r){return e&t^e&r^t&r}class Sd extends _l{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=pl(this.buffer)}update(e){tl(this);const{view:t,buffer:r,blockLen:n}=this;e=bl(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);if(o!==n)r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===n&&(this.process(t,0),this.pos=0);else{const t=pl(e);for(;n<=i-s;s+=n)this.process(t,s)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){tl(this),rl(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:n,isLE:i}=this;let{pos:s}=this;t[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>n-s&&(this.process(r,0),s=0);for(let l=s;l<n;l++)t[l]=0;Ed(r,n-8,BigInt(8*this.length),i),this.process(r,0);const o=pl(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<c;l++)o.setUint32(4*l,u[l],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:n,finished:i,destroyed:s,pos:o}=this;return e.length=n,e.pos=o,e.finished=i,e.destroyed=s,n%t&&e.buffer.set(r),e}}const Cd=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),kd=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Nd=new Uint32Array(64);class Od extends Sd{constructor(){super(64,32,8,!1),this.A=0|kd[0],this.B=0|kd[1],this.C=0|kd[2],this.D=0|kd[3],this.E=0|kd[4],this.F=0|kd[5],this.G=0|kd[6],this.H=0|kd[7]}get(){const{A:e,B:t,C:r,D:n,E:i,F:s,G:o,H:a}=this;return[e,t,r,n,i,s,o,a]}set(e,t,r,n,i,s,o,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|s,this.G=0|o,this.H=0|a}process(e,t){for(let l=0;l<16;l++,t+=4)Nd[l]=e.getUint32(t,!1);for(let l=16;l<64;l++){const e=Nd[l-15],t=Nd[l-2],r=fl(e,7)^fl(e,18)^e>>>3,n=fl(t,17)^fl(t,19)^t>>>10;Nd[l]=n+Nd[l-7]+r+Nd[l-16]|0}let{A:r,B:n,C:i,D:s,E:o,F:a,G:c,H:u}=this;for(let l=0;l<64;l++){const e=fl(o,6)^fl(o,11)^fl(o,25),t=u+e+Ad(o,a,c)+Cd[l]+Nd[l]|0,h=(fl(r,2)^fl(r,13)^fl(r,22))+Id(r,n,i)|0;u=c,c=a,a=o,o=s+t|0,s=i,i=n,n=r,r=t+h|0}r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,s=s+this.D|0,o=o+this.E|0,a=a+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(r,n,i,s,o,a,c,u)}roundClean(){Nd.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Td=El((()=>new Od)),Rd=BigInt(0),xd=BigInt(1),Pd=BigInt(2);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Md(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function Bd(e){if(!Md(e))throw new Error("Uint8Array expected")}function Ud(e,t){if("boolean"!=typeof t)throw new Error(e+" boolean expected, got "+t)}const Ld=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function Dd(e){Bd(e);let t="";for(let r=0;r<e.length;r++)t+=Ld[e[r]];return t}function Wd(e){const t=e.toString(16);return 1&t.length?"0"+t:t}function jd(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return""===e?Rd:BigInt("0x"+e)}const zd={_0:48,_9:57,A:65,F:70,a:97,f:102};function Hd(e){return e>=zd._0&&e<=zd._9?e-zd._0:e>=zd.A&&e<=zd.F?e-(zd.A-10):e>=zd.a&&e<=zd.f?e-(zd.a-10):void 0}function qd(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let i=0,s=0;i<r;i++,s+=2){const t=Hd(e.charCodeAt(s)),r=Hd(e.charCodeAt(s+1));if(void 0===t||void 0===r){const t=e[s]+e[s+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+s)}n[i]=16*t+r}return n}function $d(e){return jd(Dd(e))}function Fd(e){return Bd(e),jd(Dd(Uint8Array.from(e).reverse()))}function Kd(e,t){return qd(e.toString(16).padStart(2*t,"0"))}function Vd(e,t){return Kd(e,t).reverse()}function Yd(e){return qd(Wd(e))}function Gd(e,t,r){let n;if("string"==typeof t)try{n=qd(t)}catch(qe){throw new Error(e+" must be hex string or Uint8Array, cause: "+qe)}else{if(!Md(t))throw new Error(e+" must be hex string or Uint8Array");n=Uint8Array.from(t)}const i=n.length;if("number"==typeof r&&i!==r)throw new Error(e+" of length "+r+" expected, got "+i);return n}function Zd(...e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];Bd(r),t+=r.length}const r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){const t=e[n];r.set(t,i),i+=t.length}return r}function Jd(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return 0===r}function Xd(e){if("string"!=typeof e)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(e))}const Qd=e=>"bigint"==typeof e&&Rd<=e;function ep(e,t,r){return Qd(e)&&Qd(t)&&Qd(r)&&t<=e&&e<r}function tp(e,t,r,n){if(!ep(t,r,n))throw new Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}function rp(e){let t;for(t=0;e>Rd;e>>=xd,t+=1);return t}function np(e,t){return e>>BigInt(t)&xd}function ip(e,t,r){return e|(r?xd:Rd)<<BigInt(t)}const sp=e=>(Pd<<BigInt(e-1))-xd,op=e=>new Uint8Array(e),ap=e=>Uint8Array.from(e);function cp(e,t,r){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof r)throw new Error("hmacFn must be a function");let n=op(e),i=op(e),s=0;const o=()=>{n.fill(1),i.fill(0),s=0},a=(...e)=>r(i,n,...e),c=(e=op())=>{i=a(ap([0]),e),n=a(),0!==e.length&&(i=a(ap([1]),e),n=a())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const r=[];for(;e<t;){n=a();const t=n.slice();r.push(t),e+=n.length}return Zd(...r)};return(e,t)=>{let r;for(o(),c(e);!(r=t(u()));)c();return o(),r}}const up={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||Md(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function lp(e,t,r={}){const n=(t,r,n)=>{const i=up[r];if("function"!=typeof i)throw new Error("invalid validator function");const s=e[t];if((!n||void 0!==s)&&!i(s,e))throw new Error("param "+String(t)+" is invalid. Expected "+r+", got "+s)};for(const[i,s]of Object.entries(t))n(i,s,!1);for(const[i,s]of Object.entries(r))n(i,s,!0);return e}const hp=()=>{throw new Error("not implemented")};function dp(e){const t=new WeakMap;return(r,...n)=>{const i=t.get(r);if(void 0!==i)return i;const s=e(r,...n);return t.set(r,s),s}}var pp=Object.freeze({__proto__:null,isBytes:Md,abytes:Bd,abool:Ud,bytesToHex:Dd,numberToHexUnpadded:Wd,hexToNumber:jd,hexToBytes:qd,bytesToNumberBE:$d,bytesToNumberLE:Fd,numberToBytesBE:Kd,numberToBytesLE:Vd,numberToVarBytesBE:Yd,ensureBytes:Gd,concatBytes:Zd,equalBytes:Jd,utf8ToBytes:Xd,inRange:ep,aInRange:tp,bitLen:rp,bitGet:np,bitSet:ip,bitMask:sp,createHmacDrbg:cp,validateObject:lp,notImplemented:hp,memoized:dp});const fp=BigInt(0),gp=BigInt(1),mp=BigInt(2),yp=BigInt(3),wp=BigInt(4),bp=BigInt(5),vp=BigInt(8);function _p(e,t){const r=e%t;return r>=fp?r:t+r}function Ep(e,t,r){if(t<fp)throw new Error("invalid exponent, negatives unsupported");if(r<=fp)throw new Error("invalid modulus");if(r===gp)return fp;let n=gp;for(;t>fp;)t&gp&&(n=n*e%r),e=e*e%r,t>>=gp;return n}function Ap(e,t,r){let n=e;for(;t-- >fp;)n*=n,n%=r;return n}function Ip(e,t){if(e===fp)throw new Error("invert: expected non-zero number");if(t<=fp)throw new Error("invert: expected positive modulus, got "+t);let r=_p(e,t),n=t,i=fp,s=gp;for(;r!==fp;){const e=n/r,t=n%r,o=i-s*e;n=r,r=t,i=s,s=o}if(n!==gp)throw new Error("invert: does not exist");return _p(i,t)}function Sp(e){const t=(e-gp)/mp;let r,n,i;for(r=e-gp,n=0;r%mp===fp;r/=mp,n++);for(i=mp;i<e&&Ep(i,t,e)!==e-gp;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(1===n){const t=(e+gp)/wp;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}const s=(r+gp)/mp;return function(e,o){if(e.pow(o,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let a=n,c=e.pow(e.mul(e.ONE,i),r),u=e.pow(o,s),l=e.pow(o,r);for(;!e.eql(l,e.ONE);){if(e.eql(l,e.ZERO))return e.ZERO;let t=1;for(let n=e.sqr(l);t<a&&!e.eql(n,e.ONE);t++)n=e.sqr(n);const r=e.pow(c,gp<<BigInt(a-t-1));c=e.sqr(r),u=e.mul(u,r),l=e.mul(l,c),a=t}return u}}function Cp(e){if(e%wp===yp){const t=(e+gp)/wp;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}if(e%vp===bp){const t=(e-bp)/vp;return function(e,r){const n=e.mul(r,mp),i=e.pow(n,t),s=e.mul(r,i),o=e.mul(e.mul(s,mp),i),a=e.mul(s,e.sub(o,e.ONE));if(!e.eql(e.sqr(a),r))throw new Error("Cannot find square root");return a}}return Sp(e)}const kp=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Np(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=kp.reduce(((e,t)=>(e[t]="function",e)),t);return lp(e,r)}function Op(e,t,r){if(r<fp)throw new Error("invalid exponent, negatives unsupported");if(r===fp)return e.ONE;if(r===gp)return t;let n=e.ONE,i=t;for(;r>fp;)r&gp&&(n=e.mul(n,i)),i=e.sqr(i),r>>=gp;return n}function Tp(e,t){const r=new Array(t.length),n=t.reduce(((t,n,i)=>e.is0(n)?t:(r[i]=t,e.mul(t,n))),e.ONE),i=e.inv(n);return t.reduceRight(((t,n,i)=>e.is0(n)?t:(r[i]=e.mul(t,r[i]),e.mul(t,n))),i),r}function Rp(e,t){const r=void 0!==t?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function xp(e,t,r=!1,n={}){if(e<=fp)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:i,nByteLength:s}=Rp(e,t);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:e,isLE:r,BITS:i,BYTES:s,MASK:sp(i),ZERO:fp,ONE:gp,create:t=>_p(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("invalid field element: expected bigint, got "+typeof t);return fp<=t&&t<e},is0:e=>e===fp,isOdd:e=>(e&gp)===gp,neg:t=>_p(-t,e),eql:(e,t)=>e===t,sqr:t=>_p(t*t,e),add:(t,r)=>_p(t+r,e),sub:(t,r)=>_p(t-r,e),mul:(t,r)=>_p(t*r,e),pow:(e,t)=>Op(a,e,t),div:(t,r)=>_p(t*Ip(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>Ip(t,e),sqrt:n.sqrt||(t=>(o||(o=Cp(e)),o(a,t))),invertBatch:e=>Tp(a,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?Vd(e,s):Kd(e,s),fromBytes:e=>{if(e.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+e.length);return r?Fd(e):$d(e)}});return Object.freeze(a)}function Pp(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Mp(e){const t=Pp(e);return t+Math.ceil(t/2)}function Bp(e,t,r=!1){const n=e.length,i=Pp(t),s=Mp(t);if(n<16||n<s||n>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+n);const o=r?Fd(e):$d(e),a=_p(o,t-gp)+gp;return r?Vd(a,i):Kd(a,i)}const Up=BigInt(0),Lp=BigInt(1);function Dp(e,t){const r=t.negate();return e?r:t}function Wp(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function jp(e,t){Wp(e,t);const r=Math.ceil(t/e)+1,n=2**(e-1);return{windows:r,windowSize:n}}function zp(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach(((e,r)=>{if(!(e instanceof t))throw new Error("invalid point at index "+r)}))}function Hp(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach(((e,r)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+r)}))}const qp=new WeakMap,$p=new WeakMap;function Fp(e){return $p.get(e)||1}function Kp(e,t){return{constTimeNegate:Dp,hasPrecomputes(e){return 1!==Fp(e)},unsafeLadder(t,r,n=e.ZERO){let i=t;for(;r>Up;)r&Lp&&(n=n.add(i)),i=i.double(),r>>=Lp;return n},precomputeWindow(e,r){const{windows:n,windowSize:i}=jp(r,t),s=[];let o=e,a=o;for(let t=0;t<n;t++){a=o,s.push(a);for(let e=1;e<i;e++)a=a.add(o),s.push(a);o=a.double()}return s},wNAF(r,n,i){const{windows:s,windowSize:o}=jp(r,t);let a=e.ZERO,c=e.BASE;const u=BigInt(2**r-1),l=2**r,h=BigInt(r);for(let e=0;e<s;e++){const t=e*o;let r=Number(i&u);i>>=h,r>o&&(r-=l,i+=Lp);const s=t,d=t+Math.abs(r)-1,p=e%2!==0,f=r<0;0===r?c=c.add(Dp(p,n[s])):a=a.add(Dp(f,n[d]))}return{p:a,f:c}},wNAFUnsafe(r,n,i,s=e.ZERO){const{windows:o,windowSize:a}=jp(r,t),c=BigInt(2**r-1),u=2**r,l=BigInt(r);for(let e=0;e<o;e++){const t=e*a;if(i===Up)break;let r=Number(i&c);if(i>>=l,r>a&&(r-=u,i+=Lp),0===r)continue;let o=n[t+Math.abs(r)-1];r<0&&(o=o.negate()),s=s.add(o)}return s},getPrecomputes(e,t,r){let n=qp.get(t);return n||(n=this.precomputeWindow(t,e),1!==e&&qp.set(t,r(n))),n},wNAFCached(e,t,r){const n=Fp(e);return this.wNAF(n,this.getPrecomputes(n,e,r),t)},wNAFCachedUnsafe(e,t,r,n){const i=Fp(e);return 1===i?this.unsafeLadder(e,t,n):this.wNAFUnsafe(i,this.getPrecomputes(i,e,r),t,n)},setWindowSize(e,r){Wp(r,t),$p.set(e,r),qp.delete(e)}}}function Vp(e,t,r,n){if(zp(r,e),Hp(n,t),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const i=e.ZERO,s=rp(BigInt(r.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,c=new Array(a+1).fill(i),u=Math.floor((t.BITS-1)/o)*o;let l=i;for(let h=u;h>=0;h-=o){c.fill(i);for(let t=0;t<n.length;t++){const e=n[t],i=Number(e>>BigInt(h)&BigInt(a));c[i]=c[i].add(r[t])}let e=i;for(let t=c.length-1,r=i;t>0;t--)r=r.add(c[t]),e=e.add(r);if(l=l.add(e),0!==h)for(let t=0;t<o;t++)l=l.double()}return l}function Yp(e){return Np(e.Fp),lp(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Rp(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const Gp=BigInt(0),Zp=BigInt(1);function Jp(e){return lp(e,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...e})}function Xp(e){const t=Jp(e),{P:r}=t,n=e=>_p(e,r),i=t.montgomeryBits,s=Math.ceil(i/8),o=t.nByteLength,a=t.adjustScalarBytes||(e=>e),c=t.powPminus2||(e=>Ep(e,r-BigInt(2),r));function u(e,t,r){const i=n(e*(t-r));return t=n(t-i),r=n(r+i),[t,r]}const l=(t.a-BigInt(2))/BigInt(4);function h(e,t){tp("u",e,Gp,r),tp("scalar",t,Gp,r);const s=t,o=e;let a,h=Zp,d=Gp,p=e,f=Zp,g=Gp;for(let r=BigInt(i-1);r>=Gp;r--){const e=s>>r&Zp;g^=e,a=u(g,h,p),h=a[0],p=a[1],a=u(g,d,f),d=a[0],f=a[1],g=e;const t=h+d,i=n(t*t),c=h-d,m=n(c*c),y=i-m,w=p+f,b=p-f,v=n(b*t),_=n(w*c),E=v+_,A=v-_;p=n(E*E),f=n(o*n(A*A)),h=n(i*m),d=n(y*(i+n(l*y)))}a=u(g,h,p),h=a[0],p=a[1],a=u(g,d,f),d=a[0],f=a[1];const m=c(d);return n(h*m)}function d(e){return Vd(n(e),s)}function p(e){const t=Gd("u coordinate",e,s);return 32===o&&(t[31]&=127),Fd(t)}function f(e){const t=Gd("scalar",e),r=t.length;if(r!==s&&r!==o){let e=s+" or "+o;throw new Error("invalid scalar, expected "+e+" bytes, got "+r)}return Fd(a(t))}function g(e,t){const r=p(t),n=f(e),i=h(r,n);if(i===Gp)throw new Error("invalid private or public key received");return d(i)}const m=d(t.Gu);function y(e){return g(e,m)}return{scalarMult:g,scalarMultBase:y,getSharedSecret:(e,t)=>g(e,t),getPublicKey:e=>y(e),utils:{randomPrivateKey:()=>t.randomBytes(t.nByteLength)},GuBytes:m}}const Qp=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const ef=BigInt(1),tf=BigInt(2),rf=BigInt(3),nf=BigInt(5);function sf(e){const t=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),s=Qp,o=e*e%s*e%s,a=Ap(o,tf,s)*o%s,c=Ap(a,ef,s)*e%s,u=Ap(c,nf,s)*c%s,l=Ap(u,t,s)*u%s,h=Ap(l,r,s)*l%s,d=Ap(h,n,s)*h%s,p=Ap(d,i,s)*d%s,f=Ap(p,i,s)*d%s,g=Ap(f,t,s)*u%s;return{pow_p_5_8:Ap(g,tf,s)*e%s,b2:o}}function of(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}BigInt(8);const af=Xp({P:Qp,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:e=>{const t=Qp,{pow_p_5_8:r,b2:n}=sf(e);return _p(Ap(r,rf,t)*n,t)},adjustScalarBytes:of,randomBytes:Al});function cf(e){void 0!==e.lowS&&Ud("lowS",e.lowS),void 0!==e.prehash&&Ud("prehash",e.prehash)}function uf(e){const t=Yp(e);lp(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:lf,hexToBytes:hf}=pp;class df extends Error{constructor(e=""){super(e)}}const pf={Err:df,_tlv:{encode:(e,t)=>{const{Err:r}=pf;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(1&t.length)throw new r("tlv.encode: unpadded data");const n=t.length/2,i=Wd(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");const s=n>127?Wd(i.length/2|128):"";return Wd(e)+s+i+t},decode(e,t){const{Err:r}=pf;let n=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[n++]!==e)throw new r("tlv.decode: wrong tlv");const i=t[n++],s=!!(128&i);let o=0;if(s){const e=127&i;if(!e)throw new r("tlv.decode(long): indefinite length not supported");if(e>4)throw new r("tlv.decode(long): byte length is too big");const s=t.subarray(n,n+e);if(s.length!==e)throw new r("tlv.decode: length bytes not complete");if(0===s[0])throw new r("tlv.decode(long): zero leftmost byte");for(const t of s)o=o<<8|t;if(n+=e,o<128)throw new r("tlv.decode(long): not minimal encoding")}else o=i;const a=t.subarray(n,n+o);if(a.length!==o)throw new r("tlv.decode: wrong value length");return{v:a,l:t.subarray(n+o)}}},_int:{encode(e){const{Err:t}=pf;if(e<ff)throw new t("integer: negative integers are not allowed");let r=Wd(e);if(8&Number.parseInt(r[0],16)&&(r="00"+r),1&r.length)throw new t("unexpected DER parsing assertion: unpadded hex");return r},decode(e){const{Err:t}=pf;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return lf(e)}},toSig(e){const{Err:t,_int:r,_tlv:n}=pf,i="string"==typeof e?hf(e):e;Bd(i);const{v:s,l:o}=n.decode(48,i);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:a,l:c}=n.decode(2,s),{v:u,l:l}=n.decode(2,c);if(l.length)throw new t("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(u)}},hexFromSig(e){const{_tlv:t,_int:r}=pf,n=t.encode(2,r.encode(e.r)),i=t.encode(2,r.encode(e.s)),s=n+i;return t.encode(48,s)}},ff=BigInt(0),gf=BigInt(1);BigInt(2);const mf=BigInt(3);function yf(e){const t=uf(e),{Fp:r}=t,n=xp(t.n,t.nBitLength),i=t.toBytes||((e,t,n)=>{const i=t.toAffine();return Zd(Uint8Array.from([4]),r.toBytes(i.x),r.toBytes(i.y))}),s=t.fromBytes||(e=>{const t=e.subarray(1),n=r.fromBytes(t.subarray(0,r.BYTES)),i=r.fromBytes(t.subarray(r.BYTES,2*r.BYTES));return{x:n,y:i}});function o(e){const{a:n,b:i}=t,s=r.sqr(e),o=r.mul(s,e);return r.add(r.add(o,r.mul(e,n)),i)}if(!r.eql(r.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function a(e){return ep(e,gf,t.n)}function c(e){const{allowedPrivateKeyLengths:r,nByteLength:n,wrapPrivateKey:i,n:s}=t;if(r&&"bigint"!=typeof e){if(Md(e)&&(e=Dd(e)),"string"!=typeof e||!r.includes(e.length))throw new Error("invalid private key");e=e.padStart(2*n,"0")}let o;try{o="bigint"==typeof e?e:$d(Gd("private key",e,n))}catch{throw new Error("invalid private key, expected hex or "+n+" bytes, got "+typeof e)}return i&&(o=_p(o,s)),tp("private key",o,gf,s),o}function u(e){if(!(e instanceof d))throw new Error("ProjectivePoint expected")}const l=dp(((e,t)=>{const{px:n,py:i,pz:s}=e;if(r.eql(s,r.ONE))return{x:n,y:i};const o=e.is0();null==t&&(t=o?r.ONE:r.inv(s));const a=r.mul(n,t),c=r.mul(i,t),u=r.mul(s,t);if(o)return{x:r.ZERO,y:r.ZERO};if(!r.eql(u,r.ONE))throw new Error("invZ was invalid");return{x:a,y:c}})),h=dp((e=>{if(e.is0()){if(t.allowInfinityPoint&&!r.is0(e.py))return;throw new Error("bad point: ZERO")}const{x:n,y:i}=e.toAffine();if(!r.isValid(n)||!r.isValid(i))throw new Error("bad point: x or y not FE");const s=r.sqr(i),a=o(n);if(!r.eql(s,a))throw new Error("bad point: equation left != right");if(!e.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0}));class d{constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!r.isValid(e))throw new Error("x required");if(null==t||!r.isValid(t))throw new Error("y required");if(null==n||!r.isValid(n))throw new Error("z required");Object.freeze(this)}static fromAffine(e){const{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw new Error("invalid affine point");if(e instanceof d)throw new Error("projective point not allowed");const i=e=>r.eql(e,r.ZERO);return i(t)&&i(n)?d.ZERO:new d(t,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=r.invertBatch(e.map((e=>e.pz)));return e.map(((e,r)=>e.toAffine(t[r]))).map(d.fromAffine)}static fromHex(e){const t=d.fromAffine(s(Gd("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return d.BASE.multiply(c(e))}static msm(e,t){return Vp(d,n,e,t)}_setWindowSize(e){f.setWindowSize(this,e)}assertValidity(){h(this)}hasEvenY(){const{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){u(e);const{px:t,py:n,pz:i}=this,{px:s,py:o,pz:a}=e,c=r.eql(r.mul(t,a),r.mul(s,i)),l=r.eql(r.mul(n,a),r.mul(o,i));return c&&l}negate(){return new d(this.px,r.neg(this.py),this.pz)}double(){const{a:e,b:n}=t,i=r.mul(n,mf),{px:s,py:o,pz:a}=this;let c=r.ZERO,u=r.ZERO,l=r.ZERO,h=r.mul(s,s),p=r.mul(o,o),f=r.mul(a,a),g=r.mul(s,o);return g=r.add(g,g),l=r.mul(s,a),l=r.add(l,l),c=r.mul(e,l),u=r.mul(i,f),u=r.add(c,u),c=r.sub(p,u),u=r.add(p,u),u=r.mul(c,u),c=r.mul(g,c),l=r.mul(i,l),f=r.mul(e,f),g=r.sub(h,f),g=r.mul(e,g),g=r.add(g,l),l=r.add(h,h),h=r.add(l,h),h=r.add(h,f),h=r.mul(h,g),u=r.add(u,h),f=r.mul(o,a),f=r.add(f,f),h=r.mul(f,g),c=r.sub(c,h),l=r.mul(f,p),l=r.add(l,l),l=r.add(l,l),new d(c,u,l)}add(e){u(e);const{px:n,py:i,pz:s}=this,{px:o,py:a,pz:c}=e;let l=r.ZERO,h=r.ZERO,p=r.ZERO;const f=t.a,g=r.mul(t.b,mf);let m=r.mul(n,o),y=r.mul(i,a),w=r.mul(s,c),b=r.add(n,i),v=r.add(o,a);b=r.mul(b,v),v=r.add(m,y),b=r.sub(b,v),v=r.add(n,s);let _=r.add(o,c);return v=r.mul(v,_),_=r.add(m,w),v=r.sub(v,_),_=r.add(i,s),l=r.add(a,c),_=r.mul(_,l),l=r.add(y,w),_=r.sub(_,l),p=r.mul(f,v),l=r.mul(g,w),p=r.add(l,p),l=r.sub(y,p),p=r.add(y,p),h=r.mul(l,p),y=r.add(m,m),y=r.add(y,m),w=r.mul(f,w),v=r.mul(g,v),y=r.add(y,w),w=r.sub(m,w),w=r.mul(f,w),v=r.add(v,w),m=r.mul(y,v),h=r.add(h,m),m=r.mul(_,v),l=r.mul(b,l),l=r.sub(l,m),m=r.mul(b,y),p=r.mul(_,p),p=r.add(p,m),new d(l,h,p)}subtract(e){return this.add(e.negate())}is0(){return this.equals(d.ZERO)}wNAF(e){return f.wNAFCached(this,e,d.normalizeZ)}multiplyUnsafe(e){const{endo:n,n:i}=t;tp("scalar",e,ff,i);const s=d.ZERO;if(e===ff)return s;if(this.is0()||e===gf)return this;if(!n||f.hasPrecomputes(this))return f.wNAFCachedUnsafe(this,e,d.normalizeZ);let{k1neg:o,k1:a,k2neg:c,k2:u}=n.splitScalar(e),l=s,h=s,p=this;for(;a>ff||u>ff;)a&gf&&(l=l.add(p)),u&gf&&(h=h.add(p)),p=p.double(),a>>=gf,u>>=gf;return o&&(l=l.negate()),c&&(h=h.negate()),h=new d(r.mul(h.px,n.beta),h.py,h.pz),l.add(h)}multiply(e){const{endo:n,n:i}=t;let s,o;if(tp("scalar",e,gf,i),n){const{k1neg:t,k1:i,k2neg:a,k2:c}=n.splitScalar(e);let{p:u,f:l}=this.wNAF(i),{p:h,f:p}=this.wNAF(c);u=f.constTimeNegate(t,u),h=f.constTimeNegate(a,h),h=new d(r.mul(h.px,n.beta),h.py,h.pz),s=u.add(h),o=l.add(p)}else{const{p:t,f:r}=this.wNAF(e);s=t,o=r}return d.normalizeZ([s,o])[0]}multiplyAndAddUnsafe(e,t,r){const n=d.BASE,i=(e,t)=>t!==ff&&t!==gf&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),s=i(this,t).add(i(e,r));return s.is0()?void 0:s}toAffine(e){return l(this,e)}isTorsionFree(){const{h:e,isTorsionFree:r}=t;if(e===gf)return!0;if(r)return r(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:r}=t;return e===gf?this:r?r(d,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return Ud("isCompressed",e),this.assertValidity(),i(d,this,e)}toHex(e=!0){return Ud("isCompressed",e),Dd(this.toRawBytes(e))}}d.BASE=new d(t.Gx,t.Gy,r.ONE),d.ZERO=new d(r.ZERO,r.ONE,r.ZERO);const p=t.nBitLength,f=Kp(d,t.endo?Math.ceil(p/2):p);return{CURVE:t,ProjectivePoint:d,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function wf(e){const t=Yp(e);return lp(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function bf(e){const t=wf(e),{Fp:r,n:n}=t,i=r.BYTES+1,s=2*r.BYTES+1;function o(e){return _p(e,n)}function a(e){return Ip(e,n)}const{ProjectivePoint:c,normPrivateKeyToScalar:u,weierstrassEquation:l,isWithinCurveOrder:h}=yf({...t,toBytes(e,t,n){const i=t.toAffine(),s=r.toBytes(i.x),o=Zd;return Ud("isCompressed",n),n?o(Uint8Array.from([t.hasEvenY()?2:3]),s):o(Uint8Array.from([4]),s,r.toBytes(i.y))},fromBytes(e){const t=e.length,n=e[0],o=e.subarray(1);if(t!==i||2!==n&&3!==n){if(t===s&&4===n){const e=r.fromBytes(o.subarray(0,r.BYTES)),t=r.fromBytes(o.subarray(r.BYTES,2*r.BYTES));return{x:e,y:t}}{const e=i,r=s;throw new Error("invalid Point, expected length of "+e+", or uncompressed "+r+", got "+t)}}{const e=$d(o);if(!ep(e,gf,r.ORDER))throw new Error("Point is not on curve");const t=l(e);let i;try{i=r.sqrt(t)}catch(De){const t=De instanceof Error?": "+De.message:"";throw new Error("Point is not on curve"+t)}const s=(i&gf)===gf;return 1===(1&n)!==s&&(i=r.neg(i)),{x:e,y:i}}}}),d=e=>Dd(Kd(e,t.nByteLength));function p(e){const t=n>>gf;return e>t}function f(e){return p(e)?o(-e):e}const g=(e,t,r)=>$d(e.slice(t,r));class m{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){const r=t.nByteLength;return e=Gd("compactSignature",e,2*r),new m(g(e,0,r),g(e,r,2*r))}static fromDER(e){const{r:t,s:r}=pf.toSig(Gd("DER",e));return new m(t,r)}assertValidity(){tp("r",this.r,gf,n),tp("s",this.s,gf,n)}addRecoveryBit(e){return new m(this.r,this.s,e)}recoverPublicKey(e){const{r:n,s:i,recovery:s}=this,u=E(Gd("msgHash",e));if(null==s||![0,1,2,3].includes(s))throw new Error("recovery id invalid");const l=2===s||3===s?n+t.n:n;if(l>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const h=0===(1&s)?"02":"03",p=c.fromHex(h+d(l)),f=a(l),g=o(-u*f),m=o(i*f),y=c.BASE.multiplyAndAddUnsafe(p,g,m);if(!y)throw new Error("point at infinify");return y.assertValidity(),y}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return qd(this.toDERHex())}toDERHex(){return pf.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return qd(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}}const y={isValidPrivateKey(e){try{return u(e),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const e=Mp(t.n);return Bp(t.randomBytes(e),t.n)},precompute(e=8,t=c.BASE){return t._setWindowSize(e),t.multiply(BigInt(3)),t}};function w(e,t=!0){return c.fromPrivateKey(e).toRawBytes(t)}function b(e){const t=Md(e),r="string"==typeof e,n=(t||r)&&e.length;return t?n===i||n===s:r?n===2*i||n===2*s:e instanceof c}function v(e,t,r=!0){if(b(e))throw new Error("first arg must be private key");if(!b(t))throw new Error("second arg must be public key");return c.fromHex(t).multiply(u(e)).toRawBytes(r)}const _=t.bits2int||function(e){if(e.length>8192)throw new Error("input is too large");const r=$d(e),n=8*e.length-t.nBitLength;return n>0?r>>BigInt(n):r},E=t.bits2int_modN||function(e){return o(_(e))},A=sp(t.nBitLength);function I(e){return tp("num < 2^"+t.nBitLength,e,ff,A),Kd(e,t.nByteLength)}function S(e,n,i=C){if(["recovered","canonical"].some((e=>e in i)))throw new Error("sign() legacy options not supported");const{hash:s,randomBytes:l}=t;let{lowS:d,prehash:g,extraEntropy:y}=i;null==d&&(d=!0),e=Gd("msgHash",e),cf(i),g&&(e=Gd("prehashed msgHash",s(e)));const w=E(e),b=u(n),v=[I(b),I(w)];if(null!=y&&!1!==y){const e=!0===y?l(r.BYTES):y;v.push(Gd("extraEntropy",e))}const A=Zd(...v),S=w;function k(e){const t=_(e);if(!h(t))return;const r=a(t),n=c.BASE.multiply(t).toAffine(),i=o(n.x);if(i===ff)return;const s=o(r*o(S+i*b));if(s===ff)return;let u=(n.x===i?0:2)|Number(n.y&gf),l=s;return d&&p(s)&&(l=f(s),u^=1),new m(i,l,u)}return{seed:A,k2sig:k}}const C={lowS:t.lowS,prehash:!1},k={lowS:t.lowS,prehash:!1};function N(e,r,n=C){const{seed:i,k2sig:s}=S(e,r,n),o=t;return cp(o.hash.outputLen,o.nByteLength,o.hmac)(i,s)}function O(e,r,n,i=k){const s=e;r=Gd("msgHash",r),n=Gd("publicKey",n);const{lowS:u,prehash:l,format:h}=i;if(cf(i),"strict"in i)throw new Error("options.strict was renamed to lowS");if(void 0!==h&&"compact"!==h&&"der"!==h)throw new Error("format must be compact or der");const d="string"==typeof s||Md(s),p=!d&&!h&&"object"==typeof s&&null!==s&&"bigint"==typeof s.r&&"bigint"==typeof s.s;if(!d&&!p)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let f,g;try{if(p&&(f=new m(s.r,s.s)),d){try{"compact"!==h&&(f=m.fromDER(s))}catch(jt){if(!(jt instanceof pf.Err))throw jt}!f&&"der"!==h&&(f=m.fromCompact(s))}g=c.fromHex(n)}catch{return!1}if(!f||u&&f.hasHighS())return!1;l&&(r=t.hash(r));const{r:y,s:w}=f,b=E(r),v=a(w),_=o(b*v),A=o(y*v),I=c.BASE.multiplyAndAddUnsafe(g,_,A)?.toAffine();return!!I&&o(I.x)===y}return c.BASE._setWindowSize(8),{CURVE:t,getPublicKey:w,getSharedSecret:v,sign:N,verify:O,ProjectivePoint:c,Signature:m,utils:y}}function vf(e){return{hash:e,hmac:(t,...r)=>md(e,t,vl(...r)),randomBytes:Al}}function _f(e,t){const r=t=>bf({...e,...vf(t)});return{...r(t),create:r}}BigInt(4);const Ef=xp(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),Af=Ef.create(BigInt("-3")),If=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Sf=_f({a:Af,b:If,Fp:Ef,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},Td),Cf="base10",kf="base16",Nf="base64pad",Of="base64url",Tf="utf8",Rf=0,xf=1,Pf=2,Mf=0,Bf=1,Uf=12,Lf=32;function Df(){const e=af.utils.randomPrivateKey(),t=af.getPublicKey(e);return{privateKey:Gc(e,kf),publicKey:Gc(t,kf)}}function Wf(){const e=Al(Lf);return Gc(e,kf)}function jf(e,t){const r=af.getSharedSecret(Yc(e,kf),Yc(t,kf)),n=_d(Td,r,void 0,void 0,Lf);return Gc(n,kf)}function zf(e){const t=Td(Yc(e,kf));return Gc(t,kf)}function Hf(e){const t=Td(Yc(e,Tf));return Gc(t,kf)}function qf(e){return Yc(`${e}`,Cf)}function $f(e){return Number(Gc(e,Cf))}function Ff(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function Kf(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),r=(4-t.length%4)%4;return t+"=".repeat(r)}function Vf(e){const t=qf(typeof e.type<"u"?e.type:Rf);if($f(t)===xf&&typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof e.senderPublicKey<"u"?Yc(e.senderPublicKey,kf):void 0,n=typeof e.iv<"u"?Yc(e.iv,kf):Al(Uf),i=Yc(e.symKey,kf),s=fd(i,n).encrypt(Yc(e.message,Tf)),o=Jf({type:t,sealed:s,iv:n,senderPublicKey:r});return e.encoding===Of?Ff(o):o}function Yf(e){const t=Yc(e.symKey,kf),{sealed:r,iv:n}=Xf({encoded:e.encoded,encoding:e.encoding}),i=fd(t,n).decrypt(r);if(null===i)throw new Error("Failed to decrypt");return Gc(i,Tf)}function Gf(e,t){const r=qf(Pf),n=Al(Uf),i=Yc(e,Tf),s=Jf({type:r,sealed:i,iv:n});return t===Of?Ff(s):s}function Zf(e,t){const{sealed:r}=Xf({encoded:e,encoding:t});return Gc(r,Tf)}function Jf(e){if($f(e.type)===Pf)return Gc(ra([e.type,e.sealed]),Nf);if($f(e.type)===xf){if(typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Gc(ra([e.type,e.senderPublicKey,e.iv,e.sealed]),Nf)}return Gc(ra([e.type,e.iv,e.sealed]),Nf)}function Xf(e){const t=(e.encoding||Nf)===Of?Kf(e.encoded):e.encoded,r=Yc(t,Nf),n=r.slice(Mf,Bf),i=Bf;if($f(n)===xf){const e=i+Lf,t=e+Uf,s=r.slice(i,e),o=r.slice(e,t),a=r.slice(t);return{type:n,sealed:a,iv:o,senderPublicKey:s}}if($f(n)===Pf){const e=r.slice(i),t=Al(Uf);return{type:n,sealed:e,iv:t}}const s=i+Uf,o=r.slice(i,s),a=r.slice(s);return{type:n,sealed:a,iv:o}}function Qf(e,t){const r=Xf({encoded:e,encoding:t?.encoding});return eg({type:$f(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?Gc(r.senderPublicKey,kf):void 0,receiverPublicKey:t?.receiverPublicKey})}function eg(e){const t=e?.type||Rf;if(t===xf){if(typeof e?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function tg(e){return e.type===xf&&"string"==typeof e.senderPublicKey&&"string"==typeof e.receiverPublicKey}function rg(e){return e.type===Pf}function ng(e){const t=Buffer.from(e.x,"base64"),r=Buffer.from(e.y,"base64");return ra([new Uint8Array([4]),t,r])}function ig(e,t){const[r,n,i]=e.split("."),s=Buffer.from(Kf(i),"base64");if(64!==s.length)throw new Error("Invalid signature length");const o=s.slice(0,32),a=s.slice(32,64),c=`${r}.${n}`,u=Td(c),l=ng(t);if(!Sf.verify(ra([o,a]),u,l))throw new Error("Invalid signature");return vs(e).payload}const sg="irn";function og(e){return e?.relay||{protocol:sg}}function ag(e){const t=Zc[e];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${e}`);return t}function cg(e,t="-"){const r={},n="relay"+t;return Object.keys(e).forEach((t=>{if(t.startsWith(n)){const i=t.replace(n,""),s=e[t];r[i]=s}})),r}function ug(e){if(!e.includes("wc:")){const t=Gu(e);null!=t&&t.includes("wc:")&&(e=t)}e=e.includes("wc://")?e.replace("wc://",""):e,e=e.includes("wc:")?e.replace("wc:",""):e;const t=e.indexOf(":"),r=-1!==e.indexOf("?")?e.indexOf("?"):void 0,n=e.substring(0,t),i=e.substring(t+1,r).split("@"),s=typeof r<"u"?e.substring(r):"",o=new URLSearchParams(s),a={};o.forEach(((e,t)=>{a[t]=e}));const c="string"==typeof a.methods?a.methods.split(","):void 0;return{protocol:n,topic:lg(i[0]),version:parseInt(i[1],10),symKey:a.symKey,relay:cg(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function lg(e){return e.startsWith("//")?e.substring(2):e}function hg(e,t="-"){const r="relay",n={};return Object.keys(e).forEach((i=>{const s=i,o=r+t+s;e[s]&&(n[o]=e[s])})),n}function dg(e){const t=new URLSearchParams,r=hg(e.relay);Object.keys(r).sort().forEach((e=>{t.set(e,r[e])})),t.set("symKey",e.symKey),e.expiryTimestamp&&t.set("expiryTimestamp",e.expiryTimestamp.toString()),e.methods&&t.set("methods",e.methods.join(","));const n=t.toString();return`${e.protocol}:${e.topic}@${e.version}?${n}`}function pg(e,t,r){return`${e}?wc_ev=${r}&topic=${t}`}Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;function fg(e){const t=[];return e.forEach((e=>{const[r,n]=e.split(":");t.push(`${r}:${n}`)})),t}function gg(e){const t=[];return Object.values(e).forEach((e=>{t.push(...fg(e.accounts))})),t}function mg(e,t){const r=[];return Object.values(e).forEach((e=>{fg(e.accounts).includes(t)&&r.push(...e.methods)})),r}function yg(e,t){const r=[];return Object.values(e).forEach((e=>{fg(e.accounts).includes(t)&&r.push(...e.events)})),r}function wg(e){return e.includes(":")}function bg(e){return wg(e)?e.split(":")[0]:e}function vg(e){const t={};return e?.forEach((e=>{var r;const[n,i]=e.split(":");t[n]||(t[n]={accounts:[],chains:[],events:[],methods:[]}),t[n].accounts.push(e),null==(r=t[n].chains)||r.push(`${n}:${i}`)})),t}function _g(e,t){t=t.map((e=>e.replace("did:pkh:","")));const r=vg(t);for(const[n,i]of Object.entries(r))i.methods?i.methods=Du(i.methods,e):i.methods=e,i.events=["chainChanged","accountsChanged"];return r}const Eg={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Ag={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Ig(e,t){const{message:r,code:n}=Ag[e];return{message:t?`${r} ${t}`:r,code:n}}function Sg(e,t){const{message:r,code:n}=Eg[e];return{message:t?`${r} ${t}`:r,code:n}}function Cg(e,t){return!!Array.isArray(e)&&(!(typeof t<"u"&&e.length)||e.every(t))}function kg(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function Ng(e){return typeof e>"u"}function Og(e,t){return!(!t||!Ng(e))||"string"==typeof e&&!!e.trim().length}function Tg(e,t){return!(!t||!Ng(e))||"number"==typeof e&&!isNaN(e)}function Rg(e,t){const{requiredNamespaces:r}=t,n=Object.keys(e.namespaces),i=Object.keys(r);let s=!0;return!!Cu(i,n)&&(n.forEach((t=>{const{accounts:n,methods:i,events:o}=e.namespaces[t],a=fg(n),c=r[t];(!Cu(Qc(t,c),a)||!Cu(c.methods,i)||!Cu(c.events,o))&&(s=!1)})),s)}function xg(e){return!(!Og(e,!1)||!e.includes(":"))&&2===e.split(":").length}function Pg(e){if(Og(e,!1)&&e.includes(":")){const t=e.split(":");if(3===t.length){const e=t[0]+":"+t[1];return!!t[2]&&xg(e)}}return!1}function Mg(e){function t(e){try{return typeof new URL(e)<"u"}catch{return!1}}try{if(Og(e,!1)){if(t(e))return!0;const r=Gu(e);return t(r)}}catch{}return!1}function Bg(e){var t;return null==(t=e?.proposer)?void 0:t.publicKey}function Ug(e){return e?.topic}function Lg(e,t){let r=null;return Og(e?.publicKey,!1)||(r=Ig("MISSING_OR_INVALID",`${t} controller public key should be a string`)),r}function Dg(e){let t=!0;return Cg(e)?e.length&&(t=e.every((e=>Og(e,!1)))):t=!1,t}function Wg(e,t,r){let n=null;return Cg(t)&&t.length?t.forEach((e=>{n||xg(e)||(n=Sg("UNSUPPORTED_CHAINS",`${r}, chain ${e} should be a string and conform to "namespace:chainId" format`))})):xg(e)||(n=Sg("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}function jg(e,t,r){let n=null;return Object.entries(e).forEach((([e,i])=>{if(n)return;const s=Wg(e,Qc(e,i),`${t} ${r}`);s&&(n=s)})),n}function zg(e,t){let r=null;return Cg(e)?e.forEach((e=>{r||Pg(e)||(r=Sg("UNSUPPORTED_ACCOUNTS",`${t}, account ${e} should be a string and conform to "namespace:chainId:address" format`))})):r=Sg("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function Hg(e,t){let r=null;return Object.values(e).forEach((e=>{if(r)return;const n=zg(e?.accounts,`${t} namespace`);n&&(r=n)})),r}function qg(e,t){let r=null;return Dg(e?.methods)?Dg(e?.events)||(r=Sg("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):r=Sg("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),r}function $g(e,t){let r=null;return Object.values(e).forEach((e=>{if(r)return;const n=qg(e,`${t}, namespace`);n&&(r=n)})),r}function Fg(e,t,r){let n=null;if(e&&kg(e)){const i=$g(e,t);i&&(n=i);const s=jg(e,t,r);s&&(n=s)}else n=Ig("MISSING_OR_INVALID",`${t}, ${r} should be an object with data`);return n}function Kg(e,t){let r=null;if(e&&kg(e)){const n=$g(e,t);n&&(r=n);const i=Hg(e,t);i&&(r=i)}else r=Ig("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return r}function Vg(e){return Og(e.protocol,!0)}function Yg(e,t){let r=!1;return t&&!e?r=!0:e&&Cg(e)&&e.length&&e.forEach((e=>{r=Vg(e)})),r}function Gg(e){return"number"==typeof e}function Zg(e){return typeof e<"u"&&null!==typeof e}function Jg(e){return!(!e||"object"!=typeof e||!e.code||!Tg(e.code,!1)||!e.message||!Og(e.message,!1))}function Xg(e){return!(Ng(e)||!Og(e.method,!1))}function Qg(e){return!(Ng(e)||Ng(e.result)&&Ng(e.error)||!Tg(e.id,!1)||!Og(e.jsonrpc,!1))}function em(e){return!(Ng(e)||!Og(e.name,!1))}function tm(e,t){return!(!xg(t)||!gg(e).includes(t))}function rm(e,t,r){return!!Og(r,!1)&&mg(e,t).includes(r)}function nm(e,t,r){return!!Og(r,!1)&&yg(e,t).includes(r)}function im(e,t,r){let n=null;const i=sm(e),s=am(t),o=Object.keys(i),a=Object.keys(s),c=om(Object.keys(e)),u=om(Object.keys(t)),l=c.filter((e=>!u.includes(e)));return l.length&&(n=Ig("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.\n      Required: ${l.toString()}\n      Received: ${Object.keys(t).toString()}`)),Cu(o,a)||(n=Ig("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.\n      Required: ${o.toString()}\n      Approved: ${a.toString()}`)),Object.keys(t).forEach((e=>{if(!e.includes(":")||n)return;const i=fg(t[e].accounts);i.includes(e)||(n=Ig("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${e}\n        Required: ${e}\n        Approved: ${i.toString()}`))})),o.forEach((e=>{n||(Cu(i[e].methods,s[e].methods)?Cu(i[e].events,s[e].events)||(n=Ig("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${e}`)):n=Ig("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${e}`))})),n}function sm(e){const t={};return Object.keys(e).forEach((r=>{var n;r.includes(":")?t[r]=e[r]:null==(n=e[r].chains)||n.forEach((n=>{t[n]={methods:e[r].methods,events:e[r].events}}))})),t}function om(e){return[...new Set(e.map((e=>e.includes(":")?e.split(":")[0]:e)))]}function am(e){const t={};return Object.keys(e).forEach((r=>{if(r.includes(":"))t[r]=e[r];else{const n=fg(e[r].accounts);n?.forEach((n=>{t[n]={accounts:e[r].accounts.filter((e=>e.includes(`${n}:`))),methods:e[r].methods,events:e[r].events}}))}})),t}function cm(e,t){return Tg(e,!1)&&e<=t.max&&e>=t.min}function um(){const e=yu();return new Promise((t=>{switch(e){case lu.browser:t(lm());break;case lu.reactNative:t(hm());break;case lu.node:t(dm());break;default:t(!0)}}))}function lm(){return mu()&&navigator?.onLine}async function hm(){if(pu()&&typeof r.g<"u"&&null!=r.g&&r.g.NetInfo){const e=await(null==r.g?void 0:r.g.NetInfo.fetch());return e?.isConnected}return!0}function dm(){return!0}function pm(e){switch(yu()){case lu.browser:fm(e);break;case lu.reactNative:gm(e);break;case lu.node:break}}function fm(e){!pu()&&mu()&&(window.addEventListener("online",(()=>e(!0))),window.addEventListener("offline",(()=>e(!1))))}function gm(e){pu()&&typeof r.g<"u"&&null!=r.g&&r.g.NetInfo&&r.g?.NetInfo.addEventListener((t=>e(t?.isConnected)))}const mm={};class ym{static get(e){return mm[e]}static set(e,t){mm[e]=t}static delete(e){delete mm[e]}}const wm="PARSE_ERROR",bm="INVALID_REQUEST",vm="METHOD_NOT_FOUND",_m="INVALID_PARAMS",Em="INTERNAL_ERROR",Am="SERVER_ERROR",Im=[-32700,-32600,-32601,-32602,-32603],Sm={[wm]:{code:-32700,message:"Parse error"},[bm]:{code:-32600,message:"Invalid Request"},[vm]:{code:-32601,message:"Method not found"},[_m]:{code:-32602,message:"Invalid params"},[Em]:{code:-32603,message:"Internal error"},[Am]:{code:-32e3,message:"Server error"}},Cm=Am;function km(e){return Im.includes(e)}function Nm(e){return Object.keys(Sm).includes(e)?Sm[e]:Sm[Cm]}function Om(e){const t=Object.values(Sm).find((t=>t.code===e));return t||Sm[Cm]}function Tm(e,t,r){return e.message.includes("getaddrinfo ENOTFOUND")||e.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${t}`):e}var Rm=r(55603);function xm(e=3){const t=Date.now()*Math.pow(10,e),r=Math.floor(Math.random()*Math.pow(10,e));return t+r}function Pm(e=6){return BigInt(xm(e))}function Mm(e,t,r){return{id:r||xm(),jsonrpc:"2.0",method:e,params:t}}function Bm(e,t){return{id:e,jsonrpc:"2.0",result:t}}function Um(e,t,r){return{id:e,jsonrpc:"2.0",error:Lm(t,r)}}function Lm(e,t){return"undefined"===typeof e?Nm(Em):("string"===typeof e&&(e=Object.assign(Object.assign({},Nm(Am)),{message:e})),"undefined"!==typeof t&&(e.data=t),km(e.code)&&(e=Om(e.code)),e)}class Dm{}class Wm extends Dm{constructor(){super()}}class jm extends Wm{constructor(e){super()}}const zm="^https?:",Hm="^wss?:";function qm(e){const t=e.match(new RegExp(/^\w+:/,"gi"));if(t&&t.length)return t[0]}function $m(e,t){const r=qm(e);return"undefined"!==typeof r&&new RegExp(t).test(r)}function Fm(e){return $m(e,zm)}function Km(e){return $m(e,Hm)}function Vm(e){return new RegExp("wss?://localhost(:d{2,5})?").test(e)}function Ym(e){return"object"===typeof e&&"id"in e&&"jsonrpc"in e&&"2.0"===e.jsonrpc}function Gm(e){return Ym(e)&&"method"in e}function Zm(e){return Ym(e)&&(Jm(e)||Xm(e))}function Jm(e){return"result"in e}function Xm(e){return"error"in e}class Qm extends jm{constructor(e){super(e),this.events=new y.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(Mm(e.method,e.params||[],e.id||Pm().toString()),t)}async requestStrict(e,t){return new Promise((async(r,n)=>{if(!this.connection.connected)try{await this.open()}catch(_){n(_)}this.events.on(`${e.id}`,(e=>{Xm(e)?n(e.error):r(e.result)}));try{await this.connection.send(e,t)}catch(_){n(_)}}))}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Zm(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&3e3===e.code&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),"string"==typeof e&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",(e=>this.onPayload(e))),this.connection.on("close",(e=>this.onClose(e))),this.connection.on("error",(e=>this.events.emit("error",e))),this.connection.on("register_error",(e=>this.onClose())),this.hasRegisteredEventListeners=!0)}}const ey=()=>typeof WebSocket<"u"?WebSocket:typeof r.g<"u"&&typeof r.g.WebSocket<"u"?r.g.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:r(64828),ty=()=>typeof WebSocket<"u"||typeof r.g<"u"&&typeof r.g.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",ry=e=>e.split("?")[0],ny=10,iy=ey();class sy{constructor(e){if(this.url=e,this.events=new y.EventEmitter,this.registering=!1,!Km(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise(((e,t)=>{typeof this.socket>"u"?t(new Error("Connection already closed")):(this.socket.onclose=t=>{this.onClose(t),e()},this.socket.close())}))}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send((0,ce.h)(e))}catch(t){this.onError(e.id,t)}}register(e=this.url){if(!Km(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const e=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=e||this.events.listenerCount("open")>=e)&&this.events.setMaxListeners(e+1),new Promise(((e,t)=>{this.events.once("register_error",(e=>{this.resetMaxListeners(),t(e)})),this.events.once("open",(()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return t(new Error("WebSocket connection is missing or invalid"));e(this.socket)}))}))}return this.url=e,this.registering=!0,new Promise(((t,r)=>{const n=(0,Rm.isReactNative)()?void 0:{rejectUnauthorized:!Vm(e)},i=new iy(e,[],n);ty()?i.onerror=e=>{const t=e;r(this.emitError(t.error))}:i.on("error",(e=>{r(this.emitError(e))})),i.onopen=()=>{this.onOpen(i),t(i)}}))}onOpen(e){e.onmessage=e=>this.onPayload(e),e.onclose=e=>this.onClose(e),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t="string"==typeof e.data?(0,ce.j)(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const r=this.parseError(t),n=r.message||r.toString(),i=Um(e,n);this.events.emit("payload",i)}parseError(e,t=this.url){return Tm(e,ry(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>ny&&this.events.setMaxListeners(ny)}emitError(e){const t=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${ry(this.url)}`));return this.events.emit("register_error",t),t}}const oy="wc",ay=2,cy="core",uy=`${oy}@2:${cy}:`,ly={name:cy,logger:"error"},hy={database:":memory:"},dy="crypto",py="client_ed25519_seed",fy=b.ONE_DAY,gy="keychain",my="0.3",yy="messages",wy="0.3",by=b.SIX_HOURS,vy="publisher",_y="irn",Ey="error",Ay="wss://relay.walletconnect.org",Iy="relayer",Sy={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},Cy="_subscription",ky={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},Ny=.1,Oy="2.19.2",Ty={link_mode:"link_mode",relay:"relay"},Ry={inbound:"inbound",outbound:"outbound"},xy="0.3",Py="WALLETCONNECT_CLIENT_ID",My="WALLETCONNECT_LINK_MODE_APPS",By={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},Uy="subscription",Ly="0.3",Dy=(b.FIVE_SECONDS,"pairing"),Wy="0.3",jy={wc_pairingDelete:{req:{ttl:b.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:b.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:b.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:b.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:b.ONE_DAY,prompt:!1,tag:0},res:{ttl:b.ONE_DAY,prompt:!1,tag:0}}},zy={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Hy={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},qy="history",$y="0.3",Fy="expirer",Ky={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},Vy="0.3",Yy="verify-api",Gy="https://verify.walletconnect.com",Zy="https://verify.walletconnect.org",Jy=Zy,Xy=`${Jy}/v3`,Qy=[Gy,Zy],ew="echo",tw="https://echo.walletconnect.com",rw={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},nw={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},iw={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},sw={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},ow={authenticated_session_approve_started:"authenticated_session_approve_started",authenticated_session_not_expired:"authenticated_session_not_expired",chains_caip2_compliant:"chains_caip2_compliant",chains_evm_compliant:"chains_evm_compliant",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve",authenticated_session_approve_publish_success:"authenticated_session_approve_publish_success"},aw={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",missing_session_authenticate_request:"missing_session_authenticate_request",session_authenticate_request_expired:"session_authenticate_request_expired",chains_caip2_compliant_failure:"chains_caip2_compliant_failure",chains_evm_compliant_failure:"chains_evm_compliant_failure",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},cw=.1,uw="event-client",lw=86400,hw="https://pulse.walletconnect.org/batch";function dw(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(255!==r[o])throw new TypeError(s+" is ambiguous");r[o]=i}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,s=t.length;i!==s&&0===t[i];)i++,r++;for(var o=(s-i)*l+1>>>0,u=new Uint8Array(o);i!==s;){for(var h=t[i],d=0,p=o-1;(0!==h||d<n)&&-1!==p;p--,d++)h+=256*u[p]>>>0,u[p]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");n=d,i++}for(var f=o-n;f!==o&&0===u[f];)f++;for(var g=c.repeat(r);f<o;++f)g+=e.charAt(u[f]);return g}function d(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,i=0;e[t]===c;)n++,t++;for(var s=(e.length-t)*u+1>>>0,o=new Uint8Array(s);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var h=0,d=s-1;(0!==l||h<i)&&-1!==d;d--,h++)l+=a*o[d]>>>0,o[d]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=h,t++}if(" "!==e[t]){for(var p=s-i;p!==s&&0===o[p];)p++;for(var f=new Uint8Array(n+(s-p)),g=n;p!==s;)f[g++]=o[p++];return f}}}function p(e){var r=d(e);if(r)return r;throw new Error(`Non-${t} character`)}return{encode:h,decodeUnsafe:d,decode:p}}var pw=dw,fw=pw;const gw=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},mw=e=>(new TextEncoder).encode(e),yw=e=>(new TextDecoder).decode(e);class ww{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class bw{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return _w(this,e)}}class vw{constructor(e){this.decoders=e}or(e){return _w(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const _w=(e,t)=>new vw({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class Ew{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new ww(e,t,r),this.decoder=new bw(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Aw=({name:e,prefix:t,encode:r,decode:n})=>new Ew(e,t,r,n),Iw=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:i}=fw(r,t);return Aw({prefix:e,name:t,encode:n,decode:e=>gw(i(e))})},Sw=(e,t,r,n)=>{const i={};for(let l=0;l<t.length;++l)i[t[l]]=l;let s=e.length;for(;"="===e[s-1];)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,u=0;for(let l=0;l<s;++l){const t=i[e[l]];if(void 0===t)throw new SyntaxError(`Non-${n} character`);c=c<<r|t,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Cw=(e,t,r)=>{const n="="===t[t.length-1],i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],o+=8;o>r;)o-=r,s+=t[i&a>>o];if(o&&(s+=t[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},kw=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>Aw({prefix:t,name:e,encode(e){return Cw(e,n,r)},decode(t){return Sw(t,n,r,e)}}),Nw=Aw({prefix:"\0",name:"identity",encode:e=>yw(e),decode:e=>mw(e)});var Ow=Object.freeze({__proto__:null,identity:Nw});const Tw=kw({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Rw=Object.freeze({__proto__:null,base2:Tw});const xw=kw({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Pw=Object.freeze({__proto__:null,base8:xw});const Mw=Iw({prefix:"9",name:"base10",alphabet:"0123456789"});var Bw=Object.freeze({__proto__:null,base10:Mw});const Uw=kw({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Lw=kw({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Dw=Object.freeze({__proto__:null,base16:Uw,base16upper:Lw});const Ww=kw({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),jw=kw({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),zw=kw({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Hw=kw({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),qw=kw({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),$w=kw({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Fw=kw({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Kw=kw({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Vw=kw({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Yw=Object.freeze({__proto__:null,base32:Ww,base32upper:jw,base32pad:zw,base32padupper:Hw,base32hex:qw,base32hexupper:$w,base32hexpad:Fw,base32hexpadupper:Kw,base32z:Vw});const Gw=Iw({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Zw=Iw({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Jw=Object.freeze({__proto__:null,base36:Gw,base36upper:Zw});const Xw=Iw({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Qw=Iw({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var eb=Object.freeze({__proto__:null,base58btc:Xw,base58flickr:Qw});const tb=kw({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),rb=kw({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),nb=kw({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),ib=kw({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var sb=Object.freeze({__proto__:null,base64:tb,base64pad:rb,base64url:nb,base64urlpad:ib});const ob=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),ab=ob.reduce(((e,t,r)=>(e[r]=t,e)),[]),cb=ob.reduce(((e,t,r)=>(e[t.codePointAt(0)]=r,e)),[]);function ub(e){return e.reduce(((e,t)=>(e+=ab[t],e)),"")}function lb(e){const t=[];for(const r of e){const e=cb[r.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}const hb=Aw({prefix:"🚀",name:"base256emoji",encode:ub,decode:lb});var db=Object.freeze({__proto__:null,base256emoji:hb}),pb=wb,fb=128,gb=127,mb=~gb,yb=Math.pow(2,31);function wb(e,t,r){t=t||[],r=r||0;for(var n=r;e>=yb;)t[r++]=255&e|fb,e/=128;for(;e&mb;)t[r++]=255&e|fb,e>>>=7;return t[r]=0|e,wb.bytes=r-n+1,t}var bb=Eb,vb=128,_b=127;function Eb(e,t){var r,n=0,i=(t=t||0,0),s=t,o=e.length;do{if(s>=o)throw Eb.bytes=0,new RangeError("Could not decode varint");r=e[s++],n+=i<28?(r&_b)<<i:(r&_b)*Math.pow(2,i),i+=7}while(r>=vb);return Eb.bytes=s-t,n}var Ab=Math.pow(2,7),Ib=Math.pow(2,14),Sb=Math.pow(2,21),Cb=Math.pow(2,28),kb=Math.pow(2,35),Nb=Math.pow(2,42),Ob=Math.pow(2,49),Tb=Math.pow(2,56),Rb=Math.pow(2,63),xb=function(e){return e<Ab?1:e<Ib?2:e<Sb?3:e<Cb?4:e<kb?5:e<Nb?6:e<Ob?7:e<Tb?8:e<Rb?9:10},Pb={encode:pb,decode:bb,encodingLength:xb},Mb=Pb;const Bb=(e,t,r=0)=>(Mb.encode(e,t,r),t),Ub=e=>Mb.encodingLength(e),Lb=(e,t)=>{const r=t.byteLength,n=Ub(e),i=n+Ub(r),s=new Uint8Array(i+r);return Bb(e,s,0),Bb(r,s,n),s.set(t,i),new Db(e,r,t,s)};class Db{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}const Wb=({name:e,code:t,encode:r})=>new jb(e,t,r);class jb{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?Lb(this.code,t):t.then((e=>Lb(this.code,e)))}throw Error("Unknown type, must be binary type")}}const zb=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),Hb=Wb({name:"sha2-256",code:18,encode:zb("SHA-256")}),qb=Wb({name:"sha2-512",code:19,encode:zb("SHA-512")});Object.freeze({__proto__:null,sha256:Hb,sha512:qb});const $b=0,Fb="identity",Kb=gw,Vb=e=>Lb($b,Kb(e)),Yb={code:$b,name:Fb,encode:Kb,digest:Vb};Object.freeze({__proto__:null,identity:Yb});new TextEncoder,new TextDecoder;const Gb={...Ow,...Rw,...Pw,...Bw,...Dw,...Yw,...Jw,...eb,...sb,...db};function Zb(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}function Jb(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const Xb=Jb("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),Qb=Jb("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(e=>{e=e.substring(1);const t=Zb(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),ev={utf8:Xb,"utf-8":Xb,hex:Gb.base16,latin1:Qb,ascii:Qb,binary:Qb,...Gb};function tv(e,t="utf8"){const r=ev[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode(`${r.prefix}${e}`):globalThis.Buffer.from(e,"utf8")}var rv=Object.defineProperty,nv=(e,t,r)=>t in e?rv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,iv=(e,t,r)=>nv(e,"symbol"!=typeof t?t+"":t,r);class sv{constructor(e,t){this.core=e,this.logger=t,iv(this,"keychain",new Map),iv(this,"name",gy),iv(this,"version",my),iv(this,"initialized",!1),iv(this,"storagePrefix",uy),iv(this,"init",(async()=>{if(!this.initialized){const e=await this.getKeyChain();typeof e<"u"&&(this.keychain=e),this.initialized=!0}})),iv(this,"has",(e=>(this.isInitialized(),this.keychain.has(e)))),iv(this,"set",(async(e,t)=>{this.isInitialized(),this.keychain.set(e,t),await this.persist()})),iv(this,"get",(e=>{this.isInitialized();const t=this.keychain.get(e);if(typeof t>"u"){const{message:t}=Ig("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(t)}return t})),iv(this,"del",(async e=>{this.isInitialized(),this.keychain.delete(e),await this.persist()})),this.core=e,this.logger=(0,Ae.U5)(t,this.name)}get context(){return(0,Ae.oI)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,ku(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Nu(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=Ig("NOT_INITIALIZED",this.name);throw new Error(e)}}}var ov=Object.defineProperty,av=(e,t,r)=>t in e?ov(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,cv=(e,t,r)=>av(e,"symbol"!=typeof t?t+"":t,r);class uv{constructor(e,t,r){this.core=e,this.logger=t,cv(this,"name",dy),cv(this,"keychain"),cv(this,"randomSessionIdentifier",Wf()),cv(this,"initialized",!1),cv(this,"init",(async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)})),cv(this,"hasKeys",(e=>(this.isInitialized(),this.keychain.has(e)))),cv(this,"getClientId",(async()=>{this.isInitialized();const e=await this.getClientSeed(),t=_s(e);return gs(t.publicKey)})),cv(this,"generateKeyPair",(()=>{this.isInitialized();const e=Df();return this.setPrivateKey(e.publicKey,e.privateKey)})),cv(this,"signJWT",(async e=>{this.isInitialized();const t=await this.getClientSeed(),r=_s(t),n=this.randomSessionIdentifier,i=fy;return await Es(n,e,i,r)})),cv(this,"generateSharedKey",((e,t,r)=>{this.isInitialized();const n=this.getPrivateKey(e),i=jf(n,t);return this.setSymKey(i,r)})),cv(this,"setSymKey",(async(e,t)=>{this.isInitialized();const r=t||zf(e);return await this.keychain.set(r,e),r})),cv(this,"deleteKeyPair",(async e=>{this.isInitialized(),await this.keychain.del(e)})),cv(this,"deleteSymKey",(async e=>{this.isInitialized(),await this.keychain.del(e)})),cv(this,"encode",(async(e,t,r)=>{this.isInitialized();const n=eg(r),i=(0,ce.h)(t);if(rg(n))return Gf(i,r?.encoding);if(tg(n)){const t=n.senderPublicKey,r=n.receiverPublicKey;e=await this.generateSharedKey(t,r)}const s=this.getSymKey(e),{type:o,senderPublicKey:a}=n;return Vf({type:o,symKey:s,message:i,senderPublicKey:a,encoding:r?.encoding})})),cv(this,"decode",(async(e,t,r)=>{this.isInitialized();const n=Qf(t,r);if(rg(n)){const e=Zf(t,r?.encoding);return(0,ce.j)(e)}if(tg(n)){const t=n.receiverPublicKey,r=n.senderPublicKey;e=await this.generateSharedKey(t,r)}try{const n=this.getSymKey(e),i=Yf({symKey:n,encoded:t,encoding:r?.encoding});return(0,ce.j)(i)}catch(ge){this.logger.error(`Failed to decode message from topic: '${e}', clientId: '${await this.getClientId()}'`),this.logger.error(ge)}})),cv(this,"getPayloadType",((e,t=Nf)=>{const r=Xf({encoded:e,encoding:t});return $f(r.type)})),cv(this,"getPayloadSenderPublicKey",((e,t=Nf)=>{const r=Xf({encoded:e,encoding:t});return r.senderPublicKey?Gc(r.senderPublicKey,kf):void 0})),this.core=e,this.logger=(0,Ae.U5)(t,this.name),this.keychain=r||new sv(this.core,this.logger)}get context(){return(0,Ae.oI)(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(py)}catch{e=Wf(),await this.keychain.set(py,e)}return tv(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=Ig("NOT_INITIALIZED",this.name);throw new Error(e)}}}var lv=Object.defineProperty,hv=Object.defineProperties,dv=Object.getOwnPropertyDescriptors,pv=Object.getOwnPropertySymbols,fv=Object.prototype.hasOwnProperty,gv=Object.prototype.propertyIsEnumerable,mv=(e,t,r)=>t in e?lv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,yv=(e,t)=>{for(var r in t||(t={}))fv.call(t,r)&&mv(e,r,t[r]);if(pv)for(var r of pv(t))gv.call(t,r)&&mv(e,r,t[r]);return e},wv=(e,t)=>hv(e,dv(t)),bv=(e,t,r)=>mv(e,"symbol"!=typeof t?t+"":t,r);class vv extends xe{constructor(e,t){super(e,t),this.logger=e,this.core=t,bv(this,"messages",new Map),bv(this,"messagesWithoutClientAck",new Map),bv(this,"name",yy),bv(this,"version",wy),bv(this,"initialized",!1),bv(this,"storagePrefix",uy),bv(this,"init",(async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const e=await this.getRelayerMessages();typeof e<"u"&&(this.messages=e);const t=await this.getRelayerMessagesWithoutClientAck();typeof t<"u"&&(this.messagesWithoutClientAck=t),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(qe){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(qe)}finally{this.initialized=!0}}})),bv(this,"set",(async(e,t,r)=>{this.isInitialized();const n=Hf(t);let i=this.messages.get(e);if(typeof i>"u"&&(i={}),typeof i[n]<"u")return n;if(i[n]=t,this.messages.set(e,i),r===Ry.inbound){const r=this.messagesWithoutClientAck.get(e)||{};this.messagesWithoutClientAck.set(e,wv(yv({},r),{[n]:t}))}return await this.persist(),n})),bv(this,"get",(e=>{this.isInitialized();let t=this.messages.get(e);return typeof t>"u"&&(t={}),t})),bv(this,"getWithoutAck",(e=>{this.isInitialized();const t={};for(const r of e){const e=this.messagesWithoutClientAck.get(r)||{};t[r]=Object.values(e)}return t})),bv(this,"has",((e,t)=>{this.isInitialized();const r=this.get(e),n=Hf(t);return typeof r[n]<"u"})),bv(this,"ack",(async(e,t)=>{this.isInitialized();const r=this.messagesWithoutClientAck.get(e);if(typeof r>"u")return;const n=Hf(t);delete r[n],0===Object.keys(r).length?this.messagesWithoutClientAck.delete(e):this.messagesWithoutClientAck.set(e,r),await this.persist()})),bv(this,"del",(async e=>{this.isInitialized(),this.messages.delete(e),this.messagesWithoutClientAck.delete(e),await this.persist()})),this.logger=(0,Ae.U5)(e,this.name),this.core=t}get context(){return(0,Ae.oI)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,ku(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,ku(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Nu(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?Nu(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=Ig("NOT_INITIALIZED",this.name);throw new Error(e)}}}var _v=Object.defineProperty,Ev=Object.defineProperties,Av=Object.getOwnPropertyDescriptors,Iv=Object.getOwnPropertySymbols,Sv=Object.prototype.hasOwnProperty,Cv=Object.prototype.propertyIsEnumerable,kv=(e,t,r)=>t in e?_v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Nv=(e,t)=>{for(var r in t||(t={}))Sv.call(t,r)&&kv(e,r,t[r]);if(Iv)for(var r of Iv(t))Cv.call(t,r)&&kv(e,r,t[r]);return e},Ov=(e,t)=>Ev(e,Av(t)),Tv=(e,t,r)=>kv(e,"symbol"!=typeof t?t+"":t,r);class Rv extends Pe{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,Tv(this,"events",new y.EventEmitter),Tv(this,"name",vy),Tv(this,"queue",new Map),Tv(this,"publishTimeout",(0,b.toMiliseconds)(b.ONE_MINUTE)),Tv(this,"initialPublishTimeout",(0,b.toMiliseconds)(15*b.ONE_SECOND)),Tv(this,"needsTransportRestart",!1),Tv(this,"publish",(async(e,t,r)=>{var n;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:e,message:t,opts:r}});const i=r?.ttl||by,s=og(r),o=r?.prompt||!1,a=r?.tag||0,c=r?.id||Pm().toString(),u={topic:e,message:t,opts:{ttl:i,relay:s,prompt:o,tag:a,id:c,attestation:r?.attestation,tvf:r?.tvf}},l=`Failed to publish payload, please try again. id:${c} tag:${a}`;try{const n=new Promise((async n=>{const s=({id:e})=>{u.opts.id===e&&(this.removeRequestFromQueue(e),this.relayer.events.removeListener(Sy.publish,s),n(u))};this.relayer.events.on(Sy.publish,s);const l=Tu(new Promise(((n,s)=>{this.rpcPublish({topic:e,message:t,ttl:i,prompt:o,tag:a,id:c,attestation:r?.attestation,tvf:r?.tvf}).then(n).catch((e=>{this.logger.warn(e,e?.message),s(e)}))})),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${c} tag:${a}`);try{await l,this.events.removeListener(Sy.publish,s)}catch(he){this.queue.set(c,Ov(Nv({},u),{attempt:1})),this.logger.warn(he,he?.message)}}));this.logger.trace({type:"method",method:"publish",params:{id:c,topic:e,message:t,opts:r}}),await Tu(n,this.publishTimeout,l)}catch(Se){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(Se),null!=(n=r?.internal)&&n.throwOnFailedPublish)throw Se}finally{this.queue.delete(c)}})),Tv(this,"on",((e,t)=>{this.events.on(e,t)})),Tv(this,"once",((e,t)=>{this.events.once(e,t)})),Tv(this,"off",((e,t)=>{this.events.off(e,t)})),Tv(this,"removeListener",((e,t)=>{this.events.removeListener(e,t)})),this.relayer=e,this.logger=(0,Ae.U5)(t,this.name),this.registerEventListeners()}get context(){return(0,Ae.oI)(this.logger)}async rpcPublish(e){var t,r,n,i;const{topic:s,message:o,ttl:a=by,prompt:c,tag:u,id:l,attestation:h,tvf:d}=e,p={method:ag(og().protocol).publish,params:Nv({topic:s,message:o,ttl:a,prompt:c,tag:u,attestation:h},d),id:l};Ng(null==(t=p.params)?void 0:t.prompt)&&(null==(r=p.params)||delete r.prompt),Ng(null==(n=p.params)?void 0:n.tag)&&(null==(i=p.params)||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p});const f=await this.relayer.request(p);return this.relayer.events.emit(Sy.publish,e),this.logger.debug("Successfully Published Payload"),f}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach((async(e,t)=>{const r=e.attempt+1;this.queue.set(t,Ov(Nv({},e),{attempt:r}));const{topic:n,message:i,opts:s,attestation:o}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(Ov(Nv({},e),{topic:n,message:i,ttl:s.ttl,prompt:s.prompt,tag:s.tag,id:s.id,attestation:o,tvf:s.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)}))}registerEventListeners(){this.relayer.core.heartbeat.on(A.pulse,(()=>{if(this.needsTransportRestart)return this.needsTransportRestart=!1,void this.relayer.events.emit(Sy.connection_stalled);this.checkQueue()})),this.relayer.on(Sy.message_ack,(e=>{this.removeRequestFromQueue(e.id.toString())}))}}var xv=Object.defineProperty,Pv=(e,t,r)=>t in e?xv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Mv=(e,t,r)=>Pv(e,"symbol"!=typeof t?t+"":t,r);class Bv{constructor(){Mv(this,"map",new Map),Mv(this,"set",((e,t)=>{const r=this.get(e);this.exists(e,t)||this.map.set(e,[...r,t])})),Mv(this,"get",(e=>this.map.get(e)||[])),Mv(this,"exists",((e,t)=>this.get(e).includes(t))),Mv(this,"delete",((e,t)=>{if(typeof t>"u")return void this.map.delete(e);if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,t))return;const n=r.filter((e=>e!==t));n.length?this.map.set(e,n):this.map.delete(e)})),Mv(this,"clear",(()=>{this.map.clear()}))}get topics(){return Array.from(this.map.keys())}}var Uv=Object.defineProperty,Lv=Object.defineProperties,Dv=Object.getOwnPropertyDescriptors,Wv=Object.getOwnPropertySymbols,jv=Object.prototype.hasOwnProperty,zv=Object.prototype.propertyIsEnumerable,Hv=(e,t,r)=>t in e?Uv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,qv=(e,t)=>{for(var r in t||(t={}))jv.call(t,r)&&Hv(e,r,t[r]);if(Wv)for(var r of Wv(t))zv.call(t,r)&&Hv(e,r,t[r]);return e},$v=(e,t)=>Lv(e,Dv(t)),Fv=(e,t,r)=>Hv(e,"symbol"!=typeof t?t+"":t,r);class Kv extends Ue{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,Fv(this,"subscriptions",new Map),Fv(this,"topicMap",new Bv),Fv(this,"events",new y.EventEmitter),Fv(this,"name",Uy),Fv(this,"version",Ly),Fv(this,"pending",new Map),Fv(this,"cached",[]),Fv(this,"initialized",!1),Fv(this,"storagePrefix",uy),Fv(this,"subscribeTimeout",(0,b.toMiliseconds)(b.ONE_MINUTE)),Fv(this,"initialSubscribeTimeout",(0,b.toMiliseconds)(15*b.ONE_SECOND)),Fv(this,"clientId"),Fv(this,"batchSubscribeTopicsLimit",500),Fv(this,"init",(async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0})),Fv(this,"subscribe",(async(e,t)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}});try{const r=og(t),n={topic:e,relay:r,transportType:t?.transportType};this.pending.set(e,n);const i=await this.rpcSubscribe(e,r,t);return"string"==typeof i&&(this.onSubscribe(i,n),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}})),i}catch(_){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(_),_}})),Fv(this,"unsubscribe",(async(e,t)=>{this.isInitialized(),typeof t?.id<"u"?await this.unsubscribeById(e,t.id,t):await this.unsubscribeByTopic(e,t)})),Fv(this,"isSubscribed",(e=>new Promise((t=>{t(this.topicMap.topics.includes(e))})))),Fv(this,"isKnownTopic",(e=>new Promise((t=>{t(this.topicMap.topics.includes(e)||this.pending.has(e)||this.cached.some((t=>t.topic===e)))})))),Fv(this,"on",((e,t)=>{this.events.on(e,t)})),Fv(this,"once",((e,t)=>{this.events.once(e,t)})),Fv(this,"off",((e,t)=>{this.events.off(e,t)})),Fv(this,"removeListener",((e,t)=>{this.events.removeListener(e,t)})),Fv(this,"start",(async()=>{await this.onConnect()})),Fv(this,"stop",(async()=>{await this.onDisconnect()})),Fv(this,"restart",(async()=>{await this.restore(),await this.onRestart()})),Fv(this,"checkPending",(async()=>{if(0===this.pending.size&&(!this.initialized||!this.relayer.connected))return;const e=[];this.pending.forEach((t=>{e.push(t)})),await this.batchSubscribe(e)})),Fv(this,"registerEventListeners",(()=>{this.relayer.core.heartbeat.on(A.pulse,(async()=>{await this.checkPending()})),this.events.on(By.created,(async e=>{const t=By.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})),this.events.on(By.deleted,(async e=>{const t=By.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}))})),this.relayer=e,this.logger=(0,Ae.U5)(t,this.name),this.clientId=""}get context(){return(0,Ae.oI)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,t){let r=!1;try{r=this.getSubscription(e).topic===t}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const r=this.topicMap.get(e);await Promise.all(r.map((async r=>await this.unsubscribeById(e,r,t))))}async unsubscribeById(e,t,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}});try{const n=og(r);await this.restartToComplete({topic:e,id:t,relay:n}),await this.rpcUnsubscribe(e,t,n);const i=Sg("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}})}catch(E){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(E),E}}async rpcSubscribe(e,t,r){var n;(!r||r?.transportType===Ty.relay)&&await this.restartToComplete({topic:e,id:e,relay:t});const i={method:ag(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const s=null==(n=r?.internal)?void 0:n.throwOnFailedPublish;try{const t=await this.getSubscriptionId(e);if(r?.transportType===Ty.link_mode)return setTimeout((()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch((e=>this.logger.warn(e)))}),(0,b.toMiliseconds)(b.ONE_SECOND)),t;const n=new Promise((async t=>{const r=n=>{n.topic===e&&(this.events.removeListener(By.created,r),t(n.id))};this.events.on(By.created,r);try{const n=await Tu(new Promise(((e,t)=>{this.relayer.request(i).catch((e=>{this.logger.warn(e,e?.message),t(e)})).then(e)})),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(By.created,r),t(n)}catch{}})),o=await Tu(n,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!o&&s)throw new Error(`Subscribing to ${e} failed, please try again`);return o?t:null}catch(Ie){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Sy.connection_stalled),s)throw Ie}return null}async rpcBatchSubscribe(e){if(!e.length)return;const t=e[0].relay,r={method:ag(t.protocol).batchSubscribe,params:{topics:e.map((e=>e.topic))}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await Tu(new Promise((e=>{this.relayer.request(r).catch((e=>this.logger.warn(e))).then(e)})),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(Sy.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const t=e[0].relay,r={method:ag(t.protocol).batchFetchMessages,params:{topics:e.map((e=>e.topic))}};let n;this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{n=await await Tu(new Promise(((e,t)=>{this.relayer.request(r).catch((e=>{this.logger.warn(e),t(e)})).then(e)})),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(Sy.connection_stalled)}return n}rpcUnsubscribe(e,t,r){const n={method:ag(r.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n}),this.relayer.request(n)}onSubscribe(e,t){this.setSubscription(e,$v(qv({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach((e=>{this.setSubscription(e.id,qv({},e)),this.pending.delete(e.topic)}))}async onUnsubscribe(e,t,r){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t)}addSubscription(e,t){this.subscriptions.set(e,qv({},t)),this.topicMap.set(t.topic,e),this.events.emit(By.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:t}=Ig("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(t)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(By.deleted,$v(qv({},r),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(By.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],t=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<t;r++){const t=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(t)}}this.events.emit(By.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:e}=Ig("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(e)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map((async e=>$v(qv({},e),{id:await this.getSubscriptionId(e.topic)}))))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const t=await this.rpcBatchFetchMessages(e);t&&t.messages&&(await Zu((0,b.toMiliseconds)(b.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(t.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=Ig("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Hf(e+await this.getClientId())}}var Vv=Object.defineProperty,Yv=Object.getOwnPropertySymbols,Gv=Object.prototype.hasOwnProperty,Zv=Object.prototype.propertyIsEnumerable,Jv=(e,t,r)=>t in e?Vv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Xv=(e,t)=>{for(var r in t||(t={}))Gv.call(t,r)&&Jv(e,r,t[r]);if(Yv)for(var r of Yv(t))Zv.call(t,r)&&Jv(e,r,t[r]);return e},Qv=(e,t,r)=>Jv(e,"symbol"!=typeof t?t+"":t,r);class e_ extends Me{constructor(e){super(e),Qv(this,"protocol","wc"),Qv(this,"version",2),Qv(this,"core"),Qv(this,"logger"),Qv(this,"events",new y.EventEmitter),Qv(this,"provider"),Qv(this,"messages"),Qv(this,"subscriber"),Qv(this,"publisher"),Qv(this,"name",Iy),Qv(this,"transportExplicitlyClosed",!1),Qv(this,"initialized",!1),Qv(this,"connectionAttemptInProgress",!1),Qv(this,"relayUrl"),Qv(this,"projectId"),Qv(this,"packageName"),Qv(this,"bundleId"),Qv(this,"hasExperiencedNetworkDisruption",!1),Qv(this,"pingTimeout"),Qv(this,"heartBeatTimeout",(0,b.toMiliseconds)(b.THIRTY_SECONDS+b.FIVE_SECONDS)),Qv(this,"reconnectTimeout"),Qv(this,"connectPromise"),Qv(this,"reconnectInProgress",!1),Qv(this,"requestsInFlight",[]),Qv(this,"connectTimeout",(0,b.toMiliseconds)(15*b.ONE_SECOND)),Qv(this,"request",(async e=>{var t,r;this.logger.debug("Publishing Request Payload");const n=e.id||Pm().toString();await this.toEstablishConnection();try{this.logger.trace({id:n,method:e.method,topic:null==(t=e.params)?void 0:t.topic},"relayer.request - publishing...");const i=`${n}:${(null==(r=e.params)?void 0:r.tag)||""}`;this.requestsInFlight.push(i);const s=await this.provider.request(e);return this.requestsInFlight=this.requestsInFlight.filter((e=>e!==i)),s}catch(i){throw this.logger.debug(`Failed to Publish Request: ${n}`),i}})),Qv(this,"resetPingTimeout",(()=>{du()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout((()=>{var e,t,r,n;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),null==(n=null==(r=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:r.terminate)||n.call(r)}catch(i){this.logger.warn(i,i?.message)}}),this.heartBeatTimeout))})),Qv(this,"onPayloadHandler",(e=>{this.onProviderPayload(e),this.resetPingTimeout()})),Qv(this,"onConnectHandler",(()=>{this.logger.warn({},"Relayer connected 🛜"),this.startPingTimeout(),this.events.emit(Sy.connect)})),Qv(this,"onDisconnectHandler",(()=>{this.logger.warn({},"Relayer disconnected 🛑"),this.requestsInFlight=[],this.onProviderDisconnect()})),Qv(this,"onProviderErrorHandler",(e=>{this.logger.fatal(`Fatal socket error: ${e.message}`),this.events.emit(Sy.error,e),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()})),Qv(this,"registerProviderListeners",(()=>{this.provider.on(ky.payload,this.onPayloadHandler),this.provider.on(ky.connect,this.onConnectHandler),this.provider.on(ky.disconnect,this.onDisconnectHandler),this.provider.on(ky.error,this.onProviderErrorHandler)})),this.core=e.core,this.logger=typeof e.logger<"u"&&"string"!=typeof e.logger?(0,Ae.U5)(e.logger,this.name):(0,Ae.h6)((0,Ae.iP)({level:e.logger||Ey})),this.messages=new vv(this.logger,e.core),this.subscriber=new Kv(this,this.logger),this.publisher=new Rv(this,this.logger),this.relayUrl=e?.relayUrl||Ay,this.projectId=e.projectId,fu()?this.packageName=wu():gu()&&(this.bundleId=wu()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e?.message)}}get context(){return(0,Ae.oI)(this.logger)}get connected(){var e,t,r;return 1===(null==(r=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:r.readyState)||!1}get connecting(){var e,t,r;return 0===(null==(r=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:r.readyState)||void 0!==this.connectPromise||!1}async publish(e,t,r){this.isInitialized(),await this.publisher.publish(e,t,r),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now(),transportType:Ty.relay},Ry.outbound)}async subscribe(e,t){var r,n,i;this.isInitialized(),(null==t||!t.transportType||"relay"===t?.transportType)&&await this.toEstablishConnection();const s=typeof(null==(r=t?.internal)?void 0:r.throwOnFailedPublish)>"u"||(null==(n=t?.internal)?void 0:n.throwOnFailedPublish);let o,a=(null==(i=this.subscriber.topicMap.get(e))?void 0:i[0])||"";const c=t=>{t.topic===e&&(this.subscriber.off(By.created,c),o())};return await Promise.all([new Promise((e=>{o=e,this.subscriber.on(By.created,c)})),new Promise((async(r,n)=>{a=await this.subscriber.subscribe(e,Xv({internal:{throwOnFailedPublish:s}},t)).catch((e=>{s&&n(e)}))||a,r()}))]),a}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Tu(this.provider.disconnect(),2e3,"provider.disconnect()").catch((()=>this.onProviderDisconnect())):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(this.subscriber.hasAnyTopics){if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise((async(t,r)=>{await this.connect(e).then(t).catch(r).finally((()=>{this.connectPromise=void 0}))})),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}else this.logger.warn("Starting WS connection skipped because the client has no topics to work with.")}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await um())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if(0===e?.length)return void this.logger.trace("Batch message events is empty. Ignoring...");const t=e.sort(((e,t)=>e.publishedAt-t.publishedAt));this.logger.debug(`Batch of ${t.length} message events sorted`);for(const r of t)try{await this.onMessageEvent(r)}catch(E){this.logger.warn(E,"Error while processing batch message event: "+E?.message)}this.logger.trace(`Batch of ${t.length} message events processed`)}async onLinkMessageEvent(e,t){const{topic:r}=e;if(!t.sessionExists){const e=Bu(b.FIVE_MINUTES),t={topic:r,expiry:e,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,t)}this.events.emit(Sy.message,e),await this.recordMessageEvent(e,Ry.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let t=1;for(;t<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${t}...`),await this.createProvider(),await new Promise((async(e,t)=>{const r=()=>{t(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(ky.disconnect,r),await Tu(new Promise(((e,t)=>{this.provider.connect().then(e).catch(t)})),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch((e=>{t(e)})).finally((()=>{this.provider.off(ky.disconnect,r),clearTimeout(this.reconnectTimeout)})),await new Promise((async(e,t)=>{const r=()=>{t(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(ky.disconnect,r),await this.subscriber.start().then(e).catch(t).finally((()=>{this.provider.off(ky.disconnect,r)}))})),this.hasExperiencedNetworkDisruption=!1,e()}))}catch(qe){await this.subscriber.stop();const t=qe;this.logger.warn({},t.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${t}`);break}await new Promise((e=>setTimeout(e,(0,b.toMiliseconds)(1*t)))),t++}}startPingTimeout(){var e,t,r,n,i;if(du())try{null!=(t=null==(e=this.provider)?void 0:e.connection)&&t.socket&&(null==(i=null==(n=null==(r=this.provider)?void 0:r.connection)?void 0:n.socket)||i.on("ping",(()=>{this.resetPingTimeout()}))),this.resetPingTimeout()}catch(s){this.logger.warn(s,s?.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Qm(new sy(Su({sdkVersion:Oy,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,t){const{topic:r,message:n}=e;await this.messages.set(r,n,t)}async shouldIgnoreMessageEvent(e){const{topic:t,message:r}=e;if(!r||0===r.length)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(t))return this.logger.warn(`Ignoring message for unknown topic ${t}`),!0;const n=this.messages.has(t,r);return n&&this.logger.warn(`Ignoring duplicate message: ${r}`),n}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Gm(e)){if(!e.method.endsWith(Cy))return;const t=e.params,{topic:r,message:n,publishedAt:i,attestation:s}=t.data,o={topic:r,message:n,publishedAt:i,transportType:Ty.relay,attestation:s};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Xv({type:"event",event:t.id},o)),this.events.emit(t.id,o),await this.acknowledgePayload(e),await this.onMessageEvent(o)}else Zm(e)&&this.events.emit(Sy.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,Ry.inbound),this.events.emit(Sy.message,e))}async acknowledgePayload(e){const t=Bm(e.id,!0);await this.provider.connection.send(t)}unregisterProviderListeners(){this.provider.off(ky.payload,this.onPayloadHandler),this.provider.off(ky.connect,this.onConnectHandler),this.provider.off(ky.disconnect,this.onDisconnectHandler),this.provider.off(ky.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await um();pm((async t=>{e!==t&&(e=t,t?await this.transportOpen().catch((e=>this.logger.error(e,e?.message))):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}))}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(Sy.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout((async()=>{await this.transportOpen().catch((e=>this.logger.error(e,e?.message))),this.reconnectTimeout=void 0,this.reconnectInProgress=!1}),(0,b.toMiliseconds)(Ny)))))}isInitialized(){if(!this.initialized){const{message:e}=Ig("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise)return void await this.connectPromise;await this.connect()}}}function t_(){}function r_(e){if(!e||"object"!=typeof e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&"[object Object]"===Object.prototype.toString.call(e)}function n_(e){return Object.getOwnPropertySymbols(e).filter((t=>Object.prototype.propertyIsEnumerable.call(e,t)))}function i_(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const s_="[object RegExp]",o_="[object String]",a_="[object Number]",c_="[object Boolean]",u_="[object Arguments]",l_="[object Symbol]",h_="[object Date]",d_="[object Map]",p_="[object Set]",f_="[object Array]",g_="[object Function]",m_="[object ArrayBuffer]",y_="[object Object]",w_="[object Error]",b_="[object DataView]",v_="[object Uint8Array]",__="[object Uint8ClampedArray]",E_="[object Uint16Array]",A_="[object Uint32Array]",I_="[object BigUint64Array]",S_="[object Int8Array]",C_="[object Int16Array]",k_="[object Int32Array]",N_="[object BigInt64Array]",O_="[object Float32Array]",T_="[object Float64Array]";function R_(e,t){return e===t||Number.isNaN(e)&&Number.isNaN(t)}function x_(e,t,r){return P_(e,t,void 0,void 0,void 0,void 0,r)}function P_(e,t,r,n,i,s,o){const a=o(e,t,r,n,i,s);if(void 0!==a)return a;if(typeof e==typeof t)switch(typeof e){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return e===t;case"number":return e===t||Object.is(e,t);case"function":return e===t;case"object":return M_(e,t,s,o)}return M_(e,t,s,o)}function M_(e,t,r,n){if(Object.is(e,t))return!0;let i=i_(e),s=i_(t);if(i===u_&&(i=y_),s===u_&&(s=y_),i!==s)return!1;switch(i){case o_:return e.toString()===t.toString();case a_:{const r=e.valueOf(),n=t.valueOf();return R_(r,n)}case c_:case h_:case l_:return Object.is(e.valueOf(),t.valueOf());case s_:return e.source===t.source&&e.flags===t.flags;case g_:return e===t}r=r??new Map;const o=r.get(e),a=r.get(t);if(null!=o&&null!=a)return o===t;r.set(e,t),r.set(t,e);try{switch(i){case d_:if(e.size!==t.size)return!1;for(const[i,s]of e.entries())if(!t.has(i)||!P_(s,t.get(i),i,e,t,r,n))return!1;return!0;case p_:{if(e.size!==t.size)return!1;const i=Array.from(e.values()),s=Array.from(t.values());for(let o=0;o<i.length;o++){const a=i[o],c=s.findIndex((i=>P_(a,i,void 0,e,t,r,n)));if(-1===c)return!1;s.splice(c,1)}return!0}case f_:case v_:case __:case E_:case A_:case I_:case S_:case C_:case k_:case N_:case O_:case T_:if(typeof Buffer<"u"&&Buffer.isBuffer(e)!==Buffer.isBuffer(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!P_(e[i],t[i],i,e,t,r,n))return!1;return!0;case m_:return e.byteLength===t.byteLength&&M_(new Uint8Array(e),new Uint8Array(t),r,n);case b_:return e.byteLength===t.byteLength&&e.byteOffset===t.byteOffset&&M_(new Uint8Array(e),new Uint8Array(t),r,n);case w_:return e.name===t.name&&e.message===t.message;case y_:{if(!(M_(e.constructor,t.constructor,r,n)||r_(e)&&r_(t)))return!1;const i=[...Object.keys(e),...n_(e)],s=[...Object.keys(t),...n_(t)];if(i.length!==s.length)return!1;for(let o=0;o<i.length;o++){const s=i[o],a=e[s];if(!Object.hasOwn(t,s))return!1;const c=t[s];if(!P_(a,c,s,e,t,r,n))return!1}return!0}default:return!1}}finally{r.delete(e),r.delete(t)}}function B_(e,t){return x_(e,t,t_)}var U_=Object.defineProperty,L_=Object.getOwnPropertySymbols,D_=Object.prototype.hasOwnProperty,W_=Object.prototype.propertyIsEnumerable,j_=(e,t,r)=>t in e?U_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,z_=(e,t)=>{for(var r in t||(t={}))D_.call(t,r)&&j_(e,r,t[r]);if(L_)for(var r of L_(t))W_.call(t,r)&&j_(e,r,t[r]);return e},H_=(e,t,r)=>j_(e,"symbol"!=typeof t?t+"":t,r);class q_ extends Be{constructor(e,t,r,n=uy,i=void 0){super(e,t,r,n),this.core=e,this.logger=t,this.name=r,H_(this,"map",new Map),H_(this,"version",xy),H_(this,"cached",[]),H_(this,"initialized",!1),H_(this,"getKey"),H_(this,"storagePrefix",uy),H_(this,"recentlyDeleted",[]),H_(this,"recentlyDeletedLimit",200),H_(this,"init",(async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((e=>{this.getKey&&null!==e&&!Ng(e)?this.map.set(this.getKey(e),e):Bg(e)?this.map.set(e.id,e):Ug(e)&&this.map.set(e.topic,e)})),this.cached=[],this.initialized=!0)})),H_(this,"set",(async(e,t)=>{this.isInitialized(),this.map.has(e)?await this.update(e,t):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:e,value:t}),this.map.set(e,t),await this.persist())})),H_(this,"get",(e=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:e}),this.getData(e)))),H_(this,"getAll",(e=>(this.isInitialized(),e?this.values.filter((t=>Object.keys(e).every((r=>B_(t[r],e[r]))))):this.values))),H_(this,"update",(async(e,t)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:e,update:t});const r=z_(z_({},this.getData(e)),t);this.map.set(e,r),await this.persist()})),H_(this,"delete",(async(e,t)=>{this.isInitialized(),this.map.has(e)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:e,reason:t}),this.map.delete(e),this.addToRecentlyDeleted(e),await this.persist())})),this.logger=(0,Ae.U5)(t,this.name),this.storagePrefix=n,this.getKey=i}get context(){return(0,Ae.oI)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){if(this.recentlyDeleted.includes(e)){const{message:t}=Ig("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(t),new Error(t)}const{message:t}=Ig("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(t),new Error(t)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:e}=Ig("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),new Error(e)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=Ig("NOT_INITIALIZED",this.name);throw new Error(e)}}}var $_=Object.defineProperty,F_=(e,t,r)=>t in e?$_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,K_=(e,t,r)=>F_(e,"symbol"!=typeof t?t+"":t,r);class V_{constructor(e,t){this.core=e,this.logger=t,K_(this,"name",Dy),K_(this,"version",Wy),K_(this,"events",new(w())),K_(this,"pairings"),K_(this,"initialized",!1),K_(this,"storagePrefix",uy),K_(this,"ignoredPayloadTypes",[xf]),K_(this,"registeredMethods",[]),K_(this,"init",(async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))})),K_(this,"register",(({methods:e})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...e])]})),K_(this,"create",(async e=>{this.isInitialized();const t=Wf(),r=await this.core.crypto.setSymKey(t),n=Bu(b.FIVE_MINUTES),i={protocol:_y},s={topic:r,expiry:n,relay:i,active:!1,methods:e?.methods},o=dg({protocol:this.core.protocol,version:this.core.version,topic:r,symKey:t,relay:i,expiryTimestamp:n,methods:e?.methods});return this.events.emit(zy.create,s),this.core.expirer.set(r,n),await this.pairings.set(r,s),await this.core.relayer.subscribe(r,{transportType:e?.transportType}),{topic:r,uri:o}})),K_(this,"pair",(async e=>{this.isInitialized();const t=this.core.eventClient.createEvent({properties:{topic:e?.uri,trace:[rw.pairing_started]}});this.isValidPair(e,t);const{topic:r,symKey:n,relay:i,expiryTimestamp:s,methods:o}=ug(e.uri);let a;if(t.props.properties.topic=r,t.addTrace(rw.pairing_uri_validation_success),t.addTrace(rw.pairing_uri_not_expired),this.pairings.keys.includes(r)){if(a=this.pairings.get(r),t.addTrace(rw.existing_pairing),a.active)throw t.setError(nw.active_pairing_already_exists),new Error(`Pairing already exists: ${r}. Please try again with a new connection URI.`);t.addTrace(rw.pairing_not_expired)}const c=s||Bu(b.FIVE_MINUTES),u={topic:r,relay:i,expiry:c,active:!1,methods:o};this.core.expirer.set(r,c),await this.pairings.set(r,u),t.addTrace(rw.store_new_pairing),e.activatePairing&&await this.activate({topic:r}),this.events.emit(zy.create,u),t.addTrace(rw.emit_inactive_pairing),this.core.crypto.keychain.has(r)||await this.core.crypto.setSymKey(n,r),t.addTrace(rw.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{t.setError(nw.no_internet_connection)}try{await this.core.relayer.subscribe(r,{relay:i})}catch(pe){throw t.setError(nw.subscribe_pairing_topic_failure),pe}return t.addTrace(rw.subscribe_pairing_topic_success),u})),K_(this,"activate",(async({topic:e})=>{this.isInitialized();const t=Bu(b.FIVE_MINUTES);this.core.expirer.set(e,t),await this.pairings.update(e,{active:!0,expiry:t})})),K_(this,"ping",(async e=>{this.isInitialized(),await this.isValidPing(e),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:t}=e;if(this.pairings.keys.includes(t)){const e=await this.sendRequest(t,"wc_pairingPing",{}),{done:r,resolve:n,reject:i}=Ou();this.events.once(Lu("pairing_ping",e),(({error:e})=>{e?i(e):n()})),await r()}})),K_(this,"updateExpiry",(async({topic:e,expiry:t})=>{this.isInitialized(),await this.pairings.update(e,{expiry:t})})),K_(this,"updateMetadata",(async({topic:e,metadata:t})=>{this.isInitialized(),await this.pairings.update(e,{peerMetadata:t})})),K_(this,"getPairings",(()=>(this.isInitialized(),this.pairings.values))),K_(this,"disconnect",(async e=>{this.isInitialized(),await this.isValidDisconnect(e);const{topic:t}=e;this.pairings.keys.includes(t)&&(await this.sendRequest(t,"wc_pairingDelete",Sg("USER_DISCONNECTED")),await this.deletePairing(t))})),K_(this,"formatUriFromPairing",(e=>{this.isInitialized();const{topic:t,relay:r,expiry:n,methods:i}=e,s=this.core.crypto.keychain.get(t);return dg({protocol:this.core.protocol,version:this.core.version,topic:t,symKey:s,relay:r,expiryTimestamp:n,methods:i})})),K_(this,"sendRequest",(async(e,t,r)=>{const n=Mm(t,r),i=await this.core.crypto.encode(e,n),s=jy[t].req;return this.core.history.set(e,n),this.core.relayer.publish(e,i,s),n.id})),K_(this,"sendResult",(async(e,t,r)=>{const n=Bm(e,r),i=await this.core.crypto.encode(t,n),s=(await this.core.history.get(t,e)).request.method,o=jy[s].res;await this.core.relayer.publish(t,i,o),await this.core.history.resolve(n)})),K_(this,"sendError",(async(e,t,r)=>{const n=Um(e,r),i=await this.core.crypto.encode(t,n),s=(await this.core.history.get(t,e)).request.method,o=jy[s]?jy[s].res:jy.unregistered_method.res;await this.core.relayer.publish(t,i,o),await this.core.history.resolve(n)})),K_(this,"deletePairing",(async(e,t)=>{await this.core.relayer.unsubscribe(e),await Promise.all([this.pairings.delete(e,Sg("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(e),t?Promise.resolve():this.core.expirer.del(e)])})),K_(this,"cleanup",(async()=>{const e=this.pairings.getAll().filter((e=>Uu(e.expiry)));await Promise.all(e.map((e=>this.deletePairing(e.topic))))})),K_(this,"onRelayEventRequest",(async e=>{const{topic:t,payload:r}=e;switch(r.method){case"wc_pairingPing":return await this.onPairingPingRequest(t,r);case"wc_pairingDelete":return await this.onPairingDeleteRequest(t,r);default:return await this.onUnknownRpcMethodRequest(t,r)}})),K_(this,"onRelayEventResponse",(async e=>{const{topic:t,payload:r}=e,n=(await this.core.history.get(t,r.id)).request.method;switch(n){case"wc_pairingPing":return this.onPairingPingResponse(t,r);default:return this.onUnknownRpcMethodResponse(n)}})),K_(this,"onPairingPingRequest",(async(e,t)=>{const{id:r}=t;try{this.isValidPing({topic:e}),await this.sendResult(r,e,!0),this.events.emit(zy.ping,{id:r,topic:e})}catch(n){await this.sendError(r,e,n),this.logger.error(n)}})),K_(this,"onPairingPingResponse",((e,t)=>{const{id:r}=t;setTimeout((()=>{Jm(t)?this.events.emit(Lu("pairing_ping",r),{}):Xm(t)&&this.events.emit(Lu("pairing_ping",r),{error:t.error})}),500)})),K_(this,"onPairingDeleteRequest",(async(e,t)=>{const{id:r}=t;try{this.isValidDisconnect({topic:e}),await this.deletePairing(e),this.events.emit(zy.delete,{id:r,topic:e})}catch(n){await this.sendError(r,e,n),this.logger.error(n)}})),K_(this,"onUnknownRpcMethodRequest",(async(e,t)=>{const{id:r,method:n}=t;try{if(this.registeredMethods.includes(n))return;const t=Sg("WC_METHOD_UNSUPPORTED",n);await this.sendError(r,e,t),this.logger.error(t)}catch(Ie){await this.sendError(r,e,Ie),this.logger.error(Ie)}})),K_(this,"onUnknownRpcMethodResponse",(e=>{this.registeredMethods.includes(e)||this.logger.error(Sg("WC_METHOD_UNSUPPORTED",e))})),K_(this,"isValidPair",((e,t)=>{var r;if(!Zg(e)){const{message:r}=Ig("MISSING_OR_INVALID",`pair() params: ${e}`);throw t.setError(nw.malformed_pairing_uri),new Error(r)}if(!Mg(e.uri)){const{message:r}=Ig("MISSING_OR_INVALID",`pair() uri: ${e.uri}`);throw t.setError(nw.malformed_pairing_uri),new Error(r)}const n=ug(e?.uri);if(null==(r=n?.relay)||!r.protocol){const{message:e}=Ig("MISSING_OR_INVALID","pair() uri#relay-protocol");throw t.setError(nw.malformed_pairing_uri),new Error(e)}if(null==n||!n.symKey){const{message:e}=Ig("MISSING_OR_INVALID","pair() uri#symKey");throw t.setError(nw.malformed_pairing_uri),new Error(e)}if(null!=n&&n.expiryTimestamp&&(0,b.toMiliseconds)(n?.expiryTimestamp)<Date.now()){t.setError(nw.pairing_expired);const{message:e}=Ig("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(e)}})),K_(this,"isValidPing",(async e=>{if(!Zg(e)){const{message:t}=Ig("MISSING_OR_INVALID",`ping() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidPairingTopic(t)})),K_(this,"isValidDisconnect",(async e=>{if(!Zg(e)){const{message:t}=Ig("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidPairingTopic(t)})),K_(this,"isValidPairingTopic",(async e=>{if(!Og(e,!1)){const{message:t}=Ig("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.pairings.keys.includes(e)){const{message:t}=Ig("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(Uu(this.pairings.get(e).expiry)){await this.deletePairing(e);const{message:t}=Ig("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}})),this.core=e,this.logger=(0,Ae.U5)(t,this.name),this.pairings=new q_(this.core,this.logger,this.name,this.storagePrefix)}get context(){return(0,Ae.oI)(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=Ig("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Sy.message,(async e=>{const{topic:t,message:r,transportType:n}=e;if(this.pairings.keys.includes(t)&&n!==Ty.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const e=await this.core.crypto.decode(t,r);Gm(e)?(this.core.history.set(t,e),await this.onRelayEventRequest({topic:t,payload:e})):Zm(e)&&(await this.core.history.resolve(e),await this.onRelayEventResponse({topic:t,payload:e}),this.core.history.delete(t,e.id)),await this.core.relayer.messages.ack(t,r)}catch(_){this.logger.error(_)}}))}registerExpirerEvents(){this.core.expirer.on(Ky.expired,(async e=>{const{topic:t}=Mu(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit(zy.expire,{topic:t}))}))}}var Y_=Object.defineProperty,G_=(e,t,r)=>t in e?Y_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Z_=(e,t,r)=>G_(e,"symbol"!=typeof t?t+"":t,r);class J_ extends Re{constructor(e,t){super(e,t),this.core=e,this.logger=t,Z_(this,"records",new Map),Z_(this,"events",new y.EventEmitter),Z_(this,"name",qy),Z_(this,"version",$y),Z_(this,"cached",[]),Z_(this,"initialized",!1),Z_(this,"storagePrefix",uy),Z_(this,"init",(async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((e=>this.records.set(e.id,e))),this.cached=[],this.registerEventListeners(),this.initialized=!0)})),Z_(this,"set",((e,t,r)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:e,request:t,chainId:r}),this.records.has(t.id))return;const n={id:t.id,topic:e,request:{method:t.method,params:t.params||null},chainId:r,expiry:Bu(b.THIRTY_DAYS)};this.records.set(n.id,n),this.persist(),this.events.emit(Hy.created,n)})),Z_(this,"resolve",(async e=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:e}),!this.records.has(e.id))return;const t=await this.getRecord(e.id);typeof t.response>"u"&&(t.response=Xm(e)?{error:e.error}:{result:e.result},this.records.set(t.id,t),this.persist(),this.events.emit(Hy.updated,t))})),Z_(this,"get",(async(e,t)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:e,id:t}),await this.getRecord(t)))),Z_(this,"delete",((e,t)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:t}),this.values.forEach((r=>{if(r.topic===e){if(typeof t<"u"&&r.id!==t)return;this.records.delete(r.id),this.events.emit(Hy.deleted,r)}})),this.persist()})),Z_(this,"exists",(async(e,t)=>(this.isInitialized(),!!this.records.has(t)&&(await this.getRecord(t)).topic===e))),Z_(this,"on",((e,t)=>{this.events.on(e,t)})),Z_(this,"once",((e,t)=>{this.events.once(e,t)})),Z_(this,"off",((e,t)=>{this.events.off(e,t)})),Z_(this,"removeListener",((e,t)=>{this.events.removeListener(e,t)})),this.logger=(0,Ae.U5)(t,this.name)}get context(){return(0,Ae.oI)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach((t=>{if(typeof t.response<"u")return;const r={topic:t.topic,request:Mm(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(r)})),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:t}=Ig("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(t)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Hy.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:e}=Ig("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),new Error(e)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Hy.created,(e=>{const t=Hy.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})})),this.events.on(Hy.updated,(e=>{const t=Hy.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})})),this.events.on(Hy.deleted,(e=>{const t=Hy.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})})),this.core.heartbeat.on(A.pulse,(()=>{this.cleanup()}))}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach((t=>{(0,b.toMiliseconds)(t.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${t.id}`),this.records.delete(t.id),this.events.emit(Hy.deleted,t,!1),e=!0)})),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=Ig("NOT_INITIALIZED",this.name);throw new Error(e)}}}var X_=Object.defineProperty,Q_=(e,t,r)=>t in e?X_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,eE=(e,t,r)=>Q_(e,"symbol"!=typeof t?t+"":t,r);class tE extends Le{constructor(e,t){super(e,t),this.core=e,this.logger=t,eE(this,"expirations",new Map),eE(this,"events",new y.EventEmitter),eE(this,"name",Fy),eE(this,"version",Vy),eE(this,"cached",[]),eE(this,"initialized",!1),eE(this,"storagePrefix",uy),eE(this,"init",(async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((e=>this.expirations.set(e.target,e))),this.cached=[],this.registerEventListeners(),this.initialized=!0)})),eE(this,"has",(e=>{try{const t=this.formatTarget(e);return typeof this.getExpiration(t)<"u"}catch{return!1}})),eE(this,"set",((e,t)=>{this.isInitialized();const r=this.formatTarget(e),n={target:r,expiry:t};this.expirations.set(r,n),this.checkExpiry(r,n),this.events.emit(Ky.created,{target:r,expiration:n})})),eE(this,"get",(e=>{this.isInitialized();const t=this.formatTarget(e);return this.getExpiration(t)})),eE(this,"del",(e=>{if(this.isInitialized(),this.has(e)){const t=this.formatTarget(e),r=this.getExpiration(t);this.expirations.delete(t),this.events.emit(Ky.deleted,{target:t,expiration:r})}})),eE(this,"on",((e,t)=>{this.events.on(e,t)})),eE(this,"once",((e,t)=>{this.events.once(e,t)})),eE(this,"off",((e,t)=>{this.events.off(e,t)})),eE(this,"removeListener",((e,t)=>{this.events.removeListener(e,t)})),this.logger=(0,Ae.U5)(t,this.name)}get context(){return(0,Ae.oI)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if("string"==typeof e)return xu(e);if("number"==typeof e)return Pu(e);const{message:t}=Ig("UNKNOWN_TYPE","Target type: "+typeof e);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Ky.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:e}=Ig("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),new Error(e)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:t}=Ig("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(t),new Error(t)}return t}checkExpiry(e,t){const{expiry:r}=t;(0,b.toMiliseconds)(r)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(Ky.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach(((e,t)=>this.checkExpiry(t,e)))}registerEventListeners(){this.core.heartbeat.on(A.pulse,(()=>this.checkExpirations())),this.events.on(Ky.created,(e=>{const t=Ky.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})),this.events.on(Ky.expired,(e=>{const t=Ky.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})),this.events.on(Ky.deleted,(e=>{const t=Ky.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}))}isInitialized(){if(!this.initialized){const{message:e}=Ig("NOT_INITIALIZED",this.name);throw new Error(e)}}}var rE=Object.defineProperty,nE=(e,t,r)=>t in e?rE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,iE=(e,t,r)=>nE(e,"symbol"!=typeof t?t+"":t,r);class sE extends De{constructor(e,t,r){super(e,t,r),this.core=e,this.logger=t,this.store=r,iE(this,"name",Yy),iE(this,"abortController"),iE(this,"isDevEnv"),iE(this,"verifyUrlV3",Xy),iE(this,"storagePrefix",uy),iE(this,"version",ay),iE(this,"publicKey"),iE(this,"fetchPromise"),iE(this,"init",(async()=>{var e;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&(0,b.toMiliseconds)(null==(e=this.publicKey)?void 0:e.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))})),iE(this,"register",(async e=>{if(!mu()||this.isDevEnv)return;const t=window.location.origin,{id:r,decryptedId:n}=e,i=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${t}&id=${r}&decryptedId=${n}`;try{const e=(0,js.getDocument)(),t=this.startAbortTimer(5*b.ONE_SECOND),n=await new Promise(((n,s)=>{const o=()=>{window.removeEventListener("message",c),e.body.removeChild(a),s("attestation aborted")};this.abortController.signal.addEventListener("abort",o);const a=e.createElement("iframe");a.src=i,a.style.display="none",a.addEventListener("error",o,{signal:this.abortController.signal});const c=i=>{if(i.data&&"string"==typeof i.data)try{const s=JSON.parse(i.data);if("verify_attestation"===s.type){if(vs(s.attestation).payload.id!==r)return;clearInterval(t),e.body.removeChild(a),this.abortController.signal.removeEventListener("abort",o),window.removeEventListener("message",c),n(null===s.attestation?"":s.attestation)}}catch(he){this.logger.warn(he)}};e.body.appendChild(a),window.addEventListener("message",c,{signal:this.abortController.signal})}));return this.logger.debug("jwt attestation",n),n}catch(Ee){this.logger.warn(Ee)}return""})),iE(this,"resolve",(async e=>{if(this.isDevEnv)return"";const{attestationId:t,hash:r,encryptedId:n}=e;if(""===t)return void this.logger.debug("resolve: attestationId is empty, skipping");if(t){if(vs(t).payload.id!==n)return;const e=await this.isValidJwtAttestation(t);if(e)return e.isVerified?e:void this.logger.warn("resolve: jwt attestation: origin url not verified")}if(!r)return;const i=this.getVerifyUrl(e?.verifyUrl);return this.fetchAttestation(r,i)})),iE(this,"fetchAttestation",(async(e,t)=>{this.logger.debug(`resolving attestation: ${e} from url: ${t}`);const r=this.startAbortTimer(5*b.ONE_SECOND),n=await fetch(`${t}/attestation/${e}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(r),200===n.status?await n.json():void 0})),iE(this,"getVerifyUrl",(e=>{let t=e||Jy;return Qy.includes(t)||(this.logger.info(`verify url: ${t}, not included in trusted list, assigning default: ${Jy}`),t=Jy),t})),iE(this,"fetchPublicKey",(async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const e=this.startAbortTimer(b.FIVE_SECONDS),t=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(e),await t.json()}catch(E){this.logger.warn(E)}})),iE(this,"persistPublicKey",(async e=>{this.logger.debug("persisting public key to local storage",e),await this.store.setItem(this.storeKey,e),this.publicKey=e})),iE(this,"removePublicKey",(async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0})),iE(this,"isValidJwtAttestation",(async e=>{const t=await this.getPublicKey();try{if(t)return this.validateAttestation(e,t)}catch(Ie){this.logger.error(Ie),this.logger.warn("error validating attestation")}const r=await this.fetchAndPersistPublicKey();try{if(r)return this.validateAttestation(e,r)}catch(Ie){this.logger.error(Ie),this.logger.warn("error validating attestation")}})),iE(this,"getPublicKey",(async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey())),iE(this,"fetchAndPersistPublicKey",(async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise((async e=>{const t=await this.fetchPublicKey();t&&(await this.persistPublicKey(t),e(t))}));const e=await this.fetchPromise;return this.fetchPromise=void 0,e})),iE(this,"validateAttestation",((e,t)=>{const r=ig(e,t.publicKey),n={hasExpired:(0,b.toMiliseconds)(r.exp)<Date.now(),payload:r};if(n.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:n.payload.origin,isScam:n.payload.isScam,isVerified:n.payload.isVerified}})),this.logger=(0,Ae.U5)(t,this.name),this.abortController=new AbortController,this.isDevEnv=Fu(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return(0,Ae.oI)(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout((()=>this.abortController.abort()),(0,b.toMiliseconds)(e))}}var oE=Object.defineProperty,aE=(e,t,r)=>t in e?oE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,cE=(e,t,r)=>aE(e,"symbol"!=typeof t?t+"":t,r);class uE extends We{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,cE(this,"context",ew),cE(this,"registerDeviceToken",(async e=>{const{clientId:t,token:r,notificationType:n,enableEncrypted:i=!1}=e,s=`${tw}/${this.projectId}/clients`;await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:t,type:n,token:r,always_raw:i})})})),this.logger=(0,Ae.U5)(t,this.context)}}var lE=Object.defineProperty,hE=Object.getOwnPropertySymbols,dE=Object.prototype.hasOwnProperty,pE=Object.prototype.propertyIsEnumerable,fE=(e,t,r)=>t in e?lE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,gE=(e,t)=>{for(var r in t||(t={}))dE.call(t,r)&&fE(e,r,t[r]);if(hE)for(var r of hE(t))pE.call(t,r)&&fE(e,r,t[r]);return e},mE=(e,t,r)=>fE(e,"symbol"!=typeof t?t+"":t,r);class yE extends je{constructor(e,t,r=!0){super(e,t,r),this.core=e,this.logger=t,mE(this,"context",uw),mE(this,"storagePrefix",uy),mE(this,"storageVersion",cw),mE(this,"events",new Map),mE(this,"shouldPersist",!1),mE(this,"init",(async()=>{if(!Fu())try{const e={eventId:$u(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:Iu(this.core.relayer.protocol,this.core.relayer.version,Oy)}}};await this.sendEvent([e])}catch(E){this.logger.warn(E)}})),mE(this,"createEvent",(e=>{const{event:t="ERROR",type:r="",properties:{topic:n,trace:i}}=e,s=$u(),o=this.core.projectId||"",a=Date.now(),c=gE({eventId:s,timestamp:a,props:{event:t,type:r,properties:{topic:n,trace:i}},bundleId:o,domain:this.getAppDomain()},this.setMethods(s));return this.telemetryEnabled&&(this.events.set(s,c),this.shouldPersist=!0),c})),mE(this,"getEvent",(e=>{const{eventId:t,topic:r}=e;if(t)return this.events.get(t);const n=Array.from(this.events.values()).find((e=>e.props.properties.topic===r));return n?gE(gE({},n),this.setMethods(n.eventId)):void 0})),mE(this,"deleteEvent",(e=>{const{eventId:t}=e;this.events.delete(t),this.shouldPersist=!0})),mE(this,"setEventListeners",(()=>{this.core.heartbeat.on(A.pulse,(async()=>{this.shouldPersist&&await this.persist(),this.events.forEach((e=>{(0,b.fromMiliseconds)(Date.now())-(0,b.fromMiliseconds)(e.timestamp)>lw&&(this.events.delete(e.eventId),this.shouldPersist=!0)}))}))})),mE(this,"setMethods",(e=>({addTrace:t=>this.addTrace(e,t),setError:t=>this.setError(e,t)}))),mE(this,"addTrace",((e,t)=>{const r=this.events.get(e);r&&(r.props.properties.trace.push(t),this.events.set(e,r),this.shouldPersist=!0)})),mE(this,"setError",((e,t)=>{const r=this.events.get(e);r&&(r.props.type=t,r.timestamp=Date.now(),this.events.set(e,r),this.shouldPersist=!0)})),mE(this,"persist",(async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1})),mE(this,"restore",(async()=>{try{const e=await this.core.storage.getItem(this.storageKey)||[];if(!e.length)return;e.forEach((e=>{this.events.set(e.eventId,gE(gE({},e),this.setMethods(e.eventId)))}))}catch(E){this.logger.warn(E)}})),mE(this,"submit",(async()=>{if(!this.telemetryEnabled||0===this.events.size)return;const e=[];for(const[t,r]of this.events)r.props.type&&e.push(r);if(0!==e.length)try{if((await this.sendEvent(e)).ok)for(const t of e)this.events.delete(t.eventId),this.shouldPersist=!0}catch(_){this.logger.warn(_)}})),mE(this,"sendEvent",(async e=>{const t=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${hw}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${Oy}${t}`,{method:"POST",body:JSON.stringify(e)})})),mE(this,"getAppDomain",(()=>_u().url)),this.logger=(0,Ae.U5)(t,this.context),this.telemetryEnabled=r,r?this.restore().then((async()=>{await this.submit(),this.setEventListeners()})):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var wE=Object.defineProperty,bE=Object.getOwnPropertySymbols,vE=Object.prototype.hasOwnProperty,_E=Object.prototype.propertyIsEnumerable,EE=(e,t,r)=>t in e?wE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,AE=(e,t)=>{for(var r in t||(t={}))vE.call(t,r)&&EE(e,r,t[r]);if(bE)for(var r of bE(t))_E.call(t,r)&&EE(e,r,t[r]);return e},IE=(e,t,r)=>EE(e,"symbol"!=typeof t?t+"":t,r);class SE extends ke{constructor(e){var t;super(e),IE(this,"protocol",oy),IE(this,"version",ay),IE(this,"name",cy),IE(this,"relayUrl"),IE(this,"projectId"),IE(this,"customStoragePrefix"),IE(this,"events",new y.EventEmitter),IE(this,"logger"),IE(this,"heartbeat"),IE(this,"relayer"),IE(this,"crypto"),IE(this,"storage"),IE(this,"history"),IE(this,"expirer"),IE(this,"pairing"),IE(this,"verify"),IE(this,"echoClient"),IE(this,"linkModeSupportedApps"),IE(this,"eventClient"),IE(this,"initialized",!1),IE(this,"logChunkController"),IE(this,"on",((e,t)=>this.events.on(e,t))),IE(this,"once",((e,t)=>this.events.once(e,t))),IE(this,"off",((e,t)=>this.events.off(e,t))),IE(this,"removeListener",((e,t)=>this.events.removeListener(e,t))),IE(this,"dispatchEnvelope",(({topic:e,message:t,sessionExists:r})=>{if(!e||!t)return;const n={topic:e,message:t,publishedAt:Date.now(),transportType:Ty.link_mode};this.relayer.onLinkMessageEvent(n,{sessionExists:r})}));const r=this.getGlobalCore(e?.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(Ie){console.warn("Failed to copy global core",Ie)}this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||Ay,this.customStoragePrefix=null!=e&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const n=(0,Ae.iP)({level:"string"==typeof e?.logger&&e.logger?e.logger:ly.logger,name:cy}),{logger:i,chunkLoggerController:s}=(0,Ae.D5)({opts:n,maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=s,null!=(t=this.logChunkController)&&t.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var e,t;null!=(e=this.logChunkController)&&e.downloadLogsBlobInBrowser&&(null==(t=this.logChunkController)||t.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=(0,Ae.U5)(i,this.name),this.heartbeat=new I,this.crypto=new uv(this,this.logger,e?.keychain),this.history=new J_(this,this.logger),this.expirer=new tE(this,this.logger),this.storage=null!=e&&e.storage?e.storage:new Ee(AE(AE({},hy),e?.storageOptions)),this.relayer=new e_({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new V_(this,this.logger),this.verify=new sE(this,this.logger,this.storage),this.echoClient=new uE(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new yE(this,this.logger,e?.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const t=new SE(e);await t.initialize();const r=await t.crypto.getClientId();return await t.storage.setItem(Py,r),t}get context(){return(0,Ae.oI)(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return null==(e=this.logChunkController)?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(My,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(My)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const t=`_walletConnectCore_${e}`,r=`${t}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[t]}catch(t){return void console.warn("Failed to get global WalletConnect core",t)}}setGlobalCore(e){var t;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${(null==(t=e.opts)?void 0:t.customStoragePrefix)||""}`;globalThis[r]=e}catch(qe){console.warn("Failed to set global WalletConnect core",qe)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&"true"==={NODE_ENV:"production",BASE_URL:""}.DISABLE_GLOBAL_CORE}catch{return!0}}}const CE=SE,kE="wc",NE=2,OE="client",TE=`${kE}@${NE}:${OE}:`,RE={name:OE,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.org"},xE="WALLETCONNECT_DEEPLINK_CHOICE",PE="proposal",ME="Proposal expired",BE="session",UE=b.SEVEN_DAYS,LE="engine",DE={wc_sessionPropose:{req:{ttl:b.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:b.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:b.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:b.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:b.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:b.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:b.ONE_DAY,prompt:!1,tag:1104},res:{ttl:b.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:b.ONE_DAY,prompt:!1,tag:1106},res:{ttl:b.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:b.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:b.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:b.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:b.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:b.ONE_DAY,prompt:!1,tag:1112},res:{ttl:b.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:b.ONE_DAY,prompt:!1,tag:1114},res:{ttl:b.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:b.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:b.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:b.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:b.FIVE_MINUTES,prompt:!1,tag:1119}}},WE={min:b.FIVE_MINUTES,max:b.SEVEN_DAYS},jE={idle:"IDLE",active:"ACTIVE"},zE={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},HE="request",qE=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],$E="wc",FE="auth",KE="authKeys",VE="pairingTopics",YE="requests",GE=`${$E}@1.5:${FE}:`,ZE=`${GE}:PUB_KEY`;var JE=Object.defineProperty,XE=Object.defineProperties,QE=Object.getOwnPropertyDescriptors,eA=Object.getOwnPropertySymbols,tA=Object.prototype.hasOwnProperty,rA=Object.prototype.propertyIsEnumerable,nA=(e,t,r)=>t in e?JE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,iA=(e,t)=>{for(var r in t||(t={}))tA.call(t,r)&&nA(e,r,t[r]);if(eA)for(var r of eA(t))rA.call(t,r)&&nA(e,r,t[r]);return e},sA=(e,t)=>XE(e,QE(t)),oA=(e,t,r)=>nA(e,"symbol"!=typeof t?t+"":t,r);class aA extends Fe{constructor(e){super(e),oA(this,"name",LE),oA(this,"events",new(w())),oA(this,"initialized",!1),oA(this,"requestQueue",{state:jE.idle,queue:[]}),oA(this,"sessionRequestQueue",{state:jE.idle,queue:[]}),oA(this,"requestQueueDelay",b.ONE_SECOND),oA(this,"expectedPairingMethodMap",new Map),oA(this,"recentlyDeletedMap",new Map),oA(this,"recentlyDeletedLimit",200),oA(this,"relayMessageCache",[]),oA(this,"pendingSessions",new Map),oA(this,"init",(async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(DE)}),this.initialized=!0,setTimeout((async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()}),(0,b.toMiliseconds)(this.requestQueueDelay)))})),oA(this,"connect",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const t=sA(iA({},e),{requiredNamespaces:e.requiredNamespaces||{},optionalNamespaces:e.optionalNamespaces||{}});await this.isValidConnect(t);const{pairingTopic:r,requiredNamespaces:n,optionalNamespaces:i,sessionProperties:s,scopedProperties:o,relays:a}=t;let c,u=r,l=!1;try{if(u){const e=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),l=e.active}}catch(ze){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),ze}if(!u||!l){const{topic:e,uri:t}=await this.client.core.pairing.create();u=e,c=t}if(!u){const{message:e}=Ig("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(e)}const h=await this.client.core.crypto.generateKeyPair(),d=DE.wc_sessionPropose.req.ttl||b.FIVE_MINUTES,p=Bu(d),f=sA(iA(iA({requiredNamespaces:n,optionalNamespaces:i,relays:a??[{protocol:_y}],proposer:{publicKey:h,metadata:this.client.metadata},expiryTimestamp:p,pairingTopic:u},s&&{sessionProperties:s}),o&&{scopedProperties:o}),{id:xm()}),g=Lu("session_connect",f.id),{reject:m,resolve:y,done:w}=Ou(d,ME),v=({id:e})=>{e===f.id&&(this.client.events.off("proposal_expire",v),this.pendingSessions.delete(f.id),this.events.emit(g,{error:{message:ME,code:0}}))};return this.client.events.on("proposal_expire",v),this.events.once(g,(({error:e,session:t})=>{this.client.events.off("proposal_expire",v),e?m(e):t&&y(t)})),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:f,throwOnFailedPublish:!0,clientRpcId:f.id}),await this.setProposal(f.id,f),{uri:c,approval:w}})),oA(this,"pair",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(e)}catch(t){throw this.client.logger.error("pair() failed"),t}})),oA(this,"approve",(async e=>{var t,r,n;const i=this.client.core.eventClient.createEvent({properties:{topic:null==(t=e?.id)?void 0:t.toString(),trace:[iw.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(A){throw i.setError(sw.no_internet_connection),A}try{await this.isValidProposalId(e?.id)}catch(A){throw this.client.logger.error(`approve() -> proposal.get(${e?.id}) failed`),i.setError(sw.proposal_not_found),A}try{await this.isValidApprove(e)}catch(A){throw this.client.logger.error("approve() -> isValidApprove() failed"),i.setError(sw.session_approve_namespace_validation_failure),A}const{id:s,relayProtocol:o,namespaces:a,sessionProperties:c,scopedProperties:u,sessionConfig:l}=e,h=this.client.proposal.get(s);this.client.core.eventClient.deleteEvent({eventId:i.eventId});const{pairingTopic:d,proposer:p,requiredNamespaces:f,optionalNamespaces:g}=h;let m=null==(r=this.client.core.eventClient)?void 0:r.getEvent({topic:d});m||(m=null==(n=this.client.core.eventClient)?void 0:n.createEvent({type:iw.session_approve_started,properties:{topic:d,trace:[iw.session_approve_started,iw.session_namespaces_validation_success]}}));const y=await this.client.core.crypto.generateKeyPair(),w=p.publicKey,b=await this.client.core.crypto.generateSharedKey(y,w),v=iA(iA(iA({relay:{protocol:o??"irn"},namespaces:a,controller:{publicKey:y,metadata:this.client.metadata},expiry:Bu(UE)},c&&{sessionProperties:c}),u&&{scopedProperties:u}),l&&{sessionConfig:l}),_=Ty.relay;m.addTrace(iw.subscribing_session_topic);try{await this.client.core.relayer.subscribe(b,{transportType:_})}catch(A){throw m.setError(sw.subscribe_session_topic_failure),A}m.addTrace(iw.subscribe_session_topic_success);const E=sA(iA({},v),{topic:b,requiredNamespaces:f,optionalNamespaces:g,pairingTopic:d,acknowledged:!1,self:v.controller,peer:{publicKey:p.publicKey,metadata:p.metadata},controller:y,transportType:Ty.relay});await this.client.session.set(b,E),m.addTrace(iw.store_session);try{m.addTrace(iw.publishing_session_settle),await this.sendRequest({topic:b,method:"wc_sessionSettle",params:v,throwOnFailedPublish:!0}).catch((e=>{throw m?.setError(sw.session_settle_publish_failure),e})),m.addTrace(iw.session_settle_publish_success),m.addTrace(iw.publishing_session_approve),await this.sendResult({id:s,topic:d,result:{relay:{protocol:o??"irn"},responderPublicKey:y},throwOnFailedPublish:!0}).catch((e=>{throw m?.setError(sw.session_approve_publish_failure),e})),m.addTrace(iw.session_approve_publish_success)}catch(A){throw this.client.logger.error(A),this.client.session.delete(b,Sg("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(b),A}return this.client.core.eventClient.deleteEvent({eventId:m.eventId}),await this.client.core.pairing.updateMetadata({topic:d,metadata:p.metadata}),await this.client.proposal.delete(s,Sg("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:d}),await this.setExpiry(b,Bu(UE)),{topic:b,acknowledged:()=>Promise.resolve(this.client.session.get(b))}})),oA(this,"reject",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(e)}catch(A){throw this.client.logger.error("reject() -> isValidReject() failed"),A}const{id:t,reason:r}=e;let n;try{n=this.client.proposal.get(t).pairingTopic}catch(A){throw this.client.logger.error(`reject() -> proposal.get(${t}) failed`),A}n&&(await this.sendError({id:t,topic:n,error:r,rpcOpts:DE.wc_sessionPropose.reject}),await this.client.proposal.delete(t,Sg("USER_DISCONNECTED")))})),oA(this,"update",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(e)}catch(Ee){throw this.client.logger.error("update() -> isValidUpdate() failed"),Ee}const{topic:t,namespaces:r}=e,{done:n,resolve:i,reject:s}=Ou(),o=xm(),a=Pm().toString(),c=this.client.session.get(t).namespaces;return this.events.once(Lu("session_update",o),(({error:e})=>{e?s(e):i()})),await this.client.session.update(t,{namespaces:r}),await this.sendRequest({topic:t,method:"wc_sessionUpdate",params:{namespaces:r},throwOnFailedPublish:!0,clientRpcId:o,relayRpcId:a}).catch((e=>{this.client.logger.error(e),this.client.session.update(t,{namespaces:c}),s(e)})),{acknowledged:n}})),oA(this,"extend",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(e)}catch(Ie){throw this.client.logger.error("extend() -> isValidExtend() failed"),Ie}const{topic:t}=e,r=xm(),{done:n,resolve:i,reject:s}=Ou();return this.events.once(Lu("session_extend",r),(({error:e})=>{e?s(e):i()})),await this.setExpiry(t,Bu(UE)),this.sendRequest({topic:t,method:"wc_sessionExtend",params:{},clientRpcId:r,throwOnFailedPublish:!0}).catch((e=>{s(e)})),{acknowledged:n}})),oA(this,"request",(async e=>{this.isInitialized();try{await this.isValidRequest(e)}catch(pe){throw this.client.logger.error("request() -> isValidRequest() failed"),pe}const{chainId:t,request:r,topic:n,expiry:i=DE.wc_sessionRequest.req.ttl}=e,s=this.client.session.get(n);s?.transportType===Ty.relay&&await this.confirmOnlineStateOrThrow();const o=xm(),a=Pm().toString(),{done:c,resolve:u,reject:l}=Ou(i,"Request expired. Please try again.");this.events.once(Lu("session_request",o),(({error:e,result:t})=>{e?l(e):u(t)}));const h="wc_sessionRequest",d=this.getAppLinkIfEnabled(s.peer.metadata,s.transportType);if(d)return await this.sendRequest({clientRpcId:o,relayRpcId:a,topic:n,method:h,params:{request:sA(iA({},r),{expiryTimestamp:Bu(i)}),chainId:t},expiry:i,throwOnFailedPublish:!0,appLink:d}).catch((e=>l(e))),this.client.events.emit("session_request_sent",{topic:n,request:r,chainId:t,id:o}),await c();const p={request:sA(iA({},r),{expiryTimestamp:Bu(i)}),chainId:t},f=this.shouldSetTVF(h,p);return await Promise.all([new Promise((async e=>{await this.sendRequest(iA({clientRpcId:o,relayRpcId:a,topic:n,method:h,params:p,expiry:i,throwOnFailedPublish:!0},f&&{tvf:this.getTVFParams(o,p)})).catch((e=>l(e))),this.client.events.emit("session_request_sent",{topic:n,request:r,chainId:t,id:o}),e()})),new Promise((async e=>{var t;if(null==(t=s.sessionConfig)||!t.disableDeepLink){const e=await Hu(this.client.core.storage,xE);await Wu({id:o,topic:n,wcDeepLink:e})}e()})),c()]).then((e=>e[2]))})),oA(this,"respond",(async e=>{this.isInitialized(),await this.isValidRespond(e);const{topic:t,response:r}=e,{id:n}=r,i=this.client.session.get(t);i.transportType===Ty.relay&&await this.confirmOnlineStateOrThrow();const s=this.getAppLinkIfEnabled(i.peer.metadata,i.transportType);Jm(r)?await this.sendResult({id:n,topic:t,result:r.result,throwOnFailedPublish:!0,appLink:s}):Xm(r)&&await this.sendError({id:n,topic:t,error:r.error,appLink:s}),this.cleanupAfterResponse(e)})),oA(this,"ping",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(e)}catch(E){throw this.client.logger.error("ping() -> isValidPing() failed"),E}const{topic:t}=e;if(this.client.session.keys.includes(t)){const e=xm(),r=Pm().toString(),{done:n,resolve:i,reject:s}=Ou();this.events.once(Lu("session_ping",e),(({error:e})=>{e?s(e):i()})),await Promise.all([this.sendRequest({topic:t,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:e,relayRpcId:r}),n()])}else this.client.core.pairing.pairings.keys.includes(t)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:t}))})),oA(this,"emit",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(e);const{topic:t,event:r,chainId:n}=e,i=Pm().toString(),s=xm();await this.sendRequest({topic:t,method:"wc_sessionEvent",params:{event:r,chainId:n},throwOnFailedPublish:!0,relayRpcId:i,clientRpcId:s})})),oA(this,"disconnect",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(e);const{topic:t}=e;if(this.client.session.keys.includes(t))await this.sendRequest({topic:t,method:"wc_sessionDelete",params:Sg("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:t,emitEvent:!1});else{if(!this.client.core.pairing.pairings.keys.includes(t)){const{message:e}=Ig("MISMATCHED_TOPIC",`Session or pairing topic not found: ${t}`);throw new Error(e)}await this.client.core.pairing.disconnect({topic:t})}})),oA(this,"find",(e=>(this.isInitialized(),this.client.session.getAll().filter((t=>Rg(t,e)))))),oA(this,"getPendingSessionRequests",(()=>this.client.pendingRequest.getAll())),oA(this,"authenticate",(async(e,t)=>{var r;this.isInitialized(),this.isValidAuthenticate(e);const n=t&&this.client.core.linkModeSupportedApps.includes(t)&&(null==(r=this.client.metadata.redirect)?void 0:r.linkMode),i=n?Ty.link_mode:Ty.relay;i===Ty.relay&&await this.confirmOnlineStateOrThrow();const{chains:s,statement:o="",uri:a,domain:c,nonce:u,type:l,exp:h,nbf:d,methods:p=[],expiry:f}=e,g=[...e.resources||[]],{topic:m,uri:y}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:i});this.client.logger.info({message:"Generated new pairing",pairing:{topic:m,uri:y}});const w=await this.client.core.crypto.generateKeyPair(),b=zf(w);if(await Promise.all([this.client.auth.authKeys.set(ZE,{responseTopic:b,publicKey:w}),this.client.auth.pairingTopics.set(b,{topic:b,pairingTopic:m})]),await this.client.core.relayer.subscribe(b,{transportType:i}),this.client.logger.info(`sending request to new pairing topic: ${m}`),p.length>0){const{namespace:e}=Xc(s[0]);let t=yh(e,"request",p);Ih(g)&&(t=bh(t,g.pop())),g.push(t)}const v=f&&f>DE.wc_sessionAuthenticate.req.ttl?f:DE.wc_sessionAuthenticate.req.ttl,_={authPayload:{type:l??"caip122",chains:s,statement:o,aud:a,domain:c,version:"1",nonce:u,iat:(new Date).toISOString(),exp:h,nbf:d,resources:g},requester:{publicKey:w,metadata:this.client.metadata},expiryTimestamp:Bu(v)},E={eip155:{chains:s,methods:[...new Set(["personal_sign",...p])],events:["chainChanged","accountsChanged"]}},A={requiredNamespaces:{},optionalNamespaces:E,relays:[{protocol:"irn"}],pairingTopic:m,proposer:{publicKey:w,metadata:this.client.metadata},expiryTimestamp:Bu(DE.wc_sessionPropose.req.ttl),id:xm()},{done:I,resolve:S,reject:C}=Ou(v,"Request expired"),k=xm(),N=Lu("session_connect",A.id),O=Lu("session_request",k),T=async({error:e,session:t})=>{this.events.off(O,R),e?C(e):t&&S({session:t})},R=async e=>{var r,n,s;if(await this.deletePendingAuthRequest(k,{message:"fulfilled",code:0}),e.error){const t=Sg("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return e.error.code===t.code?void 0:(this.events.off(N,T),C(e.error.message))}await this.deleteProposal(A.id),this.events.off(N,T);const{cacaos:o,responder:a}=e.result,c=[],u=[];for(const t of o){await ch({cacao:t,projectId:this.client.core.projectId})||(this.client.logger.error(t,"Signature verification failed"),C(Sg("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:e}=t,r=Ih(e.resources),n=[oh(e.iss)],i=ah(e.iss);if(r){const e=Eh(r),t=Ah(r);c.push(...e),n.push(...t)}for(const t of n)u.push(`${t}:${i}`)}const l=await this.client.core.crypto.generateSharedKey(w,a.publicKey);let h;c.length>0&&(h={topic:l,acknowledged:!0,self:{publicKey:w,metadata:this.client.metadata},peer:a,controller:a.publicKey,expiry:Bu(UE),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:m,namespaces:_g([...new Set(c)],[...new Set(u)]),transportType:i},await this.client.core.relayer.subscribe(l,{transportType:i}),await this.client.session.set(l,h),m&&await this.client.core.pairing.updateMetadata({topic:m,metadata:a.metadata}),h=this.client.session.get(l)),null!=(r=this.client.metadata.redirect)&&r.linkMode&&null!=(n=a.metadata.redirect)&&n.linkMode&&null!=(s=a.metadata.redirect)&&s.universal&&t&&(this.client.core.addLinkModeSupportedApp(a.metadata.redirect.universal),this.client.session.update(l,{transportType:Ty.link_mode})),S({auths:o,session:h})};let x;this.events.once(N,T),this.events.once(O,R);try{if(n){const e=Mm("wc_sessionAuthenticate",_,k);this.client.core.history.set(m,e);const r=await this.client.core.crypto.encode("",e,{type:Pf,encoding:Of});x=pg(t,m,r)}else await Promise.all([this.sendRequest({topic:m,method:"wc_sessionAuthenticate",params:_,expiry:e.expiry,throwOnFailedPublish:!0,clientRpcId:k}),this.sendRequest({topic:m,method:"wc_sessionPropose",params:A,expiry:DE.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:A.id})])}catch(ue){throw this.events.off(N,T),this.events.off(O,R),ue}return await this.setProposal(A.id,A),await this.setAuthRequest(k,{request:sA(iA({},_),{verifyContext:{}}),pairingTopic:m,transportType:i}),{uri:x??y,response:I}})),oA(this,"approveSessionAuthenticate",(async e=>{const{id:t,auths:r}=e,n=this.client.core.eventClient.createEvent({properties:{topic:t.toString(),trace:[ow.authenticated_session_approve_started]}});try{this.isInitialized()}catch(Be){throw n.setError(aw.no_internet_connection),Be}const i=this.getPendingAuthRequest(t);if(!i)throw n.setError(aw.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${t}`);const s=i.transportType||Ty.relay;s===Ty.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=zf(o),u={type:xf,receiverPublicKey:o,senderPublicKey:a},l=[],h=[];for(const f of r){if(!await ch({cacao:f,projectId:this.client.core.projectId})){n.setError(aw.invalid_cacao);const e=Sg("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:t,topic:c,error:e,encodeOpts:u}),new Error(e.message)}n.addTrace(ow.cacaos_verified);const{p:e}=f,r=Ih(e.resources),i=[oh(e.iss)],s=ah(e.iss);if(r){const e=Eh(r),t=Ah(r);l.push(...e),i.push(...t)}for(const t of i)h.push(`${t}:${s}`)}const d=await this.client.core.crypto.generateSharedKey(a,o);let p;if(n.addTrace(ow.create_authenticated_session_topic),l?.length>0){p={topic:d,acknowledged:!0,self:{publicKey:a,metadata:this.client.metadata},peer:{publicKey:o,metadata:i.requester.metadata},controller:o,expiry:Bu(UE),authentication:r,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:i.pairingTopic,namespaces:_g([...new Set(l)],[...new Set(h)]),transportType:s},n.addTrace(ow.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(d,{transportType:s})}catch(Be){throw n.setError(aw.subscribe_authenticated_session_topic_failure),Be}n.addTrace(ow.subscribe_authenticated_session_topic_success),await this.client.session.set(d,p),n.addTrace(ow.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:i.pairingTopic,metadata:i.requester.metadata})}n.addTrace(ow.publishing_authenticated_session_approve);try{await this.sendResult({topic:c,id:t,result:{cacaos:r,responder:{publicKey:a,metadata:this.client.metadata}},encodeOpts:u,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(i.requester.metadata,s)})}catch(Be){throw n.setError(aw.authenticated_session_approve_publish_failure),Be}return await this.client.auth.requests.delete(t,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:i.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:n.eventId}),{session:p}})),oA(this,"rejectSessionAuthenticate",(async e=>{this.isInitialized();const{id:t,reason:r}=e,n=this.getPendingAuthRequest(t);if(!n)throw new Error(`Could not find pending auth request with id ${t}`);n.transportType===Ty.relay&&await this.confirmOnlineStateOrThrow();const i=n.requester.publicKey,s=await this.client.core.crypto.generateKeyPair(),o=zf(i),a={type:xf,receiverPublicKey:i,senderPublicKey:s};await this.sendError({id:t,topic:o,error:r,encodeOpts:a,rpcOpts:DE.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(n.requester.metadata,n.transportType)}),await this.client.auth.requests.delete(t,{message:"rejected",code:0}),await this.client.proposal.delete(t,Sg("USER_DISCONNECTED"))})),oA(this,"formatAuthMessage",(e=>{this.isInitialized();const{request:t,iss:r}=e;return uh(t,r)})),oA(this,"processRelayMessageCache",(()=>{setTimeout((async()=>{if(0!==this.relayMessageCache.length)for(;this.relayMessageCache.length>0;)try{const e=this.relayMessageCache.shift();e&&await this.onRelayMessage(e)}catch(e){this.client.logger.error(e)}}),50)})),oA(this,"cleanupDuplicatePairings",(async e=>{if(e.pairingTopic)try{const t=this.client.core.pairing.pairings.get(e.pairingTopic),r=this.client.core.pairing.pairings.getAll().filter((r=>{var n,i;return(null==(n=r.peerMetadata)?void 0:n.url)&&(null==(i=r.peerMetadata)?void 0:i.url)===e.peer.metadata.url&&r.topic&&r.topic!==t.topic}));if(0===r.length)return;this.client.logger.info(`Cleaning up ${r.length} duplicate pairing(s)`),await Promise.all(r.map((e=>this.client.core.pairing.disconnect({topic:e.topic})))),this.client.logger.info("Duplicate pairings clean up finished")}catch(t){this.client.logger.error(t)}})),oA(this,"deleteSession",(async e=>{var t;const{topic:r,expirerHasDeleted:n=!1,emitEvent:i=!0,id:s=0}=e,{self:o}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),await this.client.session.delete(r,Sg("USER_DISCONNECTED")),this.addToRecentlyDeleted(r,"session"),this.client.core.crypto.keychain.has(o.publicKey)&&await this.client.core.crypto.deleteKeyPair(o.publicKey),this.client.core.crypto.keychain.has(r)&&await this.client.core.crypto.deleteSymKey(r),n||this.client.core.expirer.del(r),this.client.core.storage.removeItem(xE).catch((e=>this.client.logger.warn(e))),this.getPendingSessionRequests().forEach((e=>{e.topic===r&&this.deletePendingSessionRequest(e.id,Sg("USER_DISCONNECTED"))})),r===(null==(t=this.sessionRequestQueue.queue[0])?void 0:t.topic)&&(this.sessionRequestQueue.state=jE.idle),i&&this.client.events.emit("session_delete",{id:s,topic:r})})),oA(this,"deleteProposal",(async(e,t)=>{if(t)try{const t=this.client.proposal.get(e),r=this.client.core.eventClient.getEvent({topic:t.pairingTopic});r?.setError(sw.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(e,Sg("USER_DISCONNECTED")),t?Promise.resolve():this.client.core.expirer.del(e)]),this.addToRecentlyDeleted(e,"proposal")})),oA(this,"deletePendingSessionRequest",(async(e,t,r=!1)=>{await Promise.all([this.client.pendingRequest.delete(e,t),r?Promise.resolve():this.client.core.expirer.del(e)]),this.addToRecentlyDeleted(e,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter((t=>t.id!==e)),r&&(this.sessionRequestQueue.state=jE.idle,this.client.events.emit("session_request_expire",{id:e}))})),oA(this,"deletePendingAuthRequest",(async(e,t,r=!1)=>{await Promise.all([this.client.auth.requests.delete(e,t),r?Promise.resolve():this.client.core.expirer.del(e)])})),oA(this,"setExpiry",(async(e,t)=>{this.client.session.keys.includes(e)&&(this.client.core.expirer.set(e,t),await this.client.session.update(e,{expiry:t}))})),oA(this,"setProposal",(async(e,t)=>{this.client.core.expirer.set(e,Bu(DE.wc_sessionPropose.req.ttl)),await this.client.proposal.set(e,t)})),oA(this,"setAuthRequest",(async(e,t)=>{const{request:r,pairingTopic:n,transportType:i=Ty.relay}=t;this.client.core.expirer.set(e,r.expiryTimestamp),await this.client.auth.requests.set(e,{authPayload:r.authPayload,requester:r.requester,expiryTimestamp:r.expiryTimestamp,id:e,pairingTopic:n,verifyContext:r.verifyContext,transportType:i})})),oA(this,"setPendingSessionRequest",(async e=>{const{id:t,topic:r,params:n,verifyContext:i}=e,s=n.request.expiryTimestamp||Bu(DE.wc_sessionRequest.req.ttl);this.client.core.expirer.set(t,s),await this.client.pendingRequest.set(t,{id:t,topic:r,params:n,verifyContext:i})})),oA(this,"sendRequest",(async e=>{const{topic:t,method:n,params:i,expiry:s,relayRpcId:o,clientRpcId:a,throwOnFailedPublish:c,appLink:u,tvf:l}=e,h=Mm(n,i,a);let d;const p=!!u;try{const e=p?Of:Nf;d=await this.client.core.crypto.encode(t,h,{encoding:e})}catch(pe){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${t} failed`),pe}let f;if(qE.includes(n)){const e=Hf(JSON.stringify(h)),t=Hf(d);f=await this.client.core.verify.register({id:t,decryptedId:e})}const g=DE[n].req;if(g.attestation=f,s&&(g.ttl=s),o&&(g.id=o),this.client.core.history.set(t,h),p){const e=pg(u,t,d);await r.g.Linking.openURL(e,this.client.name)}else{const e=DE[n].req;s&&(e.ttl=s),o&&(e.id=o),e.tvf=sA(iA({},l),{correlationId:h.id}),c?(e.internal=sA(iA({},e.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(t,d,e)):this.client.core.relayer.publish(t,d,e).catch((e=>this.client.logger.error(e)))}return h.id})),oA(this,"sendResult",(async e=>{const{id:t,topic:n,result:i,throwOnFailedPublish:s,encodeOpts:o,appLink:a}=e,c=Bm(t,i);let u;const l=a&&typeof(null==r.g?void 0:r.g.Linking)<"u";try{const e=l?Of:Nf;u=await this.client.core.crypto.encode(n,c,sA(iA({},o||{}),{encoding:e}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${n} failed`),p}let h,d;try{h=await this.client.core.history.get(n,t);const e=h.request;try{this.shouldSetTVF(e.method,e.params)&&(d=this.getTVFParams(t,e.params,i))}catch(Pe){this.client.logger.warn("sendResult() -> getTVFParams() failed",Pe)}}catch(p){throw this.client.logger.error(`sendResult() -> history.get(${n}, ${t}) failed`),p}if(l){const e=pg(a,n,u);await r.g.Linking.openURL(e,this.client.name)}else{const e=h.request.method,r=DE[e].res;r.tvf=sA(iA({},d),{correlationId:t}),s?(r.internal=sA(iA({},r.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,u,r)):this.client.core.relayer.publish(n,u,r).catch((e=>this.client.logger.error(e)))}await this.client.core.history.resolve(c)})),oA(this,"sendError",(async e=>{const{id:t,topic:n,error:i,encodeOpts:s,rpcOpts:o,appLink:a}=e,c=Um(t,i);let u;const l=a&&typeof(null==r.g?void 0:r.g.Linking)<"u";try{const e=l?Of:Nf;u=await this.client.core.crypto.encode(n,c,sA(iA({},s||{}),{encoding:e}))}catch(Me){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${n} failed`),Me}let h;try{h=await this.client.core.history.get(n,t)}catch(Me){throw this.client.logger.error(`sendError() -> history.get(${n}, ${t}) failed`),Me}if(l){const e=pg(a,n,u);await r.g.Linking.openURL(e,this.client.name)}else{const e=h.request.method,t=o||DE[e].res;this.client.core.relayer.publish(n,u,t)}await this.client.core.history.resolve(c)})),oA(this,"cleanup",(async()=>{const e=[],t=[];this.client.session.getAll().forEach((t=>{let r=!1;Uu(t.expiry)&&(r=!0),this.client.core.crypto.keychain.has(t.topic)||(r=!0),r&&e.push(t.topic)})),this.client.proposal.getAll().forEach((e=>{Uu(e.expiryTimestamp)&&t.push(e.id)})),await Promise.all([...e.map((e=>this.deleteSession({topic:e}))),...t.map((e=>this.deleteProposal(e)))])})),oA(this,"onProviderMessageEvent",(async e=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(e):await this.onRelayMessage(e)})),oA(this,"onRelayEventRequest",(async e=>{this.requestQueue.queue.push(e),await this.processRequestsQueue()})),oA(this,"processRequestsQueue",(async()=>{if(this.requestQueue.state!==jE.active){for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=jE.active;const t=this.requestQueue.queue.shift();if(t)try{await this.processRequest(t)}catch(e){this.client.logger.warn(e)}}this.requestQueue.state=jE.idle}else this.client.logger.info("Request queue already active, skipping...")})),oA(this,"processRequest",(async e=>{const{topic:t,payload:r,attestation:n,transportType:i,encryptedId:s}=e,o=r.method;if(!this.shouldIgnorePairingRequest({topic:t,requestMethod:o}))switch(o){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:t,payload:r,attestation:n,encryptedId:s});case"wc_sessionSettle":return await this.onSessionSettleRequest(t,r);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(t,r);case"wc_sessionExtend":return await this.onSessionExtendRequest(t,r);case"wc_sessionPing":return await this.onSessionPingRequest(t,r);case"wc_sessionDelete":return await this.onSessionDeleteRequest(t,r);case"wc_sessionRequest":return await this.onSessionRequest({topic:t,payload:r,attestation:n,encryptedId:s,transportType:i});case"wc_sessionEvent":return await this.onSessionEventRequest(t,r);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:t,payload:r,attestation:n,encryptedId:s,transportType:i});default:return this.client.logger.info(`Unsupported request method ${o}`)}})),oA(this,"onRelayEventResponse",(async e=>{const{topic:t,payload:r,transportType:n}=e,i=(await this.client.core.history.get(t,r.id)).request.method;switch(i){case"wc_sessionPropose":return this.onSessionProposeResponse(t,r,n);case"wc_sessionSettle":return this.onSessionSettleResponse(t,r);case"wc_sessionUpdate":return this.onSessionUpdateResponse(t,r);case"wc_sessionExtend":return this.onSessionExtendResponse(t,r);case"wc_sessionPing":return this.onSessionPingResponse(t,r);case"wc_sessionRequest":return this.onSessionRequestResponse(t,r);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(t,r);default:return this.client.logger.info(`Unsupported response method ${i}`)}})),oA(this,"onRelayEventUnknownPayload",(e=>{const{topic:t}=e,{message:r}=Ig("MISSING_OR_INVALID",`Decoded payload on topic ${t} is not identifiable as a JSON-RPC request or a response.`);throw new Error(r)})),oA(this,"shouldIgnorePairingRequest",(e=>{const{topic:t,requestMethod:r}=e,n=this.expectedPairingMethodMap.get(t);return!(!n||n.includes(r))&&!!(n.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)})),oA(this,"onSessionProposeRequest",(async e=>{const{topic:t,payload:r,attestation:n,encryptedId:i}=e,{params:s,id:o}=r;try{const e=this.client.core.eventClient.getEvent({topic:t});0===this.client.events.listenerCount("session_proposal")&&(console.warn("No listener for session_proposal event"),e?.setError(nw.proposal_listener_not_found)),this.isValidConnect(iA({},r.params));const a=s.expiryTimestamp||Bu(DE.wc_sessionPropose.req.ttl),c=iA({id:o,pairingTopic:t,expiryTimestamp:a},s);await this.setProposal(o,c);const u=await this.getVerifyContext({attestationId:n,hash:Hf(JSON.stringify(r)),encryptedId:i,metadata:c.proposer.metadata});e?.addTrace(rw.emit_session_proposal),this.client.events.emit("session_proposal",{id:o,params:c,verifyContext:u})}catch(fe){await this.sendError({id:o,topic:t,error:fe,rpcOpts:DE.wc_sessionPropose.autoReject}),this.client.logger.error(fe)}})),oA(this,"onSessionProposeResponse",(async(e,t,r)=>{const{id:n}=t;if(Jm(t)){const{result:i}=t;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:i});const s=this.client.proposal.get(n);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:s});const o=s.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:o});const a=i.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:a});const c=await this.client.core.crypto.generateSharedKey(o,a);this.pendingSessions.set(n,{sessionTopic:c,pairingTopic:e,proposalId:n,publicKey:o});const u=await this.client.core.relayer.subscribe(c,{transportType:r});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:u}),await this.client.core.pairing.activate({topic:e})}else if(Xm(t)){await this.client.proposal.delete(n,Sg("USER_DISCONNECTED"));const e=Lu("session_connect",n);if(0===this.events.listenerCount(e))throw new Error(`emitting ${e} without any listeners, 954`);this.events.emit(e,{error:t.error})}})),oA(this,"onSessionSettleRequest",(async(e,t)=>{const{id:r,params:n}=t;try{this.isValidSessionSettleRequest(n);const{relay:r,controller:i,expiry:s,namespaces:o,sessionProperties:a,scopedProperties:c,sessionConfig:u}=t.params,l=[...this.pendingSessions.values()].find((t=>t.sessionTopic===e));if(!l)return this.client.logger.error(`Pending session not found for topic ${e}`);const h=this.client.proposal.get(l.proposalId),d=sA(iA(iA(iA({topic:e,relay:r,expiry:s,namespaces:o,acknowledged:!0,pairingTopic:l.pairingTopic,requiredNamespaces:h.requiredNamespaces,optionalNamespaces:h.optionalNamespaces,controller:i.publicKey,self:{publicKey:l.publicKey,metadata:this.client.metadata},peer:{publicKey:i.publicKey,metadata:i.metadata}},a&&{sessionProperties:a}),c&&{scopedProperties:c}),u&&{sessionConfig:u}),{transportType:Ty.relay});await this.client.session.set(d.topic,d),await this.setExpiry(d.topic,d.expiry),await this.client.core.pairing.updateMetadata({topic:l.pairingTopic,metadata:d.peer.metadata}),this.client.events.emit("session_connect",{session:d}),this.events.emit(Lu("session_connect",l.proposalId),{session:d}),this.pendingSessions.delete(l.proposalId),this.deleteProposal(l.proposalId,!1),this.cleanupDuplicatePairings(d),await this.sendResult({id:t.id,topic:e,result:!0,throwOnFailedPublish:!0})}catch(A){await this.sendError({id:r,topic:e,error:A}),this.client.logger.error(A)}})),oA(this,"onSessionSettleResponse",(async(e,t)=>{const{id:r}=t;Jm(t)?(await this.client.session.update(e,{acknowledged:!0}),this.events.emit(Lu("session_approve",r),{})):Xm(t)&&(await this.client.session.delete(e,Sg("USER_DISCONNECTED")),this.events.emit(Lu("session_approve",r),{error:t.error}))})),oA(this,"onSessionUpdateRequest",(async(e,t)=>{const{params:r,id:n}=t;try{const t=`${e}_session_update`,i=ym.get(t);if(i&&this.isRequestOutOfSync(i,n))return this.client.logger.warn(`Discarding out of sync request - ${n}`),void this.sendError({id:n,topic:e,error:Sg("INVALID_UPDATE_REQUEST")});this.isValidUpdate(iA({topic:e},r));try{ym.set(t,n),await this.client.session.update(e,{namespaces:r.namespaces}),await this.sendResult({id:n,topic:e,result:!0,throwOnFailedPublish:!0})}catch(Ie){throw ym.delete(t),Ie}this.client.events.emit("session_update",{id:n,topic:e,params:r})}catch(A){await this.sendError({id:n,topic:e,error:A}),this.client.logger.error(A)}})),oA(this,"isRequestOutOfSync",((e,t)=>t.toString().slice(0,-3)<e.toString().slice(0,-3))),oA(this,"onSessionUpdateResponse",((e,t)=>{const{id:r}=t,n=Lu("session_update",r);if(0===this.events.listenerCount(n))throw new Error(`emitting ${n} without any listeners`);Jm(t)?this.events.emit(Lu("session_update",r),{}):Xm(t)&&this.events.emit(Lu("session_update",r),{error:t.error})})),oA(this,"onSessionExtendRequest",(async(e,t)=>{const{id:r}=t;try{this.isValidExtend({topic:e}),await this.setExpiry(e,Bu(UE)),await this.sendResult({id:r,topic:e,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:r,topic:e})}catch(qe){await this.sendError({id:r,topic:e,error:qe}),this.client.logger.error(qe)}})),oA(this,"onSessionExtendResponse",((e,t)=>{const{id:r}=t,n=Lu("session_extend",r);if(0===this.events.listenerCount(n))throw new Error(`emitting ${n} without any listeners`);Jm(t)?this.events.emit(Lu("session_extend",r),{}):Xm(t)&&this.events.emit(Lu("session_extend",r),{error:t.error})})),oA(this,"onSessionPingRequest",(async(e,t)=>{const{id:r}=t;try{this.isValidPing({topic:e}),await this.sendResult({id:r,topic:e,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:r,topic:e})}catch(qe){await this.sendError({id:r,topic:e,error:qe}),this.client.logger.error(qe)}})),oA(this,"onSessionPingResponse",((e,t)=>{const{id:r}=t,n=Lu("session_ping",r);setTimeout((()=>{if(0===this.events.listenerCount(n))throw new Error(`emitting ${n} without any listeners 2176`);Jm(t)?this.events.emit(Lu("session_ping",r),{}):Xm(t)&&this.events.emit(Lu("session_ping",r),{error:t.error})}),500)})),oA(this,"onSessionDeleteRequest",(async(e,t)=>{const{id:r}=t;try{this.isValidDisconnect({topic:e,reason:t.params}),Promise.all([new Promise((t=>{this.client.core.relayer.once(Sy.publish,(async()=>{t(await this.deleteSession({topic:e,id:r}))}))})),this.sendResult({id:r,topic:e,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:e,error:Sg("USER_DISCONNECTED")})]).catch((e=>this.client.logger.error(e)))}catch(qe){this.client.logger.error(qe)}})),oA(this,"onSessionRequest",(async e=>{var t,r,n;const{topic:i,payload:s,attestation:o,encryptedId:a,transportType:c}=e,{id:u,params:l}=s;try{await this.isValidRequest(iA({topic:i},l));const e=this.client.session.get(i),s=await this.getVerifyContext({attestationId:o,hash:Hf(JSON.stringify(Mm("wc_sessionRequest",l,u))),encryptedId:a,metadata:e.peer.metadata,transportType:c}),h={id:u,topic:i,params:l,verifyContext:s};await this.setPendingSessionRequest(h),c===Ty.link_mode&&null!=(t=e.peer.metadata.redirect)&&t.universal&&this.client.core.addLinkModeSupportedApp(null==(r=e.peer.metadata.redirect)?void 0:r.universal),null!=(n=this.client.signConfig)&&n.disableRequestQueue?this.emitSessionRequest(h):(this.addSessionRequestToSessionRequestQueue(h),this.processSessionRequestQueue())}catch(Me){await this.sendError({id:u,topic:i,error:Me}),this.client.logger.error(Me)}})),oA(this,"onSessionRequestResponse",((e,t)=>{const{id:r}=t,n=Lu("session_request",r);if(0===this.events.listenerCount(n))throw new Error(`emitting ${n} without any listeners`);Jm(t)?this.events.emit(Lu("session_request",r),{result:t.result}):Xm(t)&&this.events.emit(Lu("session_request",r),{error:t.error})})),oA(this,"onSessionEventRequest",(async(e,t)=>{const{id:r,params:n}=t;try{const t=`${e}_session_event_${n.event.name}`,i=ym.get(t);if(i&&this.isRequestOutOfSync(i,r))return void this.client.logger.info(`Discarding out of sync request - ${r}`);this.isValidEmit(iA({topic:e},n)),this.client.events.emit("session_event",{id:r,topic:e,params:n}),ym.set(t,r)}catch(A){await this.sendError({id:r,topic:e,error:A}),this.client.logger.error(A)}})),oA(this,"onSessionAuthenticateResponse",((e,t)=>{const{id:r}=t;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:e,payload:t}),Jm(t)?this.events.emit(Lu("session_request",r),{result:t.result}):Xm(t)&&this.events.emit(Lu("session_request",r),{error:t.error})})),oA(this,"onSessionAuthenticateRequest",(async e=>{var t;const{topic:r,payload:n,attestation:i,encryptedId:s,transportType:o}=e;try{const{requester:e,authPayload:a,expiryTimestamp:c}=n.params,u=await this.getVerifyContext({attestationId:i,hash:Hf(JSON.stringify(n)),encryptedId:s,metadata:e.metadata,transportType:o}),l={requester:e,pairingTopic:r,id:n.id,authPayload:a,verifyContext:u,expiryTimestamp:c};await this.setAuthRequest(n.id,{request:l,pairingTopic:r,transportType:o}),o===Ty.link_mode&&null!=(t=e.metadata.redirect)&&t.universal&&this.client.core.addLinkModeSupportedApp(e.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:r,params:n.params,id:n.id,verifyContext:u})}catch(fe){this.client.logger.error(fe);const t=n.params.requester.publicKey,i=await this.client.core.crypto.generateKeyPair(),s=this.getAppLinkIfEnabled(n.params.requester.metadata,o),a={type:xf,receiverPublicKey:t,senderPublicKey:i};await this.sendError({id:n.id,topic:r,error:fe,encodeOpts:a,rpcOpts:DE.wc_sessionAuthenticate.autoReject,appLink:s})}})),oA(this,"addSessionRequestToSessionRequestQueue",(e=>{this.sessionRequestQueue.queue.push(e)})),oA(this,"cleanupAfterResponse",(e=>{this.deletePendingSessionRequest(e.response.id,{message:"fulfilled",code:0}),setTimeout((()=>{this.sessionRequestQueue.state=jE.idle,this.processSessionRequestQueue()}),(0,b.toMiliseconds)(this.requestQueueDelay))})),oA(this,"cleanupPendingSentRequestsForTopic",(({topic:e,error:t})=>{const r=this.client.core.history.pending;r.length>0&&r.filter((t=>t.topic===e&&"wc_sessionRequest"===t.request.method)).forEach((e=>{const r=e.request.id,n=Lu("session_request",r);if(0===this.events.listenerCount(n))throw new Error(`emitting ${n} without any listeners`);this.events.emit(Lu("session_request",e.request.id),{error:t})}))})),oA(this,"processSessionRequestQueue",(()=>{if(this.sessionRequestQueue.state===jE.active)return void this.client.logger.info("session request queue is already active.");const e=this.sessionRequestQueue.queue[0];if(e)try{this.sessionRequestQueue.state=jE.active,this.emitSessionRequest(e)}catch(t){this.client.logger.error(t)}else this.client.logger.info("session request queue is empty.")})),oA(this,"emitSessionRequest",(e=>{this.client.events.emit("session_request",e)})),oA(this,"onPairingCreated",(e=>{if(e.methods&&this.expectedPairingMethodMap.set(e.topic,e.methods),e.active)return;const t=this.client.proposal.getAll().find((t=>t.pairingTopic===e.topic));t&&this.onSessionProposeRequest({topic:e.topic,payload:Mm("wc_sessionPropose",sA(iA({},t),{requiredNamespaces:t.requiredNamespaces,optionalNamespaces:t.optionalNamespaces,relays:t.relays,proposer:t.proposer,sessionProperties:t.sessionProperties,scopedProperties:t.scopedProperties}),t.id)})})),oA(this,"isValidConnect",(async e=>{if(!Zg(e)){const{message:t}=Ig("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(e)}`);throw new Error(t)}const{pairingTopic:t,requiredNamespaces:r,optionalNamespaces:n,sessionProperties:i,scopedProperties:s,relays:o}=e;if(Ng(t)||await this.isValidPairingTopic(t),!Yg(o,!0)){const{message:e}=Ig("MISSING_OR_INVALID",`connect() relays: ${o}`);throw new Error(e)}if(!Ng(r)&&0!==kg(r)&&this.validateNamespaces(r,"requiredNamespaces"),!Ng(n)&&0!==kg(n)&&this.validateNamespaces(n,"optionalNamespaces"),Ng(i)||this.validateSessionProps(i,"sessionProperties"),!Ng(s)){this.validateSessionProps(s,"scopedProperties");const e=Object.keys(r||{}).concat(Object.keys(n||{}));if(!Object.keys(s).every((t=>e.includes(t))))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(s)}, required/optional namespaces: ${JSON.stringify(e)}`)}})),oA(this,"validateNamespaces",((e,t)=>{const r=Fg(e,"connect()",t);if(r)throw new Error(r.message)})),oA(this,"isValidApprove",(async e=>{if(!Zg(e))throw new Error(Ig("MISSING_OR_INVALID",`approve() params: ${e}`).message);const{id:t,namespaces:r,relayProtocol:n,sessionProperties:i,scopedProperties:s}=e;this.checkRecentlyDeleted(t),await this.isValidProposalId(t);const o=this.client.proposal.get(t),a=Kg(r,"approve()");if(a)throw new Error(a.message);const c=im(o.requiredNamespaces,r,"approve()");if(c)throw new Error(c.message);if(!Og(n,!0)){const{message:e}=Ig("MISSING_OR_INVALID",`approve() relayProtocol: ${n}`);throw new Error(e)}if(Ng(i)||this.validateSessionProps(i,"sessionProperties"),!Ng(s)){this.validateSessionProps(s,"scopedProperties");const e=new Set(Object.keys(r));if(!Object.keys(s).every((t=>e.has(t))))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(s)}, approved namespaces: ${Array.from(e).join(", ")}`)}})),oA(this,"isValidReject",(async e=>{if(!Zg(e)){const{message:t}=Ig("MISSING_OR_INVALID",`reject() params: ${e}`);throw new Error(t)}const{id:t,reason:r}=e;if(this.checkRecentlyDeleted(t),await this.isValidProposalId(t),!Jg(r)){const{message:e}=Ig("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(r)}`);throw new Error(e)}})),oA(this,"isValidSessionSettleRequest",(e=>{if(!Zg(e)){const{message:t}=Ig("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${e}`);throw new Error(t)}const{relay:t,controller:r,namespaces:n,expiry:i}=e;if(!Vg(t)){const{message:e}=Ig("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(e)}const s=Lg(r,"onSessionSettleRequest()");if(s)throw new Error(s.message);const o=Kg(n,"onSessionSettleRequest()");if(o)throw new Error(o.message);if(Uu(i)){const{message:e}=Ig("EXPIRED","onSessionSettleRequest()");throw new Error(e)}})),oA(this,"isValidUpdate",(async e=>{if(!Zg(e)){const{message:t}=Ig("MISSING_OR_INVALID",`update() params: ${e}`);throw new Error(t)}const{topic:t,namespaces:r}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t);const n=this.client.session.get(t),i=Kg(r,"update()");if(i)throw new Error(i.message);const s=im(n.requiredNamespaces,r,"update()");if(s)throw new Error(s.message)})),oA(this,"isValidExtend",(async e=>{if(!Zg(e)){const{message:t}=Ig("MISSING_OR_INVALID",`extend() params: ${e}`);throw new Error(t)}const{topic:t}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t)})),oA(this,"isValidRequest",(async e=>{if(!Zg(e)){const{message:t}=Ig("MISSING_OR_INVALID",`request() params: ${e}`);throw new Error(t)}const{topic:t,request:r,chainId:n,expiry:i}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t);const{namespaces:s}=this.client.session.get(t);if(!tm(s,n)){const{message:e}=Ig("MISSING_OR_INVALID",`request() chainId: ${n}`);throw new Error(e)}if(!Xg(r)){const{message:e}=Ig("MISSING_OR_INVALID",`request() ${JSON.stringify(r)}`);throw new Error(e)}if(!rm(s,n,r.method)){const{message:e}=Ig("MISSING_OR_INVALID",`request() method: ${r.method}`);throw new Error(e)}if(i&&!cm(i,WE)){const{message:e}=Ig("MISSING_OR_INVALID",`request() expiry: ${i}. Expiry must be a number (in seconds) between ${WE.min} and ${WE.max}`);throw new Error(e)}})),oA(this,"isValidRespond",(async e=>{var t;if(!Zg(e)){const{message:t}=Ig("MISSING_OR_INVALID",`respond() params: ${e}`);throw new Error(t)}const{topic:r,response:n}=e;try{await this.isValidSessionTopic(r)}catch(A){throw null!=(t=e?.response)&&t.id&&this.cleanupAfterResponse(e),A}if(!Qg(n)){const{message:e}=Ig("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(n)}`);throw new Error(e)}})),oA(this,"isValidPing",(async e=>{if(!Zg(e)){const{message:t}=Ig("MISSING_OR_INVALID",`ping() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidSessionOrPairingTopic(t)})),oA(this,"isValidEmit",(async e=>{if(!Zg(e)){const{message:t}=Ig("MISSING_OR_INVALID",`emit() params: ${e}`);throw new Error(t)}const{topic:t,event:r,chainId:n}=e;await this.isValidSessionTopic(t);const{namespaces:i}=this.client.session.get(t);if(!tm(i,n)){const{message:e}=Ig("MISSING_OR_INVALID",`emit() chainId: ${n}`);throw new Error(e)}if(!em(r)){const{message:e}=Ig("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(r)}`);throw new Error(e)}if(!nm(i,n,r.name)){const{message:e}=Ig("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(r)}`);throw new Error(e)}})),oA(this,"isValidDisconnect",(async e=>{if(!Zg(e)){const{message:t}=Ig("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidSessionOrPairingTopic(t)})),oA(this,"isValidAuthenticate",(e=>{const{chains:t,uri:r,domain:n,nonce:i}=e;if(!Array.isArray(t)||0===t.length)throw new Error("chains is required and must be a non-empty array");if(!Og(r,!1))throw new Error("uri is required parameter");if(!Og(n,!1))throw new Error("domain is required parameter");if(!Og(i,!1))throw new Error("nonce is required parameter");if([...new Set(t.map((e=>Xc(e).namespace)))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:s}=Xc(t[0]);if("eip155"!==s)throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")})),oA(this,"getVerifyContext",(async e=>{const{attestationId:t,hash:r,encryptedId:n,metadata:i,transportType:s}=e,o={verified:{verifyUrl:i.verifyUrl||Jy,validation:"UNKNOWN",origin:i.url||""}};try{if(s===Ty.link_mode){const e=this.getAppLinkIfEnabled(i,s);return o.verified.validation=e&&new URL(e).origin===new URL(i.url).origin?"VALID":"INVALID",o}const e=await this.client.core.verify.resolve({attestationId:t,hash:r,encryptedId:n,verifyUrl:i.verifyUrl});e&&(o.verified.origin=e.origin,o.verified.isScam=e.isScam,o.verified.validation=e.origin===new URL(i.url).origin?"VALID":"INVALID")}catch(fe){this.client.logger.warn(fe)}return this.client.logger.debug(`Verify context: ${JSON.stringify(o)}`),o})),oA(this,"validateSessionProps",((e,t)=>{Object.values(e).forEach(((r,n)=>{if(null==r){const{message:i}=Ig("MISSING_OR_INVALID",`${t} must contain an existing value for each key. Received: ${r} for key ${Object.keys(e)[n]}`);throw new Error(i)}}))})),oA(this,"getPendingAuthRequest",(e=>{const t=this.client.auth.requests.get(e);return"object"==typeof t?t:void 0})),oA(this,"addToRecentlyDeleted",((e,t)=>{if(this.recentlyDeletedMap.set(e,t),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let e=0;const t=this.recentlyDeletedLimit/2;for(const r of this.recentlyDeletedMap.keys()){if(e++>=t)break;this.recentlyDeletedMap.delete(r)}}})),oA(this,"checkRecentlyDeleted",(e=>{const t=this.recentlyDeletedMap.get(e);if(t){const{message:r}=Ig("MISSING_OR_INVALID",`Record was recently deleted - ${t}: ${e}`);throw new Error(r)}})),oA(this,"isLinkModeEnabled",((e,t)=>{var n,i,s,o,a,c,u,l,h;return!(!e||t!==Ty.link_mode)&&(!0===(null==(i=null==(n=this.client.metadata)?void 0:n.redirect)?void 0:i.linkMode)&&void 0!==(null==(o=null==(s=this.client.metadata)?void 0:s.redirect)?void 0:o.universal)&&""!==(null==(c=null==(a=this.client.metadata)?void 0:a.redirect)?void 0:c.universal)&&void 0!==(null==(u=e?.redirect)?void 0:u.universal)&&""!==(null==(l=e?.redirect)?void 0:l.universal)&&!0===(null==(h=e?.redirect)?void 0:h.linkMode)&&this.client.core.linkModeSupportedApps.includes(e.redirect.universal)&&typeof(null==r.g?void 0:r.g.Linking)<"u")})),oA(this,"getAppLinkIfEnabled",((e,t)=>{var r;return this.isLinkModeEnabled(e,t)?null==(r=e?.redirect)?void 0:r.universal:void 0})),oA(this,"handleLinkModeMessage",(({url:e})=>{if(!e||!e.includes("wc_ev")||!e.includes("topic"))return;const t=qu(e,"topic")||"",r=decodeURIComponent(qu(e,"wc_ev")||""),n=this.client.session.keys.includes(t);n&&this.client.session.update(t,{transportType:Ty.link_mode}),this.client.core.dispatchEnvelope({topic:t,message:r,sessionExists:n})})),oA(this,"registerLinkModeListeners",(async()=>{var e;if(Fu()||pu()&&null!=(e=this.client.metadata.redirect)&&e.linkMode){const e=null==r.g?void 0:r.g.Linking;if(typeof e<"u"){e.addEventListener("url",this.handleLinkModeMessage,this.client.name);const t=await e.getInitialURL();t&&setTimeout((()=>{this.handleLinkModeMessage({url:t})}),50)}}})),oA(this,"shouldSetTVF",((e,t)=>{if(!t||"wc_sessionRequest"!==e)return!1;const{request:r}=t;return Object.keys(zE).includes(r.method)})),oA(this,"getTVFParams",((e,t,r)=>{var n,i;try{const s=t.request.method,o=this.extractTxHashesFromResult(s,r);return sA(iA({correlationId:e,rpcMethods:[s],chainId:t.chainId},this.isValidContractData(t.request.params)&&{contractAddresses:[null==(i=null==(n=t.request.params)?void 0:n[0])?void 0:i.to]}),{txHashes:o})}catch(s){this.client.logger.warn("Error getting TVF params",s)}return{}})),oA(this,"isValidContractData",(e=>{var t;if(!e)return!1;try{const r=e?.data||(null==(t=e?.[0])?void 0:t.data);if(!r.startsWith("0x"))return!1;const n=r.slice(2);return!!/^[0-9a-fA-F]*$/.test(n)&&n.length%2===0}catch{}return!1})),oA(this,"extractTxHashesFromResult",((e,t)=>{try{const r=zE[e];if("string"==typeof t)return[t];const n=t[r.key];if(Cg(n))return"solana_signAllTransactions"===e?n.map((e=>Vl(e))):n;if("string"==typeof n)return[n]}catch(E){this.client.logger.warn("Error extracting tx hashes from result",E)}return[]}))}async processPendingMessageEvents(){try{const e=this.client.session.keys,t=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,n]of Object.entries(t))for(const e of n)try{await this.onProviderMessageEvent({topic:r,message:e,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${e}`)}}catch(_){this.client.logger.warn("processPendingMessageEvents failed",_)}}isInitialized(){if(!this.initialized){const{message:e}=Ig("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Sy.message,(e=>{this.onProviderMessageEvent(e)}))}async onRelayMessage(e){const{topic:t,message:r,attestation:n,transportType:i}=e,{publicKey:s}=this.client.auth.authKeys.keys.includes(ZE)?this.client.auth.authKeys.get(ZE):{responseTopic:void 0,publicKey:void 0};try{const e=await this.client.core.crypto.decode(t,r,{receiverPublicKey:s,encoding:i===Ty.link_mode?Of:Nf});Gm(e)?(this.client.core.history.set(t,e),await this.onRelayEventRequest({topic:t,payload:e,attestation:n,transportType:i,encryptedId:Hf(r)})):Zm(e)?(await this.client.core.history.resolve(e),await this.onRelayEventResponse({topic:t,payload:e,transportType:i}),this.client.core.history.delete(t,e.id)):await this.onRelayEventUnknownPayload({topic:t,payload:e,transportType:i}),await this.client.core.relayer.messages.ack(t,r)}catch(o){this.client.logger.error(o)}}registerExpirerEvents(){this.client.core.expirer.on(Ky.expired,(async e=>{const{topic:t,id:r}=Mu(e.target);return r&&this.client.pendingRequest.keys.includes(r)?await this.deletePendingSessionRequest(r,Ig("EXPIRED"),!0):r&&this.client.auth.requests.keys.includes(r)?await this.deletePendingAuthRequest(r,Ig("EXPIRED"),!0):void(t?this.client.session.keys.includes(t)&&(await this.deleteSession({topic:t,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:t})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r})))}))}registerPairingEvents(){this.client.core.pairing.events.on(zy.create,(e=>this.onPairingCreated(e))),this.client.core.pairing.events.on(zy.delete,(e=>{this.addToRecentlyDeleted(e.topic,"pairing")}))}isValidPairingTopic(e){if(!Og(e,!1)){const{message:t}=Ig("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=Ig("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(Uu(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=Ig("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}async isValidSessionTopic(e){if(!Og(e,!1)){const{message:t}=Ig("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:t}=Ig("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if(Uu(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:t}=Ig("EXPIRED",`session topic: ${e}`);throw new Error(t)}if(!this.client.core.crypto.keychain.has(e)){const{message:t}=Ig("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(t)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else{if(!this.client.core.pairing.pairings.keys.includes(e)){if(Og(e,!1)){const{message:t}=Ig("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}{const{message:t}=Ig("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}}this.isValidPairingTopic(e)}}async isValidProposalId(e){if(!Gg(e)){const{message:t}=Ig("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){const{message:t}=Ig("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if(Uu(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:t}=Ig("EXPIRED",`proposal id: ${e}`);throw new Error(t)}}}class cA extends q_{constructor(e,t){super(e,t,PE,TE),this.core=e,this.logger=t}}class uA extends q_{constructor(e,t){super(e,t,BE,TE),this.core=e,this.logger=t}}class lA extends q_{constructor(e,t){super(e,t,HE,TE,(e=>e.id)),this.core=e,this.logger=t}}class hA extends q_{constructor(e,t){super(e,t,KE,GE,(()=>ZE)),this.core=e,this.logger=t}}class dA extends q_{constructor(e,t){super(e,t,VE,GE),this.core=e,this.logger=t}}class pA extends q_{constructor(e,t){super(e,t,YE,GE,(e=>e.id)),this.core=e,this.logger=t}}var fA=Object.defineProperty,gA=(e,t,r)=>t in e?fA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,mA=(e,t,r)=>gA(e,"symbol"!=typeof t?t+"":t,r);class yA{constructor(e,t){this.core=e,this.logger=t,mA(this,"authKeys"),mA(this,"pairingTopics"),mA(this,"requests"),this.authKeys=new hA(this.core,this.logger),this.pairingTopics=new dA(this.core,this.logger),this.requests=new pA(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var wA=Object.defineProperty,bA=(e,t,r)=>t in e?wA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,vA=(e,t,r)=>bA(e,"symbol"!=typeof t?t+"":t,r);class _A extends $e{constructor(e){super(e),vA(this,"protocol",kE),vA(this,"version",NE),vA(this,"name",RE.name),vA(this,"metadata"),vA(this,"core"),vA(this,"logger"),vA(this,"events",new y.EventEmitter),vA(this,"engine"),vA(this,"session"),vA(this,"proposal"),vA(this,"pendingRequest"),vA(this,"auth"),vA(this,"signConfig"),vA(this,"on",((e,t)=>this.events.on(e,t))),vA(this,"once",((e,t)=>this.events.once(e,t))),vA(this,"off",((e,t)=>this.events.off(e,t))),vA(this,"removeListener",((e,t)=>this.events.removeListener(e,t))),vA(this,"removeAllListeners",(e=>this.events.removeAllListeners(e))),vA(this,"connect",(async e=>{try{return await this.engine.connect(e)}catch(E){throw this.logger.error(E.message),E}})),vA(this,"pair",(async e=>{try{return await this.engine.pair(e)}catch(E){throw this.logger.error(E.message),E}})),vA(this,"approve",(async e=>{try{return await this.engine.approve(e)}catch(E){throw this.logger.error(E.message),E}})),vA(this,"reject",(async e=>{try{return await this.engine.reject(e)}catch(E){throw this.logger.error(E.message),E}})),vA(this,"update",(async e=>{try{return await this.engine.update(e)}catch(E){throw this.logger.error(E.message),E}})),vA(this,"extend",(async e=>{try{return await this.engine.extend(e)}catch(E){throw this.logger.error(E.message),E}})),vA(this,"request",(async e=>{try{return await this.engine.request(e)}catch(E){throw this.logger.error(E.message),E}})),vA(this,"respond",(async e=>{try{return await this.engine.respond(e)}catch(E){throw this.logger.error(E.message),E}})),vA(this,"ping",(async e=>{try{return await this.engine.ping(e)}catch(E){throw this.logger.error(E.message),E}})),vA(this,"emit",(async e=>{try{return await this.engine.emit(e)}catch(E){throw this.logger.error(E.message),E}})),vA(this,"disconnect",(async e=>{try{return await this.engine.disconnect(e)}catch(E){throw this.logger.error(E.message),E}})),vA(this,"find",(e=>{try{return this.engine.find(e)}catch(E){throw this.logger.error(E.message),E}})),vA(this,"getPendingSessionRequests",(()=>{try{return this.engine.getPendingSessionRequests()}catch(e){throw this.logger.error(e.message),e}})),vA(this,"authenticate",(async(e,t)=>{try{return await this.engine.authenticate(e,t)}catch(qe){throw this.logger.error(qe.message),qe}})),vA(this,"formatAuthMessage",(e=>{try{return this.engine.formatAuthMessage(e)}catch(E){throw this.logger.error(E.message),E}})),vA(this,"approveSessionAuthenticate",(async e=>{try{return await this.engine.approveSessionAuthenticate(e)}catch(E){throw this.logger.error(E.message),E}})),vA(this,"rejectSessionAuthenticate",(async e=>{try{return await this.engine.rejectSessionAuthenticate(e)}catch(E){throw this.logger.error(E.message),E}})),this.name=e?.name||RE.name,this.metadata=vu(e?.metadata),this.signConfig=e?.signConfig;const t=typeof e?.logger<"u"&&"string"!=typeof e?.logger?e.logger:(0,Ae.h6)((0,Ae.iP)({level:e?.logger||RE.logger}));this.core=e?.core||new CE(e),this.logger=(0,Ae.U5)(t,this.name),this.session=new uA(this.core,this.logger),this.proposal=new cA(this.core,this.logger),this.pendingRequest=new lA(this.core,this.logger),this.engine=new aA(this),this.auth=new yA(this.core,this.logger)}static async init(e){const t=new _A(e);return await t.initialize(),t}get context(){return(0,Ae.oI)(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout((()=>{this.engine.processRelayMessageCache()}),(0,b.toMiliseconds)(b.ONE_SECOND))}catch(_){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(_.message),_}}}var EA=r(4528),AA=r.n(EA),IA=Object.defineProperty,SA=Object.defineProperties,CA=Object.getOwnPropertyDescriptors,kA=Object.getOwnPropertySymbols,NA=Object.prototype.hasOwnProperty,OA=Object.prototype.propertyIsEnumerable,TA=(e,t,r)=>t in e?IA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,RA=(e,t)=>{for(var r in t||(t={}))NA.call(t,r)&&TA(e,r,t[r]);if(kA)for(var r of kA(t))OA.call(t,r)&&TA(e,r,t[r]);return e},xA=(e,t)=>SA(e,CA(t));const PA={Accept:"application/json","Content-Type":"application/json"},MA="POST",BA={headers:PA,method:MA},UA=10;class LA{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new y.EventEmitter,this.isAvailable=!1,this.registering=!1,!Fm(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const t=(0,ce.h)(e),r=await(await AA()(this.url,xA(RA({},BA),{body:t}))).json();this.onPayload({data:r})}catch(t){this.onError(e.id,t)}}async register(e=this.url){if(!Fm(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const e=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=e||this.events.listenerCount("open")>=e)&&this.events.setMaxListeners(e+1),new Promise(((e,t)=>{this.events.once("register_error",(e=>{this.resetMaxListeners(),t(e)})),this.events.once("open",(()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return t(new Error("HTTP connection is missing or invalid"));e()}))}))}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const t=(0,ce.h)({id:1,jsonrpc:"2.0",method:"test",params:[]});await AA()(e,xA(RA({},BA),{body:t}))}this.onOpen()}catch(t){const e=this.parseError(t);throw this.events.emit("register_error",e),this.onClose(),e}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const t="string"==typeof e.data?(0,ce.j)(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const r=this.parseError(t),n=r.message||r.toString(),i=Um(e,n);this.events.emit("payload",i)}parseError(e,t=this.url){return Tm(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>UA&&this.events.setMaxListeners(UA)}}const DA="error",WA="wss://relay.walletconnect.org",jA="wc",zA="universal_provider",HA=`${jA}@2:${zA}:`,qA="https://rpc.walletconnect.org/v1/",$A="generic",FA=`${qA}bundler`,KA={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function VA(){}function YA(e){return null==e||"object"!=typeof e&&"function"!=typeof e}function GA(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function ZA(e){if(YA(e))return e;if(Array.isArray(e)||GA(e)||e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer)return e.slice(0);const t=Object.getPrototypeOf(e),r=t.constructor;if(e instanceof Date||e instanceof Map||e instanceof Set)return new r(e);if(e instanceof RegExp){const t=new r(e);return t.lastIndex=e.lastIndex,t}if(e instanceof DataView)return new r(e.buffer.slice(0));if(e instanceof Error){const t=new r(e.message);return t.stack=e.stack,t.name=e.name,t.cause=e.cause,t}if(typeof File<"u"&&e instanceof File)return new r([e],e.name,{type:e.type,lastModified:e.lastModified});if("object"==typeof e){const r=Object.create(t);return Object.assign(r,e)}return e}function JA(e){return"object"==typeof e&&null!==e}function XA(e){return Object.getOwnPropertySymbols(e).filter((t=>Object.prototype.propertyIsEnumerable.call(e,t)))}function QA(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const eI="[object RegExp]",tI="[object String]",rI="[object Number]",nI="[object Boolean]",iI="[object Arguments]",sI="[object Symbol]",oI="[object Date]",aI="[object Map]",cI="[object Set]",uI="[object Array]",lI="[object ArrayBuffer]",hI="[object Object]",dI="[object DataView]",pI="[object Uint8Array]",fI="[object Uint8ClampedArray]",gI="[object Uint16Array]",mI="[object Uint32Array]",yI="[object Int8Array]",wI="[object Int16Array]",bI="[object Int32Array]",vI="[object Float32Array]",_I="[object Float64Array]";function EI(e,t){return AI(e,void 0,e,new Map,t)}function AI(e,t,r,n=new Map,i=void 0){const s=i?.(e,t,r,n);if(null!=s)return s;if(YA(e))return e;if(n.has(e))return n.get(e);if(Array.isArray(e)){const t=new Array(e.length);n.set(e,t);for(let s=0;s<e.length;s++)t[s]=AI(e[s],s,r,n,i);return Object.hasOwn(e,"index")&&(t.index=e.index),Object.hasOwn(e,"input")&&(t.input=e.input),t}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){const t=new RegExp(e.source,e.flags);return t.lastIndex=e.lastIndex,t}if(e instanceof Map){const t=new Map;n.set(e,t);for(const[s,o]of e)t.set(s,AI(o,s,r,n,i));return t}if(e instanceof Set){const t=new Set;n.set(e,t);for(const s of e)t.add(AI(s,void 0,r,n,i));return t}if(typeof Buffer<"u"&&Buffer.isBuffer(e))return e.subarray();if(GA(e)){const t=new(Object.getPrototypeOf(e).constructor)(e.length);n.set(e,t);for(let s=0;s<e.length;s++)t[s]=AI(e[s],s,r,n,i);return t}if(e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer)return e.slice(0);if(e instanceof DataView){const t=new DataView(e.buffer.slice(0),e.byteOffset,e.byteLength);return n.set(e,t),II(t,e,r,n,i),t}if(typeof File<"u"&&e instanceof File){const t=new File([e],e.name,{type:e.type});return n.set(e,t),II(t,e,r,n,i),t}if(e instanceof Blob){const t=new Blob([e],{type:e.type});return n.set(e,t),II(t,e,r,n,i),t}if(e instanceof Error){const t=new e.constructor;return n.set(e,t),t.message=e.message,t.name=e.name,t.stack=e.stack,t.cause=e.cause,II(t,e,r,n,i),t}if("object"==typeof e&&SI(e)){const t=Object.create(Object.getPrototypeOf(e));return n.set(e,t),II(t,e,r,n,i),t}return e}function II(e,t,r=e,n,i){const s=[...Object.keys(t),...XA(t)];for(let o=0;o<s.length;o++){const a=s[o],c=Object.getOwnPropertyDescriptor(e,a);(null==c||c.writable)&&(e[a]=AI(t[a],a,r,n,i))}}function SI(e){switch(QA(e)){case iI:case uI:case lI:case dI:case nI:case oI:case vI:case _I:case yI:case wI:case bI:case aI:case rI:case hI:case eI:case cI:case tI:case sI:case pI:case fI:case gI:case mI:return!0;default:return!1}}function CI(e,t){return EI(e,((r,n,i,s)=>{const o=t?.(r,n,i,s);if(null!=o)return o;if("object"==typeof e)switch(Object.prototype.toString.call(e)){case rI:case tI:case nI:{const t=new e.constructor(e?.valueOf());return II(t,e),t}case iI:{const t={};return II(t,e),t.length=e.length,t[Symbol.iterator]=e[Symbol.iterator],t}default:return}}))}function kI(e){return CI(e)}function NI(e){return null!==e&&"object"==typeof e&&"[object Arguments]"===QA(e)}function OI(e){return GA(e)}function TI(e){if("object"!=typeof e||null==e)return!1;if(null===Object.getPrototypeOf(e))return!0;if("[object Object]"!==Object.prototype.toString.call(e)){const t=e[Symbol.toStringTag];return!(null==t||!Object.getOwnPropertyDescriptor(e,Symbol.toStringTag)?.writable)&&e.toString()===`[object ${t}]`}let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function RI(e,...t){const r=t.slice(0,-1),n=t[t.length-1];let i=e;for(let s=0;s<r.length;s++){const e=r[s];i=xI(i,e,n,new Map)}return i}function xI(e,t,r,n){if(YA(e)&&(e=Object(e)),null==t||"object"!=typeof t)return e;if(n.has(t))return ZA(n.get(t));if(n.set(t,e),Array.isArray(t)){t=t.slice();for(let e=0;e<t.length;e++)t[e]=t[e]??void 0}const i=[...Object.keys(t),...XA(t)];for(let s=0;s<i.length;s++){const o=i[s];let a=t[o],c=e[o];if(NI(a)&&(a={...a}),NI(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=kI(a)),Array.isArray(a))if("object"==typeof c&&null!=c){const e=[],t=Reflect.ownKeys(c);for(let r=0;r<t.length;r++){const n=t[r];e[n]=c[n]}c=e}else c=[];const u=r(c,a,o,e,t,n);null!=u?e[o]=u:Array.isArray(a)||JA(c)&&JA(a)?e[o]=xI(c,a,r,n):null==c&&TI(a)?e[o]=xI({},a,r,n):null==c&&OI(a)?e[o]=kI(a):(void 0===c||void 0!==a)&&(e[o]=a)}return e}function PI(e,...t){return RI(e,...t,VA)}var MI=Object.defineProperty,BI=Object.defineProperties,UI=Object.getOwnPropertyDescriptors,LI=Object.getOwnPropertySymbols,DI=Object.prototype.hasOwnProperty,WI=Object.prototype.propertyIsEnumerable,jI=(e,t,r)=>t in e?MI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,zI=(e,t)=>{for(var r in t||(t={}))DI.call(t,r)&&jI(e,r,t[r]);if(LI)for(var r of LI(t))WI.call(t,r)&&jI(e,r,t[r]);return e},HI=(e,t)=>BI(e,UI(t));function qI(e,t,r){var n;const i=Xc(e);return(null==(n=t.rpcMap)?void 0:n[i.reference])||`${qA}?chainId=${i.namespace}:${i.reference}&projectId=${r}`}function $I(e){return e.includes(":")?e.split(":")[1]:e}function FI(e){return e.map((e=>`${e.split(":")[0]}:${e.split(":")[1]}`))}function KI(e,t){const r=Object.keys(t.namespaces).filter((t=>t.includes(e)));if(!r.length)return[];const n=[];return r.forEach((e=>{const r=t.namespaces[e].accounts;n.push(...r)})),n}function VI(e={},t={}){const r=YI(e),n=YI(t);return PI(r,n)}function YI(e){var t,r,n,i;const s={};if(!kg(e))return s;for(const[o,a]of Object.entries(e)){const e=wg(o)?[o]:a.chains,c=a.methods||[],u=a.events||[],l=a.rpcMap||{},h=bg(o);s[h]=HI(zI(zI({},s[h]),a),{chains:Du(e,null==(t=s[h])?void 0:t.chains),methods:Du(c,null==(r=s[h])?void 0:r.methods),events:Du(u,null==(n=s[h])?void 0:n.events),rpcMap:zI(zI({},l),null==(i=s[h])?void 0:i.rpcMap)})}return s}function GI(e){return e.includes(":")?e.split(":")[2]:e}function ZI(e){const t={};for(const[r,n]of Object.entries(e)){const e=n.methods||[],i=n.events||[],s=n.accounts||[],o=wg(r)?[r]:n.chains?n.chains:FI(n.accounts);t[r]={chains:o,methods:e,events:i,accounts:s}}return t}function JI(e){return"number"==typeof e?e:e.includes("0x")?parseInt(e,16):(e=e.includes(":")?e.split(":")[1]:e,isNaN(Number(e))?e:Number(e))}const XI={},QI=e=>XI[e],eS=(e,t)=>{XI[e]=t};var tS=Object.defineProperty,rS=(e,t,r)=>t in e?tS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,nS=(e,t,r)=>rS(e,"symbol"!=typeof t?t+"":t,r);class iS{constructor(e){nS(this,"name","polkadot"),nS(this,"client"),nS(this,"httpProviders"),nS(this,"events"),nS(this,"namespace"),nS(this,"chainId"),this.namespace=e.namespace,this.events=QI("events"),this.client=QI("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(KA.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e&&e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2]))||[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var r;const n=$I(t);e[n]=this.createHttpProvider(n,null==(r=this.namespace.rpcMap)?void 0:r[t])})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||qI(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Qm(new LA(r,QI("disableProviderPing")))}}var sS=Object.defineProperty,oS=Object.defineProperties,aS=Object.getOwnPropertyDescriptors,cS=Object.getOwnPropertySymbols,uS=Object.prototype.hasOwnProperty,lS=Object.prototype.propertyIsEnumerable,hS=(e,t,r)=>t in e?sS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,dS=(e,t)=>{for(var r in t||(t={}))uS.call(t,r)&&hS(e,r,t[r]);if(cS)for(var r of cS(t))lS.call(t,r)&&hS(e,r,t[r]);return e},pS=(e,t)=>oS(e,aS(t)),fS=(e,t,r)=>hS(e,"symbol"!=typeof t?t+"":t,r);class gS{constructor(e){fS(this,"name","eip155"),fS(this,"client"),fS(this,"chainId"),fS(this,"namespace"),fS(this,"httpProviders"),fS(this,"events"),this.namespace=e.namespace,this.events=QI("events"),this.client=QI("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(parseInt(e),t),this.chainId=parseInt(e),this.events.emit(KA.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){const r=t||qI(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Qm(new LA(r,QI("disableProviderPing")))}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var r;const n=parseInt($I(t));e[n]=this.createHttpProvider(n,null==(r=this.namespace.rpcMap)?void 0:r[t])})),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}getHttpProvider(){const e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}async handleSwitchChain(e){var t,r;let n=e.request.params?null==(t=e.request.params[0])?void 0:t.chainId:"0x0";n=n.startsWith("0x")?n:`0x${n}`;const i=parseInt(n,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else{if(!this.namespace.methods.includes("wallet_switchEthereumChain"))throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:n}]},chainId:null==(r=this.namespace.chains)?void 0:r[0]}),this.setDefaultChain(`${i}`)}return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var t,r,n;const i=null==(r=null==(t=e.request)?void 0:t.params)?void 0:r[0];if(!i)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const s=this.client.session.get(e.topic),o=(null==(n=s?.sessionProperties)?void 0:n.capabilities)||{};if(null!=o&&o[i])return o?.[i];const a=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:pS(dS({},s.sessionProperties||{}),{capabilities:pS(dS({},o||{}),{[i]:a})})})}catch(Te){console.warn("Failed to update session with capabilities",Te)}return a}async getCallStatus(e){var t,r;const n=this.client.session.get(e.topic),i=null==(t=n.sessionProperties)?void 0:t.bundler_name;if(i){const t=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(t,e)}catch(o){console.warn("Failed to fetch call status from bundler",o,t)}}const s=null==(r=n.sessionProperties)?void 0:r.bundler_url;if(s)try{return await this.getUserOperationReceipt(s,e)}catch(ge){console.warn("Failed to fetch call status from custom bundler",ge,s)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,t){var r;const n=new URL(e),i=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Mm("eth_getUserOperationReceipt",[null==(r=t.request.params)?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,t){return`${FA}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${t}`}}var mS=Object.defineProperty,yS=(e,t,r)=>t in e?mS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,wS=(e,t,r)=>yS(e,"symbol"!=typeof t?t+"":t,r);class bS{constructor(e){wS(this,"name","solana"),wS(this,"client"),wS(this,"httpProviders"),wS(this,"events"),wS(this,"namespace"),wS(this,"chainId"),this.namespace=e.namespace,this.events=QI("events"),this.client=QI("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(KA.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var r;const n=$I(t);e[n]=this.createHttpProvider(n,null==(r=this.namespace.rpcMap)?void 0:r[t])})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||qI(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Qm(new LA(r,QI("disableProviderPing")))}}var vS=Object.defineProperty,_S=(e,t,r)=>t in e?vS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ES=(e,t,r)=>_S(e,"symbol"!=typeof t?t+"":t,r);class AS{constructor(e){ES(this,"name","cosmos"),ES(this,"client"),ES(this,"httpProviders"),ES(this,"events"),ES(this,"namespace"),ES(this,"chainId"),this.namespace=e.namespace,this.events=QI("events"),this.client=QI("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(KA.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var r;const n=$I(t);e[n]=this.createHttpProvider(n,null==(r=this.namespace.rpcMap)?void 0:r[t])})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||qI(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Qm(new LA(r,QI("disableProviderPing")))}}var IS=Object.defineProperty,SS=(e,t,r)=>t in e?IS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,CS=(e,t,r)=>SS(e,"symbol"!=typeof t?t+"":t,r);class kS{constructor(e){CS(this,"name","algorand"),CS(this,"client"),CS(this,"httpProviders"),CS(this,"events"),CS(this,"namespace"),CS(this,"chainId"),this.namespace=e.namespace,this.events=QI("events"),this.client=QI("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const r=t||qI(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(KA.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var r;e[t]=this.createHttpProvider(t,null==(r=this.namespace.rpcMap)?void 0:r[t])})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||qI(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new Qm(new LA(r,QI("disableProviderPing")))}}var NS=Object.defineProperty,OS=(e,t,r)=>t in e?NS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,TS=(e,t,r)=>OS(e,"symbol"!=typeof t?t+"":t,r);class RS{constructor(e){TS(this,"name","cip34"),TS(this,"client"),TS(this,"httpProviders"),TS(this,"events"),TS(this,"namespace"),TS(this,"chainId"),this.namespace=e.namespace,this.events=QI("events"),this.client=QI("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(KA.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{const r=this.getCardanoRPCUrl(t),n=$I(t);e[n]=this.createHttpProvider(n,r)})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){const t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Qm(new LA(r,QI("disableProviderPing")))}}var xS=Object.defineProperty,PS=(e,t,r)=>t in e?xS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,MS=(e,t,r)=>PS(e,"symbol"!=typeof t?t+"":t,r);class BS{constructor(e){MS(this,"name","elrond"),MS(this,"client"),MS(this,"httpProviders"),MS(this,"events"),MS(this,"namespace"),MS(this,"chainId"),this.namespace=e.namespace,this.events=QI("events"),this.client=QI("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(KA.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var r;const n=$I(t);e[n]=this.createHttpProvider(n,null==(r=this.namespace.rpcMap)?void 0:r[t])})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||qI(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Qm(new LA(r,QI("disableProviderPing")))}}var US=Object.defineProperty,LS=(e,t,r)=>t in e?US(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,DS=(e,t,r)=>LS(e,"symbol"!=typeof t?t+"":t,r);class WS{constructor(e){DS(this,"name","multiversx"),DS(this,"client"),DS(this,"httpProviders"),DS(this,"events"),DS(this,"namespace"),DS(this,"chainId"),this.namespace=e.namespace,this.events=QI("events"),this.client=QI("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(KA.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var r;const n=$I(t);e[n]=this.createHttpProvider(n,null==(r=this.namespace.rpcMap)?void 0:r[t])})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||qI(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Qm(new LA(r,QI("disableProviderPing")))}}var jS=Object.defineProperty,zS=(e,t,r)=>t in e?jS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,HS=(e,t,r)=>zS(e,"symbol"!=typeof t?t+"":t,r);class qS{constructor(e){HS(this,"name","near"),HS(this,"client"),HS(this,"httpProviders"),HS(this,"events"),HS(this,"namespace"),HS(this,"chainId"),this.namespace=e.namespace,this.events=QI("events"),this.client=QI("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const r=t||qI(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(KA.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e&&e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2]))||[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var r;e[t]=this.createHttpProvider(t,null==(r=this.namespace.rpcMap)?void 0:r[t])})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||qI(e,this.namespace);return typeof r>"u"?void 0:new Qm(new LA(r,QI("disableProviderPing")))}}var $S=Object.defineProperty,FS=(e,t,r)=>t in e?$S(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,KS=(e,t,r)=>FS(e,"symbol"!=typeof t?t+"":t,r);class VS{constructor(e){KS(this,"name","tezos"),KS(this,"client"),KS(this,"httpProviders"),KS(this,"events"),KS(this,"namespace"),KS(this,"chainId"),this.namespace=e.namespace,this.events=QI("events"),this.client=QI("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const r=t||qI(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(KA.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e&&e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2]))||[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{e[t]=this.createHttpProvider(t)})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||qI(e,this.namespace);return typeof r>"u"?void 0:new Qm(new LA(r))}}var YS=Object.defineProperty,GS=(e,t,r)=>t in e?YS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ZS=(e,t,r)=>GS(e,"symbol"!=typeof t?t+"":t,r);class JS{constructor(e){ZS(this,"name",$A),ZS(this,"client"),ZS(this,"httpProviders"),ZS(this,"events"),ZS(this,"namespace"),ZS(this,"chainId"),this.namespace=e.namespace,this.events=QI("events"),this.client=QI("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(KA.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){var e,t;const r={};return null==(t=null==(e=this.namespace)?void 0:e.accounts)||t.forEach((e=>{const t=Xc(e);r[`${t.namespace}:${t.reference}`]=this.createHttpProvider(e)})),r}getHttpProvider(e){const t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||qI(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Qm(new LA(r,QI("disableProviderPing")))}}var XS=Object.defineProperty,QS=Object.defineProperties,eC=Object.getOwnPropertyDescriptors,tC=Object.getOwnPropertySymbols,rC=Object.prototype.hasOwnProperty,nC=Object.prototype.propertyIsEnumerable,iC=(e,t,r)=>t in e?XS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,sC=(e,t)=>{for(var r in t||(t={}))rC.call(t,r)&&iC(e,r,t[r]);if(tC)for(var r of tC(t))nC.call(t,r)&&iC(e,r,t[r]);return e},oC=(e,t)=>QS(e,eC(t)),aC=(e,t,r)=>iC(e,"symbol"!=typeof t?t+"":t,r);class cC{constructor(e){aC(this,"client"),aC(this,"namespaces"),aC(this,"optionalNamespaces"),aC(this,"sessionProperties"),aC(this,"scopedProperties"),aC(this,"events",new(w())),aC(this,"rpcProviders",{}),aC(this,"session"),aC(this,"providerOpts"),aC(this,"logger"),aC(this,"uri"),aC(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof e?.logger<"u"&&"string"!=typeof e?.logger?e.logger:(0,Ae.h6)((0,Ae.iP)({level:e?.logger||DA})),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){const t=new cC(e);return await t.initialize(),t}async request(e,t,r){const[n,i]=this.validateChain(t);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(n).request({request:sC({},e),chainId:`${n}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,t,r,n){const i=(new Date).getTime();this.request(e,r,n).then((e=>t(null,Bm(i,e)))).catch((e=>t(e,void 0)))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:null==(e=this.session)?void 0:e.topic,reason:Sg("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,t){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:n}=await this.client.authenticate(e,t);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await n();if(this.session=i.session,this.session){const e=ZI(this.session.namespaces);this.namespaces=VI(this.namespaces,e),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){const{uri:t,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});t&&(this.uri=t,this.events.emit("display_uri",t));const n=await r();this.session=n;const i=ZI(n.namespaces);return this.namespaces=VI(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,t){try{if(!this.session)return;const[r,n]=this.validateChain(e),i=this.getProvider(r);i.name===$A?i.setDefaultChain(`${r}:${n}`,t):i.setDefaultChain(n,t)}catch(qe){if(!/Please call connect/.test(qe.message))throw qe}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const t=this.client.pairing.getAll();if(Cg(t)){for(const r of t)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,t;if(this.client=this.providerOpts.client||await _A.init({core:this.providerOpts.core,logger:this.providerOpts.logger||DA,relayUrl:this.providerOpts.relayUrl||WA,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(qe){throw this.logger.error("Failed to get session",qe),new Error(`The provided session: ${null==(t=null==(e=this.providerOpts)?void 0:e.session)?void 0:t.topic} doesn't exist in the Sign client`)}else{const e=this.client.session.getAll();this.session=e[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map((e=>bg(e))))];eS("client",this.client),eS("events",this.events),eS("disableProviderPing",this.disableProviderPing),e.forEach((e=>{if(!this.session)return;const t=KI(e,this.session),r=FI(t),n=VI(this.namespaces,this.optionalNamespaces),i=oC(sC({},n[e]),{accounts:t,chains:r});switch(e){case"eip155":this.rpcProviders[e]=new gS({namespace:i});break;case"algorand":this.rpcProviders[e]=new kS({namespace:i});break;case"solana":this.rpcProviders[e]=new bS({namespace:i});break;case"cosmos":this.rpcProviders[e]=new AS({namespace:i});break;case"polkadot":this.rpcProviders[e]=new iS({namespace:i});break;case"cip34":this.rpcProviders[e]=new RS({namespace:i});break;case"elrond":this.rpcProviders[e]=new BS({namespace:i});break;case"multiversx":this.rpcProviders[e]=new WS({namespace:i});break;case"near":this.rpcProviders[e]=new qS({namespace:i});break;case"tezos":this.rpcProviders[e]=new VS({namespace:i});break;default:this.rpcProviders[$A]?this.rpcProviders[$A].updateNamespace(i):this.rpcProviders[$A]=new JS({namespace:i})}}))}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",(e=>{var t;const{topic:r}=e;r===(null==(t=this.session)?void 0:t.topic)&&this.events.emit("session_ping",e)})),this.client.on("session_event",(e=>{var t;const{params:r,topic:n}=e;if(n!==(null==(t=this.session)?void 0:t.topic))return;const{event:i}=r;if("accountsChanged"===i.name){const e=i.data;e&&Cg(e)&&this.events.emit("accountsChanged",e.map(GI))}else if("chainChanged"===i.name){const e=r.chainId,t=r.event.data,n=bg(e),i=JI(e)!==JI(t)?`${n}:${JI(t)}`:e;this.onChainChanged(i)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)})),this.client.on("session_update",(({topic:e,params:t})=>{var r,n;if(e!==(null==(r=this.session)?void 0:r.topic))return;const{namespaces:i}=t,s=null==(n=this.client)?void 0:n.session.get(e);this.session=oC(sC({},s),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})})),this.client.on("session_delete",(async e=>{var t;e.topic===(null==(t=this.session)?void 0:t.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",oC(sC({},Sg("USER_DISCONNECTED")),{data:e.topic})))})),this.on(KA.DEFAULT_CHAIN_CHANGED,(e=>{this.onChainChanged(e,!0)}))}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[$A]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach((e=>{var t;this.getProvider(e).updateNamespace(null==(t=this.session)?void 0:t.namespaces[e])}))}setNamespaces(e){const{namespaces:t,optionalNamespaces:r,sessionProperties:n,scopedProperties:i}=e;t&&Object.keys(t).length&&(this.namespaces=t),r&&Object.keys(r).length&&(this.optionalNamespaces=r),this.sessionProperties=n,this.scopedProperties=i}validateChain(e){const[t,r]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,r];if(t&&!Object.keys(this.namespaces||{}).map((e=>bg(e))).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&r)return[t,r];const n=bg(Object.keys(this.namespaces)[0]),i=this.rpcProviders[n].getDefaultChain();return[n,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,t=!1){if(!this.namespaces)return;const[r,n]=this.validateChain(e);if(!n)return;this.updateNamespaceChain(r,n),this.events.emit("chainChanged",n);const i=this.getProvider(r).getDefaultChain();t||this.getProvider(r).setDefaultChain(n),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:i,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:t,newChainId:r}){var n,i;try{if(t===r)return;const s=null==(i=null==(n=this.session)?void 0:n.namespaces[e])?void 0:i.accounts;if(!s)return;const o=s.filter((e=>e.includes(`${r}:`))).map(GI);if(!Cg(o))return;this.events.emit("accountsChanged",o)}catch(A){this.logger.warn("Failed to emit accountsChanged on chain change",A)}}updateNamespaceChain(e,t){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${t}`,n={chains:[],methods:[],events:[],defaultChain:t};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=t):this.namespaces[r]=n}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,t){var r;const n=(null==(r=this.session)?void 0:r.topic)||"";await this.client.core.storage.setItem(`${HA}/${e}${n}`,t)}async getFromStore(e){var t;const r=(null==(t=this.session)?void 0:t.topic)||"";return await this.client.core.storage.getItem(`${HA}/${e}${r}`)}async deleteFromStore(e){var t;const r=(null==(t=this.session)?void 0:t.topic)||"";await this.client.core.storage.removeItem(`${HA}/${e}${r}`)}async cleanupStorage(){var e;try{if((null==(e=this.client)?void 0:e.session.length)>0)return;const t=await this.client.core.storage.getKeys();for(const e of t)e.startsWith(HA)&&await this.client.core.storage.removeItem(e)}catch(t){this.logger.warn("Failed to cleanup storage",t)}}}},13925:function(e,t,r){"use strict";var n=r(20034);e.exports=function(e){return n(e)||null===e}},14210:function(e,t,r){"use strict";r.d(t,{P:function(){return c}});var n=r(69983),i=r(28356),s=r(81753);const o=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),a=(0,n.BX)({...o}),c={state:a,subscribeKey(e,t){return(0,i.u$)(a,e,t)},showLoading(e,t={}){this._showMessage({message:e,variant:"loading",...t})},showSuccess(e){this._showMessage({message:e,variant:"success"})},showSvg(e,t){this._showMessage({message:e,svg:t})},showError(e){const t=s.w.parseError(e);this._showMessage({message:t,variant:"error"})},hide(){a.message=o.message,a.variant=o.variant,a.svg=o.svg,a.open=o.open,a.autoClose=o.autoClose},_showMessage({message:e,svg:t,variant:r="success",autoClose:n=o.autoClose}){a.open?(a.open=!1,setTimeout((()=>{a.message=e,a.variant=r,a.svg=t,a.open=!0,a.autoClose=n}),150)):(a.message=e,a.variant=r,a.svg=t,a.open=!0,a.autoClose=n)}}},14250:function(e,t,r){"use strict";const n=r(36975).v4,i=function(e,t,r,i){if("string"!==typeof e)throw new TypeError(e+" must be a string");i=i||{};const s="number"===typeof i.version?i.version:2;if(1!==s&&2!==s)throw new TypeError(s+" must be 1 or 2");const o={method:e};if(2===s&&(o.jsonrpc="2.0"),t){if("object"!==typeof t&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");o.params=t}if("undefined"===typeof r){const e="function"===typeof i.generator?i.generator:function(){return n()};o.id=e(o,i)}else 2===s&&null===r?i.notificationIdNull&&(o.id=null):o.id=r;return o};e.exports=i},15991:function(e,t,r){"use strict";r.d(t,{R:function(){return d}});r(44114),r(18111),r(20116),r(7588),r(61701);var n=r(74699),i=r(18029),s=r(80955),o=r(81653),a=r(37903),c=r(75758);const u="rpc.walletconnect.org";function l(e,t){const r=new URL("https://rpc.walletconnect.org/v1/");return r.searchParams.set("chainId",e),r.searchParams.set("projectId",t),r.toString()}const h=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],d={extendRpcUrlWithProjectId(e,t){let r=!1;try{const t=new URL(e);r=t.host===u}catch(n){r=!1}if(r){const r=new URL(e);return r.searchParams.has("projectId")||r.searchParams.set("projectId",t),r.toString()}return e},isCaipNetwork(e){return"chainNamespace"in e&&"caipNetworkId"in e},getChainNamespace(e){return this.isCaipNetwork(e)?e.chainNamespace:s.o.CHAIN.EVM},getCaipNetworkId(e){return this.isCaipNetwork(e)?e.caipNetworkId:`${s.o.CHAIN.EVM}:${e.id}`},getDefaultRpcUrl(e,t,r){const n=e.rpcUrls?.default?.http?.[0];return h.includes(t)?l(t,r):n||""},extendCaipNetwork(e,{customNetworkImageUrls:t,projectId:r,customRpcUrls:n}){const i=this.getChainNamespace(e),s=this.getCaipNetworkId(e),o=e.rpcUrls.default.http?.[0],a=this.getDefaultRpcUrl(e,s,r),u=e?.rpcUrls?.["chainDefault"]?.http?.[0]||o,l=n?.[s]?.map((e=>e.url))||[],h=[...l,a],d=[...l];return u&&!d.includes(u)&&d.push(u),{...e,chainNamespace:i,caipNetworkId:s,assets:{imageId:c.L.NetworkImageIds[e.id],imageUrl:t?.[e.id]},rpcUrls:{...e.rpcUrls,default:{http:h},chainDefault:{http:d}}}},extendCaipNetworks(e,{customNetworkImageUrls:t,projectId:r,customRpcUrls:n}){return e.map((e=>d.extendCaipNetwork(e,{customNetworkImageUrls:t,customRpcUrls:n,projectId:r})))},getViemTransport(e,t,r){const s=[];return r?.forEach((e=>{s.push((0,n.L)(e.url,e.config))})),h.includes(e.caipNetworkId)&&s.push((0,n.L)(l(e.caipNetworkId,t),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),e?.rpcUrls?.default?.http?.forEach((e=>{s.push((0,n.L)(e))})),(0,i.Np)(s)},extendWagmiTransports(e,t,r){if(h.includes(e.caipNetworkId)){const s=this.getDefaultRpcUrl(e,e.caipNetworkId,t);return(0,i.Np)([r,(0,n.L)(s)])}return r},getUnsupportedNetwork(e){return{id:e.split(":")[1],caipNetworkId:e,name:s.o.UNSUPPORTED_NETWORK_NAME,chainNamespace:e.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(e){const t=o.i.getActiveCaipNetworkId(),r=a.W.getAllRequestedCaipNetworks(),n=Array.from(a.W.state.chains?.keys()||[]),i=t?.split(":")[0],s=!!i&&n.includes(i),c=r?.find((e=>e.caipNetworkId===t)),u=s&&!c&&t;return u?this.getUnsupportedNetwork(t):c||(e||r?.[0])}}},16092:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=5*t.ONE_MINUTE,t.TEN_MINUTES=10*t.ONE_MINUTE,t.THIRTY_MINUTES=30*t.ONE_MINUTE,t.SIXTY_MINUTES=60*t.ONE_MINUTE,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=3*t.ONE_HOUR,t.SIX_HOURS=6*t.ONE_HOUR,t.TWELVE_HOURS=12*t.ONE_HOUR,t.TWENTY_FOUR_HOURS=24*t.ONE_HOUR,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=3*t.ONE_DAY,t.FIVE_DAYS=5*t.ONE_DAY,t.SEVEN_DAYS=7*t.ONE_DAY,t.THIRTY_DAYS=30*t.ONE_DAY,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=2*t.ONE_WEEK,t.THREE_WEEKS=3*t.ONE_WEEK,t.FOUR_WEEKS=4*t.ONE_WEEK,t.ONE_YEAR=365*t.ONE_DAY},16193:function(e,t,r){"use strict";var n=r(79504),i=Error,s=n("".replace),o=function(e){return String(new i(e).stack)}("zxcasd"),a=/\n\s*at [^:]*:[^\n]*/,c=a.test(o);e.exports=function(e,t){if(c&&"string"==typeof e&&!i.prepareStackTrace)while(t--)e=s(e,a,"");return e}},16371:function(e,t,r){"use strict";r.d(t,{_l:function(){return c}});var n=r(63558),i=r(93203),s=r(44521);const o=e=>t=>{const r=(0,n.av)(e,t),{encode:o,decode:a}=(0,s.P)(r),c=r;return c.decode=(e,t)=>{const r=a(e,t);return(0,i.k5)(Buffer.from(r))},c.encode=(t,r,n)=>{const s=(0,i.Bq)(t,e);return o(s,r,n)},c},a=e=>t=>{const r=(0,n.av)(e,t),{encode:o,decode:a}=(0,s.P)(r),c=r;return c.decode=(e,t)=>{const r=a(e,t);return(0,i.cI)(Buffer.from(r))},c.encode=(t,r,n)=>{const s=(0,i.zy)(t,e);return o(s,r,n)},c},c=o(8);a(8),o(16),a(16),o(24),a(24),o(32),a(32)},16986:function(e,t,r){"use strict";r.d(t,{I:function(){return n}});const n=e=>e},17409:function(e,t,r){"use strict";r.d(t,{j:function(){return n}});const n="standard:events"},17505:function(e,t,r){var n=r(87850),i="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";e.exports=n(i)},17935:function(e,t,r){"use strict";r.d(t,{X:function(){return n.X}});var n=r(61140)},17945:function(e,t,r){"use strict";r.d(t,{KC:function(){return x},KJ:function(){return E},L5:function(){return P},NW:function(){return R},PV:function(){return T},YO:function(){return v},Yj:function(){return O},ai:function(){return C},au:function(){return M},bz:function(){return b},eu:function(){return A},g1:function(){return N},lq:function(){return k},me:function(){return S},vA:function(){return p},vt:function(){return f},zM:function(){return _}});r(44114),r(18111),r(61701),r(17642),r(58004),r(33853),r(45876),r(32475),r(15024),r(31698);class n extends TypeError{constructor(e,t){let r;const{message:n,explanation:i,...s}=e,{path:o}=e,a=0===o.length?n:`At path: ${o.join(".")} -- ${n}`;super(i??a),null!=i&&(this.cause=a),Object.assign(this,s),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...t()])}}function i(e){return s(e)&&"function"===typeof e[Symbol.iterator]}function s(e){return"object"===typeof e&&null!=e}function o(e){return s(e)&&!Array.isArray(e)}function a(e){return"symbol"===typeof e?e.toString():"string"===typeof e?JSON.stringify(e):`${e}`}function c(e){const{done:t,value:r}=e.next();return t?void 0:r}function u(e,t,r,n){if(!0===e)return;!1===e?e={}:"string"===typeof e&&(e={message:e});const{path:i,branch:s}=t,{type:o}=r,{refinement:c,message:u=`Expected a value of type \`${o}\`${c?` with refinement \`${c}\``:""}, but received: \`${a(n)}\``}=e;return{value:n,type:o,refinement:c,key:i[i.length-1],path:i,branch:s,...e,message:u}}function*l(e,t,r,n){i(e)||(e=[e]);for(const i of e){const e=u(i,t,r,n);e&&(yield e)}}function*h(e,t,r={}){const{path:n=[],branch:i=[e],coerce:o=!1,mask:a=!1}=r,c={path:n,branch:i,mask:a};o&&(e=t.coercer(e,c));let u="valid";for(const s of t.validator(e,c))s.explanation=r.message,u="not_valid",yield[s,void 0];for(let[l,d,p]of t.entries(e,c)){const t=h(d,p,{path:void 0===l?n:[...n,l],branch:void 0===l?i:[...i,d],coerce:o,mask:a,message:r.message});for(const r of t)r[0]?(u=null!=r[0].refinement?"not_refined":"not_valid",yield[r[0],void 0]):o&&(d=r[1],void 0===l?e=d:e instanceof Map?e.set(l,d):e instanceof Set?e.add(d):s(e)&&(void 0!==d||l in e)&&(e[l]=d))}if("not_valid"!==u)for(const s of t.refiner(e,c))s.explanation=r.message,u="not_refined",yield[s,void 0];"valid"===u&&(yield[void 0,e])}class d{constructor(e){const{type:t,schema:r,validator:n,refiner:i,coercer:s=e=>e,entries:o=function*(){}}=e;this.type=t,this.schema=r,this.entries=o,this.coercer=s,this.validator=n?(e,t)=>{const r=n(e,t);return l(r,t,this,e)}:()=>[],this.refiner=i?(e,t)=>{const r=i(e,t);return l(r,t,this,e)}:()=>[]}assert(e,t){return p(e,this,t)}create(e,t){return f(e,this,t)}is(e){return m(e,this)}mask(e,t){return g(e,this,t)}validate(e,t={}){return y(e,this,t)}}function p(e,t,r){const n=y(e,t,{message:r});if(n[0])throw n[0]}function f(e,t,r){const n=y(e,t,{coerce:!0,message:r});if(n[0])throw n[0];return n[1]}function g(e,t,r){const n=y(e,t,{coerce:!0,mask:!0,message:r});if(n[0])throw n[0];return n[1]}function m(e,t){const r=y(e,t);return!r[0]}function y(e,t,r={}){const i=h(e,t,r),s=c(i);if(s[0]){const e=new n(s[0],(function*(){for(const e of i)e[0]&&(yield e[0])}));return[e,void 0]}{const e=s[1];return[void 0,e]}}function w(e,t){return new d({type:e,schema:null,validator:t})}function b(){return w("any",(()=>!0))}function v(e){return new d({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(const[r,n]of t.entries())yield[r,n,e]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${a(e)}`}})}function _(){return w("boolean",(e=>"boolean"===typeof e))}function E(e){return w("instance",(t=>t instanceof e||`Expected a \`${e.name}\` instance, but received: ${a(t)}`))}function A(e){const t=a(e),r=typeof e;return new d({type:"literal",schema:"string"===r||"number"===r||"boolean"===r?e:null,validator(r){return r===e||`Expected the literal \`${t}\`, but received: ${a(r)}`}})}function I(){return w("never",(()=>!1))}function S(e){return new d({...e,validator:(t,r)=>null===t||e.validator(t,r),refiner:(t,r)=>null===t||e.refiner(t,r)})}function C(){return w("number",(e=>"number"===typeof e&&!isNaN(e)||`Expected a number, but received: ${a(e)}`))}function k(e){return new d({...e,validator:(t,r)=>void 0===t||e.validator(t,r),refiner:(t,r)=>void 0===t||e.refiner(t,r)})}function N(e,t){return new d({type:"record",schema:null,*entries(r){if(s(r))for(const n in r){const i=r[n];yield[n,n,e],yield[n,i,t]}},validator(e){return o(e)||`Expected an object, but received: ${a(e)}`},coercer(e){return o(e)?{...e}:e}})}function O(){return w("string",(e=>"string"===typeof e||`Expected a string, but received: ${a(e)}`))}function T(e){const t=I();return new d({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){const n=Math.max(e.length,r.length);for(let i=0;i<n;i++)yield[i,r[i],e[i]||t]}},validator(e){return Array.isArray(e)||`Expected an array, but received: ${a(e)}`},coercer(e){return Array.isArray(e)?e.slice():e}})}function R(e){const t=Object.keys(e);return new d({type:"type",schema:e,*entries(r){if(s(r))for(const n of t)yield[n,r[n],e[n]]},validator(e){return o(e)||`Expected an object, but received: ${a(e)}`},coercer(e){return o(e)?{...e}:e}})}function x(e){const t=e.map((e=>e.type)).join(" | ");return new d({type:"union",schema:null,coercer(t,r){for(const n of e){const[e,i]=n.validate(t,{coerce:!0,mask:r.mask});if(!e)return i}return t},validator(r,n){const i=[];for(const t of e){const[...e]=h(r,t,n),[s]=e;if(!s[0])return[];for(const[t]of e)t&&i.push(t)}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${a(r)}`,...i]}})}function P(){return w("unknown",(()=>!0))}function M(e,t,r){return new d({...e,coercer:(n,i)=>m(n,t)?e.coercer(r(n,i),i):e.coercer(n,i)})}},18029:function(e,t,r){"use strict";r.d(t,{Np:function(){return a}});r(44114),r(18111),r(61701),r(18237),r(13579);var n=r(815),i=r(22708),s=r(43212),o=r(46374);function a(e,t={}){const{key:r="fallback",name:n="Fallback",rank:i=!1,shouldThrow:s=c,retryCount:a,retryDelay:l}=t;return({chain:t,pollingInterval:c=4e3,timeout:h,...d})=>{let p=e,f=()=>{};const g=(0,o.o)({key:r,name:n,async request({method:e,params:r}){let n;const i=async(o=0)=>{const a=p[o]({...d,chain:t,retryCount:0,timeout:h});try{const t=await a.request({method:e,params:r});return f({method:e,params:r,response:t,transport:a,status:"success"}),t}catch(c){if(f({error:c,method:e,params:r,transport:a,status:"error"}),s(c))throw c;if(o===p.length-1)throw c;if(n??=p.slice(o+1).some((r=>{const{include:n,exclude:i}=r({chain:t}).config.methods||{};return n?n.includes(e):!i||!i.includes(e)})),!n)throw c;return i(o+1)}};return i()},retryCount:a,retryDelay:l,type:"fallback"},{onResponse:e=>f=e,transports:p.map((e=>e({chain:t,retryCount:0})))});if(i){const e="object"===typeof i?i:{};u({chain:t,interval:e.interval??c,onTransports:e=>p=e,ping:e.ping,sampleCount:e.sampleCount,timeout:e.timeout,transports:p,weights:e.weights})}return g}}function c(e){return!(!("code"in e)||"number"!==typeof e.code||e.code!==i.YW.code&&e.code!==i.vx.code&&!n.A7.nodeMessage.test(e.message)&&5e3!==e.code)}function u({chain:e,interval:t=4e3,onTransports:r,ping:n,sampleCount:i=10,timeout:o=1e3,transports:a,weights:c={}}){const{stability:u=.7,latency:l=.3}=c,h=[],d=async()=>{const c=await Promise.all(a.map((async t=>{const r=t({chain:e,retryCount:0,timeout:o}),i=Date.now();let s,a;try{await(n?n({transport:r}):r.request({method:"net_listening"})),a=1}catch{a=0}finally{s=Date.now()}const c=s-i;return{latency:c,success:a}})));h.push(c),h.length>i&&h.shift();const p=Math.max(...h.map((e=>Math.max(...e.map((({latency:e})=>e)))))),f=a.map(((e,t)=>{const r=h.map((e=>e[t].latency)),n=r.reduce(((e,t)=>e+t),0)/r.length,i=1-n/p,s=h.map((e=>e[t].success)),o=s.reduce(((e,t)=>e+t),0)/s.length;return 0===o?[0,t]:[l*i+u*o,t]})).sort(((e,t)=>t[0]-e[0]));r(f.map((([,e])=>a[e]))),await(0,s.u)(t),d()};d()}},18571:function(e,t,r){"use strict";r(18111),r(22489);const n=r(36975).v4,i=r(14250),s=function(e,t){if(!(this instanceof s))return new s(e,t);t||(t={}),this.options={reviver:"undefined"!==typeof t.reviver?t.reviver:null,replacer:"undefined"!==typeof t.replacer?t.replacer:null,generator:"undefined"!==typeof t.generator?t.generator:function(){return n()},version:"undefined"!==typeof t.version?t.version:2,notificationIdNull:"boolean"===typeof t.notificationIdNull&&t.notificationIdNull},this.callServer=e};e.exports=s,s.prototype.request=function(e,t,r,n){const s=this;let o=null;const a=Array.isArray(e)&&"function"===typeof t;if(1===this.options.version&&a)throw new TypeError("JSON-RPC 1.0 does not support batching");const c=!a&&e&&"object"===typeof e&&"function"===typeof t;if(a||c)n=t,o=e;else{"function"===typeof r&&(n=r,r=void 0);const s="function"===typeof n;try{o=i(e,t,r,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(l){if(s)return n(l);throw l}if(!s)return o}let u;try{u=JSON.stringify(o,this.options.replacer)}catch(l){return n(l)}return this.callServer(u,(function(e,t){s._parseResponse(e,t,n)})),o},s.prototype._parseResponse=function(e,t,r){if(e)return void r(e);if(!t)return r();let n;try{n=JSON.parse(t,this.options.reviver)}catch(e){return r(e)}if(3===r.length){if(Array.isArray(n)){const e=function(e){return"undefined"!==typeof e.error},t=function(t){return!e(t)};return r(null,n.filter(e),n.filter(t))}return r(null,n.error,n.result)}r(null,n)}},18894:function(e,t,r){"use strict";r.d(t,{d:function(){return h}});r(44114),r(18111),r(22489),r(7588),r(17642),r(58004),r(33853),r(45876),r(32475),r(15024),r(31698);var n,i=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},s=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r};let o;const a=new Set;function c(e){p=void 0,a.add(e)}function u(e){p=void 0,a.delete(e)}const l={};function h(){if(o)return o;if(o=Object.freeze({register:d,get:f,on:g}),"undefined"===typeof window)return o;const e=Object.freeze({register:d});try{window.addEventListener("wallet-standard:register-wallet",(({detail:t})=>t(e)))}catch(t){console.error("wallet-standard:register-wallet event listener could not be added\n",t)}try{window.dispatchEvent(new y(e))}catch(t){console.error("wallet-standard:app-ready event could not be dispatched\n",t)}return o}function d(...e){return e=e.filter((e=>!a.has(e))),e.length?(e.forEach((e=>c(e))),l["register"]?.forEach((t=>m((()=>t(...e))))),function(){e.forEach((e=>u(e))),l["unregister"]?.forEach((t=>m((()=>t(...e)))))}):()=>{}}let p;function f(){return p||(p=[...a]),p}function g(e,t){return l[e]?.push(t)||(l[e]=[t]),function(){l[e]=l[e]?.filter((e=>t!==e))}}function m(e){try{e()}catch(t){console.error(t)}}class y extends Event{get detail(){return i(this,n,"f")}get type(){return"wallet-standard:app-ready"}constructor(e){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),n.set(this,void 0),s(this,n,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}n=new WeakMap},19008:function(e,t,r){"use strict";r.d(t,{A:function(){return n}});const n=(e,t,r)=>JSON.stringify(e,((e,r)=>{const n="bigint"===typeof r?r.toString():r;return"function"===typeof t?t(e,n):n}),r)},19349:function(e,t,r){"use strict";r.d(t,{W:function(){return a}});var n=r(69983),i=r(9051),s=r(25638);const o=(0,n.BX)({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),a={state:o,subscribe(e){return(0,n.B1)(o,(()=>e(o)))},setThemeMode(e){o.themeMode=e;try{const t=s.a.getAuthConnector();if(t){const r=a.getSnapshot().themeVariables;t.provider.syncTheme({themeMode:e,themeVariables:r,w3mThemeVariables:(0,i.o)(r,e)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(e){o.themeVariables={...o.themeVariables,...e};try{const e=s.a.getAuthConnector();if(e){const t=a.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:t,w3mThemeVariables:(0,i.o)(o.themeVariables,o.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return(0,n.P9)(o)}}},19816:function(e,t,r){"use strict";r.d(t,{R:function(){return i}});const n=new AbortController,i={EmbeddedWalletAbortController:n,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${s()?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"}}};function s(){return"undefined"!==typeof window}},20035:function(e,t,r){"use strict";r.d(t,{j:function(){return o}});var n=r(63558),i=r(96030),s=r(44521);const o=e=>{const t=(0,n.av)(32,e),{encode:r,decode:o}=(0,s.P)(t),a=t;return a.decode=(e,t)=>{const r=o(e,t);return new i.PublicKey(r)},a.encode=(e,t,n)=>{const i=e.toBuffer();return r(i,t,n)},a}},20116:function(e,t,r){"use strict";var n=r(46518),i=r(69565),s=r(72652),o=r(79306),a=r(28551),c=r(1767),u=r(9539),l=r(84549),h=l("find",TypeError);n({target:"Iterator",proto:!0,real:!0,forced:h},{find:function(e){a(this);try{o(e)}catch(n){u(this,"throw",n)}if(h)return i(h,this,e);var t=c(this),r=0;return s(t,(function(t,n){if(e(t,r++))return n(t)}),{IS_RECORD:!0,INTERRUPTED:!0}).result}})},20166:function(e,t,r){"use strict";var n=r(31937);(0,n.x)({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}}),(0,n.x)({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0})},20169:function(e,t,r){"use strict";r.d(t,{Db:function(){return s},oU:function(){return o},tM:function(){return i}});const n=("undefined"!==typeof process?{NODE_ENV:"production",BASE_URL:""}["NEXT_PUBLIC_SECURE_SITE_ORIGIN"]:void 0)||"https://secure.walletconnect.org",i=[{label:"Coinbase",name:"coinbase",feeRange:"1-2%",url:"",supportedChains:["eip155"]},{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],s="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",o={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:n,SECURE_SITE_DASHBOARD:`${n}/dashboard`,SECURE_SITE_FAVICON:`${n}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],WC_COINBASE_PAY_SDK_CHAINS:["ethereum","arbitrum","polygon","berachain","avalanche-c-chain","optimism","celo","base"],WC_COINBASE_PAY_SDK_FALLBACK_CHAIN:"ethereum",WC_COINBASE_PAY_SDK_CHAIN_NAME_MAP:{Ethereum:"ethereum","Arbitrum One":"arbitrum",Polygon:"polygon",Berachain:"berachain",Avalanche:"avalanche-c-chain","OP Mainnet":"optimism",Celo:"celo",Base:"base"},WC_COINBASE_ONRAMP_APP_ID:"bf18c88d-495a-463b-b249-0b9d3656cf5e",SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:["eip155","solana"],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:["eip155","solana"],ACTIVITY_ENABLED_CHAIN_NAMESPACES:["eip155"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in a new browser tab"},SEND_SUPPORTED_NAMESPACES:["eip155","solana"],DEFAULT_FEATURES:{swaps:!0,onramp:!0,receive:!0,send:!0,email:!0,emailShowWallets:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],history:!0,analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"}}},21340:function(e,t,r){"use strict";function n(e){if("string"===typeof e)return`solana:${e}`}r.d(t,{o:function(){return n}})},22188:function(e,t,r){"use strict";r(44114);
/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const n=4,i=0,s=1,o=2;function a(e){let t=e.length;while(--t>=0)e[t]=0}const c=0,u=1,l=2,h=3,d=258,p=29,f=256,g=f+1+p,m=30,y=19,w=2*g+1,b=15,v=16,_=7,E=256,A=16,I=17,S=18,C=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),k=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),N=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),O=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),T=512,R=new Array(2*(g+2));a(R);const x=new Array(2*m);a(x);const P=new Array(T);a(P);const M=new Array(d-h+1);a(M);const B=new Array(p);a(B);const U=new Array(m);function L(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}let D,W,j;function z(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}a(U);const H=e=>e<256?P[e]:P[256+(e>>>7)],q=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},$=(e,t,r)=>{e.bi_valid>v-r?(e.bi_buf|=t<<e.bi_valid&65535,q(e,e.bi_buf),e.bi_buf=t>>v-e.bi_valid,e.bi_valid+=r-v):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},F=(e,t,r)=>{$(e,r[2*t],r[2*t+1])},K=(e,t)=>{let r=0;do{r|=1&e,e>>>=1,r<<=1}while(--t>0);return r>>>1},V=e=>{16===e.bi_valid?(q(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)},Y=(e,t)=>{const r=t.dyn_tree,n=t.max_code,i=t.stat_desc.static_tree,s=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,c=t.stat_desc.max_length;let u,l,h,d,p,f,g=0;for(d=0;d<=b;d++)e.bl_count[d]=0;for(r[2*e.heap[e.heap_max]+1]=0,u=e.heap_max+1;u<w;u++)l=e.heap[u],d=r[2*r[2*l+1]+1]+1,d>c&&(d=c,g++),r[2*l+1]=d,l>n||(e.bl_count[d]++,p=0,l>=a&&(p=o[l-a]),f=r[2*l],e.opt_len+=f*(d+p),s&&(e.static_len+=f*(i[2*l+1]+p)));if(0!==g){do{d=c-1;while(0===e.bl_count[d])d--;e.bl_count[d]--,e.bl_count[d+1]+=2,e.bl_count[c]--,g-=2}while(g>0);for(d=c;0!==d;d--){l=e.bl_count[d];while(0!==l)h=e.heap[--u],h>n||(r[2*h+1]!==d&&(e.opt_len+=(d-r[2*h+1])*r[2*h],r[2*h+1]=d),l--)}}},G=(e,t,r)=>{const n=new Array(b+1);let i,s,o=0;for(i=1;i<=b;i++)o=o+r[i-1]<<1,n[i]=o;for(s=0;s<=t;s++){let t=e[2*s+1];0!==t&&(e[2*s]=K(n[t]++,t))}},Z=()=>{let e,t,r,n,i;const s=new Array(b+1);for(r=0,n=0;n<p-1;n++)for(B[n]=r,e=0;e<1<<C[n];e++)M[r++]=n;for(M[r-1]=n,i=0,n=0;n<16;n++)for(U[n]=i,e=0;e<1<<k[n];e++)P[i++]=n;for(i>>=7;n<m;n++)for(U[n]=i<<7,e=0;e<1<<k[n]-7;e++)P[256+i++]=n;for(t=0;t<=b;t++)s[t]=0;e=0;while(e<=143)R[2*e+1]=8,e++,s[8]++;while(e<=255)R[2*e+1]=9,e++,s[9]++;while(e<=279)R[2*e+1]=7,e++,s[7]++;while(e<=287)R[2*e+1]=8,e++,s[8]++;for(G(R,g+1,s),e=0;e<m;e++)x[2*e+1]=5,x[2*e]=K(e,5);D=new L(R,C,f+1,g,b),W=new L(x,k,0,m,b),j=new L(new Array(0),N,0,y,_)},J=e=>{let t;for(t=0;t<g;t++)e.dyn_ltree[2*t]=0;for(t=0;t<m;t++)e.dyn_dtree[2*t]=0;for(t=0;t<y;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*E]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},X=e=>{e.bi_valid>8?q(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},Q=(e,t,r,n)=>{const i=2*t,s=2*r;return e[i]<e[s]||e[i]===e[s]&&n[t]<=n[r]},ee=(e,t,r)=>{const n=e.heap[r];let i=r<<1;while(i<=e.heap_len){if(i<e.heap_len&&Q(t,e.heap[i+1],e.heap[i],e.depth)&&i++,Q(t,n,e.heap[i],e.depth))break;e.heap[r]=e.heap[i],r=i,i<<=1}e.heap[r]=n},te=(e,t,r)=>{let n,i,s,o,a=0;if(0!==e.sym_next)do{n=255&e.pending_buf[e.sym_buf+a++],n+=(255&e.pending_buf[e.sym_buf+a++])<<8,i=e.pending_buf[e.sym_buf+a++],0===n?F(e,i,t):(s=M[i],F(e,s+f+1,t),o=C[s],0!==o&&(i-=B[s],$(e,i,o)),n--,s=H(n),F(e,s,r),o=k[s],0!==o&&(n-=U[s],$(e,n,o)))}while(a<e.sym_next);F(e,E,t)},re=(e,t)=>{const r=t.dyn_tree,n=t.stat_desc.static_tree,i=t.stat_desc.has_stree,s=t.stat_desc.elems;let o,a,c,u=-1;for(e.heap_len=0,e.heap_max=w,o=0;o<s;o++)0!==r[2*o]?(e.heap[++e.heap_len]=u=o,e.depth[o]=0):r[2*o+1]=0;while(e.heap_len<2)c=e.heap[++e.heap_len]=u<2?++u:0,r[2*c]=1,e.depth[c]=0,e.opt_len--,i&&(e.static_len-=n[2*c+1]);for(t.max_code=u,o=e.heap_len>>1;o>=1;o--)ee(e,r,o);c=s;do{o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],ee(e,r,1),a=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=a,r[2*c]=r[2*o]+r[2*a],e.depth[c]=(e.depth[o]>=e.depth[a]?e.depth[o]:e.depth[a])+1,r[2*o+1]=r[2*a+1]=c,e.heap[1]=c++,ee(e,r,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],Y(e,t),G(r,u,e.bl_count)},ne=(e,t,r)=>{let n,i,s=-1,o=t[1],a=0,c=7,u=4;for(0===o&&(c=138,u=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)i=o,o=t[2*(n+1)+1],++a<c&&i===o||(a<u?e.bl_tree[2*i]+=a:0!==i?(i!==s&&e.bl_tree[2*i]++,e.bl_tree[2*A]++):a<=10?e.bl_tree[2*I]++:e.bl_tree[2*S]++,a=0,s=i,0===o?(c=138,u=3):i===o?(c=6,u=3):(c=7,u=4))},ie=(e,t,r)=>{let n,i,s=-1,o=t[1],a=0,c=7,u=4;for(0===o&&(c=138,u=3),n=0;n<=r;n++)if(i=o,o=t[2*(n+1)+1],!(++a<c&&i===o)){if(a<u)do{F(e,i,e.bl_tree)}while(0!==--a);else 0!==i?(i!==s&&(F(e,i,e.bl_tree),a--),F(e,A,e.bl_tree),$(e,a-3,2)):a<=10?(F(e,I,e.bl_tree),$(e,a-3,3)):(F(e,S,e.bl_tree),$(e,a-11,7));a=0,s=i,0===o?(c=138,u=3):i===o?(c=6,u=3):(c=7,u=4)}},se=e=>{let t;for(ne(e,e.dyn_ltree,e.l_desc.max_code),ne(e,e.dyn_dtree,e.d_desc.max_code),re(e,e.bl_desc),t=y-1;t>=3;t--)if(0!==e.bl_tree[2*O[t]+1])break;return e.opt_len+=3*(t+1)+5+5+4,t},oe=(e,t,r,n)=>{let i;for($(e,t-257,5),$(e,r-1,5),$(e,n-4,4),i=0;i<n;i++)$(e,e.bl_tree[2*O[i]+1],3);ie(e,e.dyn_ltree,t-1),ie(e,e.dyn_dtree,r-1)},ae=e=>{let t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return i;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return s;for(t=32;t<f;t++)if(0!==e.dyn_ltree[2*t])return s;return i};let ce=!1;const ue=e=>{ce||(Z(),ce=!0),e.l_desc=new z(e.dyn_ltree,D),e.d_desc=new z(e.dyn_dtree,W),e.bl_desc=new z(e.bl_tree,j),e.bi_buf=0,e.bi_valid=0,J(e)},le=(e,t,r,n)=>{$(e,(c<<1)+(n?1:0),3),X(e),q(e,r),q(e,~r),r&&e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r},he=e=>{$(e,u<<1,3),F(e,E,R),V(e)},de=(e,t,r,i)=>{let s,a,c=0;e.level>0?(e.strm.data_type===o&&(e.strm.data_type=ae(e)),re(e,e.l_desc),re(e,e.d_desc),c=se(e),s=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=s&&(s=a)):s=a=r+5,r+4<=s&&-1!==t?le(e,t,r,i):e.strategy===n||a===s?($(e,(u<<1)+(i?1:0),3),te(e,R,x)):($(e,(l<<1)+(i?1:0),3),oe(e,e.l_desc.max_code+1,e.d_desc.max_code+1,c+1),te(e,e.dyn_ltree,e.dyn_dtree)),J(e),i&&X(e)},pe=(e,t,r)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=r,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(M[r]+f+1)]++,e.dyn_dtree[2*H(t)]++),e.sym_next===e.sym_end);var fe=ue,ge=le,me=de,ye=pe,we=he,be={_tr_init:fe,_tr_stored_block:ge,_tr_flush_block:me,_tr_tally:ye,_tr_align:we};const ve=(e,t,r,n)=>{let i=65535&e,s=e>>>16&65535,o=0;while(0!==r){o=r>2e3?2e3:r,r-=o;do{i=i+t[n++]|0,s=s+i|0}while(--o);i%=65521,s%=65521}return i|s<<16};var _e=ve;const Ee=()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t},Ae=new Uint32Array(Ee()),Ie=(e,t,r,n)=>{const i=Ae,s=n+r;e^=-1;for(let o=n;o<s;o++)e=e>>>8^i[255&(e^t[o])];return~e};var Se=Ie,Ce={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},ke={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Ne,_tr_stored_block:Oe,_tr_flush_block:Te,_tr_tally:Re,_tr_align:xe}=be,{Z_NO_FLUSH:Pe,Z_PARTIAL_FLUSH:Me,Z_FULL_FLUSH:Be,Z_FINISH:Ue,Z_BLOCK:Le,Z_OK:De,Z_STREAM_END:We,Z_STREAM_ERROR:je,Z_DATA_ERROR:ze,Z_BUF_ERROR:He,Z_DEFAULT_COMPRESSION:qe,Z_FILTERED:$e,Z_HUFFMAN_ONLY:Fe,Z_RLE:Ke,Z_FIXED:Ve,Z_DEFAULT_STRATEGY:Ye,Z_UNKNOWN:Ge,Z_DEFLATED:Ze}=ke,Je=9,Xe=15,Qe=8,et=29,tt=256,rt=tt+1+et,nt=30,it=19,st=2*rt+1,ot=15,at=3,ct=258,ut=ct+at+1,lt=32,ht=42,dt=57,pt=69,ft=73,gt=91,mt=103,yt=113,wt=666,bt=1,vt=2,_t=3,Et=4,At=3,It=(e,t)=>(e.msg=Ce[t],t),St=e=>2*e-(e>4?9:0),Ct=e=>{let t=e.length;while(--t>=0)e[t]=0},kt=e=>{let t,r,n,i=e.w_size;t=e.hash_size,n=t;do{r=e.head[--n],e.head[n]=r>=i?r-i:0}while(--t);t=i,n=t;do{r=e.prev[--n],e.prev[n]=r>=i?r-i:0}while(--t)};let Nt=(e,t,r)=>(t<<e.hash_shift^r)&e.hash_mask,Ot=Nt;const Tt=e=>{const t=e.state;let r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))},Rt=(e,t)=>{Te(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Tt(e.strm)},xt=(e,t)=>{e.pending_buf[e.pending++]=t},Pt=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},Mt=(e,t,r,n)=>{let i=e.avail_in;return i>n&&(i=n),0===i?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),r),1===e.state.wrap?e.adler=_e(e.adler,t,i,r):2===e.state.wrap&&(e.adler=Se(e.adler,t,i,r)),e.next_in+=i,e.total_in+=i,i)},Bt=(e,t)=>{let r,n,i=e.max_chain_length,s=e.strstart,o=e.prev_length,a=e.nice_match;const c=e.strstart>e.w_size-ut?e.strstart-(e.w_size-ut):0,u=e.window,l=e.w_mask,h=e.prev,d=e.strstart+ct;let p=u[s+o-1],f=u[s+o];e.prev_length>=e.good_match&&(i>>=2),a>e.lookahead&&(a=e.lookahead);do{if(r=t,u[r+o]===f&&u[r+o-1]===p&&u[r]===u[s]&&u[++r]===u[s+1]){s+=2,r++;do{}while(u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&s<d);if(n=ct-(d-s),s=d-ct,n>o){if(e.match_start=t,o=n,n>=a)break;p=u[s+o-1],f=u[s+o]}}}while((t=h[t&l])>c&&0!==--i);return o<=e.lookahead?o:e.lookahead},Ut=e=>{const t=e.w_size;let r,n,i;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-ut)&&(e.window.set(e.window.subarray(t,t+t-n),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),kt(e),n+=t),0===e.strm.avail_in)break;if(r=Mt(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=r,e.lookahead+e.insert>=at){i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=Ot(e,e.ins_h,e.window[i+1]);while(e.insert)if(e.ins_h=Ot(e,e.ins_h,e.window[i+at-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,e.lookahead+e.insert<at)break}}while(e.lookahead<ut&&0!==e.strm.avail_in)},Lt=(e,t)=>{let r,n,i,s=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,o=0,a=e.strm.avail_in;do{if(r=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i)break;if(i=e.strm.avail_out-i,n=e.strstart-e.block_start,r>n+e.strm.avail_in&&(r=n+e.strm.avail_in),r>i&&(r=i),r<s&&(0===r&&t!==Ue||t===Pe||r!==n+e.strm.avail_in))break;o=t===Ue&&r===n+e.strm.avail_in?1:0,Oe(e,0,0,o),e.pending_buf[e.pending-4]=r,e.pending_buf[e.pending-3]=r>>8,e.pending_buf[e.pending-2]=~r,e.pending_buf[e.pending-1]=~r>>8,Tt(e.strm),n&&(n>r&&(n=r),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+n),e.strm.next_out),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n,e.block_start+=n,r-=n),r&&(Mt(e.strm,e.strm.output,e.strm.next_out,r),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r)}while(0===o);return a-=e.strm.avail_in,a&&(a>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=a&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-a,e.strm.next_in),e.strstart),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),o?Et:t!==Pe&&t!==Ue&&0===e.strm.avail_in&&e.strstart===e.block_start?vt:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(Mt(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i,s=i>e.w_size?e.w_size:i,n=e.strstart-e.block_start,(n>=s||(n||t===Ue)&&t!==Pe&&0===e.strm.avail_in&&n<=i)&&(r=n>i?i:n,o=t===Ue&&0===e.strm.avail_in&&r===n?1:0,Oe(e,e.block_start,r,o),e.block_start+=r,Tt(e.strm)),o?_t:bt)},Dt=(e,t)=>{let r,n;for(;;){if(e.lookahead<ut){if(Ut(e),e.lookahead<ut&&t===Pe)return bt;if(0===e.lookahead)break}if(r=0,e.lookahead>=at&&(e.ins_h=Ot(e,e.ins_h,e.window[e.strstart+at-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-ut&&(e.match_length=Bt(e,r)),e.match_length>=at)if(n=Re(e,e.strstart-e.match_start,e.match_length-at),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=at){e.match_length--;do{e.strstart++,e.ins_h=Ot(e,e.ins_h,e.window[e.strstart+at-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Ot(e,e.ins_h,e.window[e.strstart+1]);else n=Re(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(Rt(e,!1),0===e.strm.avail_out))return bt}return e.insert=e.strstart<at-1?e.strstart:at-1,t===Ue?(Rt(e,!0),0===e.strm.avail_out?_t:Et):e.sym_next&&(Rt(e,!1),0===e.strm.avail_out)?bt:vt},Wt=(e,t)=>{let r,n,i;for(;;){if(e.lookahead<ut){if(Ut(e),e.lookahead<ut&&t===Pe)return bt;if(0===e.lookahead)break}if(r=0,e.lookahead>=at&&(e.ins_h=Ot(e,e.ins_h,e.window[e.strstart+at-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=at-1,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-ut&&(e.match_length=Bt(e,r),e.match_length<=5&&(e.strategy===$e||e.match_length===at&&e.strstart-e.match_start>4096)&&(e.match_length=at-1)),e.prev_length>=at&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-at,n=Re(e,e.strstart-1-e.prev_match,e.prev_length-at),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=Ot(e,e.ins_h,e.window[e.strstart+at-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!==--e.prev_length);if(e.match_available=0,e.match_length=at-1,e.strstart++,n&&(Rt(e,!1),0===e.strm.avail_out))return bt}else if(e.match_available){if(n=Re(e,0,e.window[e.strstart-1]),n&&Rt(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return bt}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=Re(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<at-1?e.strstart:at-1,t===Ue?(Rt(e,!0),0===e.strm.avail_out?_t:Et):e.sym_next&&(Rt(e,!1),0===e.strm.avail_out)?bt:vt},jt=(e,t)=>{let r,n,i,s;const o=e.window;for(;;){if(e.lookahead<=ct){if(Ut(e),e.lookahead<=ct&&t===Pe)return bt;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=at&&e.strstart>0&&(i=e.strstart-1,n=o[i],n===o[++i]&&n===o[++i]&&n===o[++i])){s=e.strstart+ct;do{}while(n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&i<s);e.match_length=ct-(s-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=at?(r=Re(e,1,e.match_length-at),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=Re(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(Rt(e,!1),0===e.strm.avail_out))return bt}return e.insert=0,t===Ue?(Rt(e,!0),0===e.strm.avail_out?_t:Et):e.sym_next&&(Rt(e,!1),0===e.strm.avail_out)?bt:vt},zt=(e,t)=>{let r;for(;;){if(0===e.lookahead&&(Ut(e),0===e.lookahead)){if(t===Pe)return bt;break}if(e.match_length=0,r=Re(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(Rt(e,!1),0===e.strm.avail_out))return bt}return e.insert=0,t===Ue?(Rt(e,!0),0===e.strm.avail_out?_t:Et):e.sym_next&&(Rt(e,!1),0===e.strm.avail_out)?bt:vt};function Ht(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}const qt=[new Ht(0,0,0,0,Lt),new Ht(4,4,8,4,Dt),new Ht(4,5,16,8,Dt),new Ht(4,6,32,32,Dt),new Ht(4,4,16,16,Wt),new Ht(8,16,32,32,Wt),new Ht(8,16,128,128,Wt),new Ht(8,32,128,256,Wt),new Ht(32,128,258,1024,Wt),new Ht(32,258,258,4096,Wt)],$t=e=>{e.window_size=2*e.w_size,Ct(e.head),e.max_lazy_match=qt[e.level].max_lazy,e.good_match=qt[e.level].good_length,e.nice_match=qt[e.level].nice_length,e.max_chain_length=qt[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=at-1,e.match_available=0,e.ins_h=0};function Ft(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Ze,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(2*st),this.dyn_dtree=new Uint16Array(2*(2*nt+1)),this.bl_tree=new Uint16Array(2*(2*it+1)),Ct(this.dyn_ltree),Ct(this.dyn_dtree),Ct(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(ot+1),this.heap=new Uint16Array(2*rt+1),Ct(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*rt+1),Ct(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Kt=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==ht&&t.status!==dt&&t.status!==pt&&t.status!==ft&&t.status!==gt&&t.status!==mt&&t.status!==yt&&t.status!==wt?1:0},Vt=e=>{if(Kt(e))return It(e,je);e.total_in=e.total_out=0,e.data_type=Ge;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?dt:t.wrap?ht:yt,e.adler=2===t.wrap?0:1,t.last_flush=-2,Ne(t),De},Yt=e=>{const t=Vt(e);return t===De&&$t(e.state),t},Gt=(e,t)=>Kt(e)||2!==e.state.wrap?je:(e.state.gzhead=t,De),Zt=(e,t,r,n,i,s)=>{if(!e)return je;let o=1;if(t===qe&&(t=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),i<1||i>Je||r!==Ze||n<8||n>15||t<0||t>9||s<0||s>Ve||8===n&&1!==o)return It(e,je);8===n&&(n=9);const a=new Ft;return e.state=a,a.strm=e,a.status=ht,a.wrap=o,a.gzhead=null,a.w_bits=n,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+at-1)/at),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=3*(a.lit_bufsize-1),a.level=t,a.strategy=s,a.method=r,Yt(e)},Jt=(e,t)=>Zt(e,t,Ze,Xe,Qe,Ye),Xt=(e,t)=>{if(Kt(e)||t>Le||t<0)return e?It(e,je):je;const r=e.state;if(!e.output||0!==e.avail_in&&!e.input||r.status===wt&&t!==Ue)return It(e,0===e.avail_out?He:je);const n=r.last_flush;if(r.last_flush=t,0!==r.pending){if(Tt(e),0===e.avail_out)return r.last_flush=-1,De}else if(0===e.avail_in&&St(t)<=St(n)&&t!==Ue)return It(e,He);if(r.status===wt&&0!==e.avail_in)return It(e,He);if(r.status===ht&&0===r.wrap&&(r.status=yt),r.status===ht){let t=Ze+(r.w_bits-8<<4)<<8,n=-1;if(n=r.strategy>=Fe||r.level<2?0:r.level<6?1:6===r.level?2:3,t|=n<<6,0!==r.strstart&&(t|=lt),t+=31-t%31,Pt(r,t),0!==r.strstart&&(Pt(r,e.adler>>>16),Pt(r,65535&e.adler)),e.adler=1,r.status=yt,Tt(e),0!==r.pending)return r.last_flush=-1,De}if(r.status===dt)if(e.adler=0,xt(r,31),xt(r,139),xt(r,8),r.gzhead)xt(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),xt(r,255&r.gzhead.time),xt(r,r.gzhead.time>>8&255),xt(r,r.gzhead.time>>16&255),xt(r,r.gzhead.time>>24&255),xt(r,9===r.level?2:r.strategy>=Fe||r.level<2?4:0),xt(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(xt(r,255&r.gzhead.extra.length),xt(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=Se(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=pt;else if(xt(r,0),xt(r,0),xt(r,0),xt(r,0),xt(r,0),xt(r,9===r.level?2:r.strategy>=Fe||r.level<2?4:0),xt(r,At),r.status=yt,Tt(e),0!==r.pending)return r.last_flush=-1,De;if(r.status===pt){if(r.gzhead.extra){let t=r.pending,n=(65535&r.gzhead.extra.length)-r.gzindex;while(r.pending+n>r.pending_buf_size){let i=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+i),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>t&&(e.adler=Se(e.adler,r.pending_buf,r.pending-t,t)),r.gzindex+=i,Tt(e),0!==r.pending)return r.last_flush=-1,De;t=0,n-=i}let i=new Uint8Array(r.gzhead.extra);r.pending_buf.set(i.subarray(r.gzindex,r.gzindex+n),r.pending),r.pending+=n,r.gzhead.hcrc&&r.pending>t&&(e.adler=Se(e.adler,r.pending_buf,r.pending-t,t)),r.gzindex=0}r.status=ft}if(r.status===ft){if(r.gzhead.name){let t,n=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>n&&(e.adler=Se(e.adler,r.pending_buf,r.pending-n,n)),Tt(e),0!==r.pending)return r.last_flush=-1,De;n=0}t=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,xt(r,t)}while(0!==t);r.gzhead.hcrc&&r.pending>n&&(e.adler=Se(e.adler,r.pending_buf,r.pending-n,n)),r.gzindex=0}r.status=gt}if(r.status===gt){if(r.gzhead.comment){let t,n=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>n&&(e.adler=Se(e.adler,r.pending_buf,r.pending-n,n)),Tt(e),0!==r.pending)return r.last_flush=-1,De;n=0}t=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,xt(r,t)}while(0!==t);r.gzhead.hcrc&&r.pending>n&&(e.adler=Se(e.adler,r.pending_buf,r.pending-n,n))}r.status=mt}if(r.status===mt){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(Tt(e),0!==r.pending))return r.last_flush=-1,De;xt(r,255&e.adler),xt(r,e.adler>>8&255),e.adler=0}if(r.status=yt,Tt(e),0!==r.pending)return r.last_flush=-1,De}if(0!==e.avail_in||0!==r.lookahead||t!==Pe&&r.status!==wt){let n=0===r.level?Lt(r,t):r.strategy===Fe?zt(r,t):r.strategy===Ke?jt(r,t):qt[r.level].func(r,t);if(n!==_t&&n!==Et||(r.status=wt),n===bt||n===_t)return 0===e.avail_out&&(r.last_flush=-1),De;if(n===vt&&(t===Me?xe(r):t!==Le&&(Oe(r,0,0,!1),t===Be&&(Ct(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),Tt(e),0===e.avail_out))return r.last_flush=-1,De}return t!==Ue?De:r.wrap<=0?We:(2===r.wrap?(xt(r,255&e.adler),xt(r,e.adler>>8&255),xt(r,e.adler>>16&255),xt(r,e.adler>>24&255),xt(r,255&e.total_in),xt(r,e.total_in>>8&255),xt(r,e.total_in>>16&255),xt(r,e.total_in>>24&255)):(Pt(r,e.adler>>>16),Pt(r,65535&e.adler)),Tt(e),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?De:We)},Qt=e=>{if(Kt(e))return je;const t=e.state.status;return e.state=null,t===yt?It(e,ze):De},er=(e,t)=>{let r=t.length;if(Kt(e))return je;const n=e.state,i=n.wrap;if(2===i||1===i&&n.status!==ht||n.lookahead)return je;if(1===i&&(e.adler=_e(e.adler,t,r,0)),n.wrap=0,r>=n.w_size){0===i&&(Ct(n.head),n.strstart=0,n.block_start=0,n.insert=0);let e=new Uint8Array(n.w_size);e.set(t.subarray(r-n.w_size,r),0),t=e,r=n.w_size}const s=e.avail_in,o=e.next_in,a=e.input;e.avail_in=r,e.next_in=0,e.input=t,Ut(n);while(n.lookahead>=at){let e=n.strstart,t=n.lookahead-(at-1);do{n.ins_h=Ot(n,n.ins_h,n.window[e+at-1]),n.prev[e&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=e,e++}while(--t);n.strstart=e,n.lookahead=at-1,Ut(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=at-1,n.match_available=0,e.next_in=o,e.input=a,e.avail_in=s,n.wrap=i,De};var tr=Jt,rr=Zt,nr=Yt,ir=Vt,sr=Gt,or=Xt,ar=Qt,cr=er,ur="pako deflate (from Nodeca project)",lr={deflateInit:tr,deflateInit2:rr,deflateReset:nr,deflateResetKeep:ir,deflateSetHeader:sr,deflate:or,deflateEnd:ar,deflateSetDictionary:cr,deflateInfo:ur};const hr=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var dr=function(e){const t=Array.prototype.slice.call(arguments,1);while(t.length){const r=t.shift();if(r){if("object"!==typeof r)throw new TypeError(r+"must be non-object");for(const t in r)hr(r,t)&&(e[t]=r[t])}}return e},pr=e=>{let t=0;for(let n=0,i=e.length;n<i;n++)t+=e[n].length;const r=new Uint8Array(t);for(let n=0,i=0,s=e.length;n<s;n++){let t=e[n];r.set(t,i),i+=t.length}return r},fr={assign:dr,flattenChunks:pr};let gr=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(is){gr=!1}const mr=new Uint8Array(256);for(let ss=0;ss<256;ss++)mr[ss]=ss>=252?6:ss>=248?5:ss>=240?4:ss>=224?3:ss>=192?2:1;mr[254]=mr[254]=1;var yr=e=>{if("function"===typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,r,n,i,s,o=e.length,a=0;for(i=0;i<o;i++)r=e.charCodeAt(i),55296===(64512&r)&&i+1<o&&(n=e.charCodeAt(i+1),56320===(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),i++)),a+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(a),s=0,i=0;s<a;i++)r=e.charCodeAt(i),55296===(64512&r)&&i+1<o&&(n=e.charCodeAt(i+1),56320===(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?t[s++]=r:r<2048?(t[s++]=192|r>>>6,t[s++]=128|63&r):r<65536?(t[s++]=224|r>>>12,t[s++]=128|r>>>6&63,t[s++]=128|63&r):(t[s++]=240|r>>>18,t[s++]=128|r>>>12&63,t[s++]=128|r>>>6&63,t[s++]=128|63&r);return t};const wr=(e,t)=>{if(t<65534&&e.subarray&&gr)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r};var br=(e,t)=>{const r=t||e.length;if("function"===typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let n,i;const s=new Array(2*r);for(i=0,n=0;n<r;){let t=e[n++];if(t<128){s[i++]=t;continue}let o=mr[t];if(o>4)s[i++]=65533,n+=o-1;else{t&=2===o?31:3===o?15:7;while(o>1&&n<r)t=t<<6|63&e[n++],o--;o>1?s[i++]=65533:t<65536?s[i++]=t:(t-=65536,s[i++]=55296|t>>10&1023,s[i++]=56320|1023&t)}}return wr(s,i)},vr=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let r=t-1;while(r>=0&&128===(192&e[r]))r--;return r<0||0===r?t:r+mr[e[r]]>t?r:t},_r={string2buf:yr,buf2string:br,utf8border:vr};function Er(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Ar=Er;const Ir=Object.prototype.toString,{Z_NO_FLUSH:Sr,Z_SYNC_FLUSH:Cr,Z_FULL_FLUSH:kr,Z_FINISH:Nr,Z_OK:Or,Z_STREAM_END:Tr,Z_DEFAULT_COMPRESSION:Rr,Z_DEFAULT_STRATEGY:xr,Z_DEFLATED:Pr}=ke;function Mr(e){this.options=fr.assign({level:Rr,method:Pr,chunkSize:16384,windowBits:15,memLevel:8,strategy:xr},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ar,this.strm.avail_out=0;let r=lr.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==Or)throw new Error(Ce[r]);if(t.header&&lr.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"===typeof t.dictionary?_r.string2buf(t.dictionary):"[object ArrayBuffer]"===Ir.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,r=lr.deflateSetDictionary(this.strm,e),r!==Or)throw new Error(Ce[r]);this._dict_set=!0}}function Br(e,t){const r=new Mr(t);if(r.push(e,!0),r.err)throw r.msg||Ce[r.err];return r.result}function Ur(e,t){return t=t||{},t.raw=!0,Br(e,t)}function Lr(e,t){return t=t||{},t.gzip=!0,Br(e,t)}Mr.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize;let i,s;if(this.ended)return!1;for(s=t===~~t?t:!0===t?Nr:Sr,"string"===typeof e?r.input=_r.string2buf(e):"[object ArrayBuffer]"===Ir.call(e)?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;)if(0===r.avail_out&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),(s===Cr||s===kr)&&r.avail_out<=6)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else{if(i=lr.deflate(r,s),i===Tr)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),i=lr.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===Or;if(0!==r.avail_out){if(s>0&&r.next_out>0)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else if(0===r.avail_in)break}else this.onData(r.output)}return!0},Mr.prototype.onData=function(e){this.chunks.push(e)},Mr.prototype.onEnd=function(e){e===Or&&(this.result=fr.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Dr=Mr,Wr=Br,jr=Ur,zr=Lr,Hr=ke,qr={Deflate:Dr,deflate:Wr,deflateRaw:jr,gzip:zr,constants:Hr};const $r=16209,Fr=16191;var Kr=function(e,t){let r,n,i,s,o,a,c,u,l,h,d,p,f,g,m,y,w,b,v,_,E,A,I,S;const C=e.state;r=e.next_in,I=e.input,n=r+(e.avail_in-5),i=e.next_out,S=e.output,s=i-(t-e.avail_out),o=i+(e.avail_out-257),a=C.dmax,c=C.wsize,u=C.whave,l=C.wnext,h=C.window,d=C.hold,p=C.bits,f=C.lencode,g=C.distcode,m=(1<<C.lenbits)-1,y=(1<<C.distbits)-1;e:do{p<15&&(d+=I[r++]<<p,p+=8,d+=I[r++]<<p,p+=8),w=f[d&m];t:for(;;){if(b=w>>>24,d>>>=b,p-=b,b=w>>>16&255,0===b)S[i++]=65535&w;else{if(!(16&b)){if(0===(64&b)){w=f[(65535&w)+(d&(1<<b)-1)];continue t}if(32&b){C.mode=Fr;break e}e.msg="invalid literal/length code",C.mode=$r;break e}v=65535&w,b&=15,b&&(p<b&&(d+=I[r++]<<p,p+=8),v+=d&(1<<b)-1,d>>>=b,p-=b),p<15&&(d+=I[r++]<<p,p+=8,d+=I[r++]<<p,p+=8),w=g[d&y];r:for(;;){if(b=w>>>24,d>>>=b,p-=b,b=w>>>16&255,!(16&b)){if(0===(64&b)){w=g[(65535&w)+(d&(1<<b)-1)];continue r}e.msg="invalid distance code",C.mode=$r;break e}if(_=65535&w,b&=15,p<b&&(d+=I[r++]<<p,p+=8,p<b&&(d+=I[r++]<<p,p+=8)),_+=d&(1<<b)-1,_>a){e.msg="invalid distance too far back",C.mode=$r;break e}if(d>>>=b,p-=b,b=i-s,_>b){if(b=_-b,b>u&&C.sane){e.msg="invalid distance too far back",C.mode=$r;break e}if(E=0,A=h,0===l){if(E+=c-b,b<v){v-=b;do{S[i++]=h[E++]}while(--b);E=i-_,A=S}}else if(l<b){if(E+=c+l-b,b-=l,b<v){v-=b;do{S[i++]=h[E++]}while(--b);if(E=0,l<v){b=l,v-=b;do{S[i++]=h[E++]}while(--b);E=i-_,A=S}}}else if(E+=l-b,b<v){v-=b;do{S[i++]=h[E++]}while(--b);E=i-_,A=S}while(v>2)S[i++]=A[E++],S[i++]=A[E++],S[i++]=A[E++],v-=3;v&&(S[i++]=A[E++],v>1&&(S[i++]=A[E++]))}else{E=i-_;do{S[i++]=S[E++],S[i++]=S[E++],S[i++]=S[E++],v-=3}while(v>2);v&&(S[i++]=S[E++],v>1&&(S[i++]=S[E++]))}break}}break}}while(r<n&&i<o);v=p>>3,r-=v,p-=v<<3,d&=(1<<p)-1,e.next_in=r,e.next_out=i,e.avail_in=r<n?n-r+5:5-(r-n),e.avail_out=i<o?o-i+257:257-(i-o),C.hold=d,C.bits=p};const Vr=15,Yr=852,Gr=592,Zr=0,Jr=1,Xr=2,Qr=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),en=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),tn=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),rn=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),nn=(e,t,r,n,i,s,o,a)=>{const c=a.bits;let u,l,h,d,p,f,g=0,m=0,y=0,w=0,b=0,v=0,_=0,E=0,A=0,I=0,S=null;const C=new Uint16Array(Vr+1),k=new Uint16Array(Vr+1);let N,O,T,R=null;for(g=0;g<=Vr;g++)C[g]=0;for(m=0;m<n;m++)C[t[r+m]]++;for(b=c,w=Vr;w>=1;w--)if(0!==C[w])break;if(b>w&&(b=w),0===w)return i[s++]=20971520,i[s++]=20971520,a.bits=1,0;for(y=1;y<w;y++)if(0!==C[y])break;for(b<y&&(b=y),E=1,g=1;g<=Vr;g++)if(E<<=1,E-=C[g],E<0)return-1;if(E>0&&(e===Zr||1!==w))return-1;for(k[1]=0,g=1;g<Vr;g++)k[g+1]=k[g]+C[g];for(m=0;m<n;m++)0!==t[r+m]&&(o[k[t[r+m]]++]=m);if(e===Zr?(S=R=o,f=20):e===Jr?(S=Qr,R=en,f=257):(S=tn,R=rn,f=0),I=0,m=0,g=y,p=s,v=b,_=0,h=-1,A=1<<b,d=A-1,e===Jr&&A>Yr||e===Xr&&A>Gr)return 1;for(;;){N=g-_,o[m]+1<f?(O=0,T=o[m]):o[m]>=f?(O=R[o[m]-f],T=S[o[m]-f]):(O=96,T=0),u=1<<g-_,l=1<<v,y=l;do{l-=u,i[p+(I>>_)+l]=N<<24|O<<16|T}while(0!==l);u=1<<g-1;while(I&u)u>>=1;if(0!==u?(I&=u-1,I+=u):I=0,m++,0===--C[g]){if(g===w)break;g=t[r+o[m]]}if(g>b&&(I&d)!==h){0===_&&(_=b),p+=y,v=g-_,E=1<<v;while(v+_<w){if(E-=C[v+_],E<=0)break;v++,E<<=1}if(A+=1<<v,e===Jr&&A>Yr||e===Xr&&A>Gr)return 1;h=I&d,i[h]=b<<24|v<<16|p-s}}return 0!==I&&(i[p+I]=g-_<<24|64<<16),a.bits=b,0};var sn=nn;const on=0,an=1,cn=2,{Z_FINISH:un,Z_BLOCK:ln,Z_TREES:hn,Z_OK:dn,Z_STREAM_END:pn,Z_NEED_DICT:fn,Z_STREAM_ERROR:gn,Z_DATA_ERROR:mn,Z_MEM_ERROR:yn,Z_BUF_ERROR:wn,Z_DEFLATED:bn}=ke,vn=16180,_n=16181,En=16182,An=16183,In=16184,Sn=16185,Cn=16186,kn=16187,Nn=16188,On=16189,Tn=16190,Rn=16191,xn=16192,Pn=16193,Mn=16194,Bn=16195,Un=16196,Ln=16197,Dn=16198,Wn=16199,jn=16200,zn=16201,Hn=16202,qn=16203,$n=16204,Fn=16205,Kn=16206,Vn=16207,Yn=16208,Gn=16209,Zn=16210,Jn=16211,Xn=852,Qn=592,ei=15,ti=ei,ri=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function ni(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const ii=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<vn||t.mode>Jn?1:0},si=e=>{if(ii(e))return gn;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=vn,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(Xn),t.distcode=t.distdyn=new Int32Array(Qn),t.sane=1,t.back=-1,dn},oi=e=>{if(ii(e))return gn;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,si(e)},ai=(e,t)=>{let r;if(ii(e))return gn;const n=e.state;return t<0?(r=0,t=-t):(r=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?gn:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,oi(e))},ci=(e,t)=>{if(!e)return gn;const r=new ni;e.state=r,r.strm=e,r.window=null,r.mode=vn;const n=ai(e,t);return n!==dn&&(e.state=null),n},ui=e=>ci(e,ti);let li,hi,di=!0;const pi=e=>{if(di){li=new Int32Array(512),hi=new Int32Array(32);let t=0;while(t<144)e.lens[t++]=8;while(t<256)e.lens[t++]=9;while(t<280)e.lens[t++]=7;while(t<288)e.lens[t++]=8;sn(an,e.lens,0,288,li,0,e.work,{bits:9}),t=0;while(t<32)e.lens[t++]=5;sn(cn,e.lens,0,32,hi,0,e.work,{bits:5}),di=!1}e.lencode=li,e.lenbits=9,e.distcode=hi,e.distbits=5},fi=(e,t,r,n)=>{let i;const s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(t.subarray(r-s.wsize,r),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>n&&(i=n),s.window.set(t.subarray(r-n,r-n+i),s.wnext),n-=i,n?(s.window.set(t.subarray(r-n,r),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0},gi=(e,t)=>{let r,n,i,s,o,a,c,u,l,h,d,p,f,g,m,y,w,b,v,_,E,A,I=0;const S=new Uint8Array(4);let C,k;const N=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(ii(e)||!e.output||!e.input&&0!==e.avail_in)return gn;r=e.state,r.mode===Rn&&(r.mode=xn),o=e.next_out,i=e.output,c=e.avail_out,s=e.next_in,n=e.input,a=e.avail_in,u=r.hold,l=r.bits,h=a,d=c,A=dn;e:for(;;)switch(r.mode){case vn:if(0===r.wrap){r.mode=xn;break}while(l<16){if(0===a)break e;a--,u+=n[s++]<<l,l+=8}if(2&r.wrap&&35615===u){0===r.wbits&&(r.wbits=15),r.check=0,S[0]=255&u,S[1]=u>>>8&255,r.check=Se(r.check,S,2,0),u=0,l=0,r.mode=_n;break}if(r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&u)<<8)+(u>>8))%31){e.msg="incorrect header check",r.mode=Gn;break}if((15&u)!==bn){e.msg="unknown compression method",r.mode=Gn;break}if(u>>>=4,l-=4,E=8+(15&u),0===r.wbits&&(r.wbits=E),E>15||E>r.wbits){e.msg="invalid window size",r.mode=Gn;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=512&u?On:Rn,u=0,l=0;break;case _n:while(l<16){if(0===a)break e;a--,u+=n[s++]<<l,l+=8}if(r.flags=u,(255&r.flags)!==bn){e.msg="unknown compression method",r.mode=Gn;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=Gn;break}r.head&&(r.head.text=u>>8&1),512&r.flags&&4&r.wrap&&(S[0]=255&u,S[1]=u>>>8&255,r.check=Se(r.check,S,2,0)),u=0,l=0,r.mode=En;case En:while(l<32){if(0===a)break e;a--,u+=n[s++]<<l,l+=8}r.head&&(r.head.time=u),512&r.flags&&4&r.wrap&&(S[0]=255&u,S[1]=u>>>8&255,S[2]=u>>>16&255,S[3]=u>>>24&255,r.check=Se(r.check,S,4,0)),u=0,l=0,r.mode=An;case An:while(l<16){if(0===a)break e;a--,u+=n[s++]<<l,l+=8}r.head&&(r.head.xflags=255&u,r.head.os=u>>8),512&r.flags&&4&r.wrap&&(S[0]=255&u,S[1]=u>>>8&255,r.check=Se(r.check,S,2,0)),u=0,l=0,r.mode=In;case In:if(1024&r.flags){while(l<16){if(0===a)break e;a--,u+=n[s++]<<l,l+=8}r.length=u,r.head&&(r.head.extra_len=u),512&r.flags&&4&r.wrap&&(S[0]=255&u,S[1]=u>>>8&255,r.check=Se(r.check,S,2,0)),u=0,l=0}else r.head&&(r.head.extra=null);r.mode=Sn;case Sn:if(1024&r.flags&&(p=r.length,p>a&&(p=a),p&&(r.head&&(E=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(s,s+p),E)),512&r.flags&&4&r.wrap&&(r.check=Se(r.check,n,p,s)),a-=p,s+=p,r.length-=p),r.length))break e;r.length=0,r.mode=Cn;case Cn:if(2048&r.flags){if(0===a)break e;p=0;do{E=n[s+p++],r.head&&E&&r.length<65536&&(r.head.name+=String.fromCharCode(E))}while(E&&p<a);if(512&r.flags&&4&r.wrap&&(r.check=Se(r.check,n,p,s)),a-=p,s+=p,E)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=kn;case kn:if(4096&r.flags){if(0===a)break e;p=0;do{E=n[s+p++],r.head&&E&&r.length<65536&&(r.head.comment+=String.fromCharCode(E))}while(E&&p<a);if(512&r.flags&&4&r.wrap&&(r.check=Se(r.check,n,p,s)),a-=p,s+=p,E)break e}else r.head&&(r.head.comment=null);r.mode=Nn;case Nn:if(512&r.flags){while(l<16){if(0===a)break e;a--,u+=n[s++]<<l,l+=8}if(4&r.wrap&&u!==(65535&r.check)){e.msg="header crc mismatch",r.mode=Gn;break}u=0,l=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=Rn;break;case On:while(l<32){if(0===a)break e;a--,u+=n[s++]<<l,l+=8}e.adler=r.check=ri(u),u=0,l=0,r.mode=Tn;case Tn:if(0===r.havedict)return e.next_out=o,e.avail_out=c,e.next_in=s,e.avail_in=a,r.hold=u,r.bits=l,fn;e.adler=r.check=1,r.mode=Rn;case Rn:if(t===ln||t===hn)break e;case xn:if(r.last){u>>>=7&l,l-=7&l,r.mode=Kn;break}while(l<3){if(0===a)break e;a--,u+=n[s++]<<l,l+=8}switch(r.last=1&u,u>>>=1,l-=1,3&u){case 0:r.mode=Pn;break;case 1:if(pi(r),r.mode=Wn,t===hn){u>>>=2,l-=2;break e}break;case 2:r.mode=Un;break;case 3:e.msg="invalid block type",r.mode=Gn}u>>>=2,l-=2;break;case Pn:u>>>=7&l,l-=7&l;while(l<32){if(0===a)break e;a--,u+=n[s++]<<l,l+=8}if((65535&u)!==(u>>>16^65535)){e.msg="invalid stored block lengths",r.mode=Gn;break}if(r.length=65535&u,u=0,l=0,r.mode=Mn,t===hn)break e;case Mn:r.mode=Bn;case Bn:if(p=r.length,p){if(p>a&&(p=a),p>c&&(p=c),0===p)break e;i.set(n.subarray(s,s+p),o),a-=p,s+=p,c-=p,o+=p,r.length-=p;break}r.mode=Rn;break;case Un:while(l<14){if(0===a)break e;a--,u+=n[s++]<<l,l+=8}if(r.nlen=257+(31&u),u>>>=5,l-=5,r.ndist=1+(31&u),u>>>=5,l-=5,r.ncode=4+(15&u),u>>>=4,l-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=Gn;break}r.have=0,r.mode=Ln;case Ln:while(r.have<r.ncode){while(l<3){if(0===a)break e;a--,u+=n[s++]<<l,l+=8}r.lens[N[r.have++]]=7&u,u>>>=3,l-=3}while(r.have<19)r.lens[N[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,C={bits:r.lenbits},A=sn(on,r.lens,0,19,r.lencode,0,r.work,C),r.lenbits=C.bits,A){e.msg="invalid code lengths set",r.mode=Gn;break}r.have=0,r.mode=Dn;case Dn:while(r.have<r.nlen+r.ndist){for(;;){if(I=r.lencode[u&(1<<r.lenbits)-1],m=I>>>24,y=I>>>16&255,w=65535&I,m<=l)break;if(0===a)break e;a--,u+=n[s++]<<l,l+=8}if(w<16)u>>>=m,l-=m,r.lens[r.have++]=w;else{if(16===w){k=m+2;while(l<k){if(0===a)break e;a--,u+=n[s++]<<l,l+=8}if(u>>>=m,l-=m,0===r.have){e.msg="invalid bit length repeat",r.mode=Gn;break}E=r.lens[r.have-1],p=3+(3&u),u>>>=2,l-=2}else if(17===w){k=m+3;while(l<k){if(0===a)break e;a--,u+=n[s++]<<l,l+=8}u>>>=m,l-=m,E=0,p=3+(7&u),u>>>=3,l-=3}else{k=m+7;while(l<k){if(0===a)break e;a--,u+=n[s++]<<l,l+=8}u>>>=m,l-=m,E=0,p=11+(127&u),u>>>=7,l-=7}if(r.have+p>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=Gn;break}while(p--)r.lens[r.have++]=E}}if(r.mode===Gn)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=Gn;break}if(r.lenbits=9,C={bits:r.lenbits},A=sn(an,r.lens,0,r.nlen,r.lencode,0,r.work,C),r.lenbits=C.bits,A){e.msg="invalid literal/lengths set",r.mode=Gn;break}if(r.distbits=6,r.distcode=r.distdyn,C={bits:r.distbits},A=sn(cn,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,C),r.distbits=C.bits,A){e.msg="invalid distances set",r.mode=Gn;break}if(r.mode=Wn,t===hn)break e;case Wn:r.mode=jn;case jn:if(a>=6&&c>=258){e.next_out=o,e.avail_out=c,e.next_in=s,e.avail_in=a,r.hold=u,r.bits=l,Kr(e,d),o=e.next_out,i=e.output,c=e.avail_out,s=e.next_in,n=e.input,a=e.avail_in,u=r.hold,l=r.bits,r.mode===Rn&&(r.back=-1);break}for(r.back=0;;){if(I=r.lencode[u&(1<<r.lenbits)-1],m=I>>>24,y=I>>>16&255,w=65535&I,m<=l)break;if(0===a)break e;a--,u+=n[s++]<<l,l+=8}if(y&&0===(240&y)){for(b=m,v=y,_=w;;){if(I=r.lencode[_+((u&(1<<b+v)-1)>>b)],m=I>>>24,y=I>>>16&255,w=65535&I,b+m<=l)break;if(0===a)break e;a--,u+=n[s++]<<l,l+=8}u>>>=b,l-=b,r.back+=b}if(u>>>=m,l-=m,r.back+=m,r.length=w,0===y){r.mode=Fn;break}if(32&y){r.back=-1,r.mode=Rn;break}if(64&y){e.msg="invalid literal/length code",r.mode=Gn;break}r.extra=15&y,r.mode=zn;case zn:if(r.extra){k=r.extra;while(l<k){if(0===a)break e;a--,u+=n[s++]<<l,l+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,l-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=Hn;case Hn:for(;;){if(I=r.distcode[u&(1<<r.distbits)-1],m=I>>>24,y=I>>>16&255,w=65535&I,m<=l)break;if(0===a)break e;a--,u+=n[s++]<<l,l+=8}if(0===(240&y)){for(b=m,v=y,_=w;;){if(I=r.distcode[_+((u&(1<<b+v)-1)>>b)],m=I>>>24,y=I>>>16&255,w=65535&I,b+m<=l)break;if(0===a)break e;a--,u+=n[s++]<<l,l+=8}u>>>=b,l-=b,r.back+=b}if(u>>>=m,l-=m,r.back+=m,64&y){e.msg="invalid distance code",r.mode=Gn;break}r.offset=w,r.extra=15&y,r.mode=qn;case qn:if(r.extra){k=r.extra;while(l<k){if(0===a)break e;a--,u+=n[s++]<<l,l+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,l-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=Gn;break}r.mode=$n;case $n:if(0===c)break e;if(p=d-c,r.offset>p){if(p=r.offset-p,p>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=Gn;break}p>r.wnext?(p-=r.wnext,f=r.wsize-p):f=r.wnext-p,p>r.length&&(p=r.length),g=r.window}else g=i,f=o-r.offset,p=r.length;p>c&&(p=c),c-=p,r.length-=p;do{i[o++]=g[f++]}while(--p);0===r.length&&(r.mode=jn);break;case Fn:if(0===c)break e;i[o++]=r.length,c--,r.mode=jn;break;case Kn:if(r.wrap){while(l<32){if(0===a)break e;a--,u|=n[s++]<<l,l+=8}if(d-=c,e.total_out+=d,r.total+=d,4&r.wrap&&d&&(e.adler=r.check=r.flags?Se(r.check,i,d,o-d):_e(r.check,i,d,o-d)),d=c,4&r.wrap&&(r.flags?u:ri(u))!==r.check){e.msg="incorrect data check",r.mode=Gn;break}u=0,l=0}r.mode=Vn;case Vn:if(r.wrap&&r.flags){while(l<32){if(0===a)break e;a--,u+=n[s++]<<l,l+=8}if(4&r.wrap&&u!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=Gn;break}u=0,l=0}r.mode=Yn;case Yn:A=pn;break e;case Gn:A=mn;break e;case Zn:return yn;case Jn:default:return gn}return e.next_out=o,e.avail_out=c,e.next_in=s,e.avail_in=a,r.hold=u,r.bits=l,(r.wsize||d!==e.avail_out&&r.mode<Gn&&(r.mode<Kn||t!==un))&&fi(e,e.output,e.next_out,d-e.avail_out),h-=e.avail_in,d-=e.avail_out,e.total_in+=h,e.total_out+=d,r.total+=d,4&r.wrap&&d&&(e.adler=r.check=r.flags?Se(r.check,i,d,e.next_out-d):_e(r.check,i,d,e.next_out-d)),e.data_type=r.bits+(r.last?64:0)+(r.mode===Rn?128:0)+(r.mode===Wn||r.mode===Mn?256:0),(0===h&&0===d||t===un)&&A===dn&&(A=wn),A},mi=e=>{if(ii(e))return gn;let t=e.state;return t.window&&(t.window=null),e.state=null,dn},yi=(e,t)=>{if(ii(e))return gn;const r=e.state;return 0===(2&r.wrap)?gn:(r.head=t,t.done=!1,dn)},wi=(e,t)=>{const r=t.length;let n,i,s;return ii(e)?gn:(n=e.state,0!==n.wrap&&n.mode!==Tn?gn:n.mode===Tn&&(i=1,i=_e(i,t,r,0),i!==n.check)?mn:(s=fi(e,t,r,r),s?(n.mode=Zn,yn):(n.havedict=1,dn)))};var bi=oi,vi=ai,_i=si,Ei=ui,Ai=ci,Ii=gi,Si=mi,Ci=yi,ki=wi,Ni="pako inflate (from Nodeca project)",Oi={inflateReset:bi,inflateReset2:vi,inflateResetKeep:_i,inflateInit:Ei,inflateInit2:Ai,inflate:Ii,inflateEnd:Si,inflateGetHeader:Ci,inflateSetDictionary:ki,inflateInfo:Ni};function Ti(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Ri=Ti;const xi=Object.prototype.toString,{Z_NO_FLUSH:Pi,Z_FINISH:Mi,Z_OK:Bi,Z_STREAM_END:Ui,Z_NEED_DICT:Li,Z_STREAM_ERROR:Di,Z_DATA_ERROR:Wi,Z_MEM_ERROR:ji}=ke;function zi(e){this.options=fr.assign({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0===(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ar,this.strm.avail_out=0;let r=Oi.inflateInit2(this.strm,t.windowBits);if(r!==Bi)throw new Error(Ce[r]);if(this.header=new Ri,Oi.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"===typeof t.dictionary?t.dictionary=_r.string2buf(t.dictionary):"[object ArrayBuffer]"===xi.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=Oi.inflateSetDictionary(this.strm,t.dictionary),r!==Bi)))throw new Error(Ce[r])}function Hi(e,t){const r=new zi(t);if(r.push(e),r.err)throw r.msg||Ce[r.err];return r.result}function qi(e,t){return t=t||{},t.raw=!0,Hi(e,t)}zi.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let s,o,a;if(this.ended)return!1;for(o=t===~~t?t:!0===t?Mi:Pi,"[object ArrayBuffer]"===xi.call(e)?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){0===r.avail_out&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),s=Oi.inflate(r,o),s===Li&&i&&(s=Oi.inflateSetDictionary(r,i),s===Bi?s=Oi.inflate(r,o):s===Wi&&(s=Li));while(r.avail_in>0&&s===Ui&&r.state.wrap>0&&0!==e[r.next_in])Oi.inflateReset(r),s=Oi.inflate(r,o);switch(s){case Di:case Wi:case Li:case ji:return this.onEnd(s),this.ended=!0,!1}if(a=r.avail_out,r.next_out&&(0===r.avail_out||s===Ui))if("string"===this.options.to){let e=_r.utf8border(r.output,r.next_out),t=r.next_out-e,i=_r.buf2string(r.output,e);r.next_out=t,r.avail_out=n-t,t&&r.output.set(r.output.subarray(e,e+t),0),this.onData(i)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(s!==Bi||0!==a){if(s===Ui)return s=Oi.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(0===r.avail_in)break}}return!0},zi.prototype.onData=function(e){this.chunks.push(e)},zi.prototype.onEnd=function(e){e===Bi&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=fr.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var $i=zi,Fi=Hi,Ki=qi,Vi=Hi,Yi=ke,Gi={Inflate:$i,inflate:Fi,inflateRaw:Ki,ungzip:Vi,constants:Yi};const{Deflate:Zi,deflate:Ji,deflateRaw:Xi,gzip:Qi}=qr,{Inflate:es,inflate:ts,inflateRaw:rs,ungzip:ns}=Gi},22228:function(e,t,r){"use strict";r.d(t,{m:function(){return l}});var n=r(22626),i=r(47318),s=r(22708),o=r(82029),a=r(47056),c=r(57105),u=r(19008);function l(e,t={}){return async(r,l={})=>{const{dedupe:d=!1,methods:p,retryDelay:f=150,retryCount:g=3,uid:m}={...t,...l},{method:y}=r;if(p?.exclude?.includes(y))throw new s.ab(new Error("method not supported"),{method:y});if(p?.include&&!p.include.includes(y))throw new s.ab(new Error("method not supported"),{method:y});const w=d?(0,o.i3)(`${m}.${(0,u.A)(r)}`):void 0;return(0,a.I)((()=>(0,c.b)((async()=>{try{return await e(r)}catch(t){const e=t;switch(e.code){case s.XU.code:throw new s.XU(e);case s.CL.code:throw new s.CL(e);case s.Gi.code:throw new s.Gi(e,{method:r.method});case s.D5.code:throw new s.D5(e);case s.bq.code:throw new s.bq(e);case s.Di.code:throw new s.Di(e);case s.hA.code:throw new s.hA(e);case s.qZ.code:throw new s.qZ(e);case s.YW.code:throw new s.YW(e);case s.ab.code:throw new s.ab(e,{method:r.method});case s.s0.code:throw new s.s0(e);case s.xQ.code:throw new s.xQ(e);case s.vx.code:throw new s.vx(e);case s.sV.code:throw new s.sV(e);case s.Sf.code:throw new s.Sf(e);case s.RV.code:throw new s.RV(e);case s.xq.code:throw new s.xq(e);case s.ch.code:throw new s.ch(e);case s.L5.code:throw new s.L5(e);case s.WT.code:throw new s.WT(e);case s.hl.code:throw new s.hl(e);case s.cg.code:throw new s.cg(e);case s.uL.code:throw new s.uL(e);case s.G1.code:throw new s.G1(e);case s.jz.code:throw new s.jz(e);case 5e3:throw new s.vx(e);default:if(t instanceof n.C)throw t;throw new s.MI(e)}}}),{delay:({count:e,error:t})=>{if(t&&t instanceof i.Ci){const e=t?.headers?.get("Retry-After");if(e?.match(/\d/))return 1e3*Number.parseInt(e)}return(1<<e)*f},retryCount:g,shouldRetry:({error:e})=>h(e)})),{enabled:d,id:w})}}function h(e){return"code"in e&&"number"===typeof e.code?-1===e.code||(e.code===s.s0.code||e.code===s.bq.code):!(e instanceof i.Ci&&e.status)||(403===e.status||(408===e.status||(413===e.status||(429===e.status||(500===e.status||(502===e.status||(503===e.status||504===e.status)))))))}},22381:function(e,t,r){"use strict";r.d(t,{IP:function(){return o},T8:function(){return i},Ud:function(){return s},Ws:function(){return n}});const n={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types"};function i(e){if(!e)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${e}:connected_connector_id`}const s={setItem(e,t){o()&&void 0!==t&&localStorage.setItem(e,t)},getItem(e){if(o())return localStorage.getItem(e)||void 0},removeItem(e){o()&&localStorage.removeItem(e)},clear(){o()&&localStorage.clear()}};function o(){return"undefined"!==typeof window&&"undefined"!==typeof localStorage}},22438:function(e,t,r){"use strict";r.d(t,{i:function(){return n}});const n="1.7.4"},22626:function(e,t,r){"use strict";r.d(t,{C:function(){return s}});var n=r(37583);let i={getDocsUrl:({docsBaseUrl:e,docsPath:t="",docsSlug:r})=>t?`${e??"https://viem.sh"}${t}${r?`#${r}`:""}`:void 0,version:`viem@${n.r}`};class s extends Error{constructor(e,t={}){const r=(()=>t.cause instanceof s?t.cause.details:t.cause?.message?t.cause.message:t.details)(),o=(()=>t.cause instanceof s&&t.cause.docsPath||t.docsPath)(),a=i.getDocsUrl?.({...t,docsPath:o}),c=[e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...a?[`Docs: ${a}`]:[],...r?[`Details: ${r}`]:[],...i.version?[`Version: ${i.version}`]:[]].join("\n");super(c,t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=o,this.metaMessages=t.metaMessages,this.name=t.name??this.name,this.shortMessage=e,this.version=n.r}walk(e){return o(this,e)}}function o(e,t){return t?.(e)?e:e&&"object"===typeof e&&"cause"in e&&void 0!==e.cause?o(e.cause,t):t?null:e}},22708:function(e,t,r){"use strict";r.d(t,{CL:function(){return u},D5:function(){return h},Di:function(){return p},G1:function(){return R},Gi:function(){return l},L5:function(){return C},MI:function(){return P},RV:function(){return A},Sf:function(){return E},WT:function(){return k},XU:function(){return c},YW:function(){return m},ab:function(){return y},bq:function(){return d},cg:function(){return O},ch:function(){return S},hA:function(){return f},hl:function(){return N},jz:function(){return x},qZ:function(){return g},s0:function(){return w},sV:function(){return _},uL:function(){return T},vx:function(){return v},xQ:function(){return b},xq:function(){return I}});var n=r(22626),i=r(47318);const s=-1;class o extends n.C{constructor(e,{code:t,docsPath:r,metaMessages:n,name:o,shortMessage:a}){super(a,{cause:e,docsPath:r,metaMessages:n||e?.metaMessages,name:o||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=o||e.name,this.code=e instanceof i.J8?e.code:t??s}}class a extends o{constructor(e,t){super(e,t),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t.data}}class c extends o{constructor(e){super(e,{code:c.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(c,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class u extends o{constructor(e){super(e,{code:u.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(u,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class l extends o{constructor(e,{method:t}={}){super(e,{code:l.code,name:"MethodNotFoundRpcError",shortMessage:`The method${t?` "${t}"`:""} does not exist / is not available.`})}}Object.defineProperty(l,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class h extends o{constructor(e){super(e,{code:h.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join("\n")})}}Object.defineProperty(h,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class d extends o{constructor(e){super(e,{code:d.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(d,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class p extends o{constructor(e){super(e,{code:p.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join("\n")})}}Object.defineProperty(p,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class f extends o{constructor(e){super(e,{code:f.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(f,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class g extends o{constructor(e){super(e,{code:g.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(g,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class m extends o{constructor(e){super(e,{code:m.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(m,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class y extends o{constructor(e,{method:t}={}){super(e,{code:y.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${t?` "${t}"`:""} is not supported.`})}}Object.defineProperty(y,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class w extends o{constructor(e){super(e,{code:w.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(w,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class b extends o{constructor(e){super(e,{code:b.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(b,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class v extends a{constructor(e){super(e,{code:v.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(v,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class _ extends a{constructor(e){super(e,{code:_.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(_,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class E extends a{constructor(e,{method:t}={}){super(e,{code:E.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${t?` " ${t}"`:""}.`})}}Object.defineProperty(E,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class A extends a{constructor(e){super(e,{code:A.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(A,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class I extends a{constructor(e){super(e,{code:I.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(I,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class S extends a{constructor(e){super(e,{code:S.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(S,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class C extends a{constructor(e){super(e,{code:C.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(C,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class k extends a{constructor(e){super(e,{code:k.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(k,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class N extends a{constructor(e){super(e,{code:N.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(N,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class O extends a{constructor(e){super(e,{code:O.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(O,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class T extends a{constructor(e){super(e,{code:T.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(T,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class R extends a{constructor(e){super(e,{code:R.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(R,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class x extends a{constructor(e){super(e,{code:x.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(x,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class P extends o{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}},22812:function(e){"use strict";var t=TypeError;e.exports=function(e,r){if(e<r)throw new t("Not enough arguments");return e}},23167:function(e,t,r){"use strict";var n=r(94901),i=r(20034),s=r(52967);e.exports=function(e,t,r){var o,a;return s&&n(o=t.constructor)&&o!==r&&i(a=o.prototype)&&a!==r.prototype&&s(e,a),e}},23597:function(e,t,r){"use strict";r.d(t,{d:function(){return a}});r(18111),r(61701),r(54972);var n=r(47318),i=r(8148),s=r(19008),o=r(2916);function a(e,t={}){return{async request(r){const{body:a,onRequest:c=t.onRequest,onResponse:u=t.onResponse,timeout:l=t.timeout??1e4}=r,h={...t.fetchOptions??{},...r.fetchOptions??{}},{headers:d,method:p,signal:f}=h;try{const t=await(0,i.w)((async({signal:t})=>{const r={...h,body:Array.isArray(a)?(0,s.A)(a.map((e=>({jsonrpc:"2.0",id:e.id??o.q.take(),...e})))):(0,s.A)({jsonrpc:"2.0",id:a.id??o.q.take(),...a}),headers:{"Content-Type":"application/json",...d},method:p||"POST",signal:f||(l>0?t:null)},n=new Request(e,r),i=await(c?.(n,r))??{...r,url:e},u=await fetch(i.url??e,i);return u}),{errorInstance:new n.MU({body:a,url:e}),timeout:l,signal:!0});let r;if(u&&await u(t),t.headers.get("Content-Type")?.startsWith("application/json"))r=await t.json();else{r=await t.text();try{r=JSON.parse(r||"{}")}catch(g){if(t.ok)throw g;r={error:r}}}if(!t.ok)throw new n.Ci({body:a,details:(0,s.A)(r.error)||t.statusText,headers:t.headers,status:t.status,url:e});return r}catch(g){if(g instanceof n.Ci)throw g;if(g instanceof n.MU)throw g;throw new n.Ci({body:a,cause:g,url:e})}}}}},23774:function(e,t,r){"use strict";r.d(t,{V:function(){return a}});r(18111),r(22489);var n=r(80955),i=r(75758),s=r(60292),o=r(4545);class a extends o.Y{constructor(e){super(),this.name="Coinbase Wallet",this.id=i.L.ConnectorExplorerIds[n.o.CONNECTOR_ID.COINBASE_SDK]||this.name,this.explorerId=i.L.ConnectorExplorerIds[n.o.CONNECTOR_ID.COINBASE_SDK],this.type="ANNOUNCED",this.imageUrl="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAyNCIgaGVpZ2h0PSIxMDI0IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8Y2lyY2xlIGN4PSI1MTIiIGN5PSI1MTIiIHI9IjUxMiIgZmlsbD0iIzAwNTJGRiIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE1MiA1MTJDMTUyIDcxMC44MjMgMzEzLjE3NyA4NzIgNTEyIDg3MkM3MTAuODIzIDg3MiA4NzIgNzEwLjgyMyA4NzIgNTEyQzg3MiAzMTMuMTc3IDcxMC44MjMgMTUyIDUxMiAxNTJDMzEzLjE3NyAxNTIgMTUyIDMxMy4xNzcgMTUyIDUxMlpNNDIwIDM5NkM0MDYuNzQ1IDM5NiAzOTYgNDA2Ljc0NSAzOTYgNDIwVjYwNEMzOTYgNjE3LjI1NSA0MDYuNzQ1IDYyOCA0MjAgNjI4SDYwNEM2MTcuMjU1IDYyOCA2MjggNjE3LjI1NSA2MjggNjA0VjQyMEM2MjggNDA2Ljc0NSA2MTcuMjU1IDM5NiA2MDQgMzk2SDQyMFoiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo=",this.chain=n.o.CHAIN.SOLANA,this.provider=this,this.coinbase=e.provider,this.requestedChains=e.chains}get chains(){return this.requestedChains.filter((e=>e.id===s.tWt.id))}get publicKey(){return this.coinbase.publicKey}get imageId(){return i.L.ConnectorImageIds[n.o.CONNECTOR_ID.COINBASE]}async connect(){try{await this.coinbase.connect();const e=this.getAccount(!0);return this.coinbase.emit("connect",this.coinbase.publicKey),this.emit("connect",e),e.toBase58()}catch(e){throw this.coinbase.emit("error",e),e}}async disconnect(){await this.coinbase.disconnect(),this.coinbase.emit("disconnect",void 0),this.emit("disconnect",void 0)}async signMessage(e){const t=await this.coinbase.signMessage(e);return t.signature}async signTransaction(e){return this.coinbase.signTransaction(e)}async signAndSendTransaction(e,t){const r=await this.coinbase.signAndSendTransaction(e,t);return r.signature}async sendTransaction(e,t,r){const n=await this.signTransaction(e),i=await t.sendRawTransaction(n.serialize(),r);return i}async signAllTransactions(e){return await this.coinbase.signAllTransactions(e)}async request(e){return Promise.reject(new Error('The "request" method is not supported on Coinbase Wallet'))}async getAccounts(){const e=this.getAccount();return e?Promise.resolve([{namespace:this.chain,address:e.toBase58(),type:"eoa"}]):Promise.resolve([])}getAccount(e){const t=this.coinbase.publicKey;if(e&&!t)throw new Error("Not connected");return t}}},24149:function(e){"use strict";var t=RangeError;e.exports=function(e){if(e===e)return e;throw new t("NaN is not allowed")}},24659:function(e,t,r){"use strict";var n=r(79039),i=r(6980);e.exports=!n((function(){var e=new Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",i(1,7)),7!==e.stack)}))},25019:function(e,t,r){"use strict";r(44114);var n=Object.prototype.hasOwnProperty,i="~";function s(){}function o(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function a(e,t,r,n,s){if("function"!==typeof r)throw new TypeError("The listener must be a function");var a=new o(r,n||e,s),c=i?i+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function c(e,t){0===--e._eventsCount?e._events=new s:delete e._events[t]}function u(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(i=!1)),u.prototype.eventNames=function(){var e,t,r=[];if(0===this._eventsCount)return r;for(t in e=this._events)n.call(e,t)&&r.push(i?t.slice(1):t);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},u.prototype.listeners=function(e){var t=i?i+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,s=r.length,o=new Array(s);n<s;n++)o[n]=r[n].fn;return o},u.prototype.listenerCount=function(e){var t=i?i+e:e,r=this._events[t];return r?r.fn?1:r.length:0},u.prototype.emit=function(e,t,r,n,s,o){var a=i?i+e:e;if(!this._events[a])return!1;var c,u,l=this._events[a],h=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,r),!0;case 4:return l.fn.call(l.context,t,r,n),!0;case 5:return l.fn.call(l.context,t,r,n,s),!0;case 6:return l.fn.call(l.context,t,r,n,s,o),!0}for(u=1,c=new Array(h-1);u<h;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var d,p=l.length;for(u=0;u<p;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),h){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,r);break;case 4:l[u].fn.call(l[u].context,t,r,n);break;default:if(!c)for(d=1,c=new Array(h-1);d<h;d++)c[d-1]=arguments[d];l[u].fn.apply(l[u].context,c)}}return!0},u.prototype.on=function(e,t,r){return a(this,e,t,r,!1)},u.prototype.once=function(e,t,r){return a(this,e,t,r,!0)},u.prototype.removeListener=function(e,t,r,n){var s=i?i+e:e;if(!this._events[s])return this;if(!t)return c(this,s),this;var o=this._events[s];if(o.fn)o.fn!==t||n&&!o.once||r&&o.context!==r||c(this,s);else{for(var a=0,u=[],l=o.length;a<l;a++)(o[a].fn!==t||n&&!o[a].once||r&&o[a].context!==r)&&u.push(o[a]);u.length?this._events[s]=1===u.length?u[0]:u:c(this,s)}return this},u.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&c(this,t)):(this._events=new s,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=i,u.EventEmitter=u,e.exports=u},25367:function(e,t,r){"use strict";var n=r(60452).Buffer;function i(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(255!==t[o])throw new TypeError(s+" is ambiguous");t[o]=i}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(t){if((Array.isArray(t)||t instanceof Uint8Array)&&(t=n.from(t)),!n.isBuffer(t))throw new TypeError("Expected Buffer");if(0===t.length)return"";var r=0,i=0,s=0,o=t.length;while(s!==o&&0===t[s])s++,r++;var u=(o-s)*l+1>>>0,h=new Uint8Array(u);while(s!==o){for(var d=t[s],p=0,f=u-1;(0!==d||p<i)&&-1!==f;f--,p++)d+=256*h[f]>>>0,h[f]=d%a>>>0,d=d/a>>>0;if(0!==d)throw new Error("Non-zero carry");i=p,s++}var g=u-i;while(g!==u&&0===h[g])g++;for(var m=c.repeat(r);g<u;++g)m+=e.charAt(h[g]);return m}function d(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return n.alloc(0);var r=0,i=0,s=0;while(e[r]===c)i++,r++;var o=(e.length-r)*u+1>>>0,l=new Uint8Array(o);while(r<e.length){var h=e.charCodeAt(r);if(h>255)return;var d=t[h];if(255===d)return;for(var p=0,f=o-1;(0!==d||p<s)&&-1!==f;f--,p++)d+=a*l[f]>>>0,l[f]=d%256>>>0,d=d/256>>>0;if(0!==d)throw new Error("Non-zero carry");s=p,r++}var g=o-s;while(g!==o&&0===l[g])g++;var m=n.allocUnsafe(i+(o-g));m.fill(0,0,i);var y=i;while(g!==o)m[y++]=l[g++];return m}function p(e){var t=d(e);if(t)return t;throw new Error("Non-base"+a+" character")}return{encode:h,decodeUnsafe:d,decode:p}}e.exports=i},25638:function(e,t,r){"use strict";r.d(t,{a:function(){return m}});r(44114),r(18111),r(81148),r(22489),r(20116),r(7588),r(61701),r(13579);var n=r(69983),i=r(28356),s=r(80955),o=r(9051),a=r(37903);const c={handleSolanaDeeplinkRedirect(e){if(a.W.state.activeChain===s.o.CHAIN.SOLANA){const t=window.location.href,r=encodeURIComponent(t);if("Phantom"===e&&!("phantom"in window)){const e=t.startsWith("https")?"https":"http",n=t.split("/")[2],i=encodeURIComponent(`${e}://${n}`);window.location.href=`https://phantom.app/ul/browse/${r}?ref=${i}`}"Coinbase Wallet"!==e||"coinbaseSolana"in window||(window.location.href=`https://go.cb-w.com/dapp?cb_url=${r}`)}}};var u=r(81653),l=r(65768),h=r(64529),d=r(80347),p=r(19349);const f={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},g=(0,n.BX)({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...f},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),m={state:g,subscribe(e){return(0,n.B1)(g,(()=>{e(g)}))},subscribeKey(e,t){return(0,i.u$)(g,e,t)},initialize(e){e.forEach((e=>{const t=u.i.getConnectedConnectorId(e);t&&this.setConnectorId(t,e)}))},setActiveConnector(e){e&&(g.activeConnector=(0,n.KR)(e))},setConnectors(e){const t=e.filter((e=>!g.allConnectors.some((t=>t.id===e.id&&this.getConnectorName(t.name)===this.getConnectorName(e.name)&&t.chain===e.chain))));t.forEach((e=>{"MULTI_CHAIN"!==e.type&&g.allConnectors.push((0,n.KR)(e))}));const r=this.getEnabledNamespaces(),i=this.getEnabledConnectors(r);g.connectors=this.mergeMultiChainConnectors(i)},filterByNamespaces(e){Object.keys(g.filterByNamespaceMap).forEach((e=>{g.filterByNamespaceMap[e]=!1})),e.forEach((e=>{g.filterByNamespaceMap[e]=!0})),this.updateConnectorsForEnabledNamespaces()},filterByNamespace(e,t){g.filterByNamespaceMap[e]=t,this.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const e=this.getEnabledNamespaces(),t=this.getEnabledConnectors(e),r=this.areAllNamespacesEnabled();g.connectors=this.mergeMultiChainConnectors(t),r?l.N.clearFilterByNamespaces():l.N.filterByNamespaces(e)},getEnabledNamespaces(){return Object.entries(g.filterByNamespaceMap).filter((([e,t])=>t)).map((([e])=>e))},getEnabledConnectors(e){return g.allConnectors.filter((t=>e.includes(t.chain)))},areAllNamespacesEnabled(){return Object.values(g.filterByNamespaceMap).every((e=>e))},mergeMultiChainConnectors(e){const t=this.generateConnectorMapByName(e),r=[];return t.forEach((e=>{const t=e[0],n=t?.id===s.o.CONNECTOR_ID.AUTH;e.length>1&&t?r.push({name:t.name,imageUrl:t.imageUrl,imageId:t.imageId,connectors:[...e],type:n?"AUTH":"MULTI_CHAIN",chain:"eip155",id:t?.id||""}):t&&r.push(t)})),r},generateConnectorMapByName(e){const t=new Map;return e.forEach((e=>{const{name:r}=e,n=this.getConnectorName(r);if(!n)return;const i=t.get(n)||[],s=i.find((t=>t.chain===e.chain));s||i.push(e),t.set(n,i)})),t},getConnectorName(e){if(!e)return e;const t={"Trust Wallet":"Trust"};return t[e]||e},getUniqueConnectorsByName(e){const t=[];return e.forEach((e=>{t.find((t=>t.chain===e.chain))||t.push(e)})),t},addConnector(e){if(e.id===s.o.CONNECTOR_ID.AUTH){const t=e,r=(0,n.P9)(h.H.state),i=p.W.getSnapshot().themeMode,s=p.W.getSnapshot().themeVariables;t?.provider?.syncDappData?.({metadata:r.metadata,sdkVersion:r.sdkVersion,projectId:r.projectId,sdkType:r.sdkType}),t?.provider?.syncTheme({themeMode:i,themeVariables:s,w3mThemeVariables:(0,o.o)(s,i)}),this.setConnectors([e])}else this.setConnectors([e])},getAuthConnector(e){const t=e||a.W.state.activeChain,r=g.connectors.find((e=>e.id===s.o.CONNECTOR_ID.AUTH));if(r){if(r?.connectors?.length){const e=r.connectors.find((e=>e.chain===t));return e}return r}},getAnnouncedConnectorRdns(){return g.connectors.filter((e=>"ANNOUNCED"===e.type)).map((e=>e.info?.rdns))},getConnectorById(e){return g.allConnectors.find((t=>t.id===e))},getConnector(e,t){const r=g.allConnectors.filter((e=>e.chain===a.W.state.activeChain));return r.find((r=>r.explorerId===e||r.info?.rdns===t))},syncIfAuthConnector(e){if("ID_AUTH"!==e.id)return;const t=e,r=(0,n.P9)(h.H.state),i=p.W.getSnapshot().themeMode,s=p.W.getSnapshot().themeVariables;t?.provider?.syncDappData?.({metadata:r.metadata,sdkVersion:r.sdkVersion,sdkType:r.sdkType,projectId:r.projectId}),t.provider.syncTheme({themeMode:i,themeVariables:s,w3mThemeVariables:(0,o.o)(s,i)})},getConnectorsByNamespace(e){const t=g.allConnectors.filter((t=>t.chain===e));return this.mergeMultiChainConnectors(t)},selectWalletConnector(e){const t=m.getConnector(e.id,e.rdns);a.W.state.activeChain===s.o.CHAIN.SOLANA&&c.handleSolanaDeeplinkRedirect(t?.name||e.name||""),t?d.I.push("ConnectingExternal",{connector:t}):d.I.push("ConnectingWalletConnect",{wallet:e})},getConnectors(e){return e?this.getConnectorsByNamespace(e):this.mergeMultiChainConnectors(g.allConnectors)},setFilterByNamespace(e){g.filterByNamespace=e,g.connectors=this.getConnectors(e),l.N.setFilterByNamespace(e)},setConnectorId(e,t){e&&(g.activeConnectorIds={...g.activeConnectorIds,[t]:e},u.i.setConnectedConnectorId(t,e))},removeConnectorId(e){g.activeConnectorIds={...g.activeConnectorIds,[e]:void 0},u.i.deleteConnectedConnectorId(e)},getConnectorId(e){if(e)return g.activeConnectorIds[e]},isConnected(e){return e?Boolean(g.activeConnectorIds[e]):Object.values(g.activeConnectorIds).some((e=>Boolean(e)))},resetConnectorIds(){g.activeConnectorIds={...f}}}},26351:function(e,t,r){"use strict";r.d(t,{D5:function(){return R},U5:function(){return N},h6:function(){return i.a},iP:function(){return A},oI:function(){return C}});r(44114);var n=r(2043),i=r.n(n),s=r(74087);const o={level:"info"},a="custom_context",c=1024e3;class u{constructor(e){this.nodeValue=e,this.sizeInBytes=(new TextEncoder).encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}}class l{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const t=new u(e);if(t.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${t.size}`);for(;this.size+t.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=t),this.tail=t):(this.head=t,this.tail=t),this.lengthInNodes++,this.sizeInBytes+=t.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let t=this.head;for(;null!==t;)e.push(t.value),t=t.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const t=e.value;return e=e.next,{done:!1,value:t}}}}}class h{constructor(e,t=c){this.level=e??"error",this.levelValue=n.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=t,this.logs=new l(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,t){t===n.levels.values.error?console.error(e):t===n.levels.values.warn?console.warn(e):t===n.levels.values.debug?console.debug(e):t===n.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append((0,s.h)({timestamp:(new Date).toISOString(),log:e}));const t="string"==typeof e?JSON.parse(e).level:e.level;t>=this.levelValue&&this.forwardToConsole(e,t)}getLogs(){return this.logs}clearLogs(){this.logs=new l(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const t=this.getLogArray();return t.push((0,s.h)({extraMetadata:e})),new Blob(t,{type:"application/json"})}}class d{constructor(e,t=c){this.baseChunkLogger=new h(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const t=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=t,r.download=`walletconnect-logs-${(new Date).toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t)}}class p{constructor(e,t=c){this.baseChunkLogger=new h(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}}var f=Object.defineProperty,g=Object.defineProperties,m=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,v=(e,t,r)=>t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,_=(e,t)=>{for(var r in t||(t={}))w.call(t,r)&&v(e,r,t[r]);if(y)for(var r of y(t))b.call(t,r)&&v(e,r,t[r]);return e},E=(e,t)=>g(e,m(t));function A(e){return E(_({},e),{level:e?.level||o.level})}function I(e,t=a){return e[t]||""}function S(e,t,r=a){return e[r]=t,e}function C(e,t=a){let r="";return r=typeof e.bindings>"u"?I(e,t):e.bindings().context||"",r}function k(e,t,r=a){const n=C(e,r);return n.trim()?`${n}/${t}`:t}function N(e,t,r=a){const n=k(e,t,r),i=e.child({context:n});return S(i,n,r)}function O(e){var t,r;const n=new d(null==(t=e.opts)?void 0:t.level,e.maxSizeInBytes);return{logger:i()(E(_({},e.opts),{level:"trace",browser:E(_({},null==(r=e.opts)?void 0:r.browser),{write:e=>n.write(e)})})),chunkLoggerController:n}}function T(e){var t;const r=new p(null==(t=e.opts)?void 0:t.level,e.maxSizeInBytes);return{logger:i()(E(_({},e.opts),{level:"trace"}),r),chunkLoggerController:r}}function R(e){return typeof e.loggerOverride<"u"&&"string"!=typeof e.loggerOverride?{logger:e.loggerOverride,chunkLoggerController:null}:typeof window<"u"?O(e):T(e)}},26364:function(e,t,r){"use strict";r.d(t,{u:function(){return n}});const n="standard:connect"},26676:function(e,t,r){"use strict";r.d(t,{J3:function(){return x},Kt:function(){return ce},Ng:function(){return Yr},Sr:function(){return _n},ZX:function(){return ae},d_:function(){return Qr},yq:function(){return Te}});r(44114),r(18111),r(81148),r(22489),r(20116),r(7588),r(61701),r(18237),r(13579),r(17642),r(58004),r(33853),r(45876),r(32475),r(15024),r(31698);var n=r(90712),i=r(9306),s=r(72487),o=r.n(s),a=r(74381),c=r.n(a),u=r(74887),l=r(59930),h=r(63558),d=r(93203),p=r(17945),f=r(18571),g=r.n(f),m=r(37056),y=r(65699),w=r(65479);i.ev.utils.randomPrivateKey;const b=()=>{const e=i.ev.utils.randomPrivateKey(),t=v(e),r=new Uint8Array(64);return r.set(e),r.set(t,32),{publicKey:t,secretKey:r}},v=i.ev.getPublicKey;function _(e){try{return i.ev.ExtendedPoint.fromHex(e),!0}catch{return!1}}const E=(e,t)=>i.ev.sign(e,t.slice(0,32)),A=i.ev.verify,I=e=>n.Buffer.isBuffer(e)?e:e instanceof Uint8Array?n.Buffer.from(e.buffer,e.byteOffset,e.byteLength):n.Buffer.from(e);class S{constructor(e){Object.assign(this,e)}encode(){return n.Buffer.from((0,l.serialize)(C,this))}static decode(e){return(0,l.deserialize)(C,this,e)}static decodeUnchecked(e){return(0,l.deserializeUnchecked)(C,this,e)}}const C=new Map;var k;const N=32,O=32;function T(e){return void 0!==e._bn}let R=1;class x extends S{constructor(e){if(super({}),this._bn=void 0,T(e))this._bn=e._bn;else{if("string"===typeof e){const t=c().decode(e);if(t.length!=O)throw new Error("Invalid public key input");this._bn=new(o())(t)}else this._bn=new(o())(e);if(this._bn.byteLength()>O)throw new Error("Invalid public key input")}}static unique(){const e=new x(R);return R+=1,new x(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return c().encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(n.Buffer);if(e.length===O)return e;const t=n.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,r){const i=n.Buffer.concat([e.toBuffer(),n.Buffer.from(t),r.toBuffer()]),s=(0,u.sc)(i);return new x(s)}static createProgramAddressSync(e,t){let r=n.Buffer.alloc(0);e.forEach((function(e){if(e.length>N)throw new TypeError("Max seed length exceeded");r=n.Buffer.concat([r,I(e)])})),r=n.Buffer.concat([r,t.toBuffer(),n.Buffer.from("ProgramDerivedAddress")]);const i=(0,u.sc)(r);if(_(i))throw new Error("Invalid seeds, address must fall off the curve");return new x(i)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let r,i=255;while(0!=i){try{const s=e.concat(n.Buffer.from([i]));r=this.createProgramAddressSync(s,t)}catch(s){if(s instanceof TypeError)throw s;i--;continue}return[r,i]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){const t=new x(e);return _(t.toBytes())}}k=x,x.default=new k("11111111111111111111111111111111"),C.set(x,{kind:"struct",fields:[["_bn","u256"]]});new x("BPFLoader1111111111111111111111111111111111");const P=1232,M=127,B=64;class U extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(U.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class L extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(L.prototype,"name",{value:"TransactionExpiredTimeoutError"});class D extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(D.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class W{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){const t=255;if(this.length>t+1)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach(((e,t)=>{r.set(e.toBase58(),t)}));const n=e=>{const t=r.get(e.toBase58());if(void 0===t)throw new Error("Encountered an unknown instruction account key during compilation");return t};return e.map((e=>({programIdIndex:n(e.programId),accountKeyIndexes:e.keys.map((e=>n(e.pubkey))),data:e.data})))}}const j=(e="publicKey")=>h.av(32,e),z=(e="signature")=>h.av(64,e),H=(e="string")=>{const t=h.w3([h.DH("length"),h.DH("lengthPadding"),h.av(h.cY(h.DH(),-8),"chars")],e),r=t.decode.bind(t),i=t.encode.bind(t),s=t;return s.decode=(e,t)=>{const n=r(e,t);return n["chars"].toString()},s.encode=(e,t,r)=>{const s={chars:n.Buffer.from(e,"utf8")};return i(s,t,r)},s.alloc=e=>h.DH().span+h.DH().span+n.Buffer.from(e,"utf8").length,s},q=(e="authorized")=>h.w3([j("staker"),j("withdrawer")],e),$=(e="lockup")=>h.w3([h.Wg("unixTimestamp"),h.Wg("epoch"),j("custodian")],e),F=(e="voteInit")=>h.w3([j("nodePubkey"),j("authorizedVoter"),j("authorizedWithdrawer"),h.u8("commission")],e),K=(e="voteAuthorizeWithSeedArgs")=>h.w3([h.DH("voteAuthorizationType"),j("currentAuthorityDerivedKeyOwnerPubkey"),H("currentAuthorityDerivedKeySeed"),j("newAuthorized")],e);function V(e,t){const r=e=>{if(e.span>=0)return e.span;if("function"===typeof e.alloc)return e.alloc(t[e.property]);if("count"in e&&"elementLayout"in e){const n=t[e.property];if(Array.isArray(n))return n.length*r(e.elementLayout)}else if("fields"in e)return V({layout:e},t[e.property]);return 0};let n=0;return e.layout.fields.forEach((e=>{n+=r(e)})),n}function Y(e){let t=0,r=0;for(;;){let n=e.shift();if(t|=(127&n)<<7*r,r+=1,0===(128&n))break}return t}function G(e,t){let r=t;for(;;){let t=127&r;if(r>>=7,0==r){e.push(t);break}t|=128,e.push(t)}}function Z(e,t){if(!e)throw new Error(t||"Assertion failed")}class J{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const r=new Map,n=e=>{const t=e.toBase58();let n=r.get(t);return void 0===n&&(n={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(t,n)),n},i=n(t);i.isSigner=!0,i.isWritable=!0;for(const s of e){n(s.programId).isInvoked=!0;for(const e of s.keys){const t=n(e.pubkey);t.isSigner||=e.isSigner,t.isWritable||=e.isWritable}}return new J(t,r)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];Z(e.length<=256,"Max static account keys length exceeded");const t=e.filter((([,e])=>e.isSigner&&e.isWritable)),r=e.filter((([,e])=>e.isSigner&&!e.isWritable)),n=e.filter((([,e])=>!e.isSigner&&e.isWritable)),i=e.filter((([,e])=>!e.isSigner&&!e.isWritable)),s={numRequiredSignatures:t.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{Z(t.length>0,"Expected at least one writable signer key");const[e]=t[0];Z(e===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const o=[...t.map((([e])=>new x(e))),...r.map((([e])=>new x(e))),...n.map((([e])=>new x(e))),...i.map((([e])=>new x(e)))];return[s,o]}extractTableLookup(e){const[t,r]=this.drainKeysFoundInLookupTable(e.state.addresses,(e=>!e.isSigner&&!e.isInvoked&&e.isWritable)),[n,i]=this.drainKeysFoundInLookupTable(e.state.addresses,(e=>!e.isSigner&&!e.isInvoked&&!e.isWritable));if(0!==t.length||0!==n.length)return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:n},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(e,t){const r=new Array,n=new Array;for(const[i,s]of this.keyMetaMap.entries())if(t(s)){const t=new x(i),s=e.findIndex((e=>e.equals(t)));s>=0&&(Z(s<256,"Max lookup table index exceeded"),r.push(s),n.push(t),this.keyMetaMap.delete(i))}return[r,n]}}const X="Reached end of buffer unexpectedly";function Q(e){if(0===e.length)throw new Error(X);return e.shift()}function ee(e,...t){const[r]=t;if(2===t.length?r+(t[1]??0)>e.length:r>=e.length)throw new Error(X);return e.splice(...t)}class te{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map((e=>new x(e))),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach((e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex])))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map((e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:c().decode(e.data)})))}get addressTableLookups(){return[]}getAccountKeys(){return new W(this.staticAccountKeys)}static compile(e){const t=J.compile(e.instructions,e.payerKey),[r,n]=t.getMessageComponents(),i=new W(n),s=i.compileInstructions(e.instructions).map((e=>({programIdIndex:e.programIdIndex,accounts:e.accountKeyIndexes,data:c().encode(e.data)})));return new te({header:r,accountKeys:n,recentBlockhash:e.recentBlockhash,instructions:s})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const r=e-t,n=this.accountKeys.length-t,i=n-this.header.numReadonlyUnsignedAccounts;return r<i}{const r=t-this.header.numReadonlySignedAccounts;return e<r}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter(((e,t)=>!this.isProgramId(t)))}serialize(){const e=this.accountKeys.length;let t=[];G(t,e);const r=this.instructions.map((e=>{const{accounts:t,programIdIndex:r}=e,i=Array.from(c().decode(e.data));let s=[];G(s,t.length);let o=[];return G(o,i.length),{programIdIndex:r,keyIndicesCount:n.Buffer.from(s),keyIndices:t,dataLength:n.Buffer.from(o),data:i}}));let i=[];G(i,r.length);let s=n.Buffer.alloc(P);n.Buffer.from(i).copy(s);let o=i.length;r.forEach((e=>{const t=h.w3([h.u8("programIdIndex"),h.av(e.keyIndicesCount.length,"keyIndicesCount"),h.O6(h.u8("keyIndex"),e.keyIndices.length,"keyIndices"),h.av(e.dataLength.length,"dataLength"),h.O6(h.u8("userdatum"),e.data.length,"data")]),r=t.encode(e,s,o);o+=r})),s=s.slice(0,o);const a=h.w3([h.av(1,"numRequiredSignatures"),h.av(1,"numReadonlySignedAccounts"),h.av(1,"numReadonlyUnsignedAccounts"),h.av(t.length,"keyCount"),h.O6(j("key"),e,"keys"),j("recentBlockhash")]),u={numRequiredSignatures:n.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:n.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:n.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:n.Buffer.from(t),keys:this.accountKeys.map((e=>I(e.toBytes()))),recentBlockhash:c().decode(this.recentBlockhash)};let l=n.Buffer.alloc(2048);const d=a.encode(u,l);return s.copy(l,d),l.slice(0,d+s.length)}static from(e){let t=[...e];const r=Q(t);if(r!==(r&M))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=Q(t),s=Q(t),o=Y(t);let a=[];for(let c=0;c<o;c++){const e=ee(t,0,O);a.push(new x(n.Buffer.from(e)))}const u=ee(t,0,O),l=Y(t);let h=[];for(let p=0;p<l;p++){const e=Q(t),r=Y(t),i=ee(t,0,r),s=Y(t),o=ee(t,0,s),a=c().encode(n.Buffer.from(o));h.push({programIdIndex:e,accounts:i,data:a})}const d={header:{numRequiredSignatures:r,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:c().encode(n.Buffer.from(u)),accountKeys:a,instructions:h};return new te(d)}}class re{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new W(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(e>=r){const t=e-r,n=this.addressTableLookups.reduce(((e,t)=>e+t.writableIndexes.length),0);return t<n}if(e>=this.header.numRequiredSignatures){const n=e-t,i=r-t,s=i-this.header.numReadonlyUnsignedAccounts;return n<s}{const r=t-this.header.numReadonlySignedAccounts;return e<r}}resolveAddressTableLookups(e){const t={writable:[],readonly:[]};for(const r of this.addressTableLookups){const n=e.find((e=>e.key.equals(r.accountKey)));if(!n)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const e of r.writableIndexes){if(!(e<n.state.addresses.length))throw new Error(`Failed to find address for index ${e} in address lookup table ${r.accountKey.toBase58()}`);t.writable.push(n.state.addresses[e])}for(const e of r.readonlyIndexes){if(!(e<n.state.addresses.length))throw new Error(`Failed to find address for index ${e} in address lookup table ${r.accountKey.toBase58()}`);t.readonly.push(n.state.addresses[e])}}return t}static compile(e){const t=J.compile(e.instructions,e.payerKey),r=new Array,n={writable:new Array,readonly:new Array},i=e.addressLookupTableAccounts||[];for(const u of i){const e=t.extractTableLookup(u);if(void 0!==e){const[t,{writable:i,readonly:s}]=e;r.push(t),n.writable.push(...i),n.readonly.push(...s)}}const[s,o]=t.getMessageComponents(),a=new W(o,n),c=a.compileInstructions(e.instructions);return new re({header:s,staticAccountKeys:o,recentBlockhash:e.recentBlockhash,compiledInstructions:c,addressTableLookups:r})}serialize(){const e=Array();G(e,this.staticAccountKeys.length);const t=this.serializeInstructions(),r=Array();G(r,this.compiledInstructions.length);const n=this.serializeAddressTableLookups(),i=Array();G(i,this.addressTableLookups.length);const s=h.w3([h.u8("prefix"),h.w3([h.u8("numRequiredSignatures"),h.u8("numReadonlySignedAccounts"),h.u8("numReadonlyUnsignedAccounts")],"header"),h.av(e.length,"staticAccountKeysLength"),h.O6(j(),this.staticAccountKeys.length,"staticAccountKeys"),j("recentBlockhash"),h.av(r.length,"instructionsLength"),h.av(t.length,"serializedInstructions"),h.av(i.length,"addressTableLookupsLength"),h.av(n.length,"serializedAddressTableLookups")]),o=new Uint8Array(P),a=128,u=s.encode({prefix:a,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map((e=>e.toBytes())),recentBlockhash:c().decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:n},o);return o.slice(0,u)}serializeInstructions(){let e=0;const t=new Uint8Array(P);for(const r of this.compiledInstructions){const n=Array();G(n,r.accountKeyIndexes.length);const i=Array();G(i,r.data.length);const s=h.w3([h.u8("programIdIndex"),h.av(n.length,"encodedAccountKeyIndexesLength"),h.O6(h.u8(),r.accountKeyIndexes.length,"accountKeyIndexes"),h.av(i.length,"encodedDataLength"),h.av(r.data.length,"data")]);e+=s.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(n),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0;const t=new Uint8Array(P);for(const r of this.addressTableLookups){const n=Array();G(n,r.writableIndexes.length);const i=Array();G(i,r.readonlyIndexes.length);const s=h.w3([j("accountKey"),h.av(n.length,"encodedWritableIndexesLength"),h.O6(h.u8(),r.writableIndexes.length,"writableIndexes"),h.av(i.length,"encodedReadonlyIndexesLength"),h.O6(h.u8(),r.readonlyIndexes.length,"readonlyIndexes")]);e+=s.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(n),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e];const r=Q(t),n=r&M;Z(r!==n,"Expected versioned message but received legacy message");const i=n;Z(0===i,`Expected versioned message with version 0 but found version ${i}`);const s={numRequiredSignatures:Q(t),numReadonlySignedAccounts:Q(t),numReadonlyUnsignedAccounts:Q(t)},o=[],a=Y(t);for(let c=0;c<a;c++)o.push(new x(ee(t,0,O)));const u=c().encode(ee(t,0,O)),l=Y(t),h=[];for(let c=0;c<l;c++){const e=Q(t),r=Y(t),n=ee(t,0,r),i=Y(t),s=new Uint8Array(ee(t,0,i));h.push({programIdIndex:e,accountKeyIndexes:n,data:s})}const d=Y(t),p=[];for(let c=0;c<d;c++){const e=new x(ee(t,0,O)),r=Y(t),n=ee(t,0,r),i=Y(t),s=ee(t,0,i);p.push({accountKey:e,writableIndexes:n,readonlyIndexes:s})}return new re({header:s,staticAccountKeys:o,recentBlockhash:u,compiledInstructions:h,addressTableLookups:p})}}const ne={deserializeMessageVersion(e){const t=e[0],r=t&M;return r===t?"legacy":r},deserialize:e=>{const t=ne.deserializeMessageVersion(e);if("legacy"===t)return te.from(e);if(0===t)return re.deserialize(e);throw new Error(`Transaction message version ${t} deserialization is not supported`)}};let ie=function(e){return e[e["BLOCKHEIGHT_EXCEEDED"]=0]="BLOCKHEIGHT_EXCEEDED",e[e["PROCESSED"]=1]="PROCESSED",e[e["TIMED_OUT"]=2]="TIMED_OUT",e[e["NONCE_INVALID"]=3]="NONCE_INVALID",e}({});const se=n.Buffer.alloc(B).fill(0);class oe{constructor(e){this.keys=void 0,this.programId=void 0,this.data=n.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map((({pubkey:e,isSigner:t,isWritable:r})=>({pubkey:e.toJSON(),isSigner:t,isWritable:r}))),programId:this.programId.toJSON(),data:[...this.data]}}}class ae{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:r}=e;this.minNonceContextSlot=t,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:r}=e;this.recentBlockhash=t,this.lastValidBlockHeight=r}else{const{recentBlockhash:t,nonceInfo:r}=e;r&&(this.nonceInfo=r),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map((e=>e.toJSON())),signers:this.signatures.map((({publicKey:e})=>e.toJSON()))}}add(...e){if(0===e.length)throw new Error("No instructions");return e.forEach((e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new oe(e))})),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t,r;if(this.nonceInfo?(e=this.nonceInfo.nonce,t=this.instructions[0]!=this.nonceInfo.nonceInstruction?[this.nonceInfo.nonceInstruction,...this.instructions]:this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");if(t.length<1&&console.warn("No instructions provided"),this.feePayer)r=this.feePayer;else{if(!(this.signatures.length>0&&this.signatures[0].publicKey))throw new Error("Transaction fee payer required");r=this.signatures[0].publicKey}for(let c=0;c<t.length;c++)if(void 0===t[c].programId)throw new Error(`Transaction instruction index ${c} has undefined program id`);const n=[],i=[];t.forEach((e=>{e.keys.forEach((e=>{i.push({...e})}));const t=e.programId.toString();n.includes(t)||n.push(t)})),n.forEach((e=>{i.push({pubkey:new x(e),isSigner:!1,isWritable:!1})}));const s=[];i.forEach((e=>{const t=e.pubkey.toString(),r=s.findIndex((e=>e.pubkey.toString()===t));r>-1?(s[r].isWritable=s[r].isWritable||e.isWritable,s[r].isSigner=s[r].isSigner||e.isSigner):s.push(e)})),s.sort((function(e,t){if(e.isSigner!==t.isSigner)return e.isSigner?-1:1;if(e.isWritable!==t.isWritable)return e.isWritable?-1:1;const r={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return e.pubkey.toBase58().localeCompare(t.pubkey.toBase58(),"en",r)}));const o=s.findIndex((e=>e.pubkey.equals(r)));if(o>-1){const[e]=s.splice(o,1);e.isSigner=!0,e.isWritable=!0,s.unshift(e)}else s.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const c of this.signatures){const e=s.findIndex((e=>e.pubkey.equals(c.publicKey)));if(!(e>-1))throw new Error(`unknown signer: ${c.publicKey.toString()}`);s[e].isSigner||(s[e].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."))}let a=0,u=0,l=0;const h=[],d=[];s.forEach((({pubkey:e,isSigner:t,isWritable:r})=>{t?(h.push(e.toString()),a+=1,r||(u+=1)):(d.push(e.toString()),r||(l+=1))}));const p=h.concat(d),f=t.map((e=>{const{data:t,programId:r}=e;return{programIdIndex:p.indexOf(r.toString()),accounts:e.keys.map((e=>p.indexOf(e.pubkey.toString()))),data:c().encode(t)}}));return f.forEach((e=>{Z(e.programIdIndex>=0),e.accounts.forEach((e=>Z(e>=0)))})),new te({header:{numRequiredSignatures:a,numReadonlySignedAccounts:u,numReadonlyUnsignedAccounts:l},accountKeys:p,recentBlockhash:e,instructions:f})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);if(this.signatures.length===t.length){const r=this.signatures.every(((e,r)=>t[r].equals(e.publicKey)));if(r)return e}return this.signatures=t.map((e=>({signature:null,publicKey:e}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(0===e.length)throw new Error("No signers");const t=new Set;this.signatures=e.filter((e=>{const r=e.toString();return!t.has(r)&&(t.add(r),!0)})).map((e=>({signature:null,publicKey:e})))}sign(...e){if(0===e.length)throw new Error("No signers");const t=new Set,r=[];for(const i of e){const e=i.publicKey.toString();t.has(e)||(t.add(e),r.push(i))}this.signatures=r.map((e=>({signature:null,publicKey:e.publicKey})));const n=this._compile();this._partialSign(n,...r)}partialSign(...e){if(0===e.length)throw new Error("No signers");const t=new Set,r=[];for(const i of e){const e=i.publicKey.toString();t.has(e)||(t.add(e),r.push(i))}const n=this._compile();this._partialSign(n,...r)}_partialSign(e,...t){const r=e.serialize();t.forEach((e=>{const t=E(r,e.secretKey);this._addSignature(e.publicKey,I(t))}))}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){Z(64===t.length);const r=this.signatures.findIndex((t=>e.equals(t.publicKey)));if(r<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[r].signature=n.Buffer.from(t)}verifySignatures(e=!0){const t=this._getMessageSignednessErrors(this.serializeMessage(),e);return!t}_getMessageSignednessErrors(e,t){const r={};for(const{signature:n,publicKey:i}of this.signatures)null===n?t&&(r.missing||=[]).push(i):A(n,e,i.toBytes())||(r.invalid||=[]).push(i);return r.invalid||r.missing?r:void 0}serialize(e){const{requireAllSignatures:t,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),n=this.serializeMessage();if(r){const e=this._getMessageSignednessErrors(n,t);if(e){let t="Signature verification failed.";throw e.invalid&&(t+=`\nInvalid signature for public key${1===e.invalid.length?"":"(s)"} [\`${e.invalid.map((e=>e.toBase58())).join("`, `")}\`].`),e.missing&&(t+=`\nMissing signature for public key${1===e.missing.length?"":"(s)"} [\`${e.missing.map((e=>e.toBase58())).join("`, `")}\`].`),new Error(t)}}return this._serialize(n)}_serialize(e){const{signatures:t}=this,r=[];G(r,t.length);const i=r.length+64*t.length+e.length,s=n.Buffer.alloc(i);return Z(t.length<256),n.Buffer.from(r).copy(s,0),t.forEach((({signature:e},t)=>{null!==e&&(Z(64===e.length,"signature has invalid length"),n.Buffer.from(e).copy(s,r.length+64*t))})),e.copy(s,r.length+64*t.length),Z(s.length<=P,`Transaction too large: ${s.length} > ${P}`),s}get keys(){return Z(1===this.instructions.length),this.instructions[0].keys.map((e=>e.pubkey))}get programId(){return Z(1===this.instructions.length),this.instructions[0].programId}get data(){return Z(1===this.instructions.length),this.instructions[0].data}static from(e){let t=[...e];const r=Y(t);let i=[];for(let s=0;s<r;s++){const e=ee(t,0,B);i.push(c().encode(n.Buffer.from(e)))}return ae.populate(te.from(t),i)}static populate(e,t=[]){const r=new ae;return r.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(r.feePayer=e.accountKeys[0]),t.forEach(((t,n)=>{const i={signature:t==c().encode(se)?null:c().decode(t),publicKey:e.accountKeys[n]};r.signatures.push(i)})),e.instructions.forEach((t=>{const n=t.accounts.map((t=>{const n=e.accountKeys[t];return{pubkey:n,isSigner:r.signatures.some((e=>e.publicKey.toString()===n.toString()))||e.isAccountSigner(t),isWritable:e.isAccountWritable(t)}}));r.instructions.push(new oe({keys:n,programId:e.accountKeys[t.programIdIndex],data:c().decode(t.data)}))})),r._message=e,r._json=r.toJSON(),r}}class ce{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,void 0!==t)Z(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{const t=[];for(let r=0;r<e.header.numRequiredSignatures;r++)t.push(new Uint8Array(B));this.signatures=t}this.message=e}serialize(){const e=this.message.serialize(),t=Array();G(t,this.signatures.length);const r=h.w3([h.av(t.length,"encodedSignaturesLength"),h.O6(z(),this.signatures.length,"signatures"),h.av(e.length,"serializedMessage")]),n=new Uint8Array(2048),i=r.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},n);return n.slice(0,i)}static deserialize(e){let t=[...e];const r=[],n=Y(t);for(let s=0;s<n;s++)r.push(new Uint8Array(ee(t,0,B)));const i=ne.deserialize(new Uint8Array(t));return new ce(i,r)}sign(e){const t=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const n of e){const e=r.findIndex((e=>e.equals(n.publicKey)));Z(e>=0,`Cannot sign with non signer key ${n.publicKey.toBase58()}`),this.signatures[e]=E(t,n.secretKey)}}addSignature(e,t){Z(64===t.byteLength,"Signature must be 64 bytes long");const r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures),n=r.findIndex((t=>t.equals(e)));Z(n>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[n]=t}}const ue=160,le=64,he=ue/le,de=1e3/he,pe=new x("SysvarC1ock11111111111111111111111111111111"),fe=(new x("SysvarEpochSchedu1e111111111111111111111111"),new x("Sysvar1nstructions1111111111111111111111111"),new x("SysvarRecentB1ockHashes11111111111111111111")),ge=new x("SysvarRent111111111111111111111111111111111"),me=(new x("SysvarRewards111111111111111111111111111111"),new x("SysvarS1otHashes111111111111111111111111111"),new x("SysvarS1otHistory11111111111111111111111111"),new x("SysvarStakeHistory1111111111111111111111111"));class ye extends Error{constructor({action:e,signature:t,transactionMessage:r,logs:n}){const i=n?`Logs: \n${JSON.stringify(n.slice(-10),null,2)}. `:"",s="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let o;switch(e){case"send":o=`Transaction ${t} resulted in an error. \n${r}. `+i+s;break;case"simulate":o=`Simulation failed. \nMessage: ${r}. \n`+i+s;break;default:o=`Unknown action '${(e=>e)(e)}'`}super(o),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=t,this.transactionMessage=r,this.transactionLogs=n||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(null==e||"object"!==typeof e||!("then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise(((t,r)=>{e.getTransaction(this.signature).then((e=>{if(e&&e.meta&&e.meta.logMessages){const r=e.meta.logMessages;this.transactionLogs=r,t(r)}else r(new Error("Log messages not found"))})).catch(r)}))),await this.transactionLogs}}class we extends Error{constructor({code:e,message:t,data:r},n){super(null!=n?`${n}: ${t}`:t),this.code=void 0,this.data=void 0,this.code=e,this.data=r,this.name="SolanaJSONRPCError"}}async function be(e,t,r,n){const i=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},s=await e.sendTransaction(t,r,i);let o;if(null!=t.recentBlockhash&&null!=t.lastValidBlockHeight)o=(await e.confirmTransaction({abortSignal:n?.abortSignal,signature:s,blockhash:t.recentBlockhash,lastValidBlockHeight:t.lastValidBlockHeight},n&&n.commitment)).value;else if(null!=t.minNonceContextSlot&&null!=t.nonceInfo){const{nonceInstruction:r}=t.nonceInfo,i=r.keys[0].pubkey;o=(await e.confirmTransaction({abortSignal:n?.abortSignal,minContextSlot:t.minNonceContextSlot,nonceAccountPubkey:i,nonceValue:t.nonceInfo.nonce,signature:s},n&&n.commitment)).value}else null!=n?.abortSignal&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),o=(await e.confirmTransaction(s,n&&n.commitment)).value;if(o.err){if(null!=s)throw new ye({action:"send",signature:s,transactionMessage:`Status: (${JSON.stringify(o)})`});throw new Error(`Transaction ${s} failed (${JSON.stringify(o)})`)}return s}function ve(e){return new Promise((t=>setTimeout(t,e)))}function _e(e,t){const r=e.layout.span>=0?e.layout.span:V(e,t),i=n.Buffer.alloc(r),s=Object.assign({instruction:e.index},t);return e.layout.encode(s,i),i}const Ee=h.I0("lamportsPerSignature"),Ae=h.w3([h.DH("version"),h.DH("state"),j("authorizedPubkey"),j("nonce"),h.w3([Ee],"feeCalculator")]),Ie=Ae.span;class Se{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const t=Ae.decode(I(e),0);return new Se({authorizedPubkey:new x(t.authorizedPubkey),nonce:new x(t.nonce).toString(),feeCalculator:t.feeCalculator})}}const Ce=e=>{const t=e.decode.bind(e),r=e.encode.bind(e);return{decode:t,encode:r}},ke=e=>t=>{const r=(0,h.av)(e,t),{encode:i,decode:s}=Ce(r),o=r;return o.decode=(e,t)=>{const r=s(e,t);return(0,d.k5)(n.Buffer.from(r))},o.encode=(t,r,n)=>{const s=(0,d.Bq)(t,e);return i(s,r,n)},o},Ne=ke(8);const Oe=Object.freeze({Create:{index:0,layout:h.w3([h.DH("instruction"),h.Wg("lamports"),h.Wg("space"),j("programId")])},Assign:{index:1,layout:h.w3([h.DH("instruction"),j("programId")])},Transfer:{index:2,layout:h.w3([h.DH("instruction"),Ne("lamports")])},CreateWithSeed:{index:3,layout:h.w3([h.DH("instruction"),j("base"),H("seed"),h.Wg("lamports"),h.Wg("space"),j("programId")])},AdvanceNonceAccount:{index:4,layout:h.w3([h.DH("instruction")])},WithdrawNonceAccount:{index:5,layout:h.w3([h.DH("instruction"),h.Wg("lamports")])},InitializeNonceAccount:{index:6,layout:h.w3([h.DH("instruction"),j("authorized")])},AuthorizeNonceAccount:{index:7,layout:h.w3([h.DH("instruction"),j("authorized")])},Allocate:{index:8,layout:h.w3([h.DH("instruction"),h.Wg("space")])},AllocateWithSeed:{index:9,layout:h.w3([h.DH("instruction"),j("base"),H("seed"),h.Wg("space"),j("programId")])},AssignWithSeed:{index:10,layout:h.w3([h.DH("instruction"),j("base"),H("seed"),j("programId")])},TransferWithSeed:{index:11,layout:h.w3([h.DH("instruction"),Ne("lamports"),H("seed"),j("programId")])},UpgradeNonceAccount:{index:12,layout:h.w3([h.DH("instruction")])}});class Te{constructor(){}static createAccount(e){const t=Oe.Create,r=_e(t,{lamports:e.lamports,space:e.space,programId:I(e.programId.toBuffer())});return new oe({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(e){let t,r;if("basePubkey"in e){const n=Oe.TransferWithSeed;t=_e(n,{lamports:BigInt(e.lamports),seed:e.seed,programId:I(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const n=Oe.Transfer;t=_e(n,{lamports:BigInt(e.lamports)}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new oe({keys:r,programId:this.programId,data:t})}static assign(e){let t,r;if("basePubkey"in e){const n=Oe.AssignWithSeed;t=_e(n,{base:I(e.basePubkey.toBuffer()),seed:e.seed,programId:I(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const n=Oe.Assign;t=_e(n,{programId:I(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new oe({keys:r,programId:this.programId,data:t})}static createAccountWithSeed(e){const t=Oe.CreateWithSeed,r=_e(t,{base:I(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:I(e.programId.toBuffer())});let n=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||n.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new oe({keys:n,programId:this.programId,data:r})}static createNonceAccount(e){const t=new ae;"basePubkey"in e&&"seed"in e?t.add(Te.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:Ie,programId:this.programId})):t.add(Te.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:Ie,programId:this.programId}));const r={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(r)),t}static nonceInitialize(e){const t=Oe.InitializeNonceAccount,r=_e(t,{authorized:I(e.authorizedPubkey.toBuffer())}),n={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:fe,isSigner:!1,isWritable:!1},{pubkey:ge,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new oe(n)}static nonceAdvance(e){const t=Oe.AdvanceNonceAccount,r=_e(t),n={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:fe,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new oe(n)}static nonceWithdraw(e){const t=Oe.WithdrawNonceAccount,r=_e(t,{lamports:e.lamports});return new oe({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:fe,isSigner:!1,isWritable:!1},{pubkey:ge,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(e){const t=Oe.AuthorizeNonceAccount,r=_e(t,{authorized:I(e.newAuthorizedPubkey.toBuffer())});return new oe({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(e){let t,r;if("basePubkey"in e){const n=Oe.AllocateWithSeed;t=_e(n,{base:I(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:I(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const n=Oe.Allocate;t=_e(n,{space:e.space}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new oe({keys:r,programId:this.programId,data:t})}}Te.programId=new x("11111111111111111111111111111111");const Re=P-300;class xe{constructor(){}static getMinNumSignatures(e){return 2*(Math.ceil(e/xe.chunkSize)+1+1)}static async load(e,t,r,i,s){{const n=await e.getMinimumBalanceForRentExemption(s.length),o=await e.getAccountInfo(r.publicKey,"confirmed");let a=null;if(null!==o){if(o.executable)return console.error("Program load failed, account is already executable"),!1;o.data.length!==s.length&&(a=a||new ae,a.add(Te.allocate({accountPubkey:r.publicKey,space:s.length}))),o.owner.equals(i)||(a=a||new ae,a.add(Te.assign({accountPubkey:r.publicKey,programId:i}))),o.lamports<n&&(a=a||new ae,a.add(Te.transfer({fromPubkey:t.publicKey,toPubkey:r.publicKey,lamports:n-o.lamports})))}else a=(new ae).add(Te.createAccount({fromPubkey:t.publicKey,newAccountPubkey:r.publicKey,lamports:n>0?n:1,space:s.length,programId:i}));null!==a&&await be(e,a,[t,r],{commitment:"confirmed"})}const o=h.w3([h.DH("instruction"),h.DH("offset"),h.DH("bytesLength"),h.DH("bytesLengthPadding"),h.O6(h.u8("byte"),h.cY(h.DH(),-8),"bytes")]),a=xe.chunkSize;let c=0,u=s,l=[];while(u.length>0){const s=u.slice(0,a),h=n.Buffer.alloc(a+16);o.encode({instruction:0,offset:c,bytes:s,bytesLength:0,bytesLengthPadding:0},h);const d=(new ae).add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0}],programId:i,data:h});if(l.push(be(e,d,[t,r],{commitment:"confirmed"})),e._rpcEndpoint.includes("solana.com")){const e=4;await ve(1e3/e)}c+=a,u=u.slice(a)}await Promise.all(l);{const s=h.w3([h.DH("instruction")]),o=n.Buffer.alloc(s.span);s.encode({instruction:1},o);const a=(new ae).add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:ge,isSigner:!1,isWritable:!1}],programId:i,data:o}),c="processed",u=await e.sendTransaction(a,[t,r],{preflightCommitment:c}),{context:l,value:d}=await e.confirmTransaction({signature:u,lastValidBlockHeight:a.lastValidBlockHeight,blockhash:a.recentBlockhash},c);if(d.err)throw new Error(`Transaction ${u} failed (${JSON.stringify(d)})`);while(1){try{const t=await e.getSlot({commitment:c});if(t>l.slot)break}catch{}await new Promise((e=>setTimeout(e,Math.round(de/2))))}}return!0}}xe.chunkSize=Re;new x("BPFLoader2111111111111111111111111111111111");function Pe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e}var Me,Be;function Ue(){if(Be)return Me;Be=1;var e=Object.prototype.toString,t=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};function r(n,i){var s,o,a,c,u,l,h;if(!0===n)return"true";if(!1===n)return"false";switch(typeof n){case"object":if(null===n)return null;if(n.toJSON&&"function"===typeof n.toJSON)return r(n.toJSON(),i);if(h=e.call(n),"[object Array]"===h){for(a="[",o=n.length-1,s=0;s<o;s++)a+=r(n[s],!0)+",";return o>-1&&(a+=r(n[s],!0)),a+"]"}if("[object Object]"===h){c=t(n).sort(),o=c.length,a="",s=0;while(s<o)u=c[s],l=r(n[u],!1),void 0!==l&&(a&&(a+=","),a+=JSON.stringify(u)+":"+l),s++;return"{"+a+"}"}return JSON.stringify(n);case"function":case"undefined":return i?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}return Me=function(e){var t=r(e,!1);if(void 0!==t)return""+t},Me}var Le=Ue(),De=Pe(Le);const We=32;function je(e){let t=0;while(e>1)e/=2,t++;return t}function ze(e){return 0===e?1:(e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e|=e>>32,e+1)}class He{constructor(e,t,r,n,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=r,this.firstNormalEpoch=n,this.firstNormalSlot=i}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const t=je(ze(e+We+1))-je(We)-1,r=this.getSlotsInEpoch(t),n=e-(r-We);return[t,n]}{const t=e-this.firstNormalSlot,r=Math.floor(t/this.slotsPerEpoch),n=this.firstNormalEpoch+r,i=t%this.slotsPerEpoch;return[n,i]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*We:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+je(We)):this.slotsPerEpoch}}var qe=globalThis.fetch;class $e extends m.vE{constructor(e,t,r){const n=e=>{const r=(0,m.kb)(e,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return this.underlyingSocket="socket"in r?r.socket:r,r};super(n,e,t,r),this.underlyingSocket=void 0}call(...e){const t=this.underlyingSocket?.readyState;return 1===t?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}notify(...e){const t=this.underlyingSocket?.readyState;return 1===t?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}}function Fe(e,t){let r;try{r=e.layout.decode(t)}catch(n){throw new Error("invalid instruction; "+n)}if(r.typeIndex!==e.index)throw new Error(`invalid account data; account type mismatch ${r.typeIndex} != ${e.index}`);return r}const Ke=56;class Ve{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const t=Fe(Ye,e),r=e.length-Ke;Z(r>=0,"lookup table is invalid"),Z(r%32===0,"lookup table is invalid");const n=r/32,{addresses:i}=h.w3([h.O6(j(),n,"addresses")]).decode(e.slice(Ke));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:0!==t.authority.length?new x(t.authority[0]):void 0,addresses:i.map((e=>new x(e)))}}}const Ye={index:1,layout:h.w3([h.DH("typeIndex"),Ne("deactivationSlot"),h.I0("lastExtendedSlot"),h.u8("lastExtendedStartIndex"),h.u8(),h.O6(j(),h.cY(h.u8(),-1),"authority")])},Ge=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function Ze(e){const t=e.match(Ge);if(null==t)throw TypeError(`Failed to validate endpoint URL \`${e}\``);const[r,n,i,s]=t,o=e.startsWith("https:")?"wss:":"ws:",a=null==i?null:parseInt(i.slice(1),10),c=null==a?"":`:${a+1}`;return`${o}//${n}${c}${s}`}const Je=(0,p.au)((0,p.KJ)(x),(0,p.Yj)(),(e=>new x(e))),Xe=(0,p.PV)([(0,p.Yj)(),(0,p.eu)("base64")]),Qe=(0,p.au)((0,p.KJ)(n.Buffer),Xe,(e=>n.Buffer.from(e[0],"base64"))),et=3e4;function tt(e){if(!1===/^https?:/.test(e))throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return e}function rt(e){let t,r;if("string"===typeof e)t=e;else if(e){const{commitment:n,...i}=e;t=n,r=i}return{commitment:t,config:r}}function nt(e){return e.map((e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e))}function it(e){return(0,p.KC)([(0,p.NW)({jsonrpc:(0,p.eu)("2.0"),id:(0,p.Yj)(),result:e}),(0,p.NW)({jsonrpc:(0,p.eu)("2.0"),id:(0,p.Yj)(),error:(0,p.NW)({code:(0,p.L5)(),message:(0,p.Yj)(),data:(0,p.lq)((0,p.bz)())})})])}const st=it((0,p.L5)());function ot(e){return(0,p.au)(it(e),st,(t=>"error"in t?t:{...t,result:(0,p.vt)(t.result,e)}))}function at(e){return ot((0,p.NW)({context:(0,p.NW)({slot:(0,p.ai)()}),value:e}))}function ct(e){return(0,p.NW)({context:(0,p.NW)({slot:(0,p.ai)()}),value:e})}function ut(e,t){return 0===e?new re({header:t.header,staticAccountKeys:t.accountKeys.map((e=>new x(e))),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map((e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:c().decode(e.data)}))),addressTableLookups:t.addressTableLookups}):new te(t)}const lt=(0,p.NW)({foundation:(0,p.ai)(),foundationTerm:(0,p.ai)(),initial:(0,p.ai)(),taper:(0,p.ai)(),terminal:(0,p.ai)()}),ht=ot((0,p.YO)((0,p.me)((0,p.NW)({epoch:(0,p.ai)(),effectiveSlot:(0,p.ai)(),amount:(0,p.ai)(),postBalance:(0,p.ai)(),commission:(0,p.lq)((0,p.me)((0,p.ai)()))})))),dt=(0,p.YO)((0,p.NW)({slot:(0,p.ai)(),prioritizationFee:(0,p.ai)()})),pt=(0,p.NW)({total:(0,p.ai)(),validator:(0,p.ai)(),foundation:(0,p.ai)(),epoch:(0,p.ai)()}),ft=(0,p.NW)({epoch:(0,p.ai)(),slotIndex:(0,p.ai)(),slotsInEpoch:(0,p.ai)(),absoluteSlot:(0,p.ai)(),blockHeight:(0,p.lq)((0,p.ai)()),transactionCount:(0,p.lq)((0,p.ai)())}),gt=(0,p.NW)({slotsPerEpoch:(0,p.ai)(),leaderScheduleSlotOffset:(0,p.ai)(),warmup:(0,p.zM)(),firstNormalEpoch:(0,p.ai)(),firstNormalSlot:(0,p.ai)()}),mt=(0,p.g1)((0,p.Yj)(),(0,p.YO)((0,p.ai)())),yt=(0,p.me)((0,p.KC)([(0,p.NW)({}),(0,p.Yj)()])),wt=(0,p.NW)({err:yt}),bt=(0,p.eu)("receivedSignature"),vt=(0,p.NW)({"solana-core":(0,p.Yj)(),"feature-set":(0,p.lq)((0,p.ai)())}),_t=(0,p.NW)({program:(0,p.Yj)(),programId:Je,parsed:(0,p.L5)()}),Et=(0,p.NW)({programId:Je,accounts:(0,p.YO)(Je),data:(0,p.Yj)()}),At=at((0,p.NW)({err:(0,p.me)((0,p.KC)([(0,p.NW)({}),(0,p.Yj)()])),logs:(0,p.me)((0,p.YO)((0,p.Yj)())),accounts:(0,p.lq)((0,p.me)((0,p.YO)((0,p.me)((0,p.NW)({executable:(0,p.zM)(),owner:(0,p.Yj)(),lamports:(0,p.ai)(),data:(0,p.YO)((0,p.Yj)()),rentEpoch:(0,p.lq)((0,p.ai)())}))))),unitsConsumed:(0,p.lq)((0,p.ai)()),returnData:(0,p.lq)((0,p.me)((0,p.NW)({programId:(0,p.Yj)(),data:(0,p.PV)([(0,p.Yj)(),(0,p.eu)("base64")])}))),innerInstructions:(0,p.lq)((0,p.me)((0,p.YO)((0,p.NW)({index:(0,p.ai)(),instructions:(0,p.YO)((0,p.KC)([_t,Et]))}))))})),It=at((0,p.NW)({byIdentity:(0,p.g1)((0,p.Yj)(),(0,p.YO)((0,p.ai)())),range:(0,p.NW)({firstSlot:(0,p.ai)(),lastSlot:(0,p.ai)()})}));function St(e,t,r,n,i,s){const o=r||qe;let a,c;null!=s&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments."),n&&(c=async(e,t)=>{const r=await new Promise(((r,i)=>{try{n(e,t,((e,t)=>r([e,t])))}catch(s){i(s)}}));return await o(...r)});const u=new(g())((async(r,n)=>{const s={method:"POST",body:r,agent:a,headers:Object.assign({"Content-Type":"application/json"},t||{},Vr)};try{let t,r=5,a=500;for(;;){if(t=c?await c(e,s):await o(e,s),429!==t.status)break;if(!0===i)break;if(r-=1,0===r)break;console.error(`Server responded with ${t.status} ${t.statusText}.  Retrying after ${a}ms delay...`),await ve(a),a*=2}const u=await t.text();t.ok?n(null,u):n(new Error(`${t.status} ${t.statusText}: ${u}`))}catch(u){u instanceof Error&&n(u)}}),{});return u}function Ct(e){return(t,r)=>new Promise(((n,i)=>{e.request(t,r,((e,t)=>{e?i(e):n(t)}))}))}function kt(e){return t=>new Promise(((r,n)=>{0===t.length&&r([]);const i=t.map((t=>e.request(t.methodName,t.args)));e.request(i,((e,t)=>{e?n(e):r(t)}))}))}const Nt=ot(lt),Ot=ot(pt),Tt=ot(dt),Rt=ot(ft),xt=ot(gt),Pt=ot(mt),Mt=ot((0,p.ai)()),Bt=at((0,p.NW)({total:(0,p.ai)(),circulating:(0,p.ai)(),nonCirculating:(0,p.ai)(),nonCirculatingAccounts:(0,p.YO)(Je)})),Ut=(0,p.NW)({amount:(0,p.Yj)(),uiAmount:(0,p.me)((0,p.ai)()),decimals:(0,p.ai)(),uiAmountString:(0,p.lq)((0,p.Yj)())}),Lt=at((0,p.YO)((0,p.NW)({address:Je,amount:(0,p.Yj)(),uiAmount:(0,p.me)((0,p.ai)()),decimals:(0,p.ai)(),uiAmountString:(0,p.lq)((0,p.Yj)())}))),Dt=at((0,p.YO)((0,p.NW)({pubkey:Je,account:(0,p.NW)({executable:(0,p.zM)(),owner:Je,lamports:(0,p.ai)(),data:Qe,rentEpoch:(0,p.ai)()})}))),Wt=(0,p.NW)({program:(0,p.Yj)(),parsed:(0,p.L5)(),space:(0,p.ai)()}),jt=at((0,p.YO)((0,p.NW)({pubkey:Je,account:(0,p.NW)({executable:(0,p.zM)(),owner:Je,lamports:(0,p.ai)(),data:Wt,rentEpoch:(0,p.ai)()})}))),zt=at((0,p.YO)((0,p.NW)({lamports:(0,p.ai)(),address:Je}))),Ht=(0,p.NW)({executable:(0,p.zM)(),owner:Je,lamports:(0,p.ai)(),data:Qe,rentEpoch:(0,p.ai)()}),qt=(0,p.NW)({pubkey:Je,account:Ht}),$t=(0,p.au)((0,p.KC)([(0,p.KJ)(n.Buffer),Wt]),(0,p.KC)([Xe,Wt]),(e=>Array.isArray(e)?(0,p.vt)(e,Qe):e)),Ft=(0,p.NW)({executable:(0,p.zM)(),owner:Je,lamports:(0,p.ai)(),data:$t,rentEpoch:(0,p.ai)()}),Kt=(0,p.NW)({pubkey:Je,account:Ft}),Vt=(0,p.NW)({state:(0,p.KC)([(0,p.eu)("active"),(0,p.eu)("inactive"),(0,p.eu)("activating"),(0,p.eu)("deactivating")]),active:(0,p.ai)(),inactive:(0,p.ai)()}),Yt=ot((0,p.YO)((0,p.NW)({signature:(0,p.Yj)(),slot:(0,p.ai)(),err:yt,memo:(0,p.me)((0,p.Yj)()),blockTime:(0,p.lq)((0,p.me)((0,p.ai)()))}))),Gt=ot((0,p.YO)((0,p.NW)({signature:(0,p.Yj)(),slot:(0,p.ai)(),err:yt,memo:(0,p.me)((0,p.Yj)()),blockTime:(0,p.lq)((0,p.me)((0,p.ai)()))}))),Zt=(0,p.NW)({subscription:(0,p.ai)(),result:ct(Ht)}),Jt=(0,p.NW)({pubkey:Je,account:Ht}),Xt=(0,p.NW)({subscription:(0,p.ai)(),result:ct(Jt)}),Qt=(0,p.NW)({parent:(0,p.ai)(),slot:(0,p.ai)(),root:(0,p.ai)()}),er=(0,p.NW)({subscription:(0,p.ai)(),result:Qt}),tr=(0,p.KC)([(0,p.NW)({type:(0,p.KC)([(0,p.eu)("firstShredReceived"),(0,p.eu)("completed"),(0,p.eu)("optimisticConfirmation"),(0,p.eu)("root")]),slot:(0,p.ai)(),timestamp:(0,p.ai)()}),(0,p.NW)({type:(0,p.eu)("createdBank"),parent:(0,p.ai)(),slot:(0,p.ai)(),timestamp:(0,p.ai)()}),(0,p.NW)({type:(0,p.eu)("frozen"),slot:(0,p.ai)(),timestamp:(0,p.ai)(),stats:(0,p.NW)({numTransactionEntries:(0,p.ai)(),numSuccessfulTransactions:(0,p.ai)(),numFailedTransactions:(0,p.ai)(),maxTransactionsPerEntry:(0,p.ai)()})}),(0,p.NW)({type:(0,p.eu)("dead"),slot:(0,p.ai)(),timestamp:(0,p.ai)(),err:(0,p.Yj)()})]),rr=(0,p.NW)({subscription:(0,p.ai)(),result:tr}),nr=(0,p.NW)({subscription:(0,p.ai)(),result:ct((0,p.KC)([wt,bt]))}),ir=(0,p.NW)({subscription:(0,p.ai)(),result:(0,p.ai)()}),sr=(0,p.NW)({pubkey:(0,p.Yj)(),gossip:(0,p.me)((0,p.Yj)()),tpu:(0,p.me)((0,p.Yj)()),rpc:(0,p.me)((0,p.Yj)()),version:(0,p.me)((0,p.Yj)())}),or=(0,p.NW)({votePubkey:(0,p.Yj)(),nodePubkey:(0,p.Yj)(),activatedStake:(0,p.ai)(),epochVoteAccount:(0,p.zM)(),epochCredits:(0,p.YO)((0,p.PV)([(0,p.ai)(),(0,p.ai)(),(0,p.ai)()])),commission:(0,p.ai)(),lastVote:(0,p.ai)(),rootSlot:(0,p.me)((0,p.ai)())}),ar=ot((0,p.NW)({current:(0,p.YO)(or),delinquent:(0,p.YO)(or)})),cr=(0,p.KC)([(0,p.eu)("processed"),(0,p.eu)("confirmed"),(0,p.eu)("finalized")]),ur=(0,p.NW)({slot:(0,p.ai)(),confirmations:(0,p.me)((0,p.ai)()),err:yt,confirmationStatus:(0,p.lq)(cr)}),lr=at((0,p.YO)((0,p.me)(ur))),hr=ot((0,p.ai)()),dr=(0,p.NW)({accountKey:Je,writableIndexes:(0,p.YO)((0,p.ai)()),readonlyIndexes:(0,p.YO)((0,p.ai)())}),pr=(0,p.NW)({signatures:(0,p.YO)((0,p.Yj)()),message:(0,p.NW)({accountKeys:(0,p.YO)((0,p.Yj)()),header:(0,p.NW)({numRequiredSignatures:(0,p.ai)(),numReadonlySignedAccounts:(0,p.ai)(),numReadonlyUnsignedAccounts:(0,p.ai)()}),instructions:(0,p.YO)((0,p.NW)({accounts:(0,p.YO)((0,p.ai)()),data:(0,p.Yj)(),programIdIndex:(0,p.ai)()})),recentBlockhash:(0,p.Yj)(),addressTableLookups:(0,p.lq)((0,p.YO)(dr))})}),fr=(0,p.NW)({pubkey:Je,signer:(0,p.zM)(),writable:(0,p.zM)(),source:(0,p.lq)((0,p.KC)([(0,p.eu)("transaction"),(0,p.eu)("lookupTable")]))}),gr=(0,p.NW)({accountKeys:(0,p.YO)(fr),signatures:(0,p.YO)((0,p.Yj)())}),mr=(0,p.NW)({parsed:(0,p.L5)(),program:(0,p.Yj)(),programId:Je}),yr=(0,p.NW)({accounts:(0,p.YO)(Je),data:(0,p.Yj)(),programId:Je}),wr=(0,p.KC)([yr,mr]),br=(0,p.KC)([(0,p.NW)({parsed:(0,p.L5)(),program:(0,p.Yj)(),programId:(0,p.Yj)()}),(0,p.NW)({accounts:(0,p.YO)((0,p.Yj)()),data:(0,p.Yj)(),programId:(0,p.Yj)()})]),vr=(0,p.au)(wr,br,(e=>"accounts"in e?(0,p.vt)(e,yr):(0,p.vt)(e,mr))),_r=(0,p.NW)({signatures:(0,p.YO)((0,p.Yj)()),message:(0,p.NW)({accountKeys:(0,p.YO)(fr),instructions:(0,p.YO)(vr),recentBlockhash:(0,p.Yj)(),addressTableLookups:(0,p.lq)((0,p.me)((0,p.YO)(dr)))})}),Er=(0,p.NW)({accountIndex:(0,p.ai)(),mint:(0,p.Yj)(),owner:(0,p.lq)((0,p.Yj)()),programId:(0,p.lq)((0,p.Yj)()),uiTokenAmount:Ut}),Ar=(0,p.NW)({writable:(0,p.YO)(Je),readonly:(0,p.YO)(Je)}),Ir=(0,p.NW)({err:yt,fee:(0,p.ai)(),innerInstructions:(0,p.lq)((0,p.me)((0,p.YO)((0,p.NW)({index:(0,p.ai)(),instructions:(0,p.YO)((0,p.NW)({accounts:(0,p.YO)((0,p.ai)()),data:(0,p.Yj)(),programIdIndex:(0,p.ai)()}))})))),preBalances:(0,p.YO)((0,p.ai)()),postBalances:(0,p.YO)((0,p.ai)()),logMessages:(0,p.lq)((0,p.me)((0,p.YO)((0,p.Yj)()))),preTokenBalances:(0,p.lq)((0,p.me)((0,p.YO)(Er))),postTokenBalances:(0,p.lq)((0,p.me)((0,p.YO)(Er))),loadedAddresses:(0,p.lq)(Ar),computeUnitsConsumed:(0,p.lq)((0,p.ai)())}),Sr=(0,p.NW)({err:yt,fee:(0,p.ai)(),innerInstructions:(0,p.lq)((0,p.me)((0,p.YO)((0,p.NW)({index:(0,p.ai)(),instructions:(0,p.YO)(vr)})))),preBalances:(0,p.YO)((0,p.ai)()),postBalances:(0,p.YO)((0,p.ai)()),logMessages:(0,p.lq)((0,p.me)((0,p.YO)((0,p.Yj)()))),preTokenBalances:(0,p.lq)((0,p.me)((0,p.YO)(Er))),postTokenBalances:(0,p.lq)((0,p.me)((0,p.YO)(Er))),loadedAddresses:(0,p.lq)(Ar),computeUnitsConsumed:(0,p.lq)((0,p.ai)())}),Cr=(0,p.KC)([(0,p.eu)(0),(0,p.eu)("legacy")]),kr=(0,p.NW)({pubkey:(0,p.Yj)(),lamports:(0,p.ai)(),postBalance:(0,p.me)((0,p.ai)()),rewardType:(0,p.me)((0,p.Yj)()),commission:(0,p.lq)((0,p.me)((0,p.ai)()))}),Nr=ot((0,p.me)((0,p.NW)({blockhash:(0,p.Yj)(),previousBlockhash:(0,p.Yj)(),parentSlot:(0,p.ai)(),transactions:(0,p.YO)((0,p.NW)({transaction:pr,meta:(0,p.me)(Ir),version:(0,p.lq)(Cr)})),rewards:(0,p.lq)((0,p.YO)(kr)),blockTime:(0,p.me)((0,p.ai)()),blockHeight:(0,p.me)((0,p.ai)())}))),Or=ot((0,p.me)((0,p.NW)({blockhash:(0,p.Yj)(),previousBlockhash:(0,p.Yj)(),parentSlot:(0,p.ai)(),rewards:(0,p.lq)((0,p.YO)(kr)),blockTime:(0,p.me)((0,p.ai)()),blockHeight:(0,p.me)((0,p.ai)())}))),Tr=ot((0,p.me)((0,p.NW)({blockhash:(0,p.Yj)(),previousBlockhash:(0,p.Yj)(),parentSlot:(0,p.ai)(),transactions:(0,p.YO)((0,p.NW)({transaction:gr,meta:(0,p.me)(Ir),version:(0,p.lq)(Cr)})),rewards:(0,p.lq)((0,p.YO)(kr)),blockTime:(0,p.me)((0,p.ai)()),blockHeight:(0,p.me)((0,p.ai)())}))),Rr=ot((0,p.me)((0,p.NW)({blockhash:(0,p.Yj)(),previousBlockhash:(0,p.Yj)(),parentSlot:(0,p.ai)(),transactions:(0,p.YO)((0,p.NW)({transaction:_r,meta:(0,p.me)(Sr),version:(0,p.lq)(Cr)})),rewards:(0,p.lq)((0,p.YO)(kr)),blockTime:(0,p.me)((0,p.ai)()),blockHeight:(0,p.me)((0,p.ai)())}))),xr=ot((0,p.me)((0,p.NW)({blockhash:(0,p.Yj)(),previousBlockhash:(0,p.Yj)(),parentSlot:(0,p.ai)(),transactions:(0,p.YO)((0,p.NW)({transaction:gr,meta:(0,p.me)(Sr),version:(0,p.lq)(Cr)})),rewards:(0,p.lq)((0,p.YO)(kr)),blockTime:(0,p.me)((0,p.ai)()),blockHeight:(0,p.me)((0,p.ai)())}))),Pr=ot((0,p.me)((0,p.NW)({blockhash:(0,p.Yj)(),previousBlockhash:(0,p.Yj)(),parentSlot:(0,p.ai)(),rewards:(0,p.lq)((0,p.YO)(kr)),blockTime:(0,p.me)((0,p.ai)()),blockHeight:(0,p.me)((0,p.ai)())}))),Mr=ot((0,p.me)((0,p.NW)({blockhash:(0,p.Yj)(),previousBlockhash:(0,p.Yj)(),parentSlot:(0,p.ai)(),transactions:(0,p.YO)((0,p.NW)({transaction:pr,meta:(0,p.me)(Ir)})),rewards:(0,p.lq)((0,p.YO)(kr)),blockTime:(0,p.me)((0,p.ai)())}))),Br=ot((0,p.me)((0,p.NW)({blockhash:(0,p.Yj)(),previousBlockhash:(0,p.Yj)(),parentSlot:(0,p.ai)(),signatures:(0,p.YO)((0,p.Yj)()),blockTime:(0,p.me)((0,p.ai)())}))),Ur=ot((0,p.me)((0,p.NW)({slot:(0,p.ai)(),meta:(0,p.me)(Ir),blockTime:(0,p.lq)((0,p.me)((0,p.ai)())),transaction:pr,version:(0,p.lq)(Cr)}))),Lr=ot((0,p.me)((0,p.NW)({slot:(0,p.ai)(),transaction:_r,meta:(0,p.me)(Sr),blockTime:(0,p.lq)((0,p.me)((0,p.ai)())),version:(0,p.lq)(Cr)}))),Dr=at((0,p.NW)({blockhash:(0,p.Yj)(),lastValidBlockHeight:(0,p.ai)()})),Wr=at((0,p.zM)()),jr=(0,p.NW)({slot:(0,p.ai)(),numTransactions:(0,p.ai)(),numSlots:(0,p.ai)(),samplePeriodSecs:(0,p.ai)()}),zr=ot((0,p.YO)(jr)),Hr=at((0,p.me)((0,p.NW)({feeCalculator:(0,p.NW)({lamportsPerSignature:(0,p.ai)()})}))),qr=ot((0,p.Yj)()),$r=ot((0,p.Yj)()),Fr=(0,p.NW)({err:yt,logs:(0,p.YO)((0,p.Yj)()),signature:(0,p.Yj)()}),Kr=(0,p.NW)({result:ct(Fr),subscription:(0,p.ai)()}),Vr={"solana-client":"js/1.0.0-maintenance"};class Yr{constructor(e,t){let r,n,i,s,o,a;this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const e={};return async t=>{const{commitment:r,config:n}=rt(t),i=this._buildArgs([],r,void 0,n),s=De(i);return e[s]=e[s]??(async()=>{try{const e=await this._rpcRequest("getBlockHeight",i),t=(0,p.vt)(e,ot((0,p.ai)()));if("error"in t)throw new we(t.error,"failed to get block height information");return t.result}finally{delete e[s]}})(),await e[s]}})(),t&&"string"===typeof t?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,r=t.wsEndpoint,n=t.httpHeaders,i=t.fetch,s=t.fetchMiddleware,o=t.disableRetryOnRateLimit,a=t.httpAgent),this._rpcEndpoint=tt(e),this._rpcWsEndpoint=r||Ze(e),this._rpcClient=St(e,n,i,s,o,a),this._rpcRequest=Ct(this._rpcClient),this._rpcBatchRequest=kt(this._rpcClient),this._rpcWebSocket=new $e(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){const{commitment:r,config:n}=rt(t),i=this._buildArgs([e.toBase58()],r,void 0,n),s=await this._rpcRequest("getBalance",i),o=(0,p.vt)(s,at((0,p.ai)()));if("error"in o)throw new we(o.error,`failed to get balance for ${e.toBase58()}`);return o.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then((e=>e.value)).catch((t=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+t)}))}async getBlockTime(e){const t=await this._rpcRequest("getBlockTime",[e]),r=(0,p.vt)(t,ot((0,p.me)((0,p.ai)())));if("error"in r)throw new we(r.error,`failed to get block time for slot ${e}`);return r.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),t=(0,p.vt)(e,ot((0,p.ai)()));if("error"in t)throw new we(t.error,"failed to get minimum ledger slot");return t.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),t=(0,p.vt)(e,Mt);if("error"in t)throw new we(t.error,"failed to get first available block");return t.result}async getSupply(e){let t={};t="string"===typeof e?{commitment:e}:e?{...e,commitment:e&&e.commitment||this.commitment}:{commitment:this.commitment};const r=await this._rpcRequest("getSupply",[t]),n=(0,p.vt)(r,Bt);if("error"in n)throw new we(n.error,"failed to get supply");return n.result}async getTokenSupply(e,t){const r=this._buildArgs([e.toBase58()],t),n=await this._rpcRequest("getTokenSupply",r),i=(0,p.vt)(n,at(Ut));if("error"in i)throw new we(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(e,t){const r=this._buildArgs([e.toBase58()],t),n=await this._rpcRequest("getTokenAccountBalance",r),i=(0,p.vt)(n,at(Ut));if("error"in i)throw new we(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(e,t,r){const{commitment:n,config:i}=rt(r);let s=[e.toBase58()];"mint"in t?s.push({mint:t.mint.toBase58()}):s.push({programId:t.programId.toBase58()});const o=this._buildArgs(s,n,"base64",i),a=await this._rpcRequest("getTokenAccountsByOwner",o),c=(0,p.vt)(a,Dt);if("error"in c)throw new we(c.error,`failed to get token accounts owned by account ${e.toBase58()}`);return c.result}async getParsedTokenAccountsByOwner(e,t,r){let n=[e.toBase58()];"mint"in t?n.push({mint:t.mint.toBase58()}):n.push({programId:t.programId.toBase58()});const i=this._buildArgs(n,r,"jsonParsed"),s=await this._rpcRequest("getTokenAccountsByOwner",i),o=(0,p.vt)(s,jt);if("error"in o)throw new we(o.error,`failed to get token accounts owned by account ${e.toBase58()}`);return o.result}async getLargestAccounts(e){const t={...e,commitment:e&&e.commitment||this.commitment},r=t.filter||t.commitment?[t]:[],n=await this._rpcRequest("getLargestAccounts",r),i=(0,p.vt)(n,zt);if("error"in i)throw new we(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(e,t){const r=this._buildArgs([e.toBase58()],t),n=await this._rpcRequest("getTokenLargestAccounts",r),i=(0,p.vt)(n,Lt);if("error"in i)throw new we(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(e,t){const{commitment:r,config:n}=rt(t),i=this._buildArgs([e.toBase58()],r,"base64",n),s=await this._rpcRequest("getAccountInfo",i),o=(0,p.vt)(s,at((0,p.me)(Ht)));if("error"in o)throw new we(o.error,`failed to get info about account ${e.toBase58()}`);return o.result}async getParsedAccountInfo(e,t){const{commitment:r,config:n}=rt(t),i=this._buildArgs([e.toBase58()],r,"jsonParsed",n),s=await this._rpcRequest("getAccountInfo",i),o=(0,p.vt)(s,at((0,p.me)(Ft)));if("error"in o)throw new we(o.error,`failed to get info about account ${e.toBase58()}`);return o.result}async getAccountInfo(e,t){try{const r=await this.getAccountInfoAndContext(e,t);return r.value}catch(r){throw new Error("failed to get info about account "+e.toBase58()+": "+r)}}async getMultipleParsedAccounts(e,t){const{commitment:r,config:n}=rt(t),i=e.map((e=>e.toBase58())),s=this._buildArgs([i],r,"jsonParsed",n),o=await this._rpcRequest("getMultipleAccounts",s),a=(0,p.vt)(o,at((0,p.YO)((0,p.me)(Ft))));if("error"in a)throw new we(a.error,`failed to get info for accounts ${i}`);return a.result}async getMultipleAccountsInfoAndContext(e,t){const{commitment:r,config:n}=rt(t),i=e.map((e=>e.toBase58())),s=this._buildArgs([i],r,"base64",n),o=await this._rpcRequest("getMultipleAccounts",s),a=(0,p.vt)(o,at((0,p.YO)((0,p.me)(Ht))));if("error"in a)throw new we(a.error,`failed to get info for accounts ${i}`);return a.result}async getMultipleAccountsInfo(e,t){const r=await this.getMultipleAccountsInfoAndContext(e,t);return r.value}async getStakeActivation(e,t,r){const{commitment:n,config:i}=rt(t),s=this._buildArgs([e.toBase58()],n,void 0,{...i,epoch:null!=r?r:i?.epoch}),o=await this._rpcRequest("getStakeActivation",s),a=(0,p.vt)(o,ot(Vt));if("error"in a)throw new we(a.error,`failed to get Stake Activation ${e.toBase58()}`);return a.result}async getProgramAccounts(e,t){const{commitment:r,config:n}=rt(t),{encoding:i,...s}=n||{},o=this._buildArgs([e.toBase58()],r,i||"base64",{...s,...s.filters?{filters:nt(s.filters)}:null}),a=await this._rpcRequest("getProgramAccounts",o),c=(0,p.YO)(qt),u=!0===s.withContext?(0,p.vt)(a,at(c)):(0,p.vt)(a,ot(c));if("error"in u)throw new we(u.error,`failed to get accounts owned by program ${e.toBase58()}`);return u.result}async getParsedProgramAccounts(e,t){const{commitment:r,config:n}=rt(t),i=this._buildArgs([e.toBase58()],r,"jsonParsed",n),s=await this._rpcRequest("getProgramAccounts",i),o=(0,p.vt)(s,ot((0,p.YO)(Kt)));if("error"in o)throw new we(o.error,`failed to get accounts owned by program ${e.toBase58()}`);return o.result}async confirmTransaction(e,t){let r,n;if("string"==typeof e)r=e;else{const t=e;if(t.abortSignal?.aborted)return Promise.reject(t.abortSignal.reason);r=t.signature}try{n=c().decode(r)}catch(i){throw new Error("signature must be base58 encoded: "+r)}return Z(64===n.length,"signature has invalid length"),"string"===typeof e?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:r}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise(((t,r)=>{null!=e&&(e.aborted?r(e.reason):e.addEventListener("abort",(()=>{r(e.reason)})))}))}getTransactionConfirmationPromise({commitment:e,signature:t}){let r,n,i=!1;const s=new Promise(((s,o)=>{try{r=this.onSignature(t,((e,t)=>{r=void 0;const n={context:t,value:e};s({__type:ie.PROCESSED,response:n})}),e);const a=new Promise((e=>{null==r?e():n=this._onSubscriptionStateChange(r,(t=>{"subscribed"===t&&e()}))}));(async()=>{if(await a,i)return;const r=await this.getSignatureStatus(t);if(i)return;if(null==r)return;const{context:n,value:c}=r;if(null!=c)if(c?.err)o(c.err);else{switch(e){case"confirmed":case"single":case"singleGossip":if("processed"===c.confirmationStatus)return;break;case"finalized":case"max":case"root":if("processed"===c.confirmationStatus||"confirmed"===c.confirmationStatus)return;break;case"processed":case"recent":}i=!0,s({__type:ie.PROCESSED,response:{context:n,value:c}})}})()}catch(a){o(a)}})),o=()=>{n&&(n(),n=void 0),null!=r&&(this.removeSignatureListener(r),r=void 0)};return{abortConfirmation:o,confirmationPromise:s}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:t,lastValidBlockHeight:r,signature:n}}){let i=!1;const s=new Promise((t=>{const n=async()=>{try{const t=await this.getBlockHeight(e);return t}catch(t){return-1}};(async()=>{let e=await n();if(!i){while(e<=r){if(await ve(1e3),i)return;if(e=await n(),i)return}t({__type:ie.BLOCKHEIGHT_EXCEEDED})}})()})),{abortConfirmation:o,confirmationPromise:a}=this.getTransactionConfirmationPromise({commitment:e,signature:n}),c=this.getCancellationPromise(t);let u;try{const e=await Promise.race([c,a,s]);if(e.__type!==ie.PROCESSED)throw new U(n);u=e.response}finally{i=!0,o()}return u}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:t,minContextSlot:r,nonceAccountPubkey:n,nonceValue:i,signature:s}}){let o=!1;const a=new Promise((t=>{let s=i,a=null;const c=async()=>{try{const{context:t,value:i}=await this.getNonceAndContext(n,{commitment:e,minContextSlot:r});return a=t.slot,i?.nonce}catch(t){return s}};(async()=>{if(s=await c(),!o)while(1){if(i!==s)return void t({__type:ie.NONCE_INVALID,slotInWhichNonceDidAdvance:a});if(await ve(2e3),o)return;if(s=await c(),o)return}})()})),{abortConfirmation:c,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:e,signature:s}),l=this.getCancellationPromise(t);let h;try{const t=await Promise.race([l,u,a]);if(t.__type===ie.PROCESSED)h=t.response;else{let n;while(1){const e=await this.getSignatureStatus(s);if(null==e)break;if(!(e.context.slot<(t.slotInWhichNonceDidAdvance??r))){n=e;break}await ve(400)}if(!n?.value)throw new D(s);{const t=e||"finalized",{confirmationStatus:r}=n.value;switch(t){case"processed":case"recent":if("processed"!==r&&"confirmed"!==r&&"finalized"!==r)throw new D(s);break;case"confirmed":case"single":case"singleGossip":if("confirmed"!==r&&"finalized"!==r)throw new D(s);break;case"finalized":case"max":case"root":if("finalized"!==r)throw new D(s);break;default:}h={context:n.context,value:{err:n.value.err}}}}}finally{o=!0,c()}return h}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:t}){let r;const n=new Promise((t=>{let n=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":n=this._confirmTransactionInitialTimeout||3e4;break}r=setTimeout((()=>t({__type:ie.TIMED_OUT,timeoutMs:n})),n)})),{abortConfirmation:i,confirmationPromise:s}=this.getTransactionConfirmationPromise({commitment:e,signature:t});let o;try{const e=await Promise.race([s,n]);if(e.__type!==ie.PROCESSED)throw new L(t,e.timeoutMs/1e3);o=e.response}finally{clearTimeout(r),i()}return o}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),t=(0,p.vt)(e,ot((0,p.YO)(sr)));if("error"in t)throw new we(t.error,"failed to get cluster nodes");return t.result}async getVoteAccounts(e){const t=this._buildArgs([],e),r=await this._rpcRequest("getVoteAccounts",t),n=(0,p.vt)(r,ar);if("error"in n)throw new we(n.error,"failed to get vote accounts");return n.result}async getSlot(e){const{commitment:t,config:r}=rt(e),n=this._buildArgs([],t,void 0,r),i=await this._rpcRequest("getSlot",n),s=(0,p.vt)(i,ot((0,p.ai)()));if("error"in s)throw new we(s.error,"failed to get slot");return s.result}async getSlotLeader(e){const{commitment:t,config:r}=rt(e),n=this._buildArgs([],t,void 0,r),i=await this._rpcRequest("getSlotLeader",n),s=(0,p.vt)(i,ot((0,p.Yj)()));if("error"in s)throw new we(s.error,"failed to get slot leader");return s.result}async getSlotLeaders(e,t){const r=[e,t],n=await this._rpcRequest("getSlotLeaders",r),i=(0,p.vt)(n,ot((0,p.YO)(Je)));if("error"in i)throw new we(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(e,t){const{context:r,value:n}=await this.getSignatureStatuses([e],t);Z(1===n.length);const i=n[0];return{context:r,value:i}}async getSignatureStatuses(e,t){const r=[e];t&&r.push(t);const n=await this._rpcRequest("getSignatureStatuses",r),i=(0,p.vt)(n,lr);if("error"in i)throw new we(i.error,"failed to get signature status");return i.result}async getTransactionCount(e){const{commitment:t,config:r}=rt(e),n=this._buildArgs([],t,void 0,r),i=await this._rpcRequest("getTransactionCount",n),s=(0,p.vt)(i,ot((0,p.ai)()));if("error"in s)throw new we(s.error,"failed to get transaction count");return s.result}async getTotalSupply(e){const t=await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0});return t.value.total}async getInflationGovernor(e){const t=this._buildArgs([],e),r=await this._rpcRequest("getInflationGovernor",t),n=(0,p.vt)(r,Nt);if("error"in n)throw new we(n.error,"failed to get inflation");return n.result}async getInflationReward(e,t,r){const{commitment:n,config:i}=rt(r),s=this._buildArgs([e.map((e=>e.toBase58()))],n,void 0,{...i,epoch:null!=t?t:i?.epoch}),o=await this._rpcRequest("getInflationReward",s),a=(0,p.vt)(o,ht);if("error"in a)throw new we(a.error,"failed to get inflation reward");return a.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),t=(0,p.vt)(e,Ot);if("error"in t)throw new we(t.error,"failed to get inflation rate");return t.result}async getEpochInfo(e){const{commitment:t,config:r}=rt(e),n=this._buildArgs([],t,void 0,r),i=await this._rpcRequest("getEpochInfo",n),s=(0,p.vt)(i,Rt);if("error"in s)throw new we(s.error,"failed to get epoch info");return s.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),t=(0,p.vt)(e,xt);if("error"in t)throw new we(t.error,"failed to get epoch schedule");const r=t.result;return new He(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),t=(0,p.vt)(e,Pt);if("error"in t)throw new we(t.error,"failed to get leader schedule");return t.result}async getMinimumBalanceForRentExemption(e,t){const r=this._buildArgs([e],t),n=await this._rpcRequest("getMinimumBalanceForRentExemption",r),i=(0,p.vt)(n,hr);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(e){const{context:t,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(e),n={get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}};return{context:t,value:{blockhash:r,feeCalculator:n}}}async getRecentPerformanceSamples(e){const t=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),r=(0,p.vt)(t,zr);if("error"in r)throw new we(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(e,t){const r=this._buildArgs([e],t),n=await this._rpcRequest("getFeeCalculatorForBlockhash",r),i=(0,p.vt)(n,Hr);if("error"in i)throw new we(i.error,"failed to get fee calculator");const{context:s,value:o}=i.result;return{context:s,value:null!==o?o.feeCalculator:null}}async getFeeForMessage(e,t){const r=I(e.serialize()).toString("base64"),n=this._buildArgs([r],t),i=await this._rpcRequest("getFeeForMessage",n),s=(0,p.vt)(i,at((0,p.me)((0,p.ai)())));if("error"in s)throw new we(s.error,"failed to get fee for message");if(null===s.result)throw new Error("invalid blockhash");return s.result}async getRecentPrioritizationFees(e){const t=e?.lockedWritableAccounts?.map((e=>e.toBase58())),r=t?.length?[t]:[],n=await this._rpcRequest("getRecentPrioritizationFees",r),i=(0,p.vt)(n,Tt);if("error"in i)throw new we(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(e){try{const t=await this.getRecentBlockhashAndContext(e);return t.value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhash(e){try{const t=await this.getLatestBlockhashAndContext(e);return t.value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhashAndContext(e){const{commitment:t,config:r}=rt(e),n=this._buildArgs([],t,void 0,r),i=await this._rpcRequest("getLatestBlockhash",n),s=(0,p.vt)(i,Dr);if("error"in s)throw new we(s.error,"failed to get latest blockhash");return s.result}async isBlockhashValid(e,t){const{commitment:r,config:n}=rt(t),i=this._buildArgs([e],r,void 0,n),s=await this._rpcRequest("isBlockhashValid",i),o=(0,p.vt)(s,Wr);if("error"in o)throw new we(o.error,"failed to determine if the blockhash `"+e+"`is valid");return o.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),t=(0,p.vt)(e,ot(vt));if("error"in t)throw new we(t.error,"failed to get version");return t.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),t=(0,p.vt)(e,ot((0,p.Yj)()));if("error"in t)throw new we(t.error,"failed to get genesis hash");return t.result}async getBlock(e,t){const{commitment:r,config:n}=rt(t),i=this._buildArgsAtLeastConfirmed([e],r,void 0,n),s=await this._rpcRequest("getBlock",i);try{switch(n?.transactionDetails){case"accounts":{const e=(0,p.vt)(s,Tr);if("error"in e)throw e.error;return e.result}case"none":{const e=(0,p.vt)(s,Or);if("error"in e)throw e.error;return e.result}default:{const e=(0,p.vt)(s,Nr);if("error"in e)throw e.error;const{result:t}=e;return t?{...t,transactions:t.transactions.map((({transaction:e,meta:t,version:r})=>({meta:t,transaction:{...e,message:ut(r,e.message)},version:r})))}:null}}}catch(o){throw new we(o,"failed to get confirmed block")}}async getParsedBlock(e,t){const{commitment:r,config:n}=rt(t),i=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",n),s=await this._rpcRequest("getBlock",i);try{switch(n?.transactionDetails){case"accounts":{const e=(0,p.vt)(s,xr);if("error"in e)throw e.error;return e.result}case"none":{const e=(0,p.vt)(s,Pr);if("error"in e)throw e.error;return e.result}default:{const e=(0,p.vt)(s,Rr);if("error"in e)throw e.error;return e.result}}}catch(o){throw new we(o,"failed to get block")}}async getBlockProduction(e){let t,r;if("string"===typeof e)r=e;else if(e){const{commitment:n,...i}=e;r=n,t=i}const n=this._buildArgs([],r,"base64",t),i=await this._rpcRequest("getBlockProduction",n),s=(0,p.vt)(i,It);if("error"in s)throw new we(s.error,"failed to get block production information");return s.result}async getTransaction(e,t){const{commitment:r,config:n}=rt(t),i=this._buildArgsAtLeastConfirmed([e],r,void 0,n),s=await this._rpcRequest("getTransaction",i),o=(0,p.vt)(s,Ur);if("error"in o)throw new we(o.error,"failed to get transaction");const a=o.result;return a?{...a,transaction:{...a.transaction,message:ut(a.version,a.transaction.message)}}:a}async getParsedTransaction(e,t){const{commitment:r,config:n}=rt(t),i=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",n),s=await this._rpcRequest("getTransaction",i),o=(0,p.vt)(s,Lr);if("error"in o)throw new we(o.error,"failed to get transaction");return o.result}async getParsedTransactions(e,t){const{commitment:r,config:n}=rt(t),i=e.map((e=>{const t=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",n);return{methodName:"getTransaction",args:t}})),s=await this._rpcBatchRequest(i),o=s.map((e=>{const t=(0,p.vt)(e,Lr);if("error"in t)throw new we(t.error,"failed to get transactions");return t.result}));return o}async getTransactions(e,t){const{commitment:r,config:n}=rt(t),i=e.map((e=>{const t=this._buildArgsAtLeastConfirmed([e],r,void 0,n);return{methodName:"getTransaction",args:t}})),s=await this._rpcBatchRequest(i),o=s.map((e=>{const t=(0,p.vt)(e,Ur);if("error"in t)throw new we(t.error,"failed to get transactions");const r=t.result;return r?{...r,transaction:{...r.transaction,message:ut(r.version,r.transaction.message)}}:r}));return o}async getConfirmedBlock(e,t){const r=this._buildArgsAtLeastConfirmed([e],t),n=await this._rpcRequest("getBlock",r),i=(0,p.vt)(n,Mr);if("error"in i)throw new we(i.error,"failed to get confirmed block");const s=i.result;if(!s)throw new Error("Confirmed block "+e+" not found");const o={...s,transactions:s.transactions.map((({transaction:e,meta:t})=>{const r=new te(e.message);return{meta:t,transaction:{...e,message:r}}}))};return{...o,transactions:o.transactions.map((({transaction:e,meta:t})=>({meta:t,transaction:ae.populate(e.message,e.signatures)})))}}async getBlocks(e,t,r){const n=this._buildArgsAtLeastConfirmed(void 0!==t?[e,t]:[e],r),i=await this._rpcRequest("getBlocks",n),s=(0,p.vt)(i,ot((0,p.YO)((0,p.ai)())));if("error"in s)throw new we(s.error,"failed to get blocks");return s.result}async getBlockSignatures(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),n=await this._rpcRequest("getBlock",r),i=(0,p.vt)(n,Br);if("error"in i)throw new we(i.error,"failed to get block");const s=i.result;if(!s)throw new Error("Block "+e+" not found");return s}async getConfirmedBlockSignatures(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),n=await this._rpcRequest("getBlock",r),i=(0,p.vt)(n,Br);if("error"in i)throw new we(i.error,"failed to get confirmed block");const s=i.result;if(!s)throw new Error("Confirmed block "+e+" not found");return s}async getConfirmedTransaction(e,t){const r=this._buildArgsAtLeastConfirmed([e],t),n=await this._rpcRequest("getTransaction",r),i=(0,p.vt)(n,Ur);if("error"in i)throw new we(i.error,"failed to get transaction");const s=i.result;if(!s)return s;const o=new te(s.transaction.message),a=s.transaction.signatures;return{...s,transaction:ae.populate(o,a)}}async getParsedConfirmedTransaction(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),n=await this._rpcRequest("getTransaction",r),i=(0,p.vt)(n,Lr);if("error"in i)throw new we(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(e,t){const r=e.map((e=>{const r=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed");return{methodName:"getTransaction",args:r}})),n=await this._rpcBatchRequest(r),i=n.map((e=>{const t=(0,p.vt)(e,Lr);if("error"in t)throw new we(t.error,"failed to get confirmed transactions");return t.result}));return i}async getConfirmedSignaturesForAddress(e,t,r){let n={},i=await this.getFirstAvailableBlock();while(!("until"in n)){if(t--,t<=0||t<i)break;try{const e=await this.getConfirmedBlockSignatures(t,"finalized");e.signatures.length>0&&(n.until=e.signatures[e.signatures.length-1].toString())}catch(a){if(a instanceof Error&&a.message.includes("skipped"))continue;throw a}}let s=await this.getSlot("finalized");while(!("before"in n)){if(r++,r>s)break;try{const e=await this.getConfirmedBlockSignatures(r);e.signatures.length>0&&(n.before=e.signatures[e.signatures.length-1].toString())}catch(a){if(a instanceof Error&&a.message.includes("skipped"))continue;throw a}}const o=await this.getConfirmedSignaturesForAddress2(e,n);return o.map((e=>e.signature))}async getConfirmedSignaturesForAddress2(e,t,r){const n=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",n),s=(0,p.vt)(i,Yt);if("error"in s)throw new we(s.error,"failed to get confirmed signatures for address");return s.result}async getSignaturesForAddress(e,t,r){const n=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),i=await this._rpcRequest("getSignaturesForAddress",n),s=(0,p.vt)(i,Gt);if("error"in s)throw new we(s.error,"failed to get signatures for address");return s.result}async getAddressLookupTable(e,t){const{context:r,value:n}=await this.getAccountInfoAndContext(e,t);let i=null;return null!==n&&(i=new Ve({key:e,state:Ve.deserialize(n.data)})),{context:r,value:i}}async getNonceAndContext(e,t){const{context:r,value:n}=await this.getAccountInfoAndContext(e,t);let i=null;return null!==n&&(i=Se.fromAccountData(n.data)),{context:r,value:i}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then((e=>e.value)).catch((t=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+t)}))}async requestAirdrop(e,t){const r=await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),n=(0,p.vt)(r,qr);if("error"in n)throw new we(n.error,`airdrop to ${e.toBase58()} failed`);return n.result}async _blockhashWithExpiryBlockHeight(e){if(!e){while(this._pollingBlockhash)await ve(100);const e=Date.now()-this._blockhashInfo.lastFetch,t=e>=et;if(null!==this._blockhashInfo.latestBlockhash&&!t)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),t=this._blockhashInfo.latestBlockhash,r=t?t.blockhash:null;for(let n=0;n<50;n++){const e=await this.getLatestBlockhash("finalized");if(r!==e.blockhash)return this._blockhashInfo={latestBlockhash:e,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},e;await ve(de/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:t,config:r}=rt(e),n=this._buildArgs([],t,"base64",r),i=await this._rpcRequest("getStakeMinimumDelegation",n),s=(0,p.vt)(i,at((0,p.ai)()));if("error"in s)throw new we(s.error,"failed to get stake minimum delegation");return s.result}async simulateTransaction(e,t,r){if("message"in e){const i=e,s=i.serialize(),o=n.Buffer.from(s).toString("base64");if(Array.isArray(t)||void 0!==r)throw new Error("Invalid arguments");const a=t||{};a.encoding="base64","commitment"in a||(a.commitment=this.commitment),t&&"object"===typeof t&&"innerInstructions"in t&&(a.innerInstructions=t.innerInstructions);const c=[o,a],u=await this._rpcRequest("simulateTransaction",c),l=(0,p.vt)(u,At);if("error"in l)throw new Error("failed to simulate transaction: "+l.error.message);return l.result}let i;if(e instanceof ae){let t=e;i=new ae,i.feePayer=t.feePayer,i.instructions=e.instructions,i.nonceInfo=t.nonceInfo,i.signatures=t.signatures}else i=ae.populate(e),i._message=i._json=void 0;if(void 0!==t&&!Array.isArray(t))throw new Error("Invalid arguments");const s=t;if(i.nonceInfo&&s)i.sign(...s);else{let e=this._disableBlockhashCaching;for(;;){const t=await this._blockhashWithExpiryBlockHeight(e);if(i.lastValidBlockHeight=t.lastValidBlockHeight,i.recentBlockhash=t.blockhash,!s)break;if(i.sign(...s),!i.signature)throw new Error("!signature");const r=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(r)&&!this._blockhashInfo.transactionSignatures.includes(r)){this._blockhashInfo.simulatedSignatures.push(r);break}e=!0}}const o=i._compile(),a=o.serialize(),c=i._serialize(a),u=c.toString("base64"),l={encoding:"base64",commitment:this.commitment};if(r){const e=(Array.isArray(r)?r:o.nonProgramIds()).map((e=>e.toBase58()));l["accounts"]={encoding:"base64",addresses:e}}s&&(l.sigVerify=!0),t&&"object"===typeof t&&"innerInstructions"in t&&(l.innerInstructions=t.innerInstructions);const h=[u,l],d=await this._rpcRequest("simulateTransaction",h),f=(0,p.vt)(d,At);if("error"in f){let e;if("data"in f.error&&(e=f.error.data.logs,e&&Array.isArray(e))){const t="\n    ",r=t+e.join(t);console.error(f.error.message,r)}throw new ye({action:"simulate",signature:"",transactionMessage:f.error.message,logs:e})}return f.result}async sendTransaction(e,t,r){if("version"in e){if(t&&Array.isArray(t))throw new Error("Invalid arguments");const r=e.serialize();return await this.sendRawTransaction(r,t)}if(void 0===t||!Array.isArray(t))throw new Error("Invalid arguments");const n=t;if(e.nonceInfo)e.sign(...n);else{let t=this._disableBlockhashCaching;for(;;){const r=await this._blockhashWithExpiryBlockHeight(t);if(e.lastValidBlockHeight=r.lastValidBlockHeight,e.recentBlockhash=r.blockhash,e.sign(...n),!e.signature)throw new Error("!signature");const i=e.signature.toString("base64");if(!this._blockhashInfo.transactionSignatures.includes(i)){this._blockhashInfo.transactionSignatures.push(i);break}t=!0}}const i=e.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(e,t){const r=I(e).toString("base64"),n=await this.sendEncodedTransaction(r,t);return n}async sendEncodedTransaction(e,t){const r={encoding:"base64"},n=t&&t.skipPreflight,i=!0===n?"processed":t&&t.preflightCommitment||this.commitment;t&&null!=t.maxRetries&&(r.maxRetries=t.maxRetries),t&&null!=t.minContextSlot&&(r.minContextSlot=t.minContextSlot),n&&(r.skipPreflight=n),i&&(r.preflightCommitment=i);const s=[e,r],o=await this._rpcRequest("sendTransaction",s),a=(0,p.vt)(o,$r);if("error"in a){let e;throw"data"in a.error&&(e=a.error.data.logs),new ye({action:n?"send":"simulate",signature:"",transactionMessage:a.error.message,logs:e})}return a.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval((()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()}),5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),1e3!==e?(this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach((([e,t])=>{this._setSubscription(e,{...t,state:"pending"})}))):this._updateSubscriptions()}_setSubscription(e,t){const r=this._subscriptionsByHash[e]?.state;if(this._subscriptionsByHash[e]=t,r!==t.state){const r=this._subscriptionStateChangeCallbacksByHash[e];r&&r.forEach((e=>{try{e(t.state)}catch{}}))}}_onSubscriptionStateChange(e,t){const r=this._subscriptionHashByClientSubscriptionId[e];if(null==r)return()=>{};const n=this._subscriptionStateChangeCallbacksByHash[r]||=new Set;return n.add(t),()=>{n.delete(t),0===n.size&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(0===Object.keys(this._subscriptionsByHash).length)return void(this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout((()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(e){e instanceof Error&&console.log(`Error when closing socket connection: ${e.message}`)}}),500)));if(null!==this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected)return void this._rpcWebSocket.connect();const e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map((async e=>{const r=this._subscriptionsByHash[e];if(void 0!==r)switch(r.state){case"pending":case"unsubscribed":if(0===r.callbacks.size)return delete this._subscriptionsByHash[e],"unsubscribed"===r.state&&delete this._subscriptionCallbacksByServerSubscriptionId[r.serverSubscriptionId],void await this._updateSubscriptions();await(async()=>{const{args:n,method:i}=r;try{this._setSubscription(e,{...r,state:"subscribing"});const t=await this._rpcWebSocket.call(i,n);this._setSubscription(e,{...r,serverSubscriptionId:t,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[t]=r.callbacks,await this._updateSubscriptions()}catch(s){if(console.error(`Received ${s instanceof Error?"":"JSON-RPC "}error calling \`${i}\``,{args:n,error:s}),!t())return;this._setSubscription(e,{...r,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":0===r.callbacks.size&&await(async()=>{const{serverSubscriptionId:n,unsubscribeMethod:i}=r;if(this._subscriptionsAutoDisposedByRpc.has(n))this._subscriptionsAutoDisposedByRpc.delete(n);else{this._setSubscription(e,{...r,state:"unsubscribing"}),this._setSubscription(e,{...r,state:"unsubscribing"});try{await this._rpcWebSocket.call(i,[n])}catch(s){if(s instanceof Error&&console.error(`${i} error:`,s.message),!t())return;return this._setSubscription(e,{...r,state:"subscribed"}),void await this._updateSubscriptions()}}this._setSubscription(e,{...r,state:"unsubscribed"}),await this._updateSubscriptions()})();break}})))}_handleServerNotification(e,t){const r=this._subscriptionCallbacksByServerSubscriptionId[e];void 0!==r&&r.forEach((e=>{try{e(...t)}catch(r){console.error(r)}}))}_wsOnAccountNotification(e){const{result:t,subscription:r}=(0,p.vt)(e,Zt);this._handleServerNotification(r,[t.value,t.context])}_makeSubscription(e,t){const r=this._nextClientSubscriptionId++,n=De([e.method,t]),i=this._subscriptionsByHash[n];return void 0===i?this._subscriptionsByHash[n]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:i.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[r]=n,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const t=this._subscriptionsByHash[n];Z(void 0!==t,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),t.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(e,t,r){const{commitment:n,config:i}=rt(r),s=this._buildArgs([e.toBase58()],n||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},s)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:t,subscription:r}=(0,p.vt)(e,Xt);this._handleServerNotification(r,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,r,n){const{commitment:i,config:s}=rt(r),o=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",s||(n?{filters:nt(n)}:void 0));return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},o)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,r){const n=this._buildArgs(["object"===typeof e?{mentions:[e.toString()]}:e],r||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},n)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:t,subscription:r}=(0,p.vt)(e,Kr);this._handleServerNotification(r,[t.value,t.context])}_wsOnSlotNotification(e){const{result:t,subscription:r}=(0,p.vt)(e,er);this._handleServerNotification(r,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:t,subscription:r}=(0,p.vt)(e,rr);this._handleServerNotification(r,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,r,n){const i=t||this._commitment;if(i||r||n){let t={};r&&(t.encoding=r),i&&(t.commitment=i),n&&(t=Object.assign(t,n)),e.push(t)}return e}_buildArgsAtLeastConfirmed(e,t,r,n){const i=t||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,r,n)}_wsOnSignatureNotification(e){const{result:t,subscription:r}=(0,p.vt)(e,nr);"receivedSignature"!==t.value&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,"receivedSignature"===t.value?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,r){const n=this._buildArgs([e],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(e,r)=>{if("status"===e.type){t(e.result,r);try{this.removeSignatureListener(i)}catch(n){}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},n);return i}onSignatureWithOptions(e,t,r){const{commitment:n,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},s=this._buildArgs([e],n,void 0,i),o=this._makeSubscription({callback:(e,r)=>{t(e,r);try{this.removeSignatureListener(o)}catch(n){}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return o}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:t,subscription:r}=(0,p.vt)(e,ir);this._handleServerNotification(r,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}class Gr{constructor(e){this._keypair=void 0,this._keypair=e??b()}static generate(){return new Gr(b())}static fromSecretKey(e,t){if(64!==e.byteLength)throw new Error("bad secret key size");const r=e.slice(32,64);if(!t||!t.skipValidation){const t=e.slice(0,32),n=v(t);for(let e=0;e<32;e++)if(r[e]!==n[e])throw new Error("provided secretKey is invalid")}return new Gr({publicKey:r,secretKey:e})}static fromSeed(e){const t=v(e),r=new Uint8Array(64);return r.set(e),r.set(t,32),new Gr({publicKey:t,secretKey:r})}get publicKey(){return new x(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const Zr=Object.freeze({CreateLookupTable:{index:0,layout:h.w3([h.DH("instruction"),Ne("recentSlot"),h.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:h.w3([h.DH("instruction")])},ExtendLookupTable:{index:2,layout:h.w3([h.DH("instruction"),Ne(),h.O6(j(),h.cY(h.DH(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:h.w3([h.DH("instruction")])},CloseLookupTable:{index:4,layout:h.w3([h.DH("instruction")])}});class Jr{constructor(){}static createLookupTable(e){const[t,r]=x.findProgramAddressSync([e.authority.toBuffer(),(0,d.Bq)(BigInt(e.recentSlot),8)],this.programId),n=Zr.CreateLookupTable,i=_e(n,{recentSlot:BigInt(e.recentSlot),bumpSeed:r}),s=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:Te.programId,isSigner:!1,isWritable:!1}];return[new oe({programId:this.programId,keys:s,data:i}),t]}static freezeLookupTable(e){const t=Zr.FreezeLookupTable,r=_e(t),n=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new oe({programId:this.programId,keys:n,data:r})}static extendLookupTable(e){const t=Zr.ExtendLookupTable,r=_e(t,{addresses:e.addresses.map((e=>e.toBytes()))}),n=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return e.payer&&n.push({pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:Te.programId,isSigner:!1,isWritable:!1}),new oe({programId:this.programId,keys:n,data:r})}static deactivateLookupTable(e){const t=Zr.DeactivateLookupTable,r=_e(t),n=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new oe({programId:this.programId,keys:n,data:r})}static closeLookupTable(e){const t=Zr.CloseLookupTable,r=_e(t),n=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.recipient,isSigner:!1,isWritable:!0}];return new oe({programId:this.programId,keys:n,data:r})}}Jr.programId=new x("AddressLookupTab1e1111111111111111111111111");const Xr=Object.freeze({RequestUnits:{index:0,layout:h.w3([h.u8("instruction"),h.DH("units"),h.DH("additionalFee")])},RequestHeapFrame:{index:1,layout:h.w3([h.u8("instruction"),h.DH("bytes")])},SetComputeUnitLimit:{index:2,layout:h.w3([h.u8("instruction"),h.DH("units")])},SetComputeUnitPrice:{index:3,layout:h.w3([h.u8("instruction"),Ne("microLamports")])}});class Qr{constructor(){}static requestUnits(e){const t=Xr.RequestUnits,r=_e(t,e);return new oe({keys:[],programId:this.programId,data:r})}static requestHeapFrame(e){const t=Xr.RequestHeapFrame,r=_e(t,e);return new oe({keys:[],programId:this.programId,data:r})}static setComputeUnitLimit(e){const t=Xr.SetComputeUnitLimit,r=_e(t,e);return new oe({keys:[],programId:this.programId,data:r})}static setComputeUnitPrice(e){const t=Xr.SetComputeUnitPrice,r=_e(t,{microLamports:BigInt(e.microLamports)});return new oe({keys:[],programId:this.programId,data:r})}}Qr.programId=new x("ComputeBudget111111111111111111111111111111");const en=64,tn=32,rn=64,nn=h.w3([h.u8("numSignatures"),h.u8("padding"),h.NX("signatureOffset"),h.NX("signatureInstructionIndex"),h.NX("publicKeyOffset"),h.NX("publicKeyInstructionIndex"),h.NX("messageDataOffset"),h.NX("messageDataSize"),h.NX("messageInstructionIndex")]);class sn{constructor(){}static createInstructionWithPublicKey(e){const{publicKey:t,message:r,signature:i,instructionIndex:s}=e;Z(t.length===tn,`Public Key must be ${tn} bytes but received ${t.length} bytes`),Z(i.length===rn,`Signature must be ${rn} bytes but received ${i.length} bytes`);const o=nn.span,a=o+t.length,c=a+i.length,u=1,l=n.Buffer.alloc(c+r.length),h=null==s?65535:s;return nn.encode({numSignatures:u,padding:0,signatureOffset:a,signatureInstructionIndex:h,publicKeyOffset:o,publicKeyInstructionIndex:h,messageDataOffset:c,messageDataSize:r.length,messageInstructionIndex:h},l),l.fill(t,o),l.fill(i,a),l.fill(r,c),new oe({keys:[],programId:sn.programId,data:l})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:r,instructionIndex:n}=e;Z(t.length===en,`Private key must be ${en} bytes but received ${t.length} bytes`);try{const e=Gr.fromSecretKey(t),i=e.publicKey.toBytes(),s=E(r,e.secretKey);return this.createInstructionWithPublicKey({publicKey:i,message:r,signature:s,instructionIndex:n})}catch(i){throw new Error(`Error creating instruction; ${i}`)}}}sn.programId=new x("Ed25519SigVerify111111111111111111111111111");const on=(e,t)=>{const r=w.bI.sign(e,t);return[r.toCompactRawBytes(),r.recovery]};w.bI.utils.isValidPrivateKey;const an=w.bI.getPublicKey,cn=32,un=20,ln=64,hn=11,dn=h.w3([h.u8("numSignatures"),h.NX("signatureOffset"),h.u8("signatureInstructionIndex"),h.NX("ethAddressOffset"),h.u8("ethAddressInstructionIndex"),h.NX("messageDataOffset"),h.NX("messageDataSize"),h.u8("messageInstructionIndex"),h.av(20,"ethAddress"),h.av(64,"signature"),h.u8("recoveryId")]);class pn{constructor(){}static publicKeyToEthAddress(e){Z(e.length===ln,`Public key must be ${ln} bytes but received ${e.length} bytes`);try{return n.Buffer.from((0,y.lY)(I(e))).slice(-un)}catch(t){throw new Error(`Error constructing Ethereum address: ${t}`)}}static createInstructionWithPublicKey(e){const{publicKey:t,message:r,signature:n,recoveryId:i,instructionIndex:s}=e;return pn.createInstructionWithEthAddress({ethAddress:pn.publicKeyToEthAddress(t),message:r,signature:n,recoveryId:i,instructionIndex:s})}static createInstructionWithEthAddress(e){const{ethAddress:t,message:r,signature:i,recoveryId:s,instructionIndex:o=0}=e;let a;a="string"===typeof t?t.startsWith("0x")?n.Buffer.from(t.substr(2),"hex"):n.Buffer.from(t,"hex"):t,Z(a.length===un,`Address must be ${un} bytes but received ${a.length} bytes`);const c=1+hn,u=c,l=c+a.length,h=l+i.length+1,d=1,p=n.Buffer.alloc(dn.span+r.length);return dn.encode({numSignatures:d,signatureOffset:l,signatureInstructionIndex:o,ethAddressOffset:u,ethAddressInstructionIndex:o,messageDataOffset:h,messageDataSize:r.length,messageInstructionIndex:o,signature:I(i),ethAddress:I(a),recoveryId:s},p),p.fill(I(r),dn.span),new oe({keys:[],programId:pn.programId,data:p})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:r,instructionIndex:i}=e;Z(t.length===cn,`Private key must be ${cn} bytes but received ${t.length} bytes`);try{const e=I(t),s=an(e,!1).slice(1),o=n.Buffer.from((0,y.lY)(I(r))),[a,c]=on(o,e);return this.createInstructionWithPublicKey({publicKey:s,message:r,signature:a,recoveryId:c,instructionIndex:i})}catch(s){throw new Error(`Error creating instruction; ${s}`)}}}var fn;pn.programId=new x("KeccakSecp256k11111111111111111111111111111");const gn=new x("StakeConfig11111111111111111111111111111111");class mn{constructor(e,t,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=r}}fn=mn,mn.default=new fn(0,0,x.default);const yn=Object.freeze({Initialize:{index:0,layout:h.w3([h.DH("instruction"),q(),$()])},Authorize:{index:1,layout:h.w3([h.DH("instruction"),j("newAuthorized"),h.DH("stakeAuthorizationType")])},Delegate:{index:2,layout:h.w3([h.DH("instruction")])},Split:{index:3,layout:h.w3([h.DH("instruction"),h.Wg("lamports")])},Withdraw:{index:4,layout:h.w3([h.DH("instruction"),h.Wg("lamports")])},Deactivate:{index:5,layout:h.w3([h.DH("instruction")])},Merge:{index:7,layout:h.w3([h.DH("instruction")])},AuthorizeWithSeed:{index:8,layout:h.w3([h.DH("instruction"),j("newAuthorized"),h.DH("stakeAuthorizationType"),H("authoritySeed"),j("authorityOwner")])}});Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class wn{constructor(){}static initialize(e){const{stakePubkey:t,authorized:r,lockup:n}=e,i=n||mn.default,s=yn.Initialize,o=_e(s,{authorized:{staker:I(r.staker.toBuffer()),withdrawer:I(r.withdrawer.toBuffer())},lockup:{unixTimestamp:i.unixTimestamp,epoch:i.epoch,custodian:I(i.custodian.toBuffer())}}),a={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:ge,isSigner:!1,isWritable:!1}],programId:this.programId,data:o};return new oe(a)}static createAccountWithSeed(e){const t=new ae;t.add(Te.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:n,lockup:i}=e;return t.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}static createAccount(e){const t=new ae;t.add(Te.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:n,lockup:i}=e;return t.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}static delegate(e){const{stakePubkey:t,authorizedPubkey:r,votePubkey:n}=e,i=yn.Delegate,s=_e(i);return(new ae).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:pe,isSigner:!1,isWritable:!1},{pubkey:me,isSigner:!1,isWritable:!1},{pubkey:gn,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}static authorize(e){const{stakePubkey:t,authorizedPubkey:r,newAuthorizedPubkey:n,stakeAuthorizationType:i,custodianPubkey:s}=e,o=yn.Authorize,a=_e(o,{newAuthorized:I(n.toBuffer()),stakeAuthorizationType:i.index}),c=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:pe,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return s&&c.push({pubkey:s,isSigner:!0,isWritable:!1}),(new ae).add({keys:c,programId:this.programId,data:a})}static authorizeWithSeed(e){const{stakePubkey:t,authorityBase:r,authoritySeed:n,authorityOwner:i,newAuthorizedPubkey:s,stakeAuthorizationType:o,custodianPubkey:a}=e,c=yn.AuthorizeWithSeed,u=_e(c,{newAuthorized:I(s.toBuffer()),stakeAuthorizationType:o.index,authoritySeed:n,authorityOwner:I(i.toBuffer())}),l=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:pe,isSigner:!1,isWritable:!1}];return a&&l.push({pubkey:a,isSigner:!0,isWritable:!1}),(new ae).add({keys:l,programId:this.programId,data:u})}static splitInstruction(e){const{stakePubkey:t,authorizedPubkey:r,splitStakePubkey:n,lamports:i}=e,s=yn.Split,o=_e(s,{lamports:i});return new oe({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static split(e,t){const r=new ae;return r.add(Te.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:t,space:this.space,programId:this.programId})),r.add(this.splitInstruction(e))}static splitWithSeed(e,t){const{stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,basePubkey:s,seed:o,lamports:a}=e,c=new ae;return c.add(Te.allocate({accountPubkey:i,basePubkey:s,seed:o,space:this.space,programId:this.programId})),t&&t>0&&c.add(Te.transfer({fromPubkey:e.authorizedPubkey,toPubkey:i,lamports:t})),c.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,lamports:a}))}static merge(e){const{stakePubkey:t,sourceStakePubKey:r,authorizedPubkey:n}=e,i=yn.Merge,s=_e(i);return(new ae).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:pe,isSigner:!1,isWritable:!1},{pubkey:me,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}static withdraw(e){const{stakePubkey:t,authorizedPubkey:r,toPubkey:n,lamports:i,custodianPubkey:s}=e,o=yn.Withdraw,a=_e(o,{lamports:i}),c=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:pe,isSigner:!1,isWritable:!1},{pubkey:me,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return s&&c.push({pubkey:s,isSigner:!0,isWritable:!1}),(new ae).add({keys:c,programId:this.programId,data:a})}static deactivate(e){const{stakePubkey:t,authorizedPubkey:r}=e,n=yn.Deactivate,i=_e(n);return(new ae).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:pe,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}}wn.programId=new x("Stake11111111111111111111111111111111111111"),wn.space=200;const bn=Object.freeze({InitializeAccount:{index:0,layout:h.w3([h.DH("instruction"),F()])},Authorize:{index:1,layout:h.w3([h.DH("instruction"),j("newAuthorized"),h.DH("voteAuthorizationType")])},Withdraw:{index:3,layout:h.w3([h.DH("instruction"),h.Wg("lamports")])},UpdateValidatorIdentity:{index:4,layout:h.w3([h.DH("instruction")])},AuthorizeWithSeed:{index:10,layout:h.w3([h.DH("instruction"),K()])}});Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class vn{constructor(){}static initializeAccount(e){const{votePubkey:t,nodePubkey:r,voteInit:n}=e,i=bn.InitializeAccount,s=_e(i,{voteInit:{nodePubkey:I(n.nodePubkey.toBuffer()),authorizedVoter:I(n.authorizedVoter.toBuffer()),authorizedWithdrawer:I(n.authorizedWithdrawer.toBuffer()),commission:n.commission}}),o={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:ge,isSigner:!1,isWritable:!1},{pubkey:pe,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:s};return new oe(o)}static createAccount(e){const t=new ae;return t.add(Te.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),t.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}static authorize(e){const{votePubkey:t,authorizedPubkey:r,newAuthorizedPubkey:n,voteAuthorizationType:i}=e,s=bn.Authorize,o=_e(s,{newAuthorized:I(n.toBuffer()),voteAuthorizationType:i.index}),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:pe,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return(new ae).add({keys:a,programId:this.programId,data:o})}static authorizeWithSeed(e){const{currentAuthorityDerivedKeyBasePubkey:t,currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:i,voteAuthorizationType:s,votePubkey:o}=e,a=bn.AuthorizeWithSeed,c=_e(a,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:I(r.toBuffer()),currentAuthorityDerivedKeySeed:n,newAuthorized:I(i.toBuffer()),voteAuthorizationType:s.index}}),u=[{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:pe,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!0,isWritable:!1}];return(new ae).add({keys:u,programId:this.programId,data:c})}static withdraw(e){const{votePubkey:t,authorizedWithdrawerPubkey:r,lamports:n,toPubkey:i}=e,s=bn.Withdraw,o=_e(s,{lamports:n}),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return(new ae).add({keys:a,programId:this.programId,data:o})}static safeWithdraw(e,t,r){if(e.lamports>t-r)throw new Error("Withdraw will leave vote account with insufficient funds.");return vn.withdraw(e)}static updateValidatorIdentity(e){const{votePubkey:t,authorizedWithdrawerPubkey:r,nodePubkey:n}=e,i=bn.UpdateValidatorIdentity,s=_e(i),o=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return(new ae).add({keys:o,programId:this.programId,data:s})}}vn.programId=new x("Vote111111111111111111111111111111111111111"),vn.space=3762;new x("Va1idator1nfo111111111111111111111111111111"),(0,p.NW)({name:(0,p.Yj)(),website:(0,p.lq)((0,p.Yj)()),details:(0,p.lq)((0,p.Yj)()),iconUrl:(0,p.lq)((0,p.Yj)()),keybaseUsername:(0,p.lq)((0,p.Yj)())});new x("Vote111111111111111111111111111111111111111"),h.w3([j("nodePubkey"),j("authorizedWithdrawer"),h.u8("commission"),h.I0(),h.O6(h.w3([h.I0("slot"),h.DH("confirmationCount")]),h.cY(h.DH(),-8),"votes"),h.u8("rootSlotValid"),h.I0("rootSlot"),h.I0(),h.O6(h.w3([h.I0("epoch"),j("authorizedVoter")]),h.cY(h.DH(),-8),"authorizedVoters"),h.w3([h.O6(h.w3([j("authorizedPubkey"),h.I0("epochOfLastAuthorizedSwitch"),h.I0("targetEpoch")]),32,"buf"),h.I0("idx"),h.u8("isEmpty")],"priorVoters"),h.I0(),h.O6(h.w3([h.I0("epoch"),h.I0("credits"),h.I0("prevCredits")]),h.cY(h.DH(),-8),"epochCredits"),h.w3([h.I0("slot"),h.I0("timestamp")],"lastTimestamp")]);const _n=1e9},27169:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_THOUSAND=t.ONE_HUNDRED=void 0,t.ONE_HUNDRED=100,t.ONE_THOUSAND=1e3},27309:function(e,t,r){"use strict";r.d(t,{U:function(){return g}});r(18111),r(22489),r(61701),r(17642),r(58004),r(33853),r(45876),r(32475),r(15024),r(31698),r(12745);var n=r(80955),i=r(1555),s=r(58843),o=r(37903),a=r(78134),c=r(25638),u=r(31843),l=r(96577),h=r(64529),d=r(80347),p=r(14210),f=r(81753);const g={getSIWX(){return h.H.state.siwx},async initializeIfEnabled(){const e=h.H.state.siwx,t=o.W.getActiveCaipAddress();if(!e||!t)return;const[r,n,i]=t.split(":");if(o.W.checkIfSupportedNetwork(r))try{const t=await e.getSessions(`${r}:${n}`,i);if(t.length)return;await l.W.open({view:"SIWXSignMessage"})}catch(s){console.error("SIWXUtil:initializeIfEnabled",s),u.E.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await(a.x._getClient()?.disconnect().catch(console.error)),d.I.reset("Connect"),p.P.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const e=h.H.state.siwx,t=f.w.getPlainAddress(o.W.getActiveCaipAddress()),r=o.W.getActiveCaipNetwork(),i=a.x._getClient();if(!e)throw new Error("SIWX is not enabled");if(!t)throw new Error("No ActiveCaipAddress found");if(!r)throw new Error("No ActiveCaipNetwork or client found");if(!i)throw new Error("No ConnectionController client found");try{const s=await e.createMessage({chainId:r.caipNetworkId,accountAddress:t}),o=s.toString(),a=c.a.getConnectorId(r.chainNamespace);a===n.o.CONNECTOR_ID.AUTH&&d.I.pushTransactionStack({view:null,goBack:!1,replace:!0});const h=await i.signMessage(o);await e.addSession({data:s,message:o,signature:h}),l.W.close(),u.E.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const e=this.getSIWXEventProperties();l.W.state.open&&"ApproveTransaction"!==d.I.state.view||await l.W.open({view:"SIWXSignMessage"}),e.isSmartAccount?p.P.showError("This application might not support Smart Accounts"):p.P.showError("Signature declined"),u.E.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:e}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){try{const e=this.getSIWX(),t=e?.getRequired?.();t?await a.x.disconnect():l.W.close(),d.I.reset("Connect"),u.E.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getSessions(){const e=h.H.state.siwx,t=f.w.getPlainAddress(o.W.getActiveCaipAddress()),r=o.W.getActiveCaipNetwork();return e&&t&&r?e.getSessions(r.caipNetworkId,t):[]},async isSIWXCloseDisabled(){const e=this.getSIWX();if(e){const t="ApproveTransaction"===d.I.state.view,r="SIWXSignMessage"===d.I.state.view;if(t||r)return e.getRequired?.()&&0===(await this.getSessions()).length}return!1},async universalProviderAuthenticate({universalProvider:e,chains:t,methods:r}){const n=g.getSIWX(),i=new Set(t.map((e=>e.split(":")[0])));if(!n||1!==i.size||!i.has("eip155"))return!1;const a=await n.createMessage({chainId:o.W.getActiveCaipNetwork()?.caipNetworkId||"",accountAddress:""}),c=await e.authenticate({nonce:a.nonce,domain:a.domain,uri:a.uri,exp:a.expirationTime,iat:a.issuedAt,nbf:a.notBefore,requestId:a.requestId,version:a.version,resources:a.resources,statement:a.statement,chainId:a.chainId,methods:r,chains:[a.chainId,...t.filter((e=>e!==a.chainId))]});if(p.P.showLoading("Authenticating...",{autoClose:!1}),s.U.setConnectedWalletInfo({...c.session.peer.metadata,name:c.session.peer.metadata.name,icon:c.session.peer.metadata.icons?.[0],type:"WALLET_CONNECT"},Array.from(i)[0]),c?.auths?.length){const t=c.auths.map((t=>{const r=e.client.formatAuthMessage({request:t.p,iss:t.p.iss});return{data:{...t.p,accountAddress:t.p.iss.split(":").slice(-1).join(""),chainId:t.p.iss.split(":").slice(2,4).join(":"),uri:t.p.aud,version:t.p.version||a.version,expirationTime:t.p.exp,issuedAt:t.p.iat,notBefore:t.p.nbf},message:r,signature:t.s.s,cacao:t}}));try{await n.setSessions(t),u.E.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:g.getSIWXEventProperties()})}catch(l){throw console.error("SIWX:universalProviderAuth - failed to set sessions",l),u.E.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:g.getSIWXEventProperties()}),await e.disconnect().catch(console.error),l}finally{p.P.hide()}}return!0},getSIWXEventProperties(){const e=o.W.state.activeChain;return{network:o.W.state.activeCaipNetwork?.caipNetworkId||"",isSmartAccount:s.U.state.preferredAccountTypes?.[e]===i.Vl.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const e=this.getSIWX();e&&await e.setSessions([])}}},27382:function(e,t,r){"use strict";var n;r.d(t,{_:function(){return n}}),function(e){e[e["InitializeMint"]=0]="InitializeMint",e[e["InitializeAccount"]=1]="InitializeAccount",e[e["InitializeMultisig"]=2]="InitializeMultisig",e[e["Transfer"]=3]="Transfer",e[e["Approve"]=4]="Approve",e[e["Revoke"]=5]="Revoke",e[e["SetAuthority"]=6]="SetAuthority",e[e["MintTo"]=7]="MintTo",e[e["Burn"]=8]="Burn",e[e["CloseAccount"]=9]="CloseAccount",e[e["FreezeAccount"]=10]="FreezeAccount",e[e["ThawAccount"]=11]="ThawAccount",e[e["TransferChecked"]=12]="TransferChecked",e[e["ApproveChecked"]=13]="ApproveChecked",e[e["MintToChecked"]=14]="MintToChecked",e[e["BurnChecked"]=15]="BurnChecked",e[e["InitializeAccount2"]=16]="InitializeAccount2",e[e["SyncNative"]=17]="SyncNative",e[e["InitializeAccount3"]=18]="InitializeAccount3",e[e["InitializeMultisig2"]=19]="InitializeMultisig2",e[e["InitializeMint2"]=20]="InitializeMint2",e[e["GetAccountDataSize"]=21]="GetAccountDataSize",e[e["InitializeImmutableOwner"]=22]="InitializeImmutableOwner",e[e["AmountToUiAmount"]=23]="AmountToUiAmount",e[e["UiAmountToAmount"]=24]="UiAmountToAmount",e[e["InitializeMintCloseAuthority"]=25]="InitializeMintCloseAuthority",e[e["TransferFeeExtension"]=26]="TransferFeeExtension",e[e["ConfidentialTransferExtension"]=27]="ConfidentialTransferExtension",e[e["DefaultAccountStateExtension"]=28]="DefaultAccountStateExtension",e[e["Reallocate"]=29]="Reallocate",e[e["MemoTransferExtension"]=30]="MemoTransferExtension",e[e["CreateNativeMint"]=31]="CreateNativeMint",e[e["InitializeNonTransferableMint"]=32]="InitializeNonTransferableMint",e[e["InterestBearingMintExtension"]=33]="InterestBearingMintExtension",e[e["CpiGuardExtension"]=34]="CpiGuardExtension",e[e["InitializePermanentDelegate"]=35]="InitializePermanentDelegate",e[e["TransferHookExtension"]=36]="TransferHookExtension",e[e["MetadataPointerExtension"]=39]="MetadataPointerExtension",e[e["GroupPointerExtension"]=40]="GroupPointerExtension",e[e["GroupMemberPointerExtension"]=41]="GroupMemberPointerExtension",e[e["ScaledUiAmountExtension"]=43]="ScaledUiAmountExtension",e[e["PausableExtension"]=44]="PausableExtension"}(n||(n={}))},27578:function(e,t,r){"use strict";r.d(t,{Ty:function(){return i},u:function(){return s}});var n=r(22626);class i extends n.C{constructor({max:e,min:t,signed:r,size:n,value:i}){super(`Number "${i}" is not in safe ${n?`${8*n}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`,{name:"IntegerOutOfRangeError"})}}n.C;n.C;n.C;class s extends n.C{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}},28042:function(e,t,r){"use strict";r.d(t,{w:function(){return n}});const n="standard:disconnect"},28338:function(e,t){"use strict";function r(e){return new Promise((t=>{setTimeout((()=>{t(!0)}),e)}))}Object.defineProperty(t,"__esModule",{value:!0}),t.delay=void 0,t.delay=r},28356:function(e,t,r){"use strict";r.d(t,{u$:function(){return i},zC:function(){return s}});r(44114),r(18111),r(81148),r(22489),r(20116),r(7588),r(61701),r(13579),r(17642),r(58004),r(33853),r(45876),r(32475),r(15024),r(31698);var n=r(69983);function i(e,t,r,i){let s=e[t];return(0,n.B1)(e,(()=>{const n=e[t];Object.is(s,n)||r(s=n)}),i)}Symbol();function s(e){const t=(0,n.BX)({data:Array.from(e||[]),has(e){return this.data.some((t=>t[0]===e))},set(e,t){const r=this.data.find((t=>t[0]===e));return r?r[1]=t:this.data.push([e,t]),this},get(e){var t;return null==(t=this.data.find((t=>t[0]===e)))?void 0:t[1]},delete(e){const t=this.data.findIndex((t=>t[0]===e));return-1!==t&&(this.data.splice(t,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(e){this.data.forEach((t=>{e(t[1],t[0],this)}))},keys(){return this.data.map((e=>e[0])).values()},values(){return this.data.map((e=>e[1])).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(t,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(t),t}},29087:function(e,t,r){"use strict";r(44114),r(18111),r(22489),r(20116),r(30531),r(7588),r(61701),r(18237),r(13579),r(61806),r(17642),r(58004),r(33853),r(45876),r(32475),r(15024),r(31698),r(64979),r(71678);var n=r(72487),i=r.n(n),s=r(96030),o=(r(90712),r(17505),r(97615),r(59167));r(74887),r(22188),r(33529);o.struct([o.publicKey("authority"),o.vecU8("data")]);class a extends TypeError{constructor(e,t){let r;const{message:n,...i}=e,{path:s}=e,o=0===s.length?n:"At path: "+s.join(".")+" -- "+n;super(o),this.value=void 0,this.key=void 0,this.type=void 0,this.refinement=void 0,this.path=void 0,this.branch=void 0,this.failures=void 0,Object.assign(this,i),this.name=this.constructor.name,this.failures=()=>{var n;return null!=(n=r)?n:r=[e,...t()]}}}function c(e){return u(e)&&"function"===typeof e[Symbol.iterator]}function u(e){return"object"===typeof e&&null!=e}function l(e){return"string"===typeof e?JSON.stringify(e):""+e}function h(e){const{done:t,value:r}=e.next();return t?void 0:r}function d(e,t,r,n){if(!0===e)return;!1===e?e={}:"string"===typeof e&&(e={message:e});const{path:i,branch:s}=t,{type:o}=r,{refinement:a,message:c="Expected a value of type `"+o+"`"+(a?" with refinement `"+a+"`":"")+", but received: `"+l(n)+"`"}=e;return{value:n,type:o,refinement:a,key:i[i.length-1],path:i,branch:s,...e,message:c}}function*p(e,t,r,n){c(e)||(e=[e]);for(const i of e){const e=d(i,t,r,n);e&&(yield e)}}function*f(e,t,r){void 0===r&&(r={});const{path:n=[],branch:i=[e],coerce:s=!1,mask:o=!1}=r,a={path:n,branch:i};if(s&&(e=t.coercer(e,a),o&&"type"!==t.type&&u(t.schema)&&u(e)&&!Array.isArray(e)))for(const u in e)void 0===t.schema[u]&&delete e[u];let c=!0;for(const u of t.validator(e,a))c=!1,yield[u,void 0];for(let[l,h,d]of t.entries(e,a)){const t=f(h,d,{path:void 0===l?n:[...n,l],branch:void 0===l?i:[...i,h],coerce:s,mask:o});for(const r of t)r[0]?(c=!1,yield[r[0],void 0]):s&&(h=r[1],void 0===l?e=h:e instanceof Map?e.set(l,h):e instanceof Set?e.add(h):u(e)&&(e[l]=h))}if(c)for(const u of t.refiner(e,a))c=!1,yield[u,void 0];c&&(yield[void 0,e])}class g{constructor(e){this.TYPE=void 0,this.type=void 0,this.schema=void 0,this.coercer=void 0,this.validator=void 0,this.refiner=void 0,this.entries=void 0;const{type:t,schema:r,validator:n,refiner:i,coercer:s=e=>e,entries:o=function*(){}}=e;this.type=t,this.schema=r,this.entries=o,this.coercer=s,this.validator=n?(e,t)=>{const r=n(e,t);return p(r,t,this,e)}:()=>[],this.refiner=i?(e,t)=>{const r=i(e,t);return p(r,t,this,e)}:()=>[]}assert(e){return m(e,this)}create(e){return y(e,this)}is(e){return b(e,this)}mask(e){return w(e,this)}validate(e,t){return void 0===t&&(t={}),v(e,this,t)}}function m(e,t){const r=v(e,t);if(r[0])throw r[0]}function y(e,t){const r=v(e,t,{coerce:!0});if(r[0])throw r[0];return r[1]}function w(e,t){const r=v(e,t,{coerce:!0,mask:!0});if(r[0])throw r[0];return r[1]}function b(e,t){const r=v(e,t);return!r[0]}function v(e,t,r){void 0===r&&(r={});const n=f(e,t,r),i=h(n);if(i[0]){const e=new a(i[0],(function*(){for(const e of n)e[0]&&(yield e[0])}));return[e,void 0]}{const e=i[1];return[void 0,e]}}function _(e,t){return new g({type:e,schema:null,validator:t})}function E(){return _("any",(()=>!0))}function A(e){return new g({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(const[r,n]of t.entries())yield[r,n,e]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||"Expected an array value, but received: "+l(e)}})}function I(){return _("boolean",(e=>"boolean"===typeof e))}function S(e){const t=l(e),r=typeof e;return new g({type:"literal",schema:"string"===r||"number"===r||"boolean"===r?e:null,validator(r){return r===e||"Expected the literal `"+t+"`, but received: "+l(r)}})}function C(e){return new g({...e,validator:(t,r)=>null===t||e.validator(t,r),refiner:(t,r)=>null===t||e.refiner(t,r)})}function k(){return _("number",(e=>"number"===typeof e&&!isNaN(e)||"Expected a number, but received: "+l(e)))}function N(e){return new g({...e,validator:(t,r)=>void 0===t||e.validator(t,r),refiner:(t,r)=>void 0===t||e.refiner(t,r)})}function O(){return _("string",(e=>"string"===typeof e||"Expected a string, but received: "+l(e)))}function T(e){const t=Object.keys(e);return new g({type:"type",schema:e,*entries(r){if(u(r))for(const n of t)yield[n,r[n],e[n]]},validator(e){return u(e)||"Expected an object, but received: "+l(e)}})}function R(e){const t=e.map((e=>e.type)).join(" | ");return new g({type:"union",schema:null,coercer(t,r){const n=e.find((e=>{const[r]=e.validate(t,{coerce:!0});return!r}))||x();return n.coercer(t,r)},validator(r,n){const i=[];for(const t of e){const[...e]=f(r,t,n),[s]=e;if(!s[0])return[];for(const[t]of e)t&&i.push(t)}return["Expected the value to satisfy a union of `"+t+"`, but received: "+l(r),...i]}})}function x(){return _("unknown",(()=>!0))}function P(e,t,r){return new g({...e,coercer:(n,i)=>b(n,t)?e.coercer(r(n,i),i):e.coercer(n,i)})}function M(e){return P(U(e),B,(t=>"error"in t?t:{...t,result:y(t.result,e)}))}const B=U(x());function U(e){return R([T({jsonrpc:S("2.0"),id:O(),result:e}),T({jsonrpc:S("2.0"),id:O(),error:T({code:x(),message:O(),data:N(E())})})])}function L(e){return M(T({context:T({slot:k()}),value:e}))}L(T({err:C(R([T({}),O()])),logs:C(A(O())),accounts:N(C(A(C(T({executable:I(),owner:O(),lamports:k(),data:A(O()),rentEpoch:N(k())}))))),unitsConsumed:N(k())}));Error;Error;var D="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof r.g?r.g:"undefined"!==typeof self?self:{};function W(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e}var j={};Object.defineProperty(j,"__esModule",{value:!0});var z=j.ANCHOR_ERROR__REQUIRE_EQ_VIOLATED=Le=j.ANCHOR_ERROR__REQUIRE_VIOLATED=Ue=j.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_PROGRAM_ID=Be=j.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_AUTHORITY=Me=j.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION=Pe=j.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION_DELEGATE=xe=j.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION=Re=j.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION_AUTHORITY=Te=j.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION=Oe=j.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_METADATA_ADDRESS=Ne=j.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_AUTHORITY=ke=j.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION=Ce=j.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_MEMBER_ADDRESS=Se=j.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_AUTHORITY=Ie=j.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION=Ae=j.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_GROUP_ADDRESS=Ee=j.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_AUTHORITY=_e=j.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION=ve=j.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_TOKEN_TOKEN_PROGRAM=be=j.ANCHOR_ERROR__CONSTRAINT_MINT_TOKEN_PROGRAM=we=j.ANCHOR_ERROR__CONSTRAINT_TOKEN_TOKEN_PROGRAM=ye=j.ANCHOR_ERROR__CONSTRAINT_ACCOUNT_IS_NONE=me=j.ANCHOR_ERROR__CONSTRAINT_SPACE=ge=j.ANCHOR_ERROR__CONSTRAINT_MINT_DECIMALS=fe=j.ANCHOR_ERROR__CONSTRAINT_MINT_FREEZE_AUTHORITY=pe=j.ANCHOR_ERROR__CONSTRAINT_MINT_MINT_AUTHORITY=de=j.ANCHOR_ERROR__CONSTRAINT_TOKEN_OWNER=he=j.ANCHOR_ERROR__CONSTRAINT_TOKEN_MINT=le=j.ANCHOR_ERROR__CONSTRAINT_ZERO=ue=j.ANCHOR_ERROR__CONSTRAINT_ADDRESS=ce=j.ANCHOR_ERROR__CONSTRAINT_CLOSE=ae=j.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_INIT=oe=j.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED=se=j.ANCHOR_ERROR__CONSTRAINT_STATE=ie=j.ANCHOR_ERROR__CONSTRAINT_EXECUTABLE=ne=j.ANCHOR_ERROR__CONSTRAINT_SEEDS=re=j.ANCHOR_ERROR__CONSTRAINT_RENT_EXEMPT=te=j.ANCHOR_ERROR__CONSTRAINT_OWNER=ee=j.ANCHOR_ERROR__CONSTRAINT_RAW=Q=j.ANCHOR_ERROR__CONSTRAINT_SIGNER=X=j.ANCHOR_ERROR__CONSTRAINT_HAS_ONE=J=j.ANCHOR_ERROR__CONSTRAINT_MUT=Z=j.ANCHOR_ERROR__EVENT_INSTRUCTION_STUB=G=j.ANCHOR_ERROR__IDL_ACCOUNT_NOT_EMPTY=Y=j.ANCHOR_ERROR__IDL_INSTRUCTION_INVALID_PROGRAM=V=j.ANCHOR_ERROR__IDL_INSTRUCTION_STUB=K=j.ANCHOR_ERROR__INSTRUCTION_DID_NOT_SERIALIZE=F=j.ANCHOR_ERROR__INSTRUCTION_DID_NOT_DESERIALIZE=$=j.ANCHOR_ERROR__INSTRUCTION_FALLBACK_NOT_FOUND=q=j.ANCHOR_ERROR__INSTRUCTION_MISSING=void 0,H=j.ANCHOR_ERROR__DEPRECATED=ut=j.ANCHOR_ERROR__INVALID_NUMERIC_CONVERSION=ct=j.ANCHOR_ERROR__TRYING_TO_INIT_PAYER_AS_PROGRAM_ACCOUNT=at=j.ANCHOR_ERROR__DECLARED_PROGRAM_ID_MISMATCH=ot=j.ANCHOR_ERROR__ACCOUNT_DUPLICATE_REALLOCS=st=j.ANCHOR_ERROR__ACCOUNT_REALLOC_EXCEEDS_LIMIT=it=j.ANCHOR_ERROR__ACCOUNT_SYSVAR_MISMATCH=nt=j.ANCHOR_ERROR__ACCOUNT_NOT_ASSOCIATED_TOKEN_ACCOUNT=rt=j.ANCHOR_ERROR__ACCOUNT_NOT_PROGRAM_DATA=tt=j.ANCHOR_ERROR__ACCOUNT_NOT_INITIALIZED=et=j.ANCHOR_ERROR__ACCOUNT_NOT_SYSTEM_OWNED=Qe=j.ANCHOR_ERROR__ACCOUNT_NOT_SIGNER=Xe=j.ANCHOR_ERROR__INVALID_PROGRAM_EXECUTABLE=Je=j.ANCHOR_ERROR__INVALID_PROGRAM_ID=Ze=j.ANCHOR_ERROR__ACCOUNT_OWNED_BY_WRONG_PROGRAM=Ge=j.ANCHOR_ERROR__ACCOUNT_NOT_MUTABLE=Ye=j.ANCHOR_ERROR__ACCOUNT_NOT_ENOUGH_KEYS=Ve=j.ANCHOR_ERROR__ACCOUNT_DID_NOT_SERIALIZE=Ke=j.ANCHOR_ERROR__ACCOUNT_DID_NOT_DESERIALIZE=Fe=j.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_MISMATCH=$e=j.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_NOT_FOUND=qe=j.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_ALREADY_SET=He=j.ANCHOR_ERROR__REQUIRE_GTE_VIOLATED=ze=j.ANCHOR_ERROR__REQUIRE_GT_VIOLATED=je=j.ANCHOR_ERROR__REQUIRE_KEYS_NEQ_VIOLATED=We=j.ANCHOR_ERROR__REQUIRE_NEQ_VIOLATED=De=j.ANCHOR_ERROR__REQUIRE_KEYS_EQ_VIOLATED=void 0,q=j.ANCHOR_ERROR__INSTRUCTION_MISSING=100,$=j.ANCHOR_ERROR__INSTRUCTION_FALLBACK_NOT_FOUND=101,F=j.ANCHOR_ERROR__INSTRUCTION_DID_NOT_DESERIALIZE=102,K=j.ANCHOR_ERROR__INSTRUCTION_DID_NOT_SERIALIZE=103,V=j.ANCHOR_ERROR__IDL_INSTRUCTION_STUB=1e3,Y=j.ANCHOR_ERROR__IDL_INSTRUCTION_INVALID_PROGRAM=1001,G=j.ANCHOR_ERROR__IDL_ACCOUNT_NOT_EMPTY=1002,Z=j.ANCHOR_ERROR__EVENT_INSTRUCTION_STUB=1500,J=j.ANCHOR_ERROR__CONSTRAINT_MUT=2e3,X=j.ANCHOR_ERROR__CONSTRAINT_HAS_ONE=2001,Q=j.ANCHOR_ERROR__CONSTRAINT_SIGNER=2002,ee=j.ANCHOR_ERROR__CONSTRAINT_RAW=2003,te=j.ANCHOR_ERROR__CONSTRAINT_OWNER=2004,re=j.ANCHOR_ERROR__CONSTRAINT_RENT_EXEMPT=2005,ne=j.ANCHOR_ERROR__CONSTRAINT_SEEDS=2006,ie=j.ANCHOR_ERROR__CONSTRAINT_EXECUTABLE=2007,se=j.ANCHOR_ERROR__CONSTRAINT_STATE=2008,oe=j.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED=2009,ae=j.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_INIT=2010,ce=j.ANCHOR_ERROR__CONSTRAINT_CLOSE=2011,ue=j.ANCHOR_ERROR__CONSTRAINT_ADDRESS=2012,le=j.ANCHOR_ERROR__CONSTRAINT_ZERO=2013,he=j.ANCHOR_ERROR__CONSTRAINT_TOKEN_MINT=2014,de=j.ANCHOR_ERROR__CONSTRAINT_TOKEN_OWNER=2015,pe=j.ANCHOR_ERROR__CONSTRAINT_MINT_MINT_AUTHORITY=2016,fe=j.ANCHOR_ERROR__CONSTRAINT_MINT_FREEZE_AUTHORITY=2017,ge=j.ANCHOR_ERROR__CONSTRAINT_MINT_DECIMALS=2018,me=j.ANCHOR_ERROR__CONSTRAINT_SPACE=2019,ye=j.ANCHOR_ERROR__CONSTRAINT_ACCOUNT_IS_NONE=2020,we=j.ANCHOR_ERROR__CONSTRAINT_TOKEN_TOKEN_PROGRAM=2021,be=j.ANCHOR_ERROR__CONSTRAINT_MINT_TOKEN_PROGRAM=2022,ve=j.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_TOKEN_TOKEN_PROGRAM=2023,_e=j.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION=2024,Ee=j.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_AUTHORITY=2025,Ae=j.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_GROUP_ADDRESS=2026,Ie=j.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION=2027,Se=j.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_AUTHORITY=2028,Ce=j.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_MEMBER_ADDRESS=2029,ke=j.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION=2030,Ne=j.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_AUTHORITY=2031,Oe=j.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_METADATA_ADDRESS=2032,Te=j.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION=2033,Re=j.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION_AUTHORITY=2034,xe=j.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION=2035,Pe=j.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION_DELEGATE=2036,Me=j.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION=2037,Be=j.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_AUTHORITY=2038,Ue=j.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_PROGRAM_ID=2039,Le=j.ANCHOR_ERROR__REQUIRE_VIOLATED=2500;z=j.ANCHOR_ERROR__REQUIRE_EQ_VIOLATED=2501;var De=j.ANCHOR_ERROR__REQUIRE_KEYS_EQ_VIOLATED=2502,We=j.ANCHOR_ERROR__REQUIRE_NEQ_VIOLATED=2503,je=j.ANCHOR_ERROR__REQUIRE_KEYS_NEQ_VIOLATED=2504,ze=j.ANCHOR_ERROR__REQUIRE_GT_VIOLATED=2505,He=j.ANCHOR_ERROR__REQUIRE_GTE_VIOLATED=2506,qe=j.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_ALREADY_SET=3e3,$e=j.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_NOT_FOUND=3001,Fe=j.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_MISMATCH=3002,Ke=j.ANCHOR_ERROR__ACCOUNT_DID_NOT_DESERIALIZE=3003,Ve=j.ANCHOR_ERROR__ACCOUNT_DID_NOT_SERIALIZE=3004,Ye=j.ANCHOR_ERROR__ACCOUNT_NOT_ENOUGH_KEYS=3005,Ge=j.ANCHOR_ERROR__ACCOUNT_NOT_MUTABLE=3006,Ze=j.ANCHOR_ERROR__ACCOUNT_OWNED_BY_WRONG_PROGRAM=3007,Je=j.ANCHOR_ERROR__INVALID_PROGRAM_ID=3008,Xe=j.ANCHOR_ERROR__INVALID_PROGRAM_EXECUTABLE=3009,Qe=j.ANCHOR_ERROR__ACCOUNT_NOT_SIGNER=3010,et=j.ANCHOR_ERROR__ACCOUNT_NOT_SYSTEM_OWNED=3011,tt=j.ANCHOR_ERROR__ACCOUNT_NOT_INITIALIZED=3012,rt=j.ANCHOR_ERROR__ACCOUNT_NOT_PROGRAM_DATA=3013,nt=j.ANCHOR_ERROR__ACCOUNT_NOT_ASSOCIATED_TOKEN_ACCOUNT=3014,it=j.ANCHOR_ERROR__ACCOUNT_SYSVAR_MISMATCH=3015,st=j.ANCHOR_ERROR__ACCOUNT_REALLOC_EXCEEDS_LIMIT=3016,ot=j.ANCHOR_ERROR__ACCOUNT_DUPLICATE_REALLOCS=3017,at=j.ANCHOR_ERROR__DECLARED_PROGRAM_ID_MISMATCH=4100,ct=j.ANCHOR_ERROR__TRYING_TO_INIT_PAYER_AS_PROGRAM_ACCOUNT=4101,ut=j.ANCHOR_ERROR__INVALID_NUMERIC_CONVERSION=4102;H=j.ANCHOR_ERROR__DEPRECATED=5e3;new Set(["debug-logs"]),new Map;Error;Error;Error;const lt={InstructionMissing:q,InstructionFallbackNotFound:$,InstructionDidNotDeserialize:F,InstructionDidNotSerialize:K,IdlInstructionStub:V,IdlInstructionInvalidProgram:Y,IdlAccountNotEmpty:G,EventInstructionStub:Z,ConstraintMut:J,ConstraintHasOne:X,ConstraintSigner:Q,ConstraintRaw:ee,ConstraintOwner:te,ConstraintRentExempt:re,ConstraintSeeds:ne,ConstraintExecutable:ie,ConstraintState:se,ConstraintAssociated:oe,ConstraintAssociatedInit:ae,ConstraintClose:ce,ConstraintAddress:ue,ConstraintZero:le,ConstraintTokenMint:he,ConstraintTokenOwner:de,ConstraintMintMintAuthority:pe,ConstraintMintFreezeAuthority:fe,ConstraintMintDecimals:ge,ConstraintSpace:me,ConstraintAccountIsNone:ye,ConstraintTokenTokenProgram:we,ConstraintMintTokenProgram:be,ConstraintAssociatedTokenTokenProgram:ve,ConstraintMintGroupPointerExtension:_e,ConstraintMintGroupPointerExtensionAuthority:Ee,ConstraintMintGroupPointerExtensionGroupAddress:Ae,ConstraintMintGroupMemberPointerExtension:Ie,ConstraintMintGroupMemberPointerExtensionAuthority:Se,ConstraintMintGroupMemberPointerExtensionMemberAddress:Ce,ConstraintMintMetadataPointerExtension:ke,ConstraintMintMetadataPointerExtensionAuthority:Ne,ConstraintMintMetadataPointerExtensionMetadataAddress:Oe,ConstraintMintCloseAuthorityExtension:Te,ConstraintMintCloseAuthorityExtensionAuthority:Re,ConstraintMintPermanentDelegateExtension:xe,ConstraintMintPermanentDelegateExtensionDelegate:Pe,ConstraintMintTransferHookExtension:Me,ConstraintMintTransferHookExtensionAuthority:Be,ConstraintMintTransferHookExtensionProgramId:Ue,RequireViolated:Le,RequireEqViolated:z,RequireKeysEqViolated:De,RequireNeqViolated:We,RequireKeysNeqViolated:je,RequireGtViolated:ze,RequireGteViolated:He,AccountDiscriminatorAlreadySet:qe,AccountDiscriminatorNotFound:$e,AccountDiscriminatorMismatch:Fe,AccountDidNotDeserialize:Ke,AccountDidNotSerialize:Ve,AccountNotEnoughKeys:Ye,AccountNotMutable:Ge,AccountOwnedByWrongProgram:Ze,InvalidProgramId:Je,InvalidProgramExecutable:Xe,AccountNotSigner:Qe,AccountNotSystemOwned:et,AccountNotInitialized:tt,AccountNotProgramData:rt,AccountNotAssociatedTokenAccount:nt,AccountSysvarMismatch:it,AccountReallocExceedsLimit:st,AccountDuplicateReallocs:ot,DeclaredProgramIdMismatch:at,TryingToInitPayerAsProgramAccount:ct,InvalidNumericConversion:ut,Deprecated:H};new Map([[lt.InstructionMissing,"Instruction discriminator not provided"],[lt.InstructionFallbackNotFound,"Fallback functions are not supported"],[lt.InstructionDidNotDeserialize,"The program could not deserialize the given instruction"],[lt.InstructionDidNotSerialize,"The program could not serialize the given instruction"],[lt.IdlInstructionStub,"The program was compiled without idl instructions"],[lt.IdlInstructionInvalidProgram,"The transaction was given an invalid program for the IDL instruction"],[lt.IdlAccountNotEmpty,"IDL account must be empty in order to resize, try closing first"],[lt.EventInstructionStub,"The program was compiled without `event-cpi` feature"],[lt.ConstraintMut,"A mut constraint was violated"],[lt.ConstraintHasOne,"A has one constraint was violated"],[lt.ConstraintSigner,"A signer constraint was violated"],[lt.ConstraintRaw,"A raw constraint was violated"],[lt.ConstraintOwner,"An owner constraint was violated"],[lt.ConstraintRentExempt,"A rent exemption constraint was violated"],[lt.ConstraintSeeds,"A seeds constraint was violated"],[lt.ConstraintExecutable,"An executable constraint was violated"],[lt.ConstraintState,"Deprecated Error, feel free to replace with something else"],[lt.ConstraintAssociated,"An associated constraint was violated"],[lt.ConstraintAssociatedInit,"An associated init constraint was violated"],[lt.ConstraintClose,"A close constraint was violated"],[lt.ConstraintAddress,"An address constraint was violated"],[lt.ConstraintZero,"Expected zero account discriminant"],[lt.ConstraintTokenMint,"A token mint constraint was violated"],[lt.ConstraintTokenOwner,"A token owner constraint was violated"],[lt.ConstraintMintMintAuthority,"A mint mint authority constraint was violated"],[lt.ConstraintMintFreezeAuthority,"A mint freeze authority constraint was violated"],[lt.ConstraintMintDecimals,"A mint decimals constraint was violated"],[lt.ConstraintSpace,"A space constraint was violated"],[lt.ConstraintAccountIsNone,"A required account for the constraint is None"],[lt.ConstraintTokenTokenProgram,"A token account token program constraint was violated"],[lt.ConstraintMintTokenProgram,"A mint token program constraint was violated"],[lt.ConstraintAssociatedTokenTokenProgram,"An associated token account token program constraint was violated"],[lt.ConstraintMintGroupPointerExtension,"A group pointer extension constraint was violated"],[lt.ConstraintMintGroupPointerExtensionAuthority,"A group pointer extension authority constraint was violated"],[lt.ConstraintMintGroupPointerExtensionGroupAddress,"A group pointer extension group address constraint was violated"],[lt.ConstraintMintGroupMemberPointerExtension,"A group member pointer extension constraint was violated"],[lt.ConstraintMintGroupMemberPointerExtensionAuthority,"A group member pointer extension authority constraint was violated"],[lt.ConstraintMintGroupMemberPointerExtensionMemberAddress,"A group member pointer extension group address constraint was violated"],[lt.ConstraintMintMetadataPointerExtension,"A metadata pointer extension constraint was violated"],[lt.ConstraintMintMetadataPointerExtensionAuthority,"A metadata pointer extension authority constraint was violated"],[lt.ConstraintMintMetadataPointerExtensionMetadataAddress,"A metadata pointer extension metadata address constraint was violated"],[lt.ConstraintMintCloseAuthorityExtension,"A close authority constraint was violated"],[lt.ConstraintMintCloseAuthorityExtensionAuthority,"A close authority extension authority constraint was violated"],[lt.ConstraintMintPermanentDelegateExtension,"A permanent delegate extension constraint was violated"],[lt.ConstraintMintPermanentDelegateExtensionDelegate,"A permanent delegate extension delegate constraint was violated"],[lt.ConstraintMintTransferHookExtension,"A transfer hook extension constraint was violated"],[lt.ConstraintMintTransferHookExtensionAuthority,"A transfer hook extension authority constraint was violated"],[lt.ConstraintMintTransferHookExtensionProgramId,"A transfer hook extension transfer hook program id constraint was violated"],[lt.RequireViolated,"A require expression was violated"],[lt.RequireEqViolated,"A require_eq expression was violated"],[lt.RequireKeysEqViolated,"A require_keys_eq expression was violated"],[lt.RequireNeqViolated,"A require_neq expression was violated"],[lt.RequireKeysNeqViolated,"A require_keys_neq expression was violated"],[lt.RequireGtViolated,"A require_gt expression was violated"],[lt.RequireGteViolated,"A require_gte expression was violated"],[lt.AccountDiscriminatorAlreadySet,"The account discriminator was already set on this account"],[lt.AccountDiscriminatorNotFound,"No discriminator was found on the account"],[lt.AccountDiscriminatorMismatch,"Account discriminator did not match what was expected"],[lt.AccountDidNotDeserialize,"Failed to deserialize the account"],[lt.AccountDidNotSerialize,"Failed to serialize the account"],[lt.AccountNotEnoughKeys,"Not enough account keys given to the instruction"],[lt.AccountNotMutable,"The given account is not mutable"],[lt.AccountOwnedByWrongProgram,"The given account is owned by a different program than expected"],[lt.InvalidProgramId,"Program ID was not as expected"],[lt.InvalidProgramExecutable,"Program account is not executable"],[lt.AccountNotSigner,"The given account did not sign"],[lt.AccountNotSystemOwned,"The given account is not owned by the system program"],[lt.AccountNotInitialized,"The program expected this account to be already initialized"],[lt.AccountNotProgramData,"The given account is not a program data account"],[lt.AccountNotAssociatedTokenAccount,"The given account is not the associated token account"],[lt.AccountSysvarMismatch,"The given public key does not match the required sysvar"],[lt.AccountReallocExceedsLimit,"The account reallocation exceeds the MAX_PERMITTED_DATA_INCREASE limit"],[lt.AccountDuplicateReallocs,"The account was duplicated for more than one reallocation"],[lt.DeclaredProgramIdMismatch,"The declared program id does not match the actual program id"],[lt.TryingToInitPayerAsProgramAccount,"You cannot/should not initialize the payer account as a program account"],[lt.InvalidNumericConversion,"The program could not perform the numeric conversion, out of range integral type conversion attempted"],[lt.Deprecated,"The API being used is deprecated and should no longer be used"]]);class ht{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}decode(e,t){throw new Error("Layout is abstract")}encode(e,t,r){throw new Error("Layout is abstract")}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}var dt=ht;function pt(e,t){return t.property?e+"["+t.property+"]":e}class ft extends ht{isCount(){throw new Error("ExternalLayout is abstract")}}class gt extends ft{constructor(e,t,r){if(!(e instanceof ht))throw new TypeError("layout must be a Layout");if(void 0===t)t=0;else if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,r||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof mt||this.layout instanceof yt}decode(e,t){return void 0===t&&(t=0),this.layout.decode(e,t+this.offset)}encode(e,t,r){return void 0===r&&(r=0),this.layout.encode(e,t,r+this.offset)}}class mt extends ht{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return void 0===t&&(t=0),e.readUIntLE(t,this.span)}encode(e,t,r){return void 0===r&&(r=0),t.writeUIntLE(e,r,this.span),this.span}}class yt extends ht{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return void 0===t&&(t=0),e.readUIntBE(t,this.span)}encode(e,t,r){return void 0===r&&(r=0),t.writeUIntBE(e,r,this.span),this.span}}const wt=Math.pow(2,32);function bt(e){const t=Math.floor(e/wt),r=e-t*wt;return{hi32:t,lo32:r}}function vt(e,t){return e*wt+t}class _t extends ht{constructor(e){super(8,e)}decode(e,t){void 0===t&&(t=0);const r=e.readUInt32LE(t),n=e.readUInt32LE(t+4);return vt(n,r)}encode(e,t,r){void 0===r&&(r=0);const n=bt(e);return t.writeUInt32LE(n.lo32,r),t.writeUInt32LE(n.hi32,r+4),8}}class Et extends ht{constructor(e){super(8,e)}decode(e,t){void 0===t&&(t=0);const r=e.readUInt32LE(t),n=e.readInt32LE(t+4);return vt(n,r)}encode(e,t,r){void 0===r&&(r=0);const n=bt(e);return t.writeUInt32LE(n.lo32,r),t.writeInt32LE(n.hi32,r+4),8}}class At extends ht{constructor(e,t,r){if(!Array.isArray(e)||!e.reduce(((e,t)=>e&&t instanceof ht),!0))throw new TypeError("fields must be array of Layout instances");"boolean"===typeof t&&void 0===r&&(r=t,t=void 0);for(const s of e)if(0>s.span&&void 0===s.property)throw new Error("fields cannot contain unnamed variable-length layout");let n=-1;try{n=e.reduce(((e,t)=>e+t.getSpan()),0)}catch(i){}super(n,t),this.fields=e,this.decodePrefixes=!!r}getSpan(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);let r=0;try{r=this.fields.reduce(((r,n)=>{const i=n.getSpan(e,t);return t+=i,r+i}),0)}catch(n){throw new RangeError("indeterminate span")}return r}decode(e,t){void 0===t&&(t=0);const r=this.makeDestinationObject();for(const n of this.fields)if(void 0!==n.property&&(r[n.property]=n.decode(e,t)),t+=n.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return r}encode(e,t,r){void 0===r&&(r=0);const n=r;let i=0,s=0;for(const o of this.fields){let n=o.span;if(s=0<n?n:0,void 0!==o.property){const i=e[o.property];void 0!==i&&(s=o.encode(i,t,r),0>n&&(n=o.getSpan(t,r)))}i=r,r+=n}return i+s-n}fromArray(e){const t=this.makeDestinationObject();for(const r of this.fields)void 0!==r.property&&0<e.length&&(t[r.property]=e.shift());return t}layoutFor(e){if("string"!==typeof e)throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if("string"!==typeof e)throw new TypeError("property must be string");let t=0;for(const r of this.fields){if(r.property===e)return t;0>r.span?t=-1:0<=t&&(t+=r.span)}}}class It{constructor(e){this.property=e}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class St extends It{constructor(e,t){if(!(e instanceof ft&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,r){return this.layout.encode(e,t,r)}}class Ct extends ht{constructor(e,t,r){const n=e instanceof mt||e instanceof yt;if(n)e=new St(new gt(e));else if(e instanceof ft&&e.isCount())e=new St(e);else if(!(e instanceof It))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(void 0===t&&(t=null),!(null===t||t instanceof ht))throw new TypeError("defaultLayout must be null or a Layout");if(null!==t){if(0>t.span)throw new Error("defaultLayout must have constant span");void 0===t.property&&(t=t.replicate("content"))}let i=-1;t&&(i=t.span,0<=i&&n&&(i+=e.layout.span)),super(i,r),this.discriminator=e,this.usesPrefixDiscriminator=n,this.defaultLayout=t,this.registry={};let s=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(e){return s(e)},this.configGetSourceVariant=function(e){s=e.bind(this)}}getSpan(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);const r=this.getVariant(e,t);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(e,t)}defaultGetSourceVariant(e){if(e.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&e.hasOwnProperty(this.defaultLayout.property))return;const t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||e.hasOwnProperty(t.property)))return t}else for(const t in this.registry){const r=this.registry[t];if(e.hasOwnProperty(r.property))return r}throw new Error("unable to infer src variant")}decode(e,t){let r;void 0===t&&(t=0);const n=this.discriminator,i=n.decode(e,t);let s=this.registry[i];if(void 0===s){let o=0;s=this.defaultLayout,this.usesPrefixDiscriminator&&(o=n.layout.span),r=this.makeDestinationObject(),r[n.property]=i,r[s.property]=this.defaultLayout.decode(e,t+o)}else r=s.decode(e,t);return r}encode(e,t,r){void 0===r&&(r=0);const n=this.getSourceVariant(e);if(void 0===n){const n=this.discriminator,i=this.defaultLayout;let s=0;return this.usesPrefixDiscriminator&&(s=n.layout.span),n.encode(e[n.property],t,r),s+i.encode(e[i.property],t,r+s)}return n.encode(e,t,r)}addVariant(e,t,r){const n=new kt(this,e,t,r);return this.registry[e]=n,n}getVariant(e,t){let r=e;return Buffer.isBuffer(e)&&(void 0===t&&(t=0),r=this.discriminator.decode(e,t)),this.registry[r]}}class kt extends ht{constructor(e,t,r,n){if(!(e instanceof Ct))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if("string"===typeof r&&void 0===n&&(n=r,r=null),r){if(!(r instanceof ht))throw new TypeError("layout must be a Layout");if(null!==e.defaultLayout&&0<=r.span&&r.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if("string"!==typeof n)throw new TypeError("variant must have a String property")}let i=e.span;0>e.span&&(i=r?r.span:0,0<=i&&e.usesPrefixDiscriminator&&(i+=e.discriminator.layout.span)),super(i,n),this.union=e,this.variant=t,this.layout=r||null}getSpan(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);let r=0;return this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),r+this.layout.getSpan(e,t+r)}decode(e,t){const r=this.makeDestinationObject();if(void 0===t&&(t=0),this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(e,t+n):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(e,t,r){void 0===r&&(r=0);let n=0;if(this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout&&!e.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,r);let i=n;if(this.layout&&(this.layout.encode(e[this.property],t,r+n),i+=this.layout.getSpan(t,r+n),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}class Nt extends ht{constructor(e,t){if(!(e instanceof ft&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;e instanceof ft||(r=e),super(r,t),this.length=e}getSpan(e,t){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),r}decode(e,t){void 0===t&&(t=0);let r=this.span;return 0>r&&(r=this.length.decode(e,t)),e.slice(t,t+r)}encode(e,t,r){let n=this.length;if(this.length instanceof ft&&(n=e.length),!Buffer.isBuffer(e)||n!==e.length)throw new TypeError(pt("Blob.encode",this)+" requires (length "+n+") Buffer as src");if(r+n>t.length)throw new RangeError("encoding overruns Buffer");return t.write(e.toString("hex"),r,n,"hex"),this.length instanceof ft&&this.length.encode(n,t,r),n}}var Ot=(e,t,r)=>new gt(e,t,r),Tt=e=>new mt(1,e),Rt=e=>new mt(4,e),xt=e=>new _t(e),Pt=e=>new Et(e),Mt=(e,t,r)=>new At(e,t,r),Bt=(e,t,r)=>new Ct(e,t,r),Ut=(e,t)=>new Nt(e,t);class Lt extends dt{constructor(e){super(-1,e),this.property=e,this.layout=Mt([Rt("length"),Rt("lengthPadding"),Ut(Ot(Rt(),-8),"chars")],this.property)}encode(e,t,r=0){if(null===e||void 0===e)return this.layout.span;const n={chars:Buffer.from(e,"utf8")};return this.layout.encode(n,t,r)}decode(e,t=0){const r=this.layout.decode(e,t);return r["chars"].toString()}getSpan(e,t=0){return Rt().span+Rt().span+new(i())(new Uint8Array(e).slice(t,t+4),10,"le").toNumber()}}function Dt(e){return new Lt(e)}function Wt(e){return Ut(32,e)}const jt=Bt(Rt("instruction"));jt.addVariant(0,Mt([Pt("lamports"),Pt("space"),Wt("owner")]),"createAccount"),jt.addVariant(1,Mt([Wt("owner")]),"assign"),jt.addVariant(2,Mt([Pt("lamports")]),"transfer"),jt.addVariant(3,Mt([Wt("base"),Dt("seed"),Pt("lamports"),Pt("space"),Wt("owner")]),"createAccountWithSeed"),jt.addVariant(4,Mt([Wt("authorized")]),"advanceNonceAccount"),jt.addVariant(5,Mt([Pt("lamports")]),"withdrawNonceAccount"),jt.addVariant(6,Mt([Wt("authorized")]),"initializeNonceAccount"),jt.addVariant(7,Mt([Wt("authorized")]),"authorizeNonceAccount"),jt.addVariant(8,Mt([Pt("space")]),"allocate"),jt.addVariant(9,Mt([Wt("base"),Dt("seed"),Pt("space"),Wt("owner")]),"allocateWithSeed"),jt.addVariant(10,Mt([Wt("base"),Dt("seed"),Wt("owner")]),"assignWithSeed"),jt.addVariant(11,Mt([Pt("lamports"),Dt("seed"),Wt("owner")]),"transferWithSeed");Math.max(...Object.values(jt.registry).map((e=>e.span)));class zt extends dt{constructor(e,t,r,n){super(e.span,n),this.layout=e,this.decoder=t,this.encoder=r}decode(e,t){return this.decoder(this.layout.decode(e,t))}encode(e,t,r){return this.layout.encode(this.encoder(e),t,r)}getSpan(e,t){return this.layout.getSpan(e,t)}}function Ht(e){return new zt(Ut(32),(e=>new s.PublicKey(e)),(e=>e.toBuffer()),e)}Mt([Rt("version"),Rt("state"),Ht("authorizedPubkey"),Ht("nonce"),Mt([xt("lamportsPerSignature")],"feeCalculator")]);new s.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),new s.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");var qt={exports:{}};(function(e,t){var r="undefined"!==typeof self?self:D,n=function(){function e(){this.fetch=!1,this.DOMException=r.DOMException}return e.prototype=r,new e}();(function(e){(function(t){var r={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};function n(e){return e&&DataView.prototype.isPrototypeOf(e)}if(r.arrayBuffer)var i=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=ArrayBuffer.isView||function(e){return e&&i.indexOf(Object.prototype.toString.call(e))>-1};function o(e){if("string"!==typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function a(e){return"string"!==typeof e&&(e=String(e)),e}function c(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r.iterable&&(t[Symbol.iterator]=function(){return t}),t}function u(e){this.map={},e instanceof u?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function l(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function h(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function d(e){var t=new FileReader,r=h(t);return t.readAsArrayBuffer(e),r}function p(e){var t=new FileReader,r=h(t);return t.readAsText(e),r}function f(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}function g(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function m(){return this.bodyUsed=!1,this._initBody=function(e){this._bodyInit=e,e?"string"===typeof e?this._bodyText=e:r.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:r.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:r.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():r.arrayBuffer&&r.blob&&n(e)?(this._bodyArrayBuffer=g(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):r.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||s(e))?this._bodyArrayBuffer=g(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"===typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r.blob&&(this.blob=function(){var e=l(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?l(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(d)}),this.text=function(){var e=l(this);if(e)return e;if(this._bodyBlob)return p(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(f(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r.formData&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}u.prototype.append=function(e,t){e=o(e),t=a(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},u.prototype["delete"]=function(e){delete this.map[o(e)]},u.prototype.get=function(e){return e=o(e),this.has(e)?this.map[e]:null},u.prototype.has=function(e){return this.map.hasOwnProperty(o(e))},u.prototype.set=function(e,t){this.map[o(e)]=a(t)},u.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},u.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),c(e)},u.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),c(e)},u.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),c(e)},r.iterable&&(u.prototype[Symbol.iterator]=u.prototype.entries);var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function w(e){var t=e.toUpperCase();return y.indexOf(t)>-1?t:e}function b(e,t){t=t||{};var r=t.body;if(e instanceof b){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new u(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new u(t.headers)),this.method=w(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function v(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}})),t}function _(e){var t=new u,r=e.replace(/\r?\n[\t ]+/g," ");return r.split(/\r?\n/).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();t.append(n,i)}})),t}function E(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new u(t.headers),this.url=t.url||"",this._initBody(e)}b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},m.call(b.prototype),m.call(E.prototype),E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new u(this.headers),url:this.url})},E.error=function(){var e=new E(null,{status:0,statusText:""});return e.type="error",e};var A=[301,302,303,307,308];E.redirect=function(e,t){if(-1===A.indexOf(t))throw new RangeError("Invalid status code");return new E(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(S){t.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function I(e,n){return new Promise((function(i,s){var o=new b(e,n);if(o.signal&&o.signal.aborted)return s(new t.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function c(){a.abort()}a.onload=function(){var e={status:a.status,statusText:a.statusText,headers:_(a.getAllResponseHeaders()||"")};e.url="responseURL"in a?a.responseURL:e.headers.get("X-Request-URL");var t="response"in a?a.response:a.responseText;i(new E(t,e))},a.onerror=function(){s(new TypeError("Network request failed"))},a.ontimeout=function(){s(new TypeError("Network request failed"))},a.onabort=function(){s(new t.DOMException("Aborted","AbortError"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&r.blob&&(a.responseType="blob"),o.headers.forEach((function(e,t){a.setRequestHeader(t,e)})),o.signal&&(o.signal.addEventListener("abort",c),a.onreadystatechange=function(){4===a.readyState&&o.signal.removeEventListener("abort",c)}),a.send("undefined"===typeof o._bodyInit?null:o._bodyInit)}))}I.polyfill=!0,e.fetch||(e.fetch=I,e.Headers=u,e.Request=b,e.Response=E),t.Headers=u,t.Request=b,t.Response=E,t.fetch=I,Object.defineProperty(t,"__esModule",{value:!0})})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=n;t=i.fetch,t.default=i.fetch,t.fetch=i.fetch,t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response,e.exports=t})(qt,qt.exports);qt.exports;o.rustEnum([o.struct([],"uninitialized"),o.struct([o.option(o.publicKey(),"authorityAddress")],"buffer"),o.struct([o.publicKey("programdataAddress")],"program"),o.struct([o.u64("slot"),o.option(o.publicKey(),"upgradeAuthorityAddress")],"programData")],void 0,o.u32());const $t="Program log: ",Ft="Program data: ";$t.length,Ft.length;new Map;function Kt(e){return new Gt(Ut(8),(e=>Jt.fromBuffer(e)),(e=>e.toBuffer()),e)}function Vt(e){return new Gt(Ut(32),(e=>new s.PublicKey(e)),(e=>e.toBuffer()),e)}function Yt(e,t){return new Zt(e,t)}class Gt extends dt{constructor(e,t,r,n){super(e.span,n),this.layout=e,this.decoder=t,this.encoder=r}decode(e,t){return this.decoder(this.layout.decode(e,t))}encode(e,t,r){return this.layout.encode(this.encoder(e),t,r)}getSpan(e,t){return this.layout.getSpan(e,t)}}class Zt extends dt{constructor(e,t){super(-1,t),this.layout=e,this.discriminator=Rt()}encode(e,t,r=0){return null===e||void 0===e?this.layout.span+this.discriminator.encode(0,t,r):(this.discriminator.encode(1,t,r),this.layout.encode(e,t,r+4)+4)}decode(e,t=0){const r=this.discriminator.decode(e,t);if(0===r)return null;if(1===r)return this.layout.decode(e,t+4);throw new Error("Invalid coption "+this.layout.property)}getSpan(e,t=0){return this.layout.getSpan(e,t+4)+4}}class Jt extends(i()){toBuffer(){const e=super.toArray().reverse(),t=Buffer.from(e);if(8===t.length)return t;if(t.length>=8)throw new Error("u64 too large");const r=Buffer.alloc(8);return t.copy(r),r}static fromBuffer(e){if(8!==e.length)throw new Error(`Invalid buffer length: ${e.length}`);return new Jt([...e].reverse().map((e=>`00${e.toString(16)}`.slice(-2))).join(""),16)}}Mt([Vt("mint"),Vt("owner"),Kt("amount"),Yt(Vt(),"delegate"),(e=>{const t=Bt(Tt("discriminator"),null,e);return t.addVariant(0,Mt([]),"uninitialized"),t.addVariant(1,Mt([]),"initialized"),t.addVariant(2,Mt([]),"frozen"),t})("state"),Yt(Kt(),"isNative"),Kt("delegatedAmount"),Yt(Vt(),"closeAuthority")]);new s.PublicKey("11111111111111111111111111111111")},29871:function(e,t,r){"use strict";r.d(t,{n:function(){return p}});r(18111),r(22489),r(20116),r(61701);var n=r(48016),i=r(82029),s=r(80955),o=r(81753),a=r(20169),c=r(58843),u=r(37903),l=r(61140),h=r(83131),d=r(50445);class p extends l.X{setUniversalProvider(e){this.addConnector(new h.F({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{const e=this.getWalletConnectConnector();await e.disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){const t=this.provider,r=t?.session?.namespaces?.[e]?.accounts?.map((e=>{const[,,t]=e.split(":");return t})).filter(((e,t,r)=>r.indexOf(e)===t))||[];return Promise.resolve({accounts:r.map((t=>o.w.createAccount(e,t,"bip122"===e?"payment":"eoa")))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){const t=e.caipNetwork&&a.oU.BALANCE_SUPPORTED_CHAINS.includes(e.caipNetwork?.chainNamespace);if(!t||e.caipNetwork?.testnet)return{balance:"0.00",symbol:e.caipNetwork?.nativeCurrency.symbol||""};if(c.U.state.balanceLoading&&e.chainId===u.W.state.activeCaipNetwork?.id)return{balance:c.U.state.balance||"0.00",symbol:c.U.state.balanceSymbol||""};const r=await c.U.fetchTokenBalance(),n=r.find((t=>t.chainId===`${e.caipNetwork?.chainNamespace}:${e.chainId}`&&t.symbol===e.caipNetwork?.nativeCurrency.symbol));return{balance:n?.quantity.numeric||"0.00",symbol:n?.symbol||e.caipNetwork?.nativeCurrency.symbol||""}}async signMessage(e){const{provider:t,message:r,address:i}=e;if(!t)throw new Error("UniversalAdapter:signMessage - provider is undefined");let o="";if(u.W.state.activeCaipNetwork?.chainNamespace===s.o.CHAIN.SOLANA){const e=await t.request({method:"solana_signMessage",params:{message:n.A.encode((new TextEncoder).encode(r)),pubkey:i}},u.W.state.activeCaipNetwork?.caipNetworkId);o=e.signature}else o=await t.request({method:"personal_sign",params:[r,i]},u.W.state.activeCaipNetwork?.caipNetworkId);return{signature:o}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){const{caipNetwork:t}=e,r=this.getWalletConnectConnector();if(t.chainNamespace===s.o.CHAIN.EVM)try{await(r.provider?.request({method:"wallet_switchEthereumChain",params:[{chainId:(0,i.nj)(t.id)}]}))}catch(n){if(n.code===d.E.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||n.code===d.E.ERROR_INVALID_CHAIN_ID||n.code===d.E.ERROR_CODE_DEFAULT||n?.data?.originalError?.code===d.E.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await(r.provider?.request({method:"wallet_addEthereumChain",params:[{chainId:(0,i.nj)(t.id),rpcUrls:[t?.rpcUrls["chainDefault"]?.http],chainName:t.name,nativeCurrency:t.nativeCurrency,blockExplorerUrls:[t.blockExplorers?.default.url]}]}))}catch(o){throw new Error("Chain is not supported")}}r.provider.setDefaultChain(t.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find((e=>"WALLET_CONNECT"===e.type)),t=e?.provider;return t}}},30531:function(e,t,r){"use strict";var n=r(46518),i=r(69565),s=r(79306),o=r(28551),a=r(1767),c=r(48646),u=r(19462),l=r(9539),h=r(96395),d=r(84549),p=!h&&d("flatMap",TypeError),f=u((function(){var e,t,r=this.iterator,n=this.mapper;while(1){if(t=this.inner)try{if(e=o(i(t.next,t.iterator)),!e.done)return e.value;this.inner=null}catch(s){l(r,"throw",s)}if(e=o(i(this.next,r)),this.done=!!e.done)return;try{this.inner=c(n(e.value,this.counter++),!1)}catch(s){l(r,"throw",s)}}}));n({target:"Iterator",proto:!0,real:!0,forced:h||p},{flatMap:function(e){o(this);try{s(e)}catch(t){l(this,"throw",t)}return p?i(p,this,e):new f(a(this),{mapper:e,inner:null})}})},31436:function(e,t,r){"use strict";function n(){let e=()=>{},t=()=>{};const r=new Promise(((r,n)=>{e=r,t=n}));return{promise:r,resolve:e,reject:t}}r.d(t,{Y:function(){return n}})},31843:function(e,t,r){"use strict";r.d(t,{E:function(){return g}});var n=r(69983),i=r(80955),s=r(22381),o=r(81753),a=r(36300),c=r(58843),u=r(68174),l=r(64529);const h=o.w.getAnalyticsUrl(),d=new a.Z({baseUrl:h,clientId:null}),p=["MODAL_CREATED"],f=(0,n.BX)({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),g={state:f,subscribe(e){return(0,n.B1)(f,(()=>e(f)))},getSdkProperties(){const{projectId:e,sdkType:t,sdkVersion:r}=l.H.state;return{projectId:e,st:t,sv:r||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(e){try{const t=c.U.state.address;if(p.includes(e.data.event)||"undefined"===typeof window)return;await d.post({path:"/e",params:g.getSdkProperties(),body:{eventId:o.w.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:e.timestamp,props:{...e.data,address:t}}}),f.reportedErrors["FORBIDDEN"]=!1}catch(t){const e=t instanceof Error&&t.cause instanceof Response&&t.cause.status===i.o.HTTP_STATUS_CODES.FORBIDDEN&&!f.reportedErrors["FORBIDDEN"];e&&(u.h.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${(0,s.IP)()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),f.reportedErrors["FORBIDDEN"]=!0)}},sendEvent(e){f.timestamp=Date.now(),f.data=e,l.H.state.features?.analytics&&g._sendAnalyticsEvent(f)}}},31937:function(e,t,r){"use strict";function n(e){return{formatters:void 0,fees:void 0,serializers:void 0,...e}}r.d(t,{x:function(){return n}})},32330:function(e,t,r){"use strict";r.d(t,{z:function(){return o}});var n=r(69983),i=r(28356);const s=(0,n.BX)({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),o={state:s,subscribe(e){return(0,n.B1)(s,(()=>e(s)))},subscribeOpen(e){return(0,i.u$)(s,"open",e)},set(e){Object.assign(s,{...s,...e})}}},32603:function(e,t,r){"use strict";var n=r(655);e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:n(e)}},32979:function(e,t,r){"use strict";r.d(t,{sz:function(){return n}});const n={ether:-9,wei:9}},33315:function(e){!function(t,r){e.exports=r()}(0,(function(){"use strict";return{name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],r=e%100;return"["+e+(t[(r-20)%10]||t[r]||t[0])+"]"}}}))},33517:function(e,t,r){"use strict";var n=r(79504),i=r(79039),s=r(94901),o=r(36955),a=r(97751),c=r(33706),u=function(){},l=a("Reflect","construct"),h=/^\s*(?:class|function)\b/,d=n(h.exec),p=!h.test(u),f=function(e){if(!s(e))return!1;try{return l(u,[],e),!0}catch(t){return!1}},g=function(e){if(!s(e))return!1;switch(o(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return p||!!d(h,c(e))}catch(t){return!0}};g.sham=!0,e.exports=!l||i((function(){var e;return f(f.call)||!f(Object)||!f((function(){e=!0}))||e}))?g:f},33529:function(e,t,r){"use strict";r(44114);var n=Object.prototype.hasOwnProperty,i="~";function s(){}function o(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function a(e,t,r,n,s){if("function"!==typeof r)throw new TypeError("The listener must be a function");var a=new o(r,n||e,s),c=i?i+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function c(e,t){0===--e._eventsCount?e._events=new s:delete e._events[t]}function u(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(i=!1)),u.prototype.eventNames=function(){var e,t,r=[];if(0===this._eventsCount)return r;for(t in e=this._events)n.call(e,t)&&r.push(i?t.slice(1):t);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},u.prototype.listeners=function(e){var t=i?i+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,s=r.length,o=new Array(s);n<s;n++)o[n]=r[n].fn;return o},u.prototype.listenerCount=function(e){var t=i?i+e:e,r=this._events[t];return r?r.fn?1:r.length:0},u.prototype.emit=function(e,t,r,n,s,o){var a=i?i+e:e;if(!this._events[a])return!1;var c,u,l=this._events[a],h=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,r),!0;case 4:return l.fn.call(l.context,t,r,n),!0;case 5:return l.fn.call(l.context,t,r,n,s),!0;case 6:return l.fn.call(l.context,t,r,n,s,o),!0}for(u=1,c=new Array(h-1);u<h;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var d,p=l.length;for(u=0;u<p;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),h){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,r);break;case 4:l[u].fn.call(l[u].context,t,r,n);break;default:if(!c)for(d=1,c=new Array(h-1);d<h;d++)c[d-1]=arguments[d];l[u].fn.apply(l[u].context,c)}}return!0},u.prototype.on=function(e,t,r){return a(this,e,t,r,!1)},u.prototype.once=function(e,t,r){return a(this,e,t,r,!0)},u.prototype.removeListener=function(e,t,r,n){var s=i?i+e:e;if(!this._events[s])return this;if(!t)return c(this,s),this;var o=this._events[s];if(o.fn)o.fn!==t||n&&!o.once||r&&o.context!==r||c(this,s);else{for(var a=0,u=[],l=o.length;a<l;a++)(o[a].fn!==t||n&&!o[a].once||r&&o[a].context!==r)&&u.push(o[a]);u.length?this._events[s]=1===u.length?u[0]:u:c(this,s)}return this},u.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&c(this,t)):(this._events=new s,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=i,u.EventEmitter=u,e.exports=u},33580:function(e,t,r){"use strict";r.d(t,{EK:function(){return s},x5:function(){return i}});var n=r(96030);const i=new n.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),s=(new n.PublicKey("TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb"),new n.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"));new n.PublicKey("So11111111111111111111111111111111111111112"),new n.PublicKey("9pan9bMn5HatX4EJdBwg9VgCa7Uz5HL8N1m5D3NdXejP")},33590:function(e,t,r){"use strict";r.r(t),r.d(t,{__assign:function(){return s},__asyncDelegator:function(){return v},__asyncGenerator:function(){return b},__asyncValues:function(){return _},__await:function(){return w},__awaiter:function(){return l},__classPrivateFieldGet:function(){return S},__classPrivateFieldSet:function(){return C},__createBinding:function(){return d},__decorate:function(){return a},__exportStar:function(){return p},__extends:function(){return i},__generator:function(){return h},__importDefault:function(){return I},__importStar:function(){return A},__makeTemplateObject:function(){return E},__metadata:function(){return u},__param:function(){return c},__read:function(){return g},__rest:function(){return o},__spread:function(){return m},__spreadArrays:function(){return y},__values:function(){return f}});r(44114);var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)};function i(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var s=function(){return s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)};function o(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}function a(e,t,r,n){var i,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}function c(e,t){return function(r,n){t(r,n,e)}}function u(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n["throw"](e))}catch(t){s(t)}}function c(e){e.done?r(e.value):i(e.value).then(o,a)}c((n=n.apply(e,t||[])).next())}))}function h(e,t){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(e){return function(t){return c([e,t])}}function c(s){if(r)throw new TypeError("Generator is already executing.");while(o)try{if(r=1,n&&(i=2&s[0]?n["return"]:s[0]?n["throw"]||((i=n["return"])&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(i=o.trys,!(i=i.length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(a){s=[6,a],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}function d(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}function p(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||(t[r]=e[r])}function f(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,s=r.call(e),o=[];try{while((void 0===t||t-- >0)&&!(n=s.next()).done)o.push(n.value)}catch(a){i={error:a}}finally{try{n&&!n.done&&(r=s["return"])&&r.call(s)}finally{if(i)throw i.error}}return o}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}function y(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function w(e){return this instanceof w?(this.v=e,this):new w(e)}function b(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),s=[];return n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n;function o(e){i[e]&&(n[e]=function(t){return new Promise((function(r,n){s.push([e,t,r,n])>1||a(e,t)}))})}function a(e,t){try{c(i[e](t))}catch(r){h(s[0][3],r)}}function c(e){e.value instanceof w?Promise.resolve(e.value.v).then(u,l):h(s[0][2],e)}function u(e){a("next",e)}function l(e){a("throw",e)}function h(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}}function v(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,i){t[n]=e[n]?function(t){return(r=!r)?{value:w(e[n](t)),done:"return"===n}:i?i(t):t}:i}}function _(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e="function"===typeof f?f(e):e[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,s){t=e[r](t),i(n,s,t.done,t.value)}))}}function i(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}}function E(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function A(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function I(e){return e&&e.__esModule?e:{default:e}}function S(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function C(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}},33883:function(e,t,r){"use strict";r.d(t,{JW:function(){return S},XX:function(){return q},c0:function(){return C},ge:function(){return z},qy:function(){return I},s6:function(){return k}});r(44114);
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const n=globalThis,i=n.trustedTypes,s=i?i.createPolicy("lit-html",{createHTML:e=>e}):void 0,o="$lit$",a=`lit$${Math.random().toFixed(9).slice(2)}$`,c="?"+a,u=`<${c}>`,l=document,h=()=>l.createComment(""),d=e=>null===e||"object"!=typeof e&&"function"!=typeof e,p=Array.isArray,f=e=>p(e)||"function"==typeof e?.[Symbol.iterator],g="[ \t\n\f\r]",m=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,y=/-->/g,w=/>/g,b=RegExp(`>|${g}(?:([^\\s"'>=/]+)(${g}*=${g}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),v=/'/g,_=/"/g,E=/^(?:script|style|textarea|title)$/i,A=e=>(t,...r)=>({_$litType$:e,strings:t,values:r}),I=A(1),S=A(2),C=(A(3),Symbol.for("lit-noChange")),k=Symbol.for("lit-nothing"),N=new WeakMap,O=l.createTreeWalker(l,129);function T(e,t){if(!p(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==s?s.createHTML(t):t}const R=(e,t)=>{const r=e.length-1,n=[];let i,s=2===t?"<svg>":3===t?"<math>":"",c=m;for(let l=0;l<r;l++){const t=e[l];let r,h,d=-1,p=0;for(;p<t.length&&(c.lastIndex=p,h=c.exec(t),null!==h);)p=c.lastIndex,c===m?"!--"===h[1]?c=y:void 0!==h[1]?c=w:void 0!==h[2]?(E.test(h[2])&&(i=RegExp("</"+h[2],"g")),c=b):void 0!==h[3]&&(c=b):c===b?">"===h[0]?(c=i??m,d=-1):void 0===h[1]?d=-2:(d=c.lastIndex-h[2].length,r=h[1],c=void 0===h[3]?b:'"'===h[3]?_:v):c===_||c===v?c=b:c===y||c===w?c=m:(c=b,i=void 0);const f=c===b&&e[l+1].startsWith("/>")?" ":"";s+=c===m?t+u:d>=0?(n.push(r),t.slice(0,d)+o+t.slice(d)+a+f):t+a+(-2===d?l:f)}return[T(e,s+(e[r]||"<?>")+(2===t?"</svg>":3===t?"</math>":"")),n]};class x{constructor({strings:e,_$litType$:t},r){let n;this.parts=[];let s=0,u=0;const l=e.length-1,d=this.parts,[p,f]=R(e,t);if(this.el=x.createElement(p,r),O.currentNode=this.el.content,2===t||3===t){const e=this.el.content.firstChild;e.replaceWith(...e.childNodes)}for(;null!==(n=O.nextNode())&&d.length<l;){if(1===n.nodeType){if(n.hasAttributes())for(const e of n.getAttributeNames())if(e.endsWith(o)){const t=f[u++],r=n.getAttribute(e).split(a),i=/([.?@])?(.*)/.exec(t);d.push({type:1,index:s,name:i[2],strings:r,ctor:"."===i[1]?L:"?"===i[1]?D:"@"===i[1]?W:U}),n.removeAttribute(e)}else e.startsWith(a)&&(d.push({type:6,index:s}),n.removeAttribute(e));if(E.test(n.tagName)){const e=n.textContent.split(a),t=e.length-1;if(t>0){n.textContent=i?i.emptyScript:"";for(let r=0;r<t;r++)n.append(e[r],h()),O.nextNode(),d.push({type:2,index:++s});n.append(e[t],h())}}}else if(8===n.nodeType)if(n.data===c)d.push({type:2,index:s});else{let e=-1;for(;-1!==(e=n.data.indexOf(a,e+1));)d.push({type:7,index:s}),e+=a.length-1}s++}}static createElement(e,t){const r=l.createElement("template");return r.innerHTML=e,r}}function P(e,t,r=e,n){if(t===C)return t;let i=void 0!==n?r._$Co?.[n]:r._$Cl;const s=d(t)?void 0:t._$litDirective$;return i?.constructor!==s&&(i?._$AO?.(!1),void 0===s?i=void 0:(i=new s(e),i._$AT(e,r,n)),void 0!==n?(r._$Co??=[])[n]=i:r._$Cl=i),void 0!==i&&(t=P(e,i._$AS(e,t.values),i,n)),t}class M{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:t},parts:r}=this._$AD,n=(e?.creationScope??l).importNode(t,!0);O.currentNode=n;let i=O.nextNode(),s=0,o=0,a=r[0];for(;void 0!==a;){if(s===a.index){let t;2===a.type?t=new B(i,i.nextSibling,this,e):1===a.type?t=new a.ctor(i,a.name,a.strings,this,e):6===a.type&&(t=new j(i,this,e)),this._$AV.push(t),a=r[++o]}s!==a?.index&&(i=O.nextNode(),s++)}return O.currentNode=l,n}p(e){let t=0;for(const r of this._$AV)void 0!==r&&(void 0!==r.strings?(r._$AI(e,r,t),t+=r.strings.length-2):r._$AI(e[t])),t++}}class B{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,t,r,n){this.type=2,this._$AH=k,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=r,this.options=n,this._$Cv=n?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===e?.nodeType&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=P(this,e,t),d(e)?e===k||null==e||""===e?(this._$AH!==k&&this._$AR(),this._$AH=k):e!==this._$AH&&e!==C&&this._(e):void 0!==e._$litType$?this.$(e):void 0!==e.nodeType?this.T(e):f(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==k&&d(this._$AH)?this._$AA.nextSibling.data=e:this.T(l.createTextNode(e)),this._$AH=e}$(e){const{values:t,_$litType$:r}=e,n="number"==typeof r?this._$AC(e):(void 0===r.el&&(r.el=x.createElement(T(r.h,r.h[0]),this.options)),r);if(this._$AH?._$AD===n)this._$AH.p(t);else{const e=new M(n,this),r=e.u(this.options);e.p(t),this.T(r),this._$AH=e}}_$AC(e){let t=N.get(e.strings);return void 0===t&&N.set(e.strings,t=new x(e)),t}k(e){p(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let r,n=0;for(const i of e)n===t.length?t.push(r=new B(this.O(h()),this.O(h()),this,this.options)):r=t[n],r._$AI(i),n++;n<t.length&&(this._$AR(r&&r._$AB.nextSibling,n),t.length=n)}_$AR(e=this._$AA.nextSibling,t){for(this._$AP?.(!1,!0,t);e&&e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){void 0===this._$AM&&(this._$Cv=e,this._$AP?.(e))}}class U{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,r,n,i){this.type=1,this._$AH=k,this._$AN=void 0,this.element=e,this.name=t,this._$AM=n,this.options=i,r.length>2||""!==r[0]||""!==r[1]?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=k}_$AI(e,t=this,r,n){const i=this.strings;let s=!1;if(void 0===i)e=P(this,e,t,0),s=!d(e)||e!==this._$AH&&e!==C,s&&(this._$AH=e);else{const n=e;let o,a;for(e=i[0],o=0;o<i.length-1;o++)a=P(this,n[r+o],t,o),a===C&&(a=this._$AH[o]),s||=!d(a)||a!==this._$AH[o],a===k?e=k:e!==k&&(e+=(a??"")+i[o+1]),this._$AH[o]=a}s&&!n&&this.j(e)}j(e){e===k?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class L extends U{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===k?void 0:e}}class D extends U{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==k)}}class W extends U{constructor(e,t,r,n,i){super(e,t,r,n,i),this.type=5}_$AI(e,t=this){if((e=P(this,e,t,0)??k)===C)return;const r=this._$AH,n=e===k&&r!==k||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,i=e!==k&&(r===k||n);n&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}}class j{constructor(e,t,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){P(this,e)}}const z={M:o,P:a,A:c,C:1,L:R,R:M,D:f,V:P,I:B,H:U,N:D,U:W,B:L,F:j},H=n.litHtmlPolyfillSupport;H?.(x,B),(n.litHtmlVersions??=[]).push("3.3.0");const q=(e,t,r)=>{const n=r?.renderBefore??t;let i=n._$litPart$;if(void 0===i){const e=r?.renderBefore??null;n._$litPart$=i=new B(t.insertBefore(h(),e),e,void 0,r??{})}return i._$AI(e),i}},34732:function(e,t,r){"use strict";function n(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function i(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function s(e,...t){if(!i(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function o(e){if("function"!==typeof e||"function"!==typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");n(e.outputLen),n(e.blockLen)}function a(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function c(e,t){s(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}r.d(t,{CC:function(){return a},DO:function(){return s},Fe:function(){return n},Ht:function(){return c},sd:function(){return o}})},35065:function(e,t,r){"use strict";r.d(t,{Vw:function(){return f},Fc:function(){return l},Id:function(){return p},O8:function(){return o},qv:function(){return c},po:function(){return m},Ow:function(){return a},ZJ:function(){return d},DH:function(){return s},ld:function(){return g}});const n="object"===typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;var i=r(34732);function s(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function o(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function a(e,t){return e<<32-t|e>>>t}const c=(()=>68===new Uint8Array(new Uint32Array([287454020]).buffer)[0])();function u(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}function l(e){for(let t=0;t<e.length;t++)e[t]=u(e[t])}function h(e){if("string"!==typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function d(e){return"string"===typeof e&&(e=h(e)),(0,i.DO)(e),e}function p(...e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];(0,i.DO)(r),t+=r.length}const r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){const t=e[n];r.set(t,i),i+=t.length}return r}class f{clone(){return this._cloneInto()}}function g(e){const t=t=>e().update(d(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function m(e=32){if(n&&"function"===typeof n.getRandomValues)return n.getRandomValues(new Uint8Array(e));if(n&&"function"===typeof n.randomBytes)return n.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}},36300:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});r(18111),r(7588);async function n(...e){const t=await fetch(...e);if(!t.ok){const e=new Error(`HTTP status code: ${t.status}`,{cause:t});throw e}return t}class i{constructor({baseUrl:e,clientId:t}){this.baseUrl=e,this.clientId=t}async get({headers:e,signal:t,cache:r,...i}){const s=this.createUrl(i),o=await n(s,{method:"GET",headers:e,signal:t,cache:r});return o.json()}async getBlob({headers:e,signal:t,...r}){const i=this.createUrl(r),s=await n(i,{method:"GET",headers:e,signal:t});return s.blob()}async post({body:e,headers:t,signal:r,...i}){const s=this.createUrl(i),o=await n(s,{method:"POST",headers:t,body:e?JSON.stringify(e):void 0,signal:r});return o.json()}async put({body:e,headers:t,signal:r,...i}){const s=this.createUrl(i),o=await n(s,{method:"PUT",headers:t,body:e?JSON.stringify(e):void 0,signal:r});return o.json()}async delete({body:e,headers:t,signal:r,...i}){const s=this.createUrl(i),o=await n(s,{method:"DELETE",headers:t,body:e?JSON.stringify(e):void 0,signal:r});return o.json()}createUrl({path:e,params:t}){const r=new URL(e,this.baseUrl);return t&&Object.entries(t).forEach((([e,t])=>{t&&r.searchParams.append(e,t)})),this.clientId&&r.searchParams.append("clientId",this.clientId),r}}},36975:function(e,t,r){"use strict";var n;r.d(t,{v4:function(){return f}});var i=new Uint8Array(16);function s(){if(!n&&(n="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),!n))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(i)}r(44114);var o=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function a(e){return"string"===typeof e&&o.test(e)}for(var c=a,u=[],l=0;l<256;++l)u.push((l+256).toString(16).substr(1));function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(u[e[t+0]]+u[e[t+1]]+u[e[t+2]]+u[e[t+3]]+"-"+u[e[t+4]]+u[e[t+5]]+"-"+u[e[t+6]]+u[e[t+7]]+"-"+u[e[t+8]]+u[e[t+9]]+"-"+u[e[t+10]]+u[e[t+11]]+u[e[t+12]]+u[e[t+13]]+u[e[t+14]]+u[e[t+15]]).toLowerCase();if(!c(r))throw TypeError("Stringified UUID is invalid");return r}var d=h;function p(e,t,r){e=e||{};var n=e.random||(e.rng||s)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var i=0;i<16;++i)t[r+i]=n[i];return t}return d(n)}var f=p},37056:function(e,t,r){"use strict";r.d(t,{vE:function(){return u},kb:function(){return a}});var n=r(91114),i=(r(44114),r(90712)),s=r(25019),o=class extends s{constructor(e,t,r){super(),(0,n.A)(this,"socket",void 0),this.socket=new window.WebSocket(e,r),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=e=>this.emit("message",e.data),this.socket.onerror=e=>this.emit("error",e),this.socket.onclose=e=>{this.emit("close",e.code,e.reason)}}send(e,t,r){const n=r||t;try{this.socket.send(e),n()}catch(i){n(i)}}close(e,t){this.socket.close(e,t)}addEventListener(e,t,r){this.socket.addEventListener(e,t,r)}};function a(e,t){return new o(e,t)}var c=class{encode(e){return JSON.stringify(e)}decode(e){return JSON.parse(e)}},u=class extends s{constructor(e,t="ws://localhost:8080",{autoconnect:r=!0,reconnect:i=!0,reconnect_interval:s=1e3,max_reconnects:o=5,...a}={},u,l){super(),(0,n.A)(this,"address",void 0),(0,n.A)(this,"rpc_id",void 0),(0,n.A)(this,"queue",void 0),(0,n.A)(this,"options",void 0),(0,n.A)(this,"autoconnect",void 0),(0,n.A)(this,"ready",void 0),(0,n.A)(this,"reconnect",void 0),(0,n.A)(this,"reconnect_timer_id",void 0),(0,n.A)(this,"reconnect_interval",void 0),(0,n.A)(this,"max_reconnects",void 0),(0,n.A)(this,"rest_options",void 0),(0,n.A)(this,"current_reconnects",void 0),(0,n.A)(this,"generate_request_id",void 0),(0,n.A)(this,"socket",void 0),(0,n.A)(this,"webSocketFactory",void 0),(0,n.A)(this,"dataPack",void 0),this.webSocketFactory=e,this.queue={},this.rpc_id=0,this.address=t,this.autoconnect=r,this.ready=!1,this.reconnect=i,this.reconnect_timer_id=void 0,this.reconnect_interval=s,this.max_reconnects=o,this.rest_options=a,this.current_reconnects=0,this.generate_request_id=u||(()=>"number"===typeof this.rpc_id?++this.rpc_id:Number(this.rpc_id)+1),this.dataPack=l||new c,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(e,t,r,n){return n||"object"!==typeof r||(n=r,r=null),new Promise(((i,s)=>{if(!this.ready)return s(new Error("socket not ready"));const o=this.generate_request_id(e,t),a={jsonrpc:"2.0",method:e,params:t||void 0,id:o};this.socket.send(this.dataPack.encode(a),n,(e=>{if(e)return s(e);this.queue[o]={promise:[i,s]},r&&(this.queue[o].timeout=setTimeout((()=>{delete this.queue[o],s(new Error("reply timeout"))}),r))}))}))}async login(e){const t=await this.call("rpc.login",e);if(!t)throw new Error("authentication failed");return t}async listMethods(){return await this.call("__listMethods")}notify(e,t){return new Promise(((r,n)=>{if(!this.ready)return n(new Error("socket not ready"));const i={jsonrpc:"2.0",method:e,params:t};this.socket.send(this.dataPack.encode(i),(e=>{if(e)return n(e);r()}))}))}async subscribe(e){"string"===typeof e&&(e=[e]);const t=await this.call("rpc.on",e);if("string"===typeof e&&"ok"!==t[e])throw new Error("Failed subscribing to an event '"+e+"' with: "+t[e]);return t}async unsubscribe(e){"string"===typeof e&&(e=[e]);const t=await this.call("rpc.off",e);if("string"===typeof e&&"ok"!==t[e])throw new Error("Failed unsubscribing from an event with: "+t);return t}close(e,t){this.socket.close(e||1e3,t)}setAutoReconnect(e){this.reconnect=e}setReconnectInterval(e){this.reconnect_interval=e}setMaxReconnects(e){this.max_reconnects=e}_connect(e,t){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,t),this.socket.addEventListener("open",(()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0})),this.socket.addEventListener("message",(({data:e})=>{e instanceof ArrayBuffer&&(e=i.Buffer.from(e).toString());try{e=this.dataPack.decode(e)}catch(t){return}if(e.notification&&this.listeners(e.notification).length){if(!Object.keys(e.params).length)return this.emit(e.notification);const t=[e.notification];if(e.params.constructor===Object)t.push(e.params);else for(let r=0;r<e.params.length;r++)t.push(e.params[r]);return Promise.resolve().then((()=>{this.emit.apply(this,t)}))}if(!this.queue[e.id])return e.method?Promise.resolve().then((()=>{this.emit(e.method,e?.params)})):void 0;"error"in e==="result"in e&&this.queue[e.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[e.id].timeout&&clearTimeout(this.queue[e.id].timeout),e.error?this.queue[e.id].promise[1](e.error):this.queue[e.id].promise[0](e.result),delete this.queue[e.id]})),this.socket.addEventListener("error",(e=>this.emit("error",e))),this.socket.addEventListener("close",(({code:r,reason:n})=>{this.ready&&setTimeout((()=>this.emit("close",r,n)),0),this.ready=!1,this.socket=void 0,1e3!==r&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||0===this.max_reconnects)&&(this.reconnect_timer_id=setTimeout((()=>this._connect(e,t)),this.reconnect_interval)))}))}}},37583:function(e,t,r){"use strict";r.d(t,{r:function(){return n}});const n="2.29.1"},37903:function(e,t,r){"use strict";r.d(t,{W:function(){return I}});r(44114),r(18111),r(22489),r(20116),r(30531),r(7588),r(61701),r(13579),r(17642),r(58004),r(33853),r(45876),r(32475),r(15024),r(31698);var n=r(69983),i=r(28356),s=r(46104),o=r(80955),a=r(25638);function c(e,t){return a.a.getConnectorId(e)===t}function u(e){const t=Array.from(I.state.chains.keys());let r=[];return e?(r.push([e,I.state.chains.get(e)]),c(e,o.o.CONNECTOR_ID.WALLET_CONNECT)?t.forEach((t=>{t!==e&&c(t,o.o.CONNECTOR_ID.WALLET_CONNECT)&&r.push([t,I.state.chains.get(t)])})):c(e,o.o.CONNECTOR_ID.AUTH)&&t.forEach((t=>{t!==e&&c(t,o.o.CONNECTOR_ID.AUTH)&&r.push([t,I.state.chains.get(t)])}))):r=Array.from(I.state.chains.entries()),r}var l=r(20169),h=r(81753),d=r(81653),p=r(58843),f=r(78134),g=r(31843),m=r(96577),y=r(64529),w=r(32330),b=r(80347),v=r(77888);const _={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[],user:void 0},E={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},A=(0,n.BX)({chains:(0,i.zC)(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),I={state:A,subscribe(e){return(0,n.B1)(A,(()=>{e(A)}))},subscribeKey(e,t){return(0,i.u$)(A,e,t)},subscribeChainProp(e,t,r){let i;return(0,n.B1)(A.chains,(()=>{const n=r||A.activeChain;if(n){const r=A.chains.get(n)?.[e];i!==r&&(i=r,t(r))}}))},initialize(e,t,r){const{chainId:i,namespace:s}=d.i.getActiveNetworkProps(),o=t?.find((e=>e.id.toString()===i?.toString())),a=e.find((e=>e?.namespace===s)),c=a||e?.[0],u=e.map((e=>e.namespace)).filter((e=>void 0!==e)),l=y.H.state.enableEmbedded?new Set([...u]):new Set([...t?.map((e=>e.chainNamespace))??[]]);0!==e?.length&&c||(A.noAdapters=!0),A.noAdapters||(A.activeChain=c?.namespace,A.activeCaipNetwork=o,this.setChainNetworkData(c?.namespace,{caipNetwork:o}),A.activeChain&&w.z.set({activeChain:c?.namespace})),l.forEach((e=>{const i=t?.filter((t=>t.chainNamespace===e));I.state.chains.set(e,{namespace:e,networkState:(0,n.BX)({...E,caipNetwork:i?.[0]}),accountState:(0,n.BX)(_),caipNetworks:i??[],...r}),this.setRequestedCaipNetworks(i??[],e)}))},removeAdapter(e){if(A.activeChain===e){const t=Array.from(A.chains.entries()).find((([t])=>t!==e));if(t){const e=t[1]?.caipNetworks?.[0];e&&this.setActiveCaipNetwork(e)}}A.chains.delete(e)},addAdapter(e,{networkControllerClient:t,connectionControllerClient:r},n){A.chains.set(e.namespace,{namespace:e.namespace,networkState:{...E,caipNetwork:n[0]},accountState:_,caipNetworks:n,connectionControllerClient:r,networkControllerClient:t}),this.setRequestedCaipNetworks(n?.filter((t=>t.chainNamespace===e.namespace))??[],e.namespace)},addNetwork(e){const t=A.chains.get(e.chainNamespace);if(t){const r=[...t.caipNetworks||[]];t.caipNetworks?.find((t=>t.id===e.id))||r.push(e),A.chains.set(e.chainNamespace,{...t,caipNetworks:r}),this.setRequestedCaipNetworks(r,e.chainNamespace),a.a.filterByNamespace(e.chainNamespace,!0)}},removeNetwork(e,t){const r=A.chains.get(e);if(r){const n=A.activeCaipNetwork?.id===t,i=[...r.caipNetworks?.filter((e=>e.id!==t))||[]];n&&r?.caipNetworks?.[0]&&this.setActiveCaipNetwork(r.caipNetworks[0]),A.chains.set(e,{...r,caipNetworks:i}),this.setRequestedCaipNetworks(i||[],e),0===i.length&&a.a.filterByNamespace(e,!1)}},setAdapterNetworkState(e,t){const r=A.chains.get(e);r&&(r.networkState={...r.networkState||E,...t},A.chains.set(e,r))},setChainAccountData(e,t,r=!0){if(!e)throw new Error("Chain is required to update chain account data");const n=A.chains.get(e);if(n){const r={...n.accountState||_,...t};A.chains.set(e,{...n,accountState:r}),1!==A.chains.size&&A.activeChain!==e||(t.caipAddress&&(A.activeCaipAddress=t.caipAddress),p.U.replaceState(r))}},setChainNetworkData(e,t){if(!e)return;const r=A.chains.get(e);if(r){const n={...r.networkState||E,...t};A.chains.set(e,{...r,networkState:n})}},setAccountProp(e,t,r,n=!0){this.setChainAccountData(r,{[e]:t},n),"status"===e&&"disconnected"===t&&r&&a.a.removeConnectorId(r)},setActiveNamespace(e){A.activeChain=e;const t=e?A.chains.get(e):void 0,r=t?.networkState?.caipNetwork;r?.id&&e&&(A.activeCaipAddress=t?.accountState?.caipAddress,A.activeCaipNetwork=r,this.setChainNetworkData(e,{caipNetwork:r}),d.i.setActiveCaipNetworkId(r?.caipNetworkId),w.z.set({activeChain:e,selectedNetworkId:r?.caipNetworkId}))},setActiveCaipNetwork(e){if(!e)return;A.activeChain!==e.chainNamespace&&this.setIsSwitchingNamespace(!0);const t=A.chains.get(e.chainNamespace);A.activeChain=e.chainNamespace,A.activeCaipNetwork=e,this.setChainNetworkData(e.chainNamespace,{caipNetwork:e}),A.activeCaipAddress=t?.accountState?.address?`${e.chainNamespace}:${e.id}:${t?.accountState?.address}`:void 0,this.setAccountProp("caipAddress",A.activeCaipAddress,e.chainNamespace),t&&p.U.replaceState(t.accountState),v.R.resetSend(),w.z.set({activeChain:A.activeChain,selectedNetworkId:A.activeCaipNetwork?.caipNetworkId}),d.i.setActiveCaipNetworkId(e.caipNetworkId);const r=this.checkIfSupportedNetwork(e.chainNamespace);r||!y.H.state.enableNetworkSwitch||y.H.state.allowUnsupportedChain||f.x.state.wcBasic||this.showUnsupportedChainUI()},addCaipNetwork(e){if(!e)return;const t=A.chains.get(e.chainNamespace);t&&t?.caipNetworks?.push(e)},async switchActiveNamespace(e){if(!e)return;const t=e!==I.state.activeChain,r=I.getNetworkData(e)?.caipNetwork,n=I.getCaipNetworkByNamespace(e,r?.id);t&&n&&await I.switchActiveNetwork(n)},async switchActiveNetwork(e){const t=I.state.chains.get(I.state.activeChain),r=!t?.caipNetworks?.some((e=>e.id===A.activeCaipNetwork?.id));r&&b.I.goBack();const n=this.getNetworkControllerClient(e.chainNamespace);n&&(await n.switchCaipNetwork(e),g.E.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:e.caipNetworkId}}))},getNetworkControllerClient(e){const t=e||A.activeChain,r=A.chains.get(t);if(!r)throw new Error("Chain adapter not found");if(!r.networkControllerClient)throw new Error("NetworkController client not set");return r.networkControllerClient},getConnectionControllerClient(e){const t=e||A.activeChain;if(!t)throw new Error("Chain is required to get connection controller client");const r=A.chains.get(t);if(!r?.connectionControllerClient)throw new Error("ConnectionController client not set");return r.connectionControllerClient},getAccountProp(e,t){let r=A.activeChain;if(t&&(r=t),!r)return;const n=A.chains.get(r)?.accountState;return n?n[e]:void 0},getNetworkProp(e,t){const r=A.chains.get(t)?.networkState;if(r)return r[e]},getRequestedCaipNetworks(e){const t=A.chains.get(e),{approvedCaipNetworkIds:r=[],requestedCaipNetworks:n=[]}=t?.networkState||{},i=h.w.sortRequestedNetworks(r,n);return i},getAllRequestedCaipNetworks(){const e=[];return A.chains.forEach((t=>{const r=this.getRequestedCaipNetworks(t.namespace);e.push(...r)})),e},setRequestedCaipNetworks(e,t){this.setAdapterNetworkState(t,{requestedCaipNetworks:e});const r=this.getAllRequestedCaipNetworks(),n=r.map((e=>e.chainNamespace)),i=Array.from(new Set(n));a.a.filterByNamespaces(i)},getAllApprovedCaipNetworkIds(){const e=[];return A.chains.forEach((t=>{const r=this.getApprovedCaipNetworkIds(t.namespace);e.push(...r)})),e},getActiveCaipNetwork(){return A.activeCaipNetwork},getActiveCaipAddress(){return A.activeCaipAddress},getApprovedCaipNetworkIds(e){const t=A.chains.get(e),r=t?.networkState?.approvedCaipNetworkIds||[];return r},async setApprovedCaipNetworksData(e){const t=this.getNetworkControllerClient(),r=await(t?.getApprovedCaipNetworksData());this.setAdapterNetworkState(e,{approvedCaipNetworkIds:r?.approvedCaipNetworkIds,supportsAllNetworks:r?.supportsAllNetworks})},checkIfSupportedNetwork(e,t){const r=t||A.activeCaipNetwork,n=this.getRequestedCaipNetworks(e);return!n.length||n?.some((e=>e.id===r?.id))},checkIfSupportedChainId(e){if(!A.activeChain)return!0;const t=this.getRequestedCaipNetworks(A.activeChain);return t?.some((t=>t.id===e))},setSmartAccountEnabledNetworks(e,t){this.setAdapterNetworkState(t,{smartAccountEnabledNetworks:e})},checkIfSmartAccountEnabled(){const e=s.L.caipNetworkIdToNumber(A.activeCaipNetwork?.caipNetworkId),t=A.activeChain;if(!t||!e)return!1;const r=this.getNetworkProp("smartAccountEnabledNetworks",t);return Boolean(r?.includes(Number(e)))},getActiveNetworkTokenAddress(){const e=A.activeCaipNetwork?.chainNamespace||"eip155",t=A.activeCaipNetwork?.id||1,r=l.oU.NATIVE_TOKEN_ADDRESS[e];return`${e}:${t}:${r}`},showUnsupportedChainUI(){m.W.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const e=A.activeCaipNetwork;return Boolean(e?.chainNamespace&&l.oU.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(e.chainNamespace))},resetNetwork(e){this.setAdapterNetworkState(e,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]})},resetAccount(e){const t=e;if(!t)throw new Error("Chain is required to set account prop");A.activeCaipAddress=void 0,this.setChainAccountData(t,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountTypes:void 0,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,allAccounts:[],user:void 0,status:"disconnected"}),a.a.removeConnectorId(t)},async disconnect(e){const t=u(e);try{v.R.resetSend();const r=await Promise.allSettled(t.map((async([e,t])=>{try{const{caipAddress:r}=this.getAccountData(e)||{};r&&t.connectionControllerClient?.disconnect&&await t.connectionControllerClient.disconnect(e),this.resetAccount(e),this.resetNetwork(e)}catch(r){throw new Error(`Failed to disconnect chain ${e}: ${r.message}`)}})));f.x.resetWcConnection();const n=r.filter((e=>"rejected"===e.status));if(n.length>0)throw new Error(n.map((e=>e.reason.message)).join(", "));d.i.deleteConnectedSocialProvider(),e?a.a.removeConnectorId(e):a.a.resetConnectorIds(),g.E.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:e||"all"}})}catch(r){console.error(r.message||"Failed to disconnect chains"),g.E.sendEvent({type:"track",event:"DISCONNECT_ERROR",properties:{message:r.message||"Failed to disconnect chains"}})}},setIsSwitchingNamespace(e){A.isSwitchingNamespace=e},getFirstCaipNetworkSupportsAuthConnector(){const e=[];let t;if(A.chains.forEach((t=>{o.o.AUTH_CONNECTOR_SUPPORTED_CHAINS.find((e=>e===t.namespace))&&t.namespace&&e.push(t.namespace)})),e.length>0){const r=e[0];return t=r?A.chains.get(r)?.caipNetworks?.[0]:void 0,t}},getAccountData(e){return e?I.state.chains.get(e)?.accountState:p.U.state},getNetworkData(e){const t=e||A.activeChain;if(t)return I.state.chains.get(t)?.networkState},getCaipNetworkByNamespace(e,t){if(!e)return;const r=I.state.chains.get(e),n=r?.caipNetworks?.find((e=>e.id===t));return n||(r?.networkState?.caipNetwork||r?.caipNetworks?.[0])},getRequestedCaipNetworkIds(){const e=a.a.state.filterByNamespace,t=e?[A.chains.get(e)]:Array.from(A.chains.values());return t.flatMap((e=>e?.caipNetworks||[])).map((e=>e.caipNetworkId))},getCaipNetworks(e){return e?I.getRequestedCaipNetworks(e):I.getAllRequestedCaipNetworks()}}},37986:function(e,t,r){"use strict";r.d(t,{Sl:function(){return s}});var n=r(27578),i=r(57593);function s(e,{size:t}){if((0,i.E)(e)>t)throw new n.u({givenSize:(0,i.E)(e),maxSize:t})}},38574:function(e,t,r){"use strict";var n=r(84215);e.exports="NODE"===n},38673:function(e,t,r){"use strict";r.d(t,{$:function(){return u}});r(18111),r(22489),r(61701),r(13579);var n=r(53752),i=r(18894),s=r(81271);const{get:o,on:a}=(0,i.d)();let c=[];function u(e,t,r){const n=[a("register",((...n)=>{c=[...c,...l(n,e,t)],r(...c)})),a("unregister",((...e)=>{c=c.filter((t=>e.some((e=>e.name===t.wallet.name)))),r(...c)}))];return c=l(o(),e,t),r(...c),()=>n.forEach((e=>e()))}function l(e,t,r){return e.filter(n.Z).map((e=>new s.e({wallet:e,requestedChains:t,getActiveChain:r})))}},39190:function(e,t,r){"use strict";r.d(t,{f:function(){return g}});r(18111),r(61701);var n=r(69983),i=r(28356);const s=2147483648,o={convertEVMChainIdToCoinType(e){if(e>=s)throw new Error("Invalid chainId");return(s|e)>>>0}};var a=r(81653),c=r(58843),u=r(65642),l=r(37903),h=r(78134),d=r(25638),p=r(80347);const f=(0,n.BX)({suggestions:[],loading:!1}),g={state:f,subscribe(e){return(0,n.B1)(f,(()=>e(f)))},subscribeKey(e,t){return(0,i.u$)(f,e,t)},async resolveName(e){try{return await u.T.lookupEnsName(e)}catch(t){const e=t;throw new Error(e?.reasons?.[0]?.description||"Error resolving name")}},async isNameRegistered(e){try{return await u.T.lookupEnsName(e),!0}catch{return!1}},async getSuggestions(e){try{f.loading=!0,f.suggestions=[];const t=await u.T.getEnsNameSuggestions(e);return f.suggestions=t.suggestions.map((e=>({...e,name:e.name})))||[],f.suggestions}catch(t){const e=this.parseEnsApiError(t,"Error fetching name suggestions");throw new Error(e)}finally{f.loading=!1}},async getNamesForAddress(e){try{const t=l.W.state.activeCaipNetwork;if(!t)return[];const r=a.i.getEnsFromCacheForAddress(e);if(r)return r;const n=await u.T.reverseLookupEnsName({address:e});return a.i.updateEnsCache({address:e,ens:n,timestamp:Date.now()}),n}catch(t){const e=this.parseEnsApiError(t,"Error fetching names for address");throw new Error(e)}},async registerName(e){const t=l.W.state.activeCaipNetwork;if(!t)throw new Error("Network not found");const r=c.U.state.address,n=d.a.getAuthConnector();if(!r||!n)throw new Error("Address or auth connector not found");f.loading=!0;try{const n=JSON.stringify({name:e,attributes:{},timestamp:Math.floor(Date.now()/1e3)});p.I.pushTransactionStack({view:"RegisterAccountNameSuccess",goBack:!1,replace:!0,onCancel(){f.loading=!1}});const i=await h.x.signMessage(n),s=t.id;if(!s)throw new Error("Network not found");const a=o.convertEVMChainIdToCoinType(Number(s));await u.T.registerEnsName({coinType:a,address:r,signature:i,message:n}),c.U.setProfileName(e,t.chainNamespace),p.I.replace("RegisterAccountNameSuccess")}catch(i){const t=this.parseEnsApiError(i,`Error registering name ${e}`);throw p.I.replace("RegisterAccountName"),new Error(t)}finally{f.loading=!1}},validateName(e){return/^[a-zA-Z0-9-]{4,}$/u.test(e)},parseEnsApiError(e,t){const r=e;return r?.reasons?.[0]?.description||t}}},40206:function(e,t,r){"use strict";r(44114),r(18111),r(22489),t.g=void 0;const n=r(59515);function i(){let e,t;try{e=n.getDocumentOrThrow(),t=n.getLocationOrThrow()}catch(d){return null}function r(){const r=e.getElementsByTagName("link"),n=[];for(let e=0;e<r.length;e++){const i=r[e],s=i.getAttribute("rel");if(s&&s.toLowerCase().indexOf("icon")>-1){const e=i.getAttribute("href");if(e)if(-1===e.toLowerCase().indexOf("https:")&&-1===e.toLowerCase().indexOf("http:")&&0!==e.indexOf("//")){let r=t.protocol+"//"+t.host;if(0===e.indexOf("/"))r+=e;else{const n=t.pathname.split("/");n.pop();const i=n.join("/");r+=i+"/"+e}n.push(r)}else if(0===e.indexOf("//")){const r=t.protocol+e;n.push(r)}else n.push(e)}}return n}function i(...t){const r=e.getElementsByTagName("meta");for(let e=0;e<r.length;e++){const n=r[e],i=["itemprop","property","name"].map((e=>n.getAttribute(e))).filter((e=>!!e&&t.includes(e)));if(i.length&&i){const e=n.getAttribute("content");if(e)return e}}return""}function s(){let t=i("name","og:site_name","og:title","twitter:title");return t||(t=e.title),t}function o(){const e=i("description","og:description","twitter:description","keywords");return e}const a=s(),c=o(),u=t.origin,l=r(),h={description:c,url:u,icons:l,name:a};return h}t.g=i},41171:function(e,t,r){"use strict";r.d(t,{_:function(){return k}});r(44114),r(18111),r(20116),r(61701);var n=r(80955),i=r(9051),s=r(25638),o=r(78134),a=r(31843),c=r(20169),u=r(32330),l=r(65768),h=r(58843),d=r(37903),p=r(64529),f=r(81753),g=r(19349),m=r(81653),y=r(68174),w=r(2843),b=r(53291),v=r(19816),_=r(66813),E=r(91889),A=r(1555),I=r(64537),S=r(76045);let C=!1;class k extends S._{setupAuthConnectorListeners(e){e.onRpcRequest((t=>{E.Q.checkIfRequestExists(t)?E.Q.checkIfRequestIsSafe(t)||this.handleUnsafeRPCRequest():(this.open(),console.error(A.Vl.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:t.method}),setTimeout((()=>{this.showErrorMessage(A.Vl.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)}),300),e.rejectRpcRequests())})),e.onRpcError((()=>{const e=this.isOpen();e&&(this.isTransactionStackEmpty()?this.close(!0):this.popTransactionStack(!0))})),e.onRpcSuccess(((e,t)=>{const r=E.Q.checkIfRequestIsSafe(t),n=h.U.state.address,i=d.W.state.activeCaipNetwork;r||(this.isTransactionStackEmpty()?(this.close(!0),n&&i?.id&&this.updateNativeBalance(n,i.id,i.chainNamespace)):(this.popTransactionStack(),n&&i?.id&&this.updateNativeBalance(n,i.id,i.chainNamespace)))})),e.onNotConnected((()=>{const e=d.W.state.activeChain,t=s.a.getConnectorId(e),r=t===n.o.CONNECTOR_ID.AUTH;r&&(this.setCaipAddress(void 0,e),this.setLoading(!1,e))})),e.onConnect((async t=>{const r=d.W.state.activeChain,i=r===n.o.CHAIN.EVM?`eip155:${t.chainId}:${t.address}`:`${t.chainId}:${t.address}`,s=t.preferredAccountType||h.U.state.preferredAccountTypes?.[r]||p.H.state.defaultAccountTypes[r];w.y.isLowerCaseMatch(t.address,h.U.state.address)||this.syncIdentity({address:t.address,chainId:t.chainId,chainNamespace:r}),this.setCaipAddress(i,r),this.setUser({...h.U.state.user||{},...t},r),this.setSmartAccountDeployed(Boolean(t.smartAccountDeployed),r),this.setPreferredAccountType(s,r);const o=t.accounts?.map((e=>f.w.createAccount(r,e.address,e.type||h.U.state.preferredAccountTypes?.[r]||p.H.state.defaultAccountTypes[r])));this.setAllAccounts(o||[f.w.createAccount(r,t.address,t.preferredAccountType||s)],r),await e.getSmartAccountEnabledNetworks(),this.setLoading(!1,r)})),e.onSocialConnected((({userName:e})=>{this.setUser({...h.U.state.user||{},username:e},d.W.state.activeChain)})),e.onGetSmartAccountEnabledNetworks((e=>{this.setSmartAccountEnabledNetworks(e,d.W.state.activeChain)})),e.onSetPreferredAccount((({address:e,type:t})=>{e&&this.setPreferredAccountType(t,d.W.state.activeChain)}))}async syncAuthConnector(e,t){const r=n.o.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(t);if(!r)return;this.setLoading(!0,t);const o=e.getLoginEmailUsed();this.setLoading(o,t),o&&this.setStatus("connecting",t);const a=e.getEmail(),c=e.getUsername();this.setUser({...h.U.state?.user||{},username:c,email:a},d.W.state.activeChain),this.setupAuthConnectorListeners(e);const{isConnected:u}=await e.isConnected(),l=g.W.getSnapshot(),f=p.H.getSnapshot();e.syncDappData({metadata:f.metadata,sdkVersion:f.sdkVersion,projectId:f.projectId,sdkType:f.sdkType}),e.syncTheme({themeMode:l.themeMode,themeVariables:l.themeVariables,w3mThemeVariables:(0,i.o)(l.themeVariables,l.themeMode)}),t&&r&&(u&&this.connectionControllerClient?.connectExternal?(await(this.connectionControllerClient?.connectExternal({id:n.o.CONNECTOR_ID.AUTH,info:{name:n.o.CONNECTOR_ID.AUTH},type:b.o.CONNECTOR_TYPE_AUTH,provider:e,chainId:d.W.state.activeCaipNetwork?.id,chain:t})),this.setStatus("connected",t)):s.a.getConnectorId(t)===n.o.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",t),m.i.removeConnectedNamespace(t))),this.setLoading(!1,t)}async checkExistingTelegramSocialConnection(e){try{if(!f.w.isTelegram())return;const t=m.i.getTelegramSocialProvider();if(!t)return;if("undefined"===typeof window||"undefined"===typeof document)return;const r=new URL(window.location.href),n=r.searchParams.get("result_uri");if(!n)return;h.U.setSocialProvider(t,e),await(this.authProvider?.init());const i=s.a.getAuthConnector();t&&i&&(this.setLoading(!0,e),await i.provider.connectSocial(n),await o.x.connectExternal(i,i.chain),m.i.setConnectedSocialProvider(t),m.i.removeTelegramSocialProvider(),a.E.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:t}}))}catch(t){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",t)}try{const e=new URL(window.location.href);e.searchParams.delete("result_uri"),window.history.replaceState({},document.title,e.toString())}catch(t){console.error("tma social login failed",t)}}createAuthProvider(e){const t=n.o.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e);if(!t)return;const r=void 0===this.options?.features?.email?c.oU.DEFAULT_FEATURES.email:this.options?.features?.email,i=this.options?.features?.socials?this.options?.features?.socials?.length>0:this.options?.features?.socials??c.oU.DEFAULT_FEATURES.socials,s=r||i;!this.authProvider&&this.options?.projectId&&s&&(this.authProvider=I.v.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:this.getCaipNetwork(e)?.caipNetworkId,abortController:v.R.EmbeddedWalletAbortController,onTimeout:e=>{"iframe_load_failed"===e?y.h.open(v.R.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):"iframe_request_timeout"===e?y.h.open(v.R.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):"unverified_domain"===e&&y.h.open(v.R.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}}),u.z.subscribeOpen((e=>{!e&&this.isTransactionStackEmpty()&&this.authProvider?.rejectRpcRequests()})),e===n.o.CHAIN.EVM&&h.U.state.preferredAccountTypes?.eip155&&this.authProvider.setPreferredAccount(h.U.state.preferredAccountTypes?.eip155),this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){this.createAuthProvider(e),this.authProvider&&this.chainAdapters?.[e]?.setAuthProvider?.(this.authProvider)}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&l.N.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){if(!e)return;const t=d.W.state.activeChain,r=e.chainNamespace,i=this.getAddressByChainNamespace(e.chainNamespace);if(e.chainNamespace===d.W.state.activeChain&&i){const t=this.getAdapter(r),n=_.A.getProvider(r),i=_.A.getProviderId(r);await(t?.switchNetwork({caipNetwork:e,provider:n,providerType:i})),this.setCaipNetwork(e)}else{const o=_.A.getProviderId(t),a=o===b.o.CONNECTOR_TYPE_AUTH,c=_.A.getProviderId(r),u=c===b.o.CONNECTOR_TYPE_AUTH,l=n.o.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if((a||u)&&l)try{d.W.state.activeChain=e.chainNamespace,await(this.connectionControllerClient?.connectExternal?.({id:n.o.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:r,chainId:e.id,type:b.o.CONNECTOR_TYPE_AUTH,caipNetwork:e})),this.setCaipNetwork(e)}catch(s){const t=this.getAdapter(r);await(t?.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:c}))}else c===b.o.CONNECTOR_TYPE_WALLET_CONNECT?(this.setCaipNetwork(e),this.syncWalletConnectAccount()):(this.setCaipNetwork(e),i&&this.syncAccount({address:i,chainId:e.id,chainNamespace:r}))}}async initChainAdapter(e){await super.initChainAdapter(e),this.createAuthProviderForAdapter(e)}async syncIdentity({address:e,chainId:t,chainNamespace:r}){const i=`${r}:${t}`,s=this.caipNetworks?.find((e=>e.caipNetworkId===i));if(r!==n.o.CHAIN.EVM||s?.testnet)return this.setProfileName(null,r),void this.setProfileImage(null,r);try{const{name:t,avatar:n}=await this.fetchIdentity({address:e,caipNetworkId:i});this.setProfileName(t,r),this.setProfileImage(n,r)}catch{await this.syncReownName(e,r),1!==t&&this.setProfileImage(null,r)}}syncConnectedWalletInfo(e){const t=_.A.getProviderId(e);if(t===b.o.CONNECTOR_TYPE_AUTH){const r=this.authProvider;if(r){const n=m.i.getConnectedSocialProvider()??"email",i=r.getEmail()??r.getUsername();this.setConnectedWalletInfo({name:t,identifier:i,social:n},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(!C&&f.w.isClient()){const e={...c.oU.DEFAULT_FEATURES,...this.options.features},t=[];if(e){const n=e.email||e.socials&&e.socials.length;n&&t.push(Promise.all([r.e(5089),r.e(3809),r.e(7614)]).then(r.bind(r,37614))),e.email&&t.push(Promise.all([r.e(5089),r.e(3809),r.e(8051)]).then(r.bind(r,68051))),e.socials&&t.push(Promise.all([r.e(5089),r.e(894),r.e(584)]).then(r.bind(r,30584))),e.swaps&&t.push(Promise.all([r.e(5089),r.e(3809),r.e(5166),r.e(6609)]).then(r.bind(r,76609))),e.send&&t.push(Promise.all([r.e(5089),r.e(3809),r.e(5166),r.e(5305)]).then(r.bind(r,25305))),e.receive&&t.push(Promise.all([r.e(5089),r.e(894),r.e(2543)]).then(r.bind(r,72543))),e.onramp&&t.push(Promise.all([r.e(5089),r.e(3809),r.e(337),r.e(1486)]).then(r.bind(r,71486))),e.history&&t.push(Promise.all([r.e(5089),r.e(7573),r.e(306)]).then(r.bind(r,946))),e.pay&&t.push(Promise.all([r.e(5089),r.e(7017)]).then(r.bind(r,99398)))}await Promise.all([...t,Promise.all([r.e(5089),r.e(3809),r.e(894),r.e(337),r.e(7573),r.e(8681),r.e(8474)]).then(r.bind(r,48474)),Promise.all([r.e(5089),r.e(8681),r.e(7339)]).then(r.bind(r,82907))]);const n=document.querySelector("w3m-modal");if(!n){const e=document.createElement("w3m-modal");p.H.state.disableAppend||p.H.state.enableEmbedded||document.body.insertAdjacentElement("beforeend",e)}C=!0}}}},41407:function(e,t,r){"use strict";r.d(t,{AX:function(){return n.AX}});r(37840),r(41171);var n=r(51265);r(51900)},42849:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});r(44114);const n={getSpacingStyles(e,t){return Array.isArray(e)?e[t]?`var(--wui-spacing-${e[t]})`:void 0:"string"===typeof e?`var(--wui-spacing-${e})`:void 0},getFormattedDate(e){return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric"}).format(e)},getHostName(e){try{const t=new URL(e);return t.hostname}catch(t){return""}},getTruncateString({string:e,charsStart:t,charsEnd:r,truncate:n}){return e.length<=t+r?e:"end"===n?`${e.substring(0,t)}...`:"start"===n?`...${e.substring(e.length-r)}`:`${e.substring(0,Math.floor(t))}...${e.substring(e.length-Math.floor(r))}`},generateAvatarColors(e){const t=e.toLowerCase().replace(/^0x/iu,"").replace(/[^a-f0-9]/gu,""),r=t.substring(0,6).padEnd(6,"0"),n=this.hexToRgb(r),i=getComputedStyle(document.documentElement).getPropertyValue("--w3m-border-radius-master"),s=Number(i?.replace("px","")),o=100-3*s,a=`${o}% ${o}% at 65% 40%`,c=[];for(let u=0;u<5;u+=1){const e=this.tintColor(n,.15*u);c.push(`rgb(${e[0]}, ${e[1]}, ${e[2]})`)}return`\n    --local-color-1: ${c[0]};\n    --local-color-2: ${c[1]};\n    --local-color-3: ${c[2]};\n    --local-color-4: ${c[3]};\n    --local-color-5: ${c[4]};\n    --local-radial-circle: ${a}\n   `},hexToRgb(e){const t=parseInt(e,16),r=t>>16&255,n=t>>8&255,i=255&t;return[r,n,i]},tintColor(e,t){const[r,n,i]=e,s=Math.round(r+(255-r)*t),o=Math.round(n+(255-n)*t),a=Math.round(i+(255-i)*t);return[s,o,a]},isNumber(e){const t={number:/^[0-9]+$/u};return t.number.test(e)},getColorTheme(e){return e||("undefined"!==typeof window&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)")?.matches?"dark":"light":"dark")},splitBalance(e){const t=e.split(".");return 2===t.length?[t[0],t[1]]:["0","00"]},roundNumber(e,t,r){const n=e.toString().length>=t?Number(e).toFixed(r):e;return n},formatNumberToLocalString(e,t=2){return void 0===e?"0.00":"number"===typeof e?e.toLocaleString("en-US",{maximumFractionDigits:t,minimumFractionDigits:t}):parseFloat(e).toLocaleString("en-US",{maximumFractionDigits:t,minimumFractionDigits:t})}}},42892:function(e,t,r){"use strict";var n=r(60452).Buffer;function i(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(255!==t[o])throw new TypeError(s+" is ambiguous");t[o]=i}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(t){if((Array.isArray(t)||t instanceof Uint8Array)&&(t=n.from(t)),!n.isBuffer(t))throw new TypeError("Expected Buffer");if(0===t.length)return"";var r=0,i=0,s=0,o=t.length;while(s!==o&&0===t[s])s++,r++;var u=(o-s)*l+1>>>0,h=new Uint8Array(u);while(s!==o){for(var d=t[s],p=0,f=u-1;(0!==d||p<i)&&-1!==f;f--,p++)d+=256*h[f]>>>0,h[f]=d%a>>>0,d=d/a>>>0;if(0!==d)throw new Error("Non-zero carry");i=p,s++}var g=u-i;while(g!==u&&0===h[g])g++;for(var m=c.repeat(r);g<u;++g)m+=e.charAt(h[g]);return m}function d(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return n.alloc(0);var r=0,i=0,s=0;while(e[r]===c)i++,r++;var o=(e.length-r)*u+1>>>0,l=new Uint8Array(o);while(r<e.length){var h=e.charCodeAt(r);if(h>255)return;var d=t[h];if(255===d)return;for(var p=0,f=o-1;(0!==d||p<s)&&-1!==f;f--,p++)d+=a*l[f]>>>0,l[f]=d%256>>>0,d=d/256>>>0;if(0!==d)throw new Error("Non-zero carry");s=p,r++}var g=o-s;while(g!==o&&0===l[g])g++;var m=n.allocUnsafe(i+(o-g));m.fill(0,0,i);var y=i;while(g!==o)m[y++]=l[g++];return m}function p(e){var t=d(e);if(t)return t;throw new Error("Non-base"+a+" character")}return{encode:h,decodeUnsafe:d,decode:p}}e.exports=i},43212:function(e,t,r){"use strict";async function n(e){return new Promise((t=>setTimeout(t,e)))}r.d(t,{u:function(){return n}})},43495:function(e,t,r){"use strict";
/**
 * Support for translating between Buffer instances and JavaScript
 * native types.
 *
 * {@link module:Layout~Layout|Layout} is the basis of a class
 * hierarchy that associates property names with sequences of encoded
 * bytes.
 *
 * Layouts are supported for these scalar (numeric) types:
 * * {@link module:Layout~UInt|Unsigned integers in little-endian
 *   format} with {@link module:Layout.u8|8-bit}, {@link
 *   module:Layout.u16|16-bit}, {@link module:Layout.u24|24-bit},
 *   {@link module:Layout.u32|32-bit}, {@link
 *   module:Layout.u40|40-bit}, and {@link module:Layout.u48|48-bit}
 *   representation ranges;
 * * {@link module:Layout~UIntBE|Unsigned integers in big-endian
 *   format} with {@link module:Layout.u16be|16-bit}, {@link
 *   module:Layout.u24be|24-bit}, {@link module:Layout.u32be|32-bit},
 *   {@link module:Layout.u40be|40-bit}, and {@link
 *   module:Layout.u48be|48-bit} representation ranges;
 * * {@link module:Layout~Int|Signed integers in little-endian
 *   format} with {@link module:Layout.s8|8-bit}, {@link
 *   module:Layout.s16|16-bit}, {@link module:Layout.s24|24-bit},
 *   {@link module:Layout.s32|32-bit}, {@link
 *   module:Layout.s40|40-bit}, and {@link module:Layout.s48|48-bit}
 *   representation ranges;
 * * {@link module:Layout~IntBE|Signed integers in big-endian format}
 *   with {@link module:Layout.s16be|16-bit}, {@link
 *   module:Layout.s24be|24-bit}, {@link module:Layout.s32be|32-bit},
 *   {@link module:Layout.s40be|40-bit}, and {@link
 *   module:Layout.s48be|48-bit} representation ranges;
 * * 64-bit integral values that decode to an exact (if magnitude is
 *   less than 2^53) or nearby integral Number in {@link
 *   module:Layout.nu64|unsigned little-endian}, {@link
 *   module:Layout.nu64be|unsigned big-endian}, {@link
 *   module:Layout.ns64|signed little-endian}, and {@link
 *   module:Layout.ns64be|unsigned big-endian} encodings;
 * * 32-bit floating point values with {@link
 *   module:Layout.f32|little-endian} and {@link
 *   module:Layout.f32be|big-endian} representations;
 * * 64-bit floating point values with {@link
 *   module:Layout.f64|little-endian} and {@link
 *   module:Layout.f64be|big-endian} representations;
 * * {@link module:Layout.const|Constants} that take no space in the
 *   encoded expression.
 *
 * and for these aggregate types:
 * * {@link module:Layout.seq|Sequence}s of instances of a {@link
 *   module:Layout~Layout|Layout}, with JavaScript representation as
 *   an Array and constant or data-dependent {@link
 *   module:Layout~Sequence#count|length};
 * * {@link module:Layout.struct|Structure}s that aggregate a
 *   heterogeneous sequence of {@link module:Layout~Layout|Layout}
 *   instances, with JavaScript representation as an Object;
 * * {@link module:Layout.union|Union}s that support multiple {@link
 *   module:Layout~VariantLayout|variant layouts} over a fixed
 *   (padded) or variable (not padded) span of bytes, using an
 *   unsigned integer at the start of the data or a separate {@link
 *   module:Layout.unionLayoutDiscriminator|layout element} to
 *   determine which layout to use when interpreting the buffer
 *   contents;
 * * {@link module:Layout.bits|BitStructure}s that contain a sequence
 *   of individual {@link
 *   module:Layout~BitStructure#addField|BitField}s packed into an 8,
 *   16, 24, or 32-bit unsigned integer starting at the least- or
 *   most-significant bit;
 * * {@link module:Layout.cstr|C strings} of varying length;
 * * {@link module:Layout.blob|Blobs} of fixed- or variable-{@link
 *   module:Layout~Blob#length|length} raw data.
 *
 * All {@link module:Layout~Layout|Layout} instances are immutable
 * after construction, to prevent internal state from becoming
 * inconsistent.
 *
 * @local Layout
 * @local ExternalLayout
 * @local GreedyCount
 * @local OffsetLayout
 * @local UInt
 * @local UIntBE
 * @local Int
 * @local IntBE
 * @local NearUInt64
 * @local NearUInt64BE
 * @local NearInt64
 * @local NearInt64BE
 * @local Float
 * @local FloatBE
 * @local Double
 * @local DoubleBE
 * @local Sequence
 * @local Structure
 * @local UnionDiscriminator
 * @local UnionLayoutDiscriminator
 * @local Union
 * @local VariantLayout
 * @local BitStructure
 * @local BitField
 * @local Boolean
 * @local Blob
 * @local CString
 * @local Constant
 * @local bindConstructorLayout
 * @module Layout
 * @license MIT
 * @author Peter A. Bigot
 * @see {@link https://github.com/pabigot/buffer-layout|buffer-layout on GitHub}
 */r(44114),r(18111),r(18237);class n{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}decode(e,t){throw new Error("Layout is abstract")}encode(e,t,r){throw new Error("Layout is abstract")}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}function i(e,t){return t.property?e+"["+t.property+"]":e}function s(e,t){if("function"!==typeof e)throw new TypeError("Class must be constructor");if(e.hasOwnProperty("layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof n))throw new TypeError("layout must be a Layout");if(t.hasOwnProperty("boundConstructor_"))throw new Error("layout is already bound to a constructor");e.layout_=t,t.boundConstructor_=e,t.makeDestinationObject=()=>new e,Object.defineProperty(e.prototype,"encode",{value:function(e,r){return t.encode(this,e,r)},writable:!0}),Object.defineProperty(e,"decode",{value:function(e,r){return t.decode(e,r)},writable:!0})}t.Layout=n,t.nameWithProperty=i,t.bindConstructorLayout=s;class o extends n{isCount(){throw new Error("ExternalLayout is abstract")}}class a extends o{constructor(e,t){if(void 0===e&&(e=1),!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,t),this.elementSpan=e}isCount(){return!0}decode(e,t){void 0===t&&(t=0);const r=e.length-t;return Math.floor(r/this.elementSpan)}encode(e,t,r){return 0}}class c extends o{constructor(e,t,r){if(!(e instanceof n))throw new TypeError("layout must be a Layout");if(void 0===t)t=0;else if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,r||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof u||this.layout instanceof l}decode(e,t){return void 0===t&&(t=0),this.layout.decode(e,t+this.offset)}encode(e,t,r){return void 0===r&&(r=0),this.layout.encode(e,t,r+this.offset)}}class u extends n{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return void 0===t&&(t=0),e.readUIntLE(t,this.span)}encode(e,t,r){return void 0===r&&(r=0),t.writeUIntLE(e,r,this.span),this.span}}class l extends n{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return void 0===t&&(t=0),e.readUIntBE(t,this.span)}encode(e,t,r){return void 0===r&&(r=0),t.writeUIntBE(e,r,this.span),this.span}}class h extends n{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return void 0===t&&(t=0),e.readIntLE(t,this.span)}encode(e,t,r){return void 0===r&&(r=0),t.writeIntLE(e,r,this.span),this.span}}class d extends n{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return void 0===t&&(t=0),e.readIntBE(t,this.span)}encode(e,t,r){return void 0===r&&(r=0),t.writeIntBE(e,r,this.span),this.span}}const p=Math.pow(2,32);function f(e){const t=Math.floor(e/p),r=e-t*p;return{hi32:t,lo32:r}}function g(e,t){return e*p+t}class m extends n{constructor(e){super(8,e)}decode(e,t){void 0===t&&(t=0);const r=e.readUInt32LE(t),n=e.readUInt32LE(t+4);return g(n,r)}encode(e,t,r){void 0===r&&(r=0);const n=f(e);return t.writeUInt32LE(n.lo32,r),t.writeUInt32LE(n.hi32,r+4),8}}class y extends n{constructor(e){super(8,e)}decode(e,t){void 0===t&&(t=0);const r=e.readUInt32BE(t),n=e.readUInt32BE(t+4);return g(r,n)}encode(e,t,r){void 0===r&&(r=0);const n=f(e);return t.writeUInt32BE(n.hi32,r),t.writeUInt32BE(n.lo32,r+4),8}}class w extends n{constructor(e){super(8,e)}decode(e,t){void 0===t&&(t=0);const r=e.readUInt32LE(t),n=e.readInt32LE(t+4);return g(n,r)}encode(e,t,r){void 0===r&&(r=0);const n=f(e);return t.writeUInt32LE(n.lo32,r),t.writeInt32LE(n.hi32,r+4),8}}class b extends n{constructor(e){super(8,e)}decode(e,t){void 0===t&&(t=0);const r=e.readInt32BE(t),n=e.readUInt32BE(t+4);return g(r,n)}encode(e,t,r){void 0===r&&(r=0);const n=f(e);return t.writeInt32BE(n.hi32,r),t.writeUInt32BE(n.lo32,r+4),8}}class v extends n{constructor(e){super(4,e)}decode(e,t){return void 0===t&&(t=0),e.readFloatLE(t)}encode(e,t,r){return void 0===r&&(r=0),t.writeFloatLE(e,r),4}}class _ extends n{constructor(e){super(4,e)}decode(e,t){return void 0===t&&(t=0),e.readFloatBE(t)}encode(e,t,r){return void 0===r&&(r=0),t.writeFloatBE(e,r),4}}class E extends n{constructor(e){super(8,e)}decode(e,t){return void 0===t&&(t=0),e.readDoubleLE(t)}encode(e,t,r){return void 0===r&&(r=0),t.writeDoubleLE(e,r),8}}class A extends n{constructor(e){super(8,e)}decode(e,t){return void 0===t&&(t=0),e.readDoubleBE(t)}encode(e,t,r){return void 0===r&&(r=0),t.writeDoubleBE(e,r),8}}class I extends n{constructor(e,t,r){if(!(e instanceof n))throw new TypeError("elementLayout must be a Layout");if(!(t instanceof o&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let i=-1;!(t instanceof o)&&0<e.span&&(i=t*e.span),super(i,r),this.elementLayout=e,this.count=t}getSpan(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);let r=0,n=this.count;if(n instanceof o&&(n=n.decode(e,t)),0<this.elementLayout.span)r=n*this.elementLayout.span;else{let i=0;while(i<n)r+=this.elementLayout.getSpan(e,t+r),++i}return r}decode(e,t){void 0===t&&(t=0);const r=[];let n=0,i=this.count;i instanceof o&&(i=i.decode(e,t));while(n<i)r.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),n+=1;return r}encode(e,t,r){void 0===r&&(r=0);const n=this.elementLayout,i=e.reduce(((e,i)=>e+n.encode(i,t,r+e)),0);return this.count instanceof o&&this.count.encode(e.length,t,r),i}}class S extends n{constructor(e,t,r){if(!Array.isArray(e)||!e.reduce(((e,t)=>e&&t instanceof n),!0))throw new TypeError("fields must be array of Layout instances");"boolean"===typeof t&&void 0===r&&(r=t,t=void 0);for(const n of e)if(0>n.span&&void 0===n.property)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=e.reduce(((e,t)=>e+t.getSpan()),0)}catch(s){}super(i,t),this.fields=e,this.decodePrefixes=!!r}getSpan(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);let r=0;try{r=this.fields.reduce(((r,n)=>{const i=n.getSpan(e,t);return t+=i,r+i}),0)}catch(n){throw new RangeError("indeterminate span")}return r}decode(e,t){void 0===t&&(t=0);const r=this.makeDestinationObject();for(const n of this.fields)if(void 0!==n.property&&(r[n.property]=n.decode(e,t)),t+=n.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return r}encode(e,t,r){void 0===r&&(r=0);const n=r;let i=0,s=0;for(const o of this.fields){let n=o.span;if(s=0<n?n:0,void 0!==o.property){const i=e[o.property];void 0!==i&&(s=o.encode(i,t,r),0>n&&(n=o.getSpan(t,r)))}i=r,r+=n}return i+s-n}fromArray(e){const t=this.makeDestinationObject();for(const r of this.fields)void 0!==r.property&&0<e.length&&(t[r.property]=e.shift());return t}layoutFor(e){if("string"!==typeof e)throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if("string"!==typeof e)throw new TypeError("property must be string");let t=0;for(const r of this.fields){if(r.property===e)return t;0>r.span?t=-1:0<=t&&(t+=r.span)}}}class C{constructor(e){this.property=e}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class k extends C{constructor(e,t){if(!(e instanceof o&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,r){return this.layout.encode(e,t,r)}}class N extends n{constructor(e,t,r){const i=e instanceof u||e instanceof l;if(i)e=new k(new c(e));else if(e instanceof o&&e.isCount())e=new k(e);else if(!(e instanceof C))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(void 0===t&&(t=null),!(null===t||t instanceof n))throw new TypeError("defaultLayout must be null or a Layout");if(null!==t){if(0>t.span)throw new Error("defaultLayout must have constant span");void 0===t.property&&(t=t.replicate("content"))}let s=-1;t&&(s=t.span,0<=s&&i&&(s+=e.layout.span)),super(s,r),this.discriminator=e,this.usesPrefixDiscriminator=i,this.defaultLayout=t,this.registry={};let a=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(e){return a(e)},this.configGetSourceVariant=function(e){a=e.bind(this)}}getSpan(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);const r=this.getVariant(e,t);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(e,t)}defaultGetSourceVariant(e){if(e.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&e.hasOwnProperty(this.defaultLayout.property))return;const t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||e.hasOwnProperty(t.property)))return t}else for(const t in this.registry){const r=this.registry[t];if(e.hasOwnProperty(r.property))return r}throw new Error("unable to infer src variant")}decode(e,t){let r;void 0===t&&(t=0);const n=this.discriminator,i=n.decode(e,t);let s=this.registry[i];if(void 0===s){let o=0;s=this.defaultLayout,this.usesPrefixDiscriminator&&(o=n.layout.span),r=this.makeDestinationObject(),r[n.property]=i,r[s.property]=this.defaultLayout.decode(e,t+o)}else r=s.decode(e,t);return r}encode(e,t,r){void 0===r&&(r=0);const n=this.getSourceVariant(e);if(void 0===n){const n=this.discriminator,i=this.defaultLayout;let s=0;return this.usesPrefixDiscriminator&&(s=n.layout.span),n.encode(e[n.property],t,r),s+i.encode(e[i.property],t,r+s)}return n.encode(e,t,r)}addVariant(e,t,r){const n=new O(this,e,t,r);return this.registry[e]=n,n}getVariant(e,t){let r=e;return Buffer.isBuffer(e)&&(void 0===t&&(t=0),r=this.discriminator.decode(e,t)),this.registry[r]}}class O extends n{constructor(e,t,r,i){if(!(e instanceof N))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if("string"===typeof r&&void 0===i&&(i=r,r=null),r){if(!(r instanceof n))throw new TypeError("layout must be a Layout");if(null!==e.defaultLayout&&0<=r.span&&r.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if("string"!==typeof i)throw new TypeError("variant must have a String property")}let s=e.span;0>e.span&&(s=r?r.span:0,0<=s&&e.usesPrefixDiscriminator&&(s+=e.discriminator.layout.span)),super(s,i),this.union=e,this.variant=t,this.layout=r||null}getSpan(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);let r=0;return this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),r+this.layout.getSpan(e,t+r)}decode(e,t){const r=this.makeDestinationObject();if(void 0===t&&(t=0),this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(e,t+n):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(e,t,r){void 0===r&&(r=0);let n=0;if(this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout&&!e.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,r);let i=n;if(this.layout&&(this.layout.encode(e[this.property],t,r+n),i+=this.layout.getSpan(t,r+n),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}function T(e){return 0>e&&(e+=4294967296),e}class R extends n{constructor(e,t,r){if(!(e instanceof u||e instanceof l))throw new TypeError("word must be a UInt or UIntBE layout");if("string"===typeof t&&void 0===r&&(r=t,t=void 0),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,r),this.word=e,this.msb=!!t,this.fields=[];let n=0;this._packedSetValue=function(e){return n=T(e),this},this._packedGetValue=function(){return n}}decode(e,t){const r=this.makeDestinationObject();void 0===t&&(t=0);const n=this.word.decode(e,t);this._packedSetValue(n);for(const i of this.fields)void 0!==i.property&&(r[i.property]=i.decode(n));return r}encode(e,t,r){void 0===r&&(r=0);const n=this.word.decode(t,r);this._packedSetValue(n);for(const i of this.fields)if(void 0!==i.property){const t=e[i.property];void 0!==t&&i.encode(t)}return this.word.encode(this._packedGetValue(),t,r)}addField(e,t){const r=new x(this,e,t);return this.fields.push(r),r}addBoolean(e){const t=new P(this,e);return this.fields.push(t),t}fieldFor(e){if("string"!==typeof e)throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}}class x{constructor(e,t,r){if(!(e instanceof R))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(t)||0>=t)throw new TypeError("bits must be positive integer");const n=8*e.span,i=e.fields.reduce(((e,t)=>e+t.bits),0);if(t+i>n)throw new Error("bits too long for span remainder ("+(n-i)+" of "+n+" remain)");this.container=e,this.bits=t,this.valueMask=(1<<t)-1,32===t&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=n-i-t),this.wordMask=T(this.valueMask<<this.start),this.property=r}decode(){const e=this.container._packedGetValue(),t=T(e&this.wordMask),r=t>>>this.start;return r}encode(e){if(!Number.isInteger(e)||e!==T(e&this.valueMask))throw new TypeError(i("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const t=this.container._packedGetValue(),r=T(e<<this.start);this.container._packedSetValue(T(t&~this.wordMask)|r)}}class P extends x{constructor(e,t){super(e,1,t)}decode(e,t){return!!x.prototype.decode.call(this,e,t)}encode(e){return"boolean"===typeof e&&(e=+e),x.prototype.encode.call(this,e)}}class M extends n{constructor(e,t){if(!(e instanceof o&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;e instanceof o||(r=e),super(r,t),this.length=e}getSpan(e,t){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),r}decode(e,t){void 0===t&&(t=0);let r=this.span;return 0>r&&(r=this.length.decode(e,t)),e.slice(t,t+r)}encode(e,t,r){let n=this.length;if(this.length instanceof o&&(n=e.length),!Buffer.isBuffer(e)||n!==e.length)throw new TypeError(i("Blob.encode",this)+" requires (length "+n+") Buffer as src");if(r+n>t.length)throw new RangeError("encoding overruns Buffer");return t.write(e.toString("hex"),r,n,"hex"),this.length instanceof o&&this.length.encode(n,t,r),n}}class B extends n{constructor(e){super(-1,e)}getSpan(e,t){if(!Buffer.isBuffer(e))throw new TypeError("b must be a Buffer");void 0===t&&(t=0);let r=t;while(r<e.length&&0!==e[r])r+=1;return 1+r-t}decode(e,t,r){void 0===t&&(t=0);let n=this.getSpan(e,t);return e.slice(t,t+n-1).toString("utf-8")}encode(e,t,r){void 0===r&&(r=0),"string"!==typeof e&&(e=e.toString());const n=new Buffer(e,"utf8"),i=n.length;if(r+i>t.length)throw new RangeError("encoding overruns Buffer");return n.copy(t,r),t[r+i]=0,i+1}}class U extends n{constructor(e,t){if("string"===typeof e&&void 0===t&&(t=e,e=void 0),void 0===e)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,t),this.maxSpan=e}getSpan(e,t){if(!Buffer.isBuffer(e))throw new TypeError("b must be a Buffer");return void 0===t&&(t=0),e.length-t}decode(e,t,r){void 0===t&&(t=0);let n=this.getSpan(e,t);if(0<=this.maxSpan&&this.maxSpan<n)throw new RangeError("text length exceeds maxSpan");return e.slice(t,t+n).toString("utf-8")}encode(e,t,r){void 0===r&&(r=0),"string"!==typeof e&&(e=e.toString());const n=new Buffer(e,"utf8"),i=n.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(r+i>t.length)throw new RangeError("encoding overruns Buffer");return n.copy(t,r),i}}class L extends n{constructor(e,t){super(0,t),this.value=e}decode(e,t,r){return this.value}encode(e,t,r){return 0}}t.ExternalLayout=o,t.GreedyCount=a,t.OffsetLayout=c,t.UInt=u,t.UIntBE=l,t.Int=h,t.IntBE=d,t.Float=v,t.FloatBE=_,t.Double=E,t.DoubleBE=A,t.Sequence=I,t.Structure=S,t.UnionDiscriminator=C,t.UnionLayoutDiscriminator=k,t.Union=N,t.VariantLayout=O,t.BitStructure=R,t.BitField=x,t.Boolean=P,t.Blob=M,t.CString=B,t.UTF8=U,t.Constant=L,t.greedy=(e,t)=>new a(e,t),t.offset=(e,t,r)=>new c(e,t,r),t.u8=e=>new u(1,e),t.u16=e=>new u(2,e),t.u24=e=>new u(3,e),t.u32=e=>new u(4,e),t.u40=e=>new u(5,e),t.u48=e=>new u(6,e),t.nu64=e=>new m(e),t.u16be=e=>new l(2,e),t.u24be=e=>new l(3,e),t.u32be=e=>new l(4,e),t.u40be=e=>new l(5,e),t.u48be=e=>new l(6,e),t.nu64be=e=>new y(e),t.s8=e=>new h(1,e),t.s16=e=>new h(2,e),t.s24=e=>new h(3,e),t.s32=e=>new h(4,e),t.s40=e=>new h(5,e),t.s48=e=>new h(6,e),t.ns64=e=>new w(e),t.s16be=e=>new d(2,e),t.s24be=e=>new d(3,e),t.s32be=e=>new d(4,e),t.s40be=e=>new d(5,e),t.s48be=e=>new d(6,e),t.ns64be=e=>new b(e),t.f32=e=>new v(e),t.f32be=e=>new _(e),t.f64=e=>new E(e),t.f64be=e=>new A(e),t.struct=(e,t,r)=>new S(e,t,r),t.bits=(e,t,r)=>new R(e,t,r),t.seq=(e,t,r)=>new I(e,t,r),t.union=(e,t,r)=>new N(e,t,r),t.unionLayoutDiscriminator=(e,t)=>new k(e,t),t.blob=(e,t)=>new M(e,t),t.cstr=e=>new B(e),t.utf8=(e,t)=>new U(e,t),t["const"]=(e,t)=>new L(e,t)},44521:function(e,t,r){"use strict";r.d(t,{P:function(){return n}});const n=e=>{const t=e.decode.bind(e),r=e.encode.bind(e);return{decode:t,encode:r}}},44695:function(e,t,r){"use strict";r.d(t,{o:function(){return s}});var n=r(1555),i=r(91889);const s={set(e,t){i.Q.isClient&&localStorage.setItem(`${n.s1.STORAGE_KEY}${e}`,t)},get(e){return i.Q.isClient?localStorage.getItem(`${n.s1.STORAGE_KEY}${e}`):null},delete(e,t){i.Q.isClient&&(t?localStorage.removeItem(e):localStorage.removeItem(`${n.s1.STORAGE_KEY}${e}`))}}},44970:function(e,t,r){"use strict";r.d(t,{t:function(){return u}});r(18111),r(22489),r(61701);var n=r(58843),i=r(65642),s=r(37903),o=r(78134),a=(r(81148),r(11274));const c={createBalance(e,t){const r={name:e.metadata["name"]||"",symbol:e.metadata["symbol"]||"",decimals:e.metadata["decimals"]||0,value:e.metadata["value"]||0,price:e.metadata["price"]||0,iconUrl:e.metadata["iconUrl"]||""};return{name:r.name,symbol:r.symbol,chainId:t,address:"native"===e.address?void 0:this.convertAddressToCAIP10Address(e.address,t),value:r.value,price:r.price,quantity:{decimals:r.decimals.toString(),numeric:this.convertHexToBalance({hex:e.balance,decimals:r.decimals})},iconUrl:r.iconUrl}},convertHexToBalance({hex:e,decimals:t}){return(0,a.J)(BigInt(e),t)},convertAddressToCAIP10Address(e,t){return`${t}:${e}`},createCAIP2ChainId(e,t){return`${t}:${parseInt(e,16)}`},getChainIdHexFromCAIP2ChainId(e){const t=e.split(":");if(t.length<2||!t[1])return"0x0";const r=t[1],n=parseInt(r,10);return isNaN(n)?"0x0":`0x${n.toString(16)}`},isWalletGetAssetsResponse(e){return"object"===typeof e&&null!==e&&Object.values(e).every((e=>Array.isArray(e)&&e.every((e=>this.isValidAsset(e)))))},isValidAsset(e){return"object"===typeof e&&null!==e&&"string"===typeof e.address&&"string"===typeof e.balance&&("ERC20"===e.type||"NATIVE"===e.type)&&"object"===typeof e.metadata&&null!==e.metadata&&"string"===typeof e.metadata["name"]&&"string"===typeof e.metadata["symbol"]&&"number"===typeof e.metadata["decimals"]&&"number"===typeof e.metadata["price"]&&"string"===typeof e.metadata["iconUrl"]}},u={async getMyTokensWithBalance(e){const t=n.U.state.address,r=s.W.state.activeCaipNetwork;if(!t||!r)return[];if("eip155"===r.chainNamespace){const e=await this.getEIP155Balances(t,r);if(e)return this.filterLowQualityTokens(e)}const o=await i.T.getBalance(t,r.caipNetworkId,e);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(e,t){try{const r=c.getChainIdHexFromCAIP2ChainId(t.caipNetworkId),n=await o.x.getCapabilities(e);if(!n?.[r]?.["assetDiscovery"]?.supported)return null;const i=await o.x.walletGetAssets({account:e,chainFilter:[r]});if(!c.isWalletGetAssetsResponse(i))return null;const s=i[r]||[];return s.map((e=>c.createBalance(e,t.caipNetworkId)))}catch(r){return null}},filterLowQualityTokens(e){return e.filter((e=>"0"!==e.quantity.decimals))},mapBalancesToSwapTokens(e){return e?.map((e=>({...e,address:e?.address?e.address:s.W.getActiveNetworkTokenAddress(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}}},46104:function(e,t,r){"use strict";r.d(t,{L:function(){return n}});r(18111),r(22489);const n={caipNetworkIdToNumber(e){return e?Number(e.split(":")[1]):void 0},parseEvmChainId(e){return"string"===typeof e?this.caipNetworkIdToNumber(e):e},getNetworksByNamespace(e,t){return e?.filter((e=>e.chainNamespace===t))||[]},getFirstNetworkByNamespace(e,t){return this.getNetworksByNamespace(e,t)[0]}}},46374:function(e,t,r){"use strict";r.d(t,{o:function(){return s}});var n=r(22228),i=r(4319);function s({key:e,methods:t,name:r,request:s,retryCount:o=3,retryDelay:a=150,timeout:c,type:u},l){const h=(0,i.L)();return{config:{key:e,methods:t,name:r,request:s,retryCount:o,retryDelay:a,timeout:c,type:u},request:(0,n.m)(s,{methods:t,retryCount:o,retryDelay:a,uid:h}),value:l}}},47056:function(e,t,r){"use strict";r.d(t,{I:function(){return s}});var n=r(78244);const i=new n.A(8192);function s(e,{enabled:t=!0,id:r}){if(!t||!r)return e();if(i.get(r))return i.get(r);const n=e().finally((()=>i.delete(r)));return i.set(r,n),n}},47318:function(e,t,r){"use strict";r.d(t,{Ci:function(){return o},J8:function(){return a},MU:function(){return c}});var n=r(19008),i=r(22626),s=r(16986);class o extends i.C{constructor({body:e,cause:t,details:r,headers:i,status:o,url:a}){super("HTTP request failed.",{cause:t,details:r,metaMessages:[o&&`Status: ${o}`,`URL: ${(0,s.I)(a)}`,e&&`Request body: ${(0,n.A)(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=i,this.status=o,this.url=a}}i.C;class a extends i.C{constructor({body:e,error:t,url:r}){super("RPC Request failed.",{cause:t,details:t.message,metaMessages:[`URL: ${(0,s.I)(r)}`,`Request body: ${(0,n.A)(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=t.code,this.data=t.data}}i.C;class c extends i.C{constructor({body:e,url:t}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${(0,s.I)(t)}`,`Request body: ${(0,n.A)(e)}`],name:"TimeoutError"})}}},48016:function(e,t,r){"use strict";function n(e){if(e.length>=255)throw new TypeError("Alphabet too long");const t=new Uint8Array(256);for(let u=0;u<t.length;u++)t[u]=255;for(let u=0;u<e.length;u++){const r=e.charAt(u),n=r.charCodeAt(0);if(255!==t[n])throw new TypeError(r+" is ambiguous");t[n]=u}const r=e.length,n=e.charAt(0),i=Math.log(r)/Math.log(256),s=Math.log(256)/Math.log(r);function o(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";let i=0,o=0,a=0;const c=t.length;while(a!==c&&0===t[a])a++,i++;const u=(c-a)*s+1>>>0,l=new Uint8Array(u);while(a!==c){let e=t[a],n=0;for(let t=u-1;(0!==e||n<o)&&-1!==t;t--,n++)e+=256*l[t]>>>0,l[t]=e%r>>>0,e=e/r>>>0;if(0!==e)throw new Error("Non-zero carry");o=n,a++}let h=u-o;while(h!==u&&0===l[h])h++;let d=n.repeat(i);for(;h<u;++h)d+=e.charAt(l[h]);return d}function a(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;let s=0,o=0,a=0;while(e[s]===n)o++,s++;const c=(e.length-s)*i+1>>>0,u=new Uint8Array(c);while(s<e.length){const n=e.charCodeAt(s);if(n>255)return;let i=t[n];if(255===i)return;let o=0;for(let e=c-1;(0!==i||o<a)&&-1!==e;e--,o++)i+=r*u[e]>>>0,u[e]=i%256>>>0,i=i/256>>>0;if(0!==i)throw new Error("Non-zero carry");a=o,s++}let l=c-a;while(l!==c&&0===u[l])l++;const h=new Uint8Array(o+(c-l));let d=o;while(l!==c)h[d++]=u[l++];return h}function c(e){const t=a(e);if(t)return t;throw new Error("Non-base"+r+" character")}return{encode:o,decodeUnsafe:a,decode:c}}r.d(t,{A:function(){return o}});var i=n,s="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",o=i(s)},48153:function(e,t,r){"use strict";r.d(t,{v:function(){return a}});const n=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],i=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],s=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}];var o=r(80955);const a={getERC20Abi:e=>o.o.USDT_CONTRACT_ADDRESSES.includes(e)?s:n,getSwapAbi:()=>i}},48317:function(e,t,r){"use strict";function n(e,t){const{kind:r,elements:n}=t;return{kind:r,elements:n,finisher(t){customElements.get(e)||customElements.define(e,t)}}}function i(e,t){return customElements.get(e)||customElements.define(e,t),t}function s(e){return function(t){return"function"===typeof t?i(e,t):n(e,t)}}r.d(t,{E:function(){return s}})},48646:function(e,t,r){"use strict";var n=r(69565),i=r(28551),s=r(1767),o=r(50851);e.exports=function(e,t){t&&"string"===typeof e||i(e);var r=o(e);return s(i(void 0!==r?n(r,e):e))}},50445:function(e,t,r){"use strict";r.d(t,{E:function(){return n}});const n={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]}},51265:function(e,t,r){"use strict";r.d(t,{AX:function(){return s}});var n=r(37840),i=r(66813);function s(e){const t=(0,n.ref)(i.A.state.providers[e]),r=(0,n.ref)(i.A.state.providerIds[e]),s=i.A.subscribe((n=>{t.value=n.providers[e],r.value=n.providerIds[e]}));return(0,n.onUnmounted)((()=>{s?.()})),(0,n.reactive)({walletProvider:t,walletProviderType:r})}},51386:function(e){"use strict";function t(e){try{return JSON.stringify(e)}catch(t){return'"[Circular]"'}}function r(e,r,n){var i=n&&n.stringify||t,s=1;if("object"===typeof e&&null!==e){var o=r.length+s;if(1===o)return e;var a=new Array(o);a[0]=i(e);for(var c=1;c<o;c++)a[c]=i(r[c]);return a.join(" ")}if("string"!==typeof e)return e;var u=r.length;if(0===u)return e;for(var l="",h=1-s,d=-1,p=e&&e.length||0,f=0;f<p;){if(37===e.charCodeAt(f)&&f+1<p){switch(d=d>-1?d:0,e.charCodeAt(f+1)){case 100:case 102:if(h>=u)break;if(null==r[h])break;d<f&&(l+=e.slice(d,f)),l+=Number(r[h]),d=f+2,f++;break;case 105:if(h>=u)break;if(null==r[h])break;d<f&&(l+=e.slice(d,f)),l+=Math.floor(Number(r[h])),d=f+2,f++;break;case 79:case 111:case 106:if(h>=u)break;if(void 0===r[h])break;d<f&&(l+=e.slice(d,f));var g=typeof r[h];if("string"===g){l+="'"+r[h]+"'",d=f+2,f++;break}if("function"===g){l+=r[h].name||"<anonymous>",d=f+2,f++;break}l+=i(r[h]),d=f+2,f++;break;case 115:if(h>=u)break;d<f&&(l+=e.slice(d,f)),l+=String(r[h]),d=f+2,f++;break;case 37:d<f&&(l+=e.slice(d,f)),l+="%",d=f+2,f++,h--;break}++h}++f}return-1===d?e:(d<p&&(l+=e.slice(d)),l)}e.exports=r},51900:function(e,t,r){"use strict";r.d(t,{E1:function(){return n.E},kl:function(){return i.k}});var n=r(50445),i=r(60069)},52070:function(e,t,r){"use strict";r.d(t,{K3:function(){return a},UF:function(){return s},fk:function(){return i},z4:function(){return o}});class n extends Error{constructor(e,t){super(e),this.error=t}}class i extends n{constructor(){super(...arguments),this.name="WalletAccountError"}}class s extends n{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}class o extends n{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}class a extends n{constructor(){super(...arguments),this.name="WalletSignMessageError"}}},52719:function(e,t,r){"use strict";function n(e){switch(e){case"processed":case"confirmed":case"finalized":case void 0:return e;case"recent":return"processed";case"single":case"singleGossip":return"confirmed";case"max":case"root":return"finalized";default:return}}r.d(t,{i:function(){return n}})},52967:function(e,t,r){"use strict";var n=r(46706),i=r(20034),s=r(67750),o=r(73506);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{e=n(Object.prototype,"__proto__","set"),e(r,[]),t=r instanceof Array}catch(a){}return function(r,n){return s(r),o(n),i(r)?(t?e(r,n):r.__proto__=n,r):r}}():void 0)},53291:function(e,t,r){"use strict";r.d(t,{o:function(){return n}});const n={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:"eip155",ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"}},53489:function(e,t,r){"use strict";r.d(t,{zj:function(){return o}});var n=r(63558),i=r(93514);const s=(0,n.w3)([(0,n.u8)("m"),(0,n.u8)("n"),(0,i.lc)("isInitialized"),(0,i.jE)("signer1"),(0,i.jE)("signer2"),(0,i.jE)("signer3"),(0,i.jE)("signer4"),(0,i.jE)("signer5"),(0,i.jE)("signer6"),(0,i.jE)("signer7"),(0,i.jE)("signer8"),(0,i.jE)("signer9"),(0,i.jE)("signer10"),(0,i.jE)("signer11")]),o=s.span},53528:function(e,t,r){"use strict";r.d(t,{r:function(){return i}});var n=r(26351);const i={createLogger(e,t="error"){const r=(0,n.iP)({level:t}),{logger:i}=(0,n.D5)({opts:r});return i.error=(...t)=>{for(const r of t)if(r instanceof Error)return void e(r,...t);e(void 0,...t)},i}}},53598:function(e,t,r){"use strict";r.d(t,{S:function(){return b}});r(18111),r(20116);var n=r(26676),i=(r(12745),r(48016)),s=(r(75747),r(80955)),o=r(81653),a=r(37903),c=r(68174),u=r(81753),l=r(19816),h=r(96934),d=r(58747),p=r(72689),f=r(23774),g=r(66752),m=r(78694),y=r(71493),w=r(38673);class b extends d.X{constructor(e={}){super({adapterType:s.o.ADAPTER_TYPES.SOLANA,namespace:s.o.CHAIN.SOLANA}),this.balancePromises={},this.providerHandlers=null,this.connectionSettings=e.connectionSettings||"confirmed",this.wallets=e.wallets}construct(e){super.construct(e);const t=o.i.getActiveCaipNetworkId(),r=e.networks?.find((e=>e.caipNetworkId===t))||e.networks?.[0],i=r?.rpcUrls.default.http[0];i&&m.a.setConnection(new n.Ng(i,this.connectionSettings))}setAuthProvider(e){this.addConnector(new p.O({w3mFrameProvider:e,getActiveChain:()=>a.W.getCaipNetworkByNamespace(this.namespace),chains:this.getCaipNetworks()}))}syncConnectors(e,t){e.projectId||c.h.open(l.R.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");const r=()=>t.getCaipNetwork(this.namespace);u.w.isClient()&&"coinbaseSolana"in window&&this.addConnector(new f.V({provider:window.coinbaseSolana,chains:this.getCaipNetworks(),getActiveChain:r})),(0,w.$)(this.getCaipNetworks(),r,this.addConnector.bind(this))}async writeContract(){return Promise.resolve({hash:""})}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async walletGetAssets(e){return Promise.resolve({})}async getAccounts(e){const t=this.connectors.find((t=>t.id===e.id));return t?{accounts:await t.getAccounts()}:{accounts:[]}}async signMessage(e){const t=e.provider;if(!t)throw new Error("connectionControllerClient:signMessage - provider is undefined");const r=await t.signMessage((new TextEncoder).encode(e.message));return{signature:i.A.encode(r)}}async estimateGas(e){const t=m.a.state.connection;if(!t||!e.provider)throw new Error("Connection is not set");const r=await(0,y.P)({provider:e.provider,connection:t,to:"11111111111111111111111111111111",value:1}),n=await r.getEstimatedFee(t);return{gas:BigInt(n||0)}}async sendTransaction(e){const t=m.a.state.connection;if(!t||!e.provider)throw new Error("Connection is not set");const r=e.provider,n=await(0,y.P)({provider:r,connection:t,to:e.to,value:Number.isNaN(Number(e.value))?0:Number(e.value)}),i=await r.sendTransaction(n,t);return await new Promise((e=>{const r=setInterval((async()=>{const n=await t.getSignatureStatus(i);n?.value&&(clearInterval(r),e())}),1e3)})),{hash:i}}parseUnits(){return 0n}formatUnits(){return""}async connect(e){const t=this.connectors.find((t=>t.id===e.id));if(!t)throw new Error("Provider not found");const r=e.rpcUrl||this.getCaipNetworks()?.find((t=>t.id===e.chainId))?.rpcUrls.default.http[0];if(!r)throw new Error(`RPC URL not found for chainId: ${e.chainId}`);const i=await t.connect({chainId:e.chainId});return this.listenProviderEvents(t),m.a.setConnection(new n.Ng(r,this.connectionSettings)),this.emit("accountChanged",{address:i,chainId:e.chainId}),{id:t.id,address:i,chainId:e.chainId,provider:t,type:t.type}}async getBalance(e){const t=e.address,r=this.getCaipNetworks()?.find((t=>t.id===e.chainId));if(!t)return Promise.resolve({balance:"0.00",symbol:"SOL"});const i=new n.Ng(r?.rpcUrls?.default?.http?.[0],this.connectionSettings),s=`${r?.caipNetworkId}:${e.address}`,a=this.balancePromises[s];if(a)return a;const c=o.i.getNativeBalanceCacheForCaipAddress(s);return c?{balance:c.balance,symbol:c.symbol}:(this.balancePromises[s]=new Promise((async r=>{try{const a=await i.getBalance(new n.J3(t)),c=(a/h.w.LAMPORTS_PER_SOL).toString();if(o.i.updateNativeBalanceCache({caipAddress:s,balance:c,symbol:e.caipNetwork?.nativeCurrency.symbol||"SOL",timestamp:Date.now()}),!e.caipNetwork)throw new Error("caipNetwork is required");r({balance:c,symbol:e.caipNetwork?.nativeCurrency.symbol})}catch(a){r({balance:"0.00",symbol:"SOL"})}})).finally((()=>{delete this.balancePromises[s]})),this.balancePromises[s]||{balance:"0.00",symbol:"SOL"})}async switchNetwork(e){await super.switchNetwork(e);const{caipNetwork:t}=e;t?.rpcUrls?.default?.http?.[0]&&m.a.setConnection(new n.Ng(t.rpcUrls.default.http[0],this.connectionSettings))}listenProviderEvents(e){const t=()=>{this.removeProviderListeners(e),this.emit("disconnect")},r=e=>{const t=e.toBase58();t&&this.emit("accountChanged",{address:t})};e.on("disconnect",t),e.on("accountsChanged",r),e.on("connect",r),e.on("pendingTransaction",(()=>{this.emit("pendingTransactions")})),this.providerHandlers={disconnect:t,accountsChanged:r}}removeProviderListeners(e){this.providerHandlers&&(e.removeListener("disconnect",this.providerHandlers.disconnect),e.removeListener("accountsChanged",this.providerHandlers.accountsChanged),e.removeListener("connect",this.providerHandlers.accountsChanged),this.providerHandlers=null)}setUniversalProvider(e){this.addConnector(new g.j({provider:e,chains:this.getCaipNetworks(),getActiveChain:()=>a.W.getCaipNetworkByNamespace(this.namespace)}))}async connectWalletConnect(e){const t=await super.connectWalletConnect(e),r=this.getCaipNetworks()?.find((t=>t.id===e))?.rpcUrls.default.http[0],i=new n.Ng(r,this.connectionSettings);return m.a.setConnection(i),t}async disconnect(e){if(!e.provider||!e.providerType)throw new Error("Provider or providerType not provided");await e.provider.disconnect()}async syncConnection(e){return this.connect({...e,type:""})}getWalletConnectProvider(e){const t=new g.j({provider:e.provider,chains:e.caipNetworks,getActiveChain:()=>a.W.getCaipNetworkByNamespace(this.namespace)});return t}}},53752:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(89415),i=r(56740),s=r(26364),o=r(17409);function a(e){return s.u in e.features&&o.j in e.features&&(n.R in e.features||i.q in e.features)}},54630:function(e,t,r){"use strict";r.d(t,{g:function(){return i}});var n=r(31937);const i=(0,n.x)({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"})},54972:function(e,t,r){"use strict";var n=r(46518),i=r(69565),s=r(28551),o=r(1767),a=r(24149),c=r(99590),u=r(19462),l=r(9539),h=r(84549),d=r(96395),p=!d&&h("take",RangeError),f=u((function(){var e=this.iterator;if(!this.remaining--)return this.done=!0,l(e,"normal",void 0);var t=s(i(this.next,e)),r=this.done=!!t.done;return r?void 0:t.value}));n({target:"Iterator",proto:!0,real:!0,forced:d||p},{take:function(e){var t;s(this);try{t=c(a(+e))}catch(r){l(this,"throw",r)}return p?i(p,this,t):new f(o(this),{remaining:t})}})},55002:function(e){"use strict";e.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},55603:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(33590);n.__exportStar(r(65146),t),n.__exportStar(r(10396),t)},56001:function(e,t,r){"use strict";r.d(t,{Q:function(){return s}});var n=r(32979),i=r(11274);function s(e,t="wei"){return(0,i.J)(e,n.sz[t])}},56740:function(e,t,r){"use strict";r.d(t,{q:function(){return n}});const n="solana:signTransaction"},57105:function(e,t,r){"use strict";r.d(t,{b:function(){return i}});var n=r(43212);function i(e,{delay:t=100,retryCount:r=2,shouldRetry:i=()=>!0}={}){return new Promise(((s,o)=>{const a=async({count:c=0}={})=>{const u=async({error:e})=>{const r="function"===typeof t?t({count:c,error:e}):t;r&&await(0,n.u)(r),a({count:c+1})};try{const t=await e();s(t)}catch(l){if(c<r&&await i({count:c,error:l}))return u({error:l});o(l)}};a()}))}},57527:function(e,t,r){"use strict";var n;r.d(t,{C:function(){return n},v:function(){return i}}),function(e){e[e["Uninitialized"]=0]="Uninitialized",e[e["Mint"]=1]="Mint",e[e["Account"]=2]="Account"}(n||(n={}));const i=1},57593:function(e,t,r){"use strict";r.d(t,{E:function(){return i}});var n=r(80771);function i(e){return(0,n.q)(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}},57674:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IWatch=void 0;class r{}t.IWatch=r},58376:function(e,t,r){"use strict";r.d(t,{mN:function(){return C},AH:function(){return u},W3:function(){return A},Ec:function(){return I},iz:function(){return c}});r(44114),r(18111),r(7588),r(17642),r(58004),r(33853),r(45876),r(32475),r(15024),r(31698),r(61701),r(18237);
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const n=globalThis,i=n.ShadowRoot&&(void 0===n.ShadyCSS||n.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,s=Symbol(),o=new WeakMap;class a{constructor(e,t,r){if(this._$cssResult$=!0,r!==s)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(i&&void 0===e){const r=void 0!==t&&1===t.length;r&&(e=o.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&o.set(t,e))}return e}toString(){return this.cssText}}const c=e=>new a("string"==typeof e?e:e+"",void 0,s),u=(e,...t)=>{const r=1===e.length?e[0]:t.reduce(((t,r,n)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(r)+e[n+1]),e[0]);return new a(r,e,s)},l=(e,t)=>{if(i)e.adoptedStyleSheets=t.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet));else for(const r of t){const t=document.createElement("style"),i=n.litNonce;void 0!==i&&t.setAttribute("nonce",i),t.textContent=r.cssText,e.appendChild(t)}},h=i?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const r of e.cssRules)t+=r.cssText;return c(t)})(e):e,{is:d,defineProperty:p,getOwnPropertyDescriptor:f,getOwnPropertyNames:g,getOwnPropertySymbols:m,getPrototypeOf:y}=Object,w=globalThis,b=w.trustedTypes,v=b?b.emptyScript:"",_=w.reactiveElementPolyfillSupport,E=(e,t)=>e,A={toAttribute(e,t){switch(t){case Boolean:e=e?v:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let r=e;switch(t){case Boolean:r=null!==e;break;case Number:r=null===e?null:Number(e);break;case Object:case Array:try{r=JSON.parse(e)}catch(e){r=null}}return r}},I=(e,t)=>!d(e,t),S={attribute:!0,type:String,converter:A,reflect:!1,useDefault:!1,hasChanged:I};Symbol.metadata??=Symbol("metadata"),w.litPropertyMetadata??=new WeakMap;class C extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,t=S){if(t.state&&(t.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((t=Object.create(t)).wrapped=!0),this.elementProperties.set(e,t),!t.noAccessor){const r=Symbol(),n=this.getPropertyDescriptor(e,r,t);void 0!==n&&p(this.prototype,e,n)}}static getPropertyDescriptor(e,t,r){const{get:n,set:i}=f(this.prototype,e)??{get(){return this[t]},set(e){this[t]=e}};return{get:n,set(t){const s=n?.call(this);i?.call(this,t),this.requestUpdate(e,s,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??S}static _$Ei(){if(this.hasOwnProperty(E("elementProperties")))return;const e=y(this);e.finalize(),void 0!==e.l&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(E("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(E("properties"))){const e=this.properties,t=[...g(e),...m(e)];for(const r of t)this.createProperty(r,e[r])}const e=this[Symbol.metadata];if(null!==e){const t=litPropertyMetadata.get(e);if(void 0!==t)for(const[e,r]of t)this.elementProperties.set(e,r)}this._$Eh=new Map;for(const[t,r]of this.elementProperties){const e=this._$Eu(t,r);void 0!==e&&this._$Eh.set(e,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const e of r)t.unshift(h(e))}else void 0!==e&&t.push(h(e));return t}static _$Eu(e,t){const r=t.attribute;return!1===r?void 0:"string"==typeof r?r:"string"==typeof e?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((e=>e(this)))}addController(e){(this._$EO??=new Set).add(e),void 0!==this.renderRoot&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){const e=new Map,t=this.constructor.elementProperties;for(const r of t.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return l(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((e=>e.hostConnected?.()))}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach((e=>e.hostDisconnected?.()))}attributeChangedCallback(e,t,r){this._$AK(e,r)}_$ET(e,t){const r=this.constructor.elementProperties.get(e),n=this.constructor._$Eu(e,r);if(void 0!==n&&!0===r.reflect){const i=(void 0!==r.converter?.toAttribute?r.converter:A).toAttribute(t,r.type);this._$Em=e,null==i?this.removeAttribute(n):this.setAttribute(n,i),this._$Em=null}}_$AK(e,t){const r=this.constructor,n=r._$Eh.get(e);if(void 0!==n&&this._$Em!==n){const e=r.getPropertyOptions(n),i="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==e.converter?.fromAttribute?e.converter:A;this._$Em=n,this[n]=i.fromAttribute(t,e.type)??this._$Ej?.get(n)??null,this._$Em=null}}requestUpdate(e,t,r){if(void 0!==e){const n=this.constructor,i=this[e];if(r??=n.getPropertyOptions(e),!((r.hasChanged??I)(i,t)||r.useDefault&&r.reflect&&i===this._$Ej?.get(e)&&!this.hasAttribute(n._$Eu(e,r))))return;this.C(e,t,r)}!1===this.isUpdatePending&&(this._$ES=this._$EP())}C(e,t,{useDefault:r,reflect:n,wrapped:i},s){r&&!(this._$Ej??=new Map).has(e)&&(this._$Ej.set(e,s??t??this[e]),!0!==i||void 0!==s)||(this._$AL.has(e)||(this.hasUpdated||r||(t=void 0),this._$AL.set(e,t)),!0===n&&this._$Em!==e&&(this._$Eq??=new Set).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[e,t]of this._$Ep)this[e]=t;this._$Ep=void 0}const e=this.constructor.elementProperties;if(e.size>0)for(const[t,r]of e){const{wrapped:e}=r,n=this[t];!0!==e||this._$AL.has(t)||void 0===n||this.C(t,void 0,r,n)}}let e=!1;const t=this._$AL;try{e=this.shouldUpdate(t),e?(this.willUpdate(t),this._$EO?.forEach((e=>e.hostUpdate?.())),this.update(t)):this._$EM()}catch(t){throw e=!1,this._$EM(),t}e&&this._$AE(t)}willUpdate(e){}_$AE(e){this._$EO?.forEach((e=>e.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&=this._$Eq.forEach((e=>this._$ET(e,this[e]))),this._$EM()}updated(e){}firstUpdated(e){}}C.elementStyles=[],C.shadowRootOptions={mode:"open"},C[E("elementProperties")]=new Map,C[E("finalized")]=new Map,_?.({ReactiveElement:C}),(w.reactiveElementVersions??=[]).push("2.1.0")},58747:function(e,t,r){"use strict";r.d(t,{X:function(){return n.X}});var n=r(17935)},58843:function(e,t,r){"use strict";r.d(t,{U:function(){return l}});r(18111),r(22489);var n=r(69983),i=r(20169),s=r(81753),o=r(65642),a=r(37903),c=r(14210);const u=(0,n.BX)({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[]}),l={state:u,replaceState(e){e&&Object.assign(u,(0,n.KR)(e))},subscribe(e){return a.W.subscribeChainProp("accountState",(t=>{if(t)return e(t)}))},subscribeKey(e,t,r){let n;return a.W.subscribeChainProp("accountState",(r=>{if(r){const i=r[e];n!==i&&(n=i,t(i))}}),r)},setStatus(e,t){a.W.setAccountProp("status",e,t)},getCaipAddress(e){return a.W.getAccountProp("caipAddress",e)},setCaipAddress(e,t){const r=e?s.w.getPlainAddress(e):void 0;t===a.W.state.activeChain&&(a.W.state.activeCaipAddress=e),a.W.setAccountProp("caipAddress",e,t),a.W.setAccountProp("address",r,t)},setBalance(e,t,r){a.W.setAccountProp("balance",e,r),a.W.setAccountProp("balanceSymbol",t,r)},setProfileName(e,t){a.W.setAccountProp("profileName",e,t)},setProfileImage(e,t){a.W.setAccountProp("profileImage",e,t)},setUser(e,t){a.W.setAccountProp("user",e,t)},setAddressExplorerUrl(e,t){a.W.setAccountProp("addressExplorerUrl",e,t)},setSmartAccountDeployed(e,t){a.W.setAccountProp("smartAccountDeployed",e,t)},setCurrentTab(e){a.W.setAccountProp("currentTab",e,a.W.state.activeChain)},setTokenBalance(e,t){e&&a.W.setAccountProp("tokenBalance",e,t)},setShouldUpdateToAddress(e,t){a.W.setAccountProp("shouldUpdateToAddress",e,t)},setAllAccounts(e,t){a.W.setAccountProp("allAccounts",e,t)},addAddressLabel(e,t,r){const n=a.W.getAccountProp("addressLabels",r)||new Map;n.set(e,t),a.W.setAccountProp("addressLabels",n,r)},removeAddressLabel(e,t){const r=a.W.getAccountProp("addressLabels",t)||new Map;r.delete(e),a.W.setAccountProp("addressLabels",r,t)},setConnectedWalletInfo(e,t){a.W.setAccountProp("connectedWalletInfo",e,t,!1)},setPreferredAccountType(e,t){a.W.setAccountProp("preferredAccountTypes",{...u.preferredAccountTypes,[t]:e},t)},setPreferredAccountTypes(e){u.preferredAccountTypes=e},setSocialProvider(e,t){e&&a.W.setAccountProp("socialProvider",e,t)},setSocialWindow(e,t){a.W.setAccountProp("socialWindow",e?(0,n.KR)(e):void 0,t)},setFarcasterUrl(e,t){a.W.setAccountProp("farcasterUrl",e,t)},async fetchTokenBalance(e){u.balanceLoading=!0;const t=a.W.state.activeCaipNetwork?.caipNetworkId,r=a.W.state.activeCaipNetwork?.chainNamespace,n=a.W.state.activeCaipAddress,l=n?s.w.getPlainAddress(n):void 0;if(u.lastRetry&&!s.w.isAllowedRetry(u.lastRetry,30*i.oU.ONE_SEC_MS))return u.balanceLoading=!1,[];try{if(l&&t&&r){const e=await o.T.getBalance(l,t),n=e.balances.filter((e=>"0"!==e.quantity.decimals));return this.setTokenBalance(n,r),u.lastRetry=void 0,u.balanceLoading=!1,n}}catch(h){u.lastRetry=Date.now(),e?.(h),c.P.showError("Token Balance Unavailable")}finally{u.balanceLoading=!1}return[]},resetAccount(e){a.W.resetAccount(e)}}},59167:function(e,t,r){"use strict";r(18111),r(7588),r(61701);var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.struct=t.f64=t.f32=t.i32=t.u32=t.i16=t.u16=t.i8=t.u8=void 0,t.u64=u,t.i64=l,t.u128=h,t.i128=d,t.u256=p,t.i256=f,t.publicKey=m,t.option=w,t.bool=b,t.vec=E,t.tagged=A,t.vecU8=I,t.str=S,t.rustEnum=C,t.array=k,t.map=O;const i=r(43495),s=r(96030),o=n(r(72487));var a=r(43495);Object.defineProperty(t,"u8",{enumerable:!0,get:function(){return a.u8}}),Object.defineProperty(t,"i8",{enumerable:!0,get:function(){return a.s8}}),Object.defineProperty(t,"u16",{enumerable:!0,get:function(){return a.u16}}),Object.defineProperty(t,"i16",{enumerable:!0,get:function(){return a.s16}}),Object.defineProperty(t,"u32",{enumerable:!0,get:function(){return a.u32}}),Object.defineProperty(t,"i32",{enumerable:!0,get:function(){return a.s32}}),Object.defineProperty(t,"f32",{enumerable:!0,get:function(){return a.f32}}),Object.defineProperty(t,"f64",{enumerable:!0,get:function(){return a.f64}}),Object.defineProperty(t,"struct",{enumerable:!0,get:function(){return a.struct}});class c extends i.Layout{constructor(e,t,r){super(e,r),this.blob=(0,i.blob)(e),this.signed=t}decode(e,t=0){const r=new o.default(this.blob.decode(e,t),10,"le");return this.signed?r.fromTwos(8*this.span).clone():r}encode(e,t,r=0){return this.signed&&(e=e.toTwos(8*this.span)),this.blob.encode(e.toArrayLike(Buffer,"le",this.span),t,r)}}function u(e){return new c(8,!1,e)}function l(e){return new c(8,!0,e)}function h(e){return new c(16,!1,e)}function d(e){return new c(16,!0,e)}function p(e){return new c(32,!1,e)}function f(e){return new c(32,!0,e)}class g extends i.Layout{constructor(e,t,r,n){super(e.span,n),this.layout=e,this.decoder=t,this.encoder=r}decode(e,t){return this.decoder(this.layout.decode(e,t))}encode(e,t,r){return this.layout.encode(this.encoder(e),t,r)}getSpan(e,t){return this.layout.getSpan(e,t)}}function m(e){return new g((0,i.blob)(32),(e=>new s.PublicKey(e)),(e=>e.toBuffer()),e)}class y extends i.Layout{constructor(e,t){super(-1,t),this.layout=e,this.discriminator=(0,i.u8)()}encode(e,t,r=0){return null===e||void 0===e?this.discriminator.encode(0,t,r):(this.discriminator.encode(1,t,r),this.layout.encode(e,t,r+1)+1)}decode(e,t=0){const r=this.discriminator.decode(e,t);if(0===r)return null;if(1===r)return this.layout.decode(e,t+1);throw new Error("Invalid option "+this.property)}getSpan(e,t=0){const r=this.discriminator.decode(e,t);if(0===r)return 1;if(1===r)return this.layout.getSpan(e,t+1)+1;throw new Error("Invalid option "+this.property)}}function w(e,t){return new y(e,t)}function b(e){return new g((0,i.u8)(),v,_,e)}function v(e){if(0===e)return!1;if(1===e)return!0;throw new Error("Invalid bool: "+e)}function _(e){return e?1:0}function E(e,t){const r=(0,i.u32)("length"),n=(0,i.struct)([r,(0,i.seq)(e,(0,i.offset)(r,-r.span),"values")]);return new g(n,(({values:e})=>e),(e=>({values:e})),t)}function A(e,t,r){const n=(0,i.struct)([u("tag"),t.replicate("data")]);function s({tag:t,data:r}){if(!t.eq(e))throw new Error("Invalid tag, expected: "+e.toString("hex")+", got: "+t.toString("hex"));return r}return new g(n,s,(t=>({tag:e,data:t})),r)}function I(e){const t=(0,i.u32)("length"),r=(0,i.struct)([t,(0,i.blob)((0,i.offset)(t,-t.span),"data")]);return new g(r,(({data:e})=>e),(e=>({data:e})),e)}function S(e){return new g(I(),(e=>e.toString("utf-8")),(e=>Buffer.from(e,"utf-8")),e)}function C(e,t,r){const n=(0,i.union)(null!==r&&void 0!==r?r:(0,i.u8)(),t);return e.forEach(((e,t)=>n.addVariant(t,e,e.property))),n}function k(e,t,r){const n=(0,i.struct)([(0,i.seq)(e,t,"values")]);return new g(n,(({values:e})=>e),(e=>({values:e})),r)}class N extends i.Layout{constructor(e,t,r){super(e.span+t.span,r),this.keyLayout=e,this.valueLayout=t}decode(e,t){t=t||0;const r=this.keyLayout.decode(e,t),n=this.valueLayout.decode(e,t+this.keyLayout.getSpan(e,t));return[r,n]}encode(e,t,r){r=r||0;const n=this.keyLayout.encode(e[0],t,r),i=this.valueLayout.encode(e[1],t,r+n);return n+i}getSpan(e,t){return this.keyLayout.getSpan(e,t)+this.valueLayout.getSpan(e,t)}}function O(e,t,r){const n=(0,i.u32)("length"),s=(0,i.struct)([n,(0,i.seq)(new N(e,t),(0,i.offset)(n,-n.span),"values")]);return new g(s,(({values:e})=>new Map(e)),(e=>({values:Array.from(e.entries())})),r)}},59383:function(e,t,r){"use strict";r.d(t,{B8:function(){return f},D0:function(){return S},LH:function(){return I},Tp:function(){return k},dQ:function(){return y},jr:function(){return b},pS:function(){return _},qy:function(){return N},zH:function(){return p},zi:function(){return d}});r(18111),r(18237);var n=r(86330),i=r(75404);
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const s=BigInt(0),o=BigInt(1),a=BigInt(2),c=BigInt(3),u=BigInt(4),l=BigInt(5),h=BigInt(8);function d(e,t){const r=e%t;return r>=s?r:t+r}function p(e,t,r){let n=e;while(t-- >s)n*=n,n%=r;return n}function f(e,t){if(e===s)throw new Error("invert: expected non-zero number");if(t<=s)throw new Error("invert: expected positive modulus, got "+t);let r=d(e,t),n=t,i=s,a=o,c=o,u=s;while(r!==s){const e=n/r,t=n%r,s=i-c*e,o=a-u*e;n=r,r=t,i=c,a=u,c=s,u=o}const l=n;if(l!==o)throw new Error("invert: does not exist");return d(i,t)}function g(e){let t=e-o,r=0;while(t%a===s)t/=a,r++;let n=a;const i=S(e);while(n<e&&A(i,n))if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(1===r){const t=(e+o)/u;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}const c=(t+o)/a;return function(e,i){if(!A(e,i))throw new Error("Cannot find square root");let s=r,a=e.pow(e.mul(e.ONE,n),t),u=e.pow(i,c),l=e.pow(i,t);while(!e.eql(l,e.ONE)){if(e.eql(l,e.ZERO))return e.ZERO;let t=1;for(let n=e.sqr(l);t<s;t++){if(e.eql(n,e.ONE))break;n=e.sqr(n)}const r=e.pow(a,o<<BigInt(s-t-1));a=e.sqr(r),u=e.mul(u,r),l=e.mul(l,a),s=t}return u}}function m(e){return e%u===c?function(t,r){const n=(e+o)/u,i=t.pow(r,n);if(!t.eql(t.sqr(i),r))throw new Error("Cannot find square root");return i}:e%h===l?function(t,r){const n=t.mul(r,a),i=(e-l)/h,s=t.pow(n,i),o=t.mul(r,s),c=t.mul(t.mul(o,a),s),u=t.mul(o,t.sub(c,t.ONE));if(!t.eql(t.sqr(u),r))throw new Error("Cannot find square root");return u}:g(e)}const y=(e,t)=>(d(e,t)&o)===o,w=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function b(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=w.reduce(((e,t)=>(e[t]="function",e)),t);return(0,i.Q5)(e,r)}function v(e,t,r){if(r<s)throw new Error("invalid exponent, negatives unsupported");if(r===s)return e.ONE;if(r===o)return t;let n=e.ONE,i=t;while(r>s)r&o&&(n=e.mul(n,i)),i=e.sqr(i),r>>=o;return n}function _(e,t,r=!1){const n=new Array(t.length).fill(r?e.ZERO:void 0),i=t.reduce(((t,r,i)=>e.is0(r)?t:(n[i]=t,e.mul(t,r))),e.ONE),s=e.inv(i);return t.reduceRight(((t,r,i)=>e.is0(r)?t:(n[i]=e.mul(t,n[i]),e.mul(t,r))),s),n}function E(e,t){const r=(e.ORDER-o)/a,n=e.pow(t,r),i=e.eql(n,e.ONE),s=e.eql(n,e.ZERO),c=e.eql(n,e.neg(e.ONE));if(!i&&!s&&!c)throw new Error("Cannot find square root: probably non-prime P");return i?1:s?0:-1}function A(e,t){const r=E(e,t);return 0===r||1===r}function I(e,t){void 0!==t&&(0,n.Fe)(t);const r=void 0!==t?t:e.toString(2).length,i=Math.ceil(r/8);return{nBitLength:r,nByteLength:i}}function S(e,t,r=!1,n={}){if(e<=s)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:a,nByteLength:c}=I(e,t);if(c>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let u;const l=Object.freeze({ORDER:e,isLE:r,BITS:a,BYTES:c,MASK:(0,i.OG)(a),ZERO:s,ONE:o,create:t=>d(t,e),isValid:t=>{if("bigint"!==typeof t)throw new Error("invalid field element: expected bigint, got "+typeof t);return s<=t&&t<e},is0:e=>e===s,isOdd:e=>(e&o)===o,neg:t=>d(-t,e),eql:(e,t)=>e===t,sqr:t=>d(t*t,e),add:(t,r)=>d(t+r,e),sub:(t,r)=>d(t-r,e),mul:(t,r)=>d(t*r,e),pow:(e,t)=>v(l,e,t),div:(t,r)=>d(t*f(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>f(t,e),sqrt:n.sqrt||(t=>(u||(u=m(e)),u(l,t))),toBytes:e=>r?(0,i.z)(e,c):(0,i.lq)(e,c),fromBytes:e=>{if(e.length!==c)throw new Error("Field.fromBytes: expected "+c+" bytes, got "+e.length);return r?(0,i.lX)(e):(0,i.Ph)(e)},invertBatch:e=>_(l,e),cmov:(e,t,r)=>r?t:e});return Object.freeze(l)}function C(e){if("bigint"!==typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function k(e){const t=C(e);return t+Math.ceil(t/2)}function N(e,t,r=!1){const n=e.length,s=C(t),a=k(t);if(n<16||n<a||n>1024)throw new Error("expected "+a+"-1024 bytes of input, got "+n);const c=r?(0,i.lX)(e):(0,i.Ph)(e),u=d(c,t-o)+o;return r?(0,i.z)(u,s):(0,i.lq)(u,s)}},59515:function(e,t){"use strict";function r(e){let t;return"undefined"!==typeof window&&"undefined"!==typeof window[e]&&(t=window[e]),t}function n(e){const t=r(e);if(!t)throw new Error(`${e} is not defined in Window`);return t}function i(){return n("document")}function s(){return r("document")}function o(){return n("navigator")}function a(){return r("navigator")}function c(){return n("location")}function u(){return r("location")}function l(){return n("crypto")}function h(){return r("crypto")}function d(){return n("localStorage")}function p(){return r("localStorage")}Object.defineProperty(t,"__esModule",{value:!0}),t.getLocalStorage=t.getLocalStorageOrThrow=t.getCrypto=t.getCryptoOrThrow=t.getLocation=t.getLocationOrThrow=t.getNavigator=t.getNavigatorOrThrow=t.getDocument=t.getDocumentOrThrow=t.getFromWindowOrThrow=t.getFromWindow=void 0,t.getFromWindow=r,t.getFromWindowOrThrow=n,t.getDocumentOrThrow=i,t.getDocument=s,t.getNavigatorOrThrow=o,t.getNavigator=a,t.getLocationOrThrow=c,t.getLocation=u,t.getCryptoOrThrow=l,t.getCrypto=h,t.getLocalStorageOrThrow=d,t.getLocalStorage=p},59761:function(e,t,r){"use strict";r.d(t,{C:function(){return n}});const n={validateCaipAddress(e){if(3!==e.split(":")?.length)throw new Error("Invalid CAIP Address");return e},parseCaipAddress(e){const t=e.split(":");if(3!==t.length)throw new Error(`Invalid CAIP-10 address: ${e}`);const[r,n,i]=t;if(!r||!n||!i)throw new Error(`Invalid CAIP-10 address: ${e}`);return{chainNamespace:r,chainId:n,address:i}},parseCaipNetworkId(e){const t=e.split(":");if(2!==t.length)throw new Error(`Invalid CAIP-2 network id: ${e}`);const[r,n]=t;if(!r||!n)throw new Error(`Invalid CAIP-2 network id: ${e}`);return{chainNamespace:r,chainId:n}}}},59930:function(e,t,r){"use strict";r(44114),r(18111),r(7588),r(61701),r(61806);var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e["default"]=t}),s=this&&this.__decorate||function(e,t,r,n){var i,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeUnchecked=t.deserialize=t.serialize=t.BinaryReader=t.BinaryWriter=t.BorshError=t.baseDecode=t.baseEncode=void 0;const c=a(r(72487)),u=a(r(9516)),l=o(r(97532)),h="function"!==typeof TextDecoder?l.TextDecoder:TextDecoder,d=new h("utf-8",{fatal:!0});function p(e){return"string"===typeof e&&(e=Buffer.from(e,"utf8")),u.default.encode(Buffer.from(e))}function f(e){return Buffer.from(u.default.decode(e))}t.baseEncode=p,t.baseDecode=f;const g=1024;class m extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}t.BorshError=m;class y{constructor(){this.buf=Buffer.alloc(g),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(g)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(Buffer.from(new c.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(Buffer.from(new c.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(Buffer.from(new c.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(Buffer.from(new c.default(e).toArray("le",64)))}writeBuffer(e){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),e,Buffer.alloc(g)]),this.length+=e.length}writeString(e){this.maybeResize();const t=Buffer.from(e,"utf8");this.writeU32(t.length),this.writeBuffer(t)}writeFixedArray(e){this.writeBuffer(Buffer.from(e))}writeArray(e,t){this.maybeResize(),this.writeU32(e.length);for(const r of e)this.maybeResize(),t(r)}toArray(){return this.buf.subarray(0,this.length)}}function w(e,t,r){const n=r.value;r.value=function(...e){try{return n.apply(this,e)}catch(t){if(t instanceof RangeError){const e=t.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(e)>=0)throw new m("Reached the end of buffer when deserializing")}throw t}}}t.BinaryWriter=y;class b{constructor(e){this.buf=e,this.offset=0}readU8(){const e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){const e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){const e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){const e=this.readBuffer(8);return new c.default(e,"le")}readU128(){const e=this.readBuffer(16);return new c.default(e,"le")}readU256(){const e=this.readBuffer(32);return new c.default(e,"le")}readU512(){const e=this.readBuffer(64);return new c.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new m(`Expected buffer length ${e} isn't within bounds`);const t=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,t}readString(){const e=this.readU32(),t=this.readBuffer(e);try{return d.decode(t)}catch(r){throw new m(`Error decoding UTF-8 string: ${r}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){const t=this.readU32(),r=Array();for(let n=0;n<t;++n)r.push(e());return r}}function v(e){return e.charAt(0).toUpperCase()+e.slice(1)}function _(e,t,r,n,i){try{if("string"===typeof n)i[`write${v(n)}`](r);else if(n instanceof Array)if("number"===typeof n[0]){if(r.length!==n[0])throw new m(`Expecting byte array of length ${n[0]}, but got ${r.length} bytes`);i.writeFixedArray(r)}else if(2===n.length&&"number"===typeof n[1]){if(r.length!==n[1])throw new m(`Expecting byte array of length ${n[1]}, but got ${r.length} bytes`);for(let t=0;t<n[1];t++)_(e,null,r[t],n[0],i)}else i.writeArray(r,(r=>{_(e,t,r,n[0],i)}));else if(void 0!==n.kind)switch(n.kind){case"option":null===r||void 0===r?i.writeU8(0):(i.writeU8(1),_(e,t,r,n.type,i));break;case"map":i.writeU32(r.size),r.forEach(((r,s)=>{_(e,t,s,n.key,i),_(e,t,r,n.value,i)}));break;default:throw new m(`FieldType ${n} unrecognized`)}else E(e,r,i)}catch(s){throw s instanceof m&&s.addToFieldPath(t),s}}function E(e,t,r){if("function"===typeof t.borshSerialize)return void t.borshSerialize(r);const n=e.get(t.constructor);if(!n)throw new m(`Class ${t.constructor.name} is missing in schema`);if("struct"===n.kind)n.fields.map((([n,i])=>{_(e,n,t[n],i,r)}));else{if("enum"!==n.kind)throw new m(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`);{const i=t[n.field];for(let s=0;s<n.values.length;++s){const[o,a]=n.values[s];if(o===i){r.writeU8(s),_(e,o,t[o],a,r);break}}}}}function A(e,t,r=y){const n=new r;return E(e,t,n),n.toArray()}function I(e,t,r,n){try{if("string"===typeof r)return n[`read${v(r)}`]();if(r instanceof Array){if("number"===typeof r[0])return n.readFixedArray(r[0]);if("number"===typeof r[1]){const t=[];for(let i=0;i<r[1];i++)t.push(I(e,null,r[0],n));return t}return n.readArray((()=>I(e,t,r[0],n)))}if("option"===r.kind){const i=n.readU8();return i?I(e,t,r.type,n):void 0}if("map"===r.kind){let i=new Map;const s=n.readU32();for(let o=0;o<s;o++){const s=I(e,t,r.key,n),o=I(e,t,r.value,n);i.set(s,o)}return i}return S(e,r,n)}catch(i){throw i instanceof m&&i.addToFieldPath(t),i}}function S(e,t,r){if("function"===typeof t.borshDeserialize)return t.borshDeserialize(r);const n=e.get(t);if(!n)throw new m(`Class ${t.name} is missing in schema`);if("struct"===n.kind){const n={};for(const[i,s]of e.get(t).fields)n[i]=I(e,i,s,r);return new t(n)}if("enum"===n.kind){const i=r.readU8();if(i>=n.values.length)throw new m(`Enum index: ${i} is out of range`);const[s,o]=n.values[i],a=I(e,s,o,r);return new t({[s]:a})}throw new m(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}function C(e,t,r,n=b){const i=new n(r),s=S(e,t,i);if(i.offset<r.length)throw new m(`Unexpected ${r.length-i.offset} bytes after deserialized data`);return s}function k(e,t,r,n=b){const i=new n(r);return S(e,t,i)}s([w],b.prototype,"readU8",null),s([w],b.prototype,"readU16",null),s([w],b.prototype,"readU32",null),s([w],b.prototype,"readU64",null),s([w],b.prototype,"readU128",null),s([w],b.prototype,"readU256",null),s([w],b.prototype,"readU512",null),s([w],b.prototype,"readString",null),s([w],b.prototype,"readFixedArray",null),s([w],b.prototype,"readArray",null),t.BinaryReader=b,t.serialize=A,t.deserialize=C,t.deserializeUnchecked=k},60069:function(e,t,r){"use strict";r.d(t,{k:function(){return o}});r(44114),r(18111),r(30531),r(7588),r(61701),r(18237),r(17642),r(58004),r(33853),r(45876),r(32475),r(15024),r(31698);var n=r(39190),i=r(9848);const s={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},o={getMethodsByChainNamespace(e){return s[e]||[]},createDefaultNamespace(e){return{methods:this.getMethodsByChainNamespace(e),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(e,t){if(!t)return{...e};const r={...e},n=new Set;if(t.methods&&Object.keys(t.methods).forEach((e=>n.add(e))),t.chains&&Object.keys(t.chains).forEach((e=>n.add(e))),t.events&&Object.keys(t.events).forEach((e=>n.add(e))),t.rpcMap&&Object.keys(t.rpcMap).forEach((e=>{const[t]=e.split(":");t&&n.add(t)})),n.forEach((e=>{r[e]||(r[e]=this.createDefaultNamespace(e))})),t.methods&&Object.entries(t.methods).forEach((([e,t])=>{r[e]&&(r[e].methods=t)})),t.chains&&Object.entries(t.chains).forEach((([e,t])=>{r[e]&&(r[e].chains=t)})),t.events&&Object.entries(t.events).forEach((([e,t])=>{r[e]&&(r[e].events=t)})),t.rpcMap){const e=new Set;Object.entries(t.rpcMap).forEach((([t,n])=>{const[i,s]=t.split(":");i&&s&&r[i]&&(r[i].rpcMap||(r[i].rpcMap={}),e.has(i)||(r[i].rpcMap={},e.add(i)),r[i].rpcMap[s]=n)}))}return r},createNamespaces(e,t){const r=e.reduce(((e,t)=>{const{id:r,chainNamespace:n,rpcUrls:s}=t,o=s.default.http[0];e[n]||(e[n]=this.createDefaultNamespace(n));const a=`${n}:${r}`,c=e[n];switch(c.chains.push(a),a){case i.tWt.caipNetworkId:c.chains.push(i.tWt.deprecatedCaipNetworkId);break;case i.Rn0.caipNetworkId:c.chains.push(i.Rn0.deprecatedCaipNetworkId);break;default:}return c?.rpcMap&&o&&(c.rpcMap[r]=o),e}),{});return this.applyNamespaceOverrides(r,t)},resolveReownName:async e=>{const t=await n.f.resolveName(e),r=Object.values(t?.addresses)||[];return r[0]?.address||!1},getChainsFromNamespaces(e={}){return Object.values(e).flatMap((e=>{const t=e.chains||[],r=e.accounts.map((e=>{const[t,r]=e.split(":");return`${t}:${r}`}));return Array.from(new Set([...t,...r]))}))},isSessionEventData(e){return"object"===typeof e&&null!==e&&"id"in e&&"topic"in e&&"params"in e&&"object"===typeof e.params&&null!==e.params&&"chainId"in e.params&&"event"in e.params&&"object"===typeof e.params.event&&null!==e.params.event},isOriginAllowed(e,t,r){for(const n of[...t,...r])if(n.includes("*")){const t=n.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&"),r=`^${t.replace(/\\\*/gu,".*")}$`,i=new RegExp(r,"u");if(i.test(e))return!0}else if(n===e)return!0;return!1}}},60292:function(e,t,r){"use strict";r.d(t,{Rn0:function(){return n.Rn0},gTy:function(){return n.gTy},tWt:function(){return n.tWt}});var n=r(9848)},60452:function(e,t,r){
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var n=r(90712),i=n.Buffer;function s(e,t){for(var r in e)t[r]=e[r]}function o(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(s(n,t),t.Buffer=o),o.prototype=Object.create(i.prototype),s(i,o),o.from=function(e,t,r){if("number"===typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},o.alloc=function(e,t,r){if("number"!==typeof e)throw new TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"===typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},o.allocUnsafe=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return i(e)},o.allocUnsafeSlow=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},60491:function(e,t,r){"use strict";r.d(t,{AH:function(){return n.AH},JW:function(){return i.JW},WF:function(){return o},iz:function(){return n.iz},qy:function(){return i.qy}});r(44114);var n=r(58376),i=r(33883);
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const s=globalThis;class o extends n.mN{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=(0,i.XX)(t,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return i.c0}}o._$litElement$=!0,o["finalized"]=!0,s.litElementHydrateSupport?.({LitElement:o});const a=s.litElementPolyfillSupport;a?.({LitElement:o});(s.litElementVersions??=[]).push("4.2.0")},61034:function(e,t,r){"use strict";var n=r(69565),i=r(39297),s=r(1625),o=r(67979),a=RegExp.prototype;e.exports=function(e){var t=e.flags;return void 0!==t||"flags"in a||i(e,"flags")||!s(a,e)?t:n(o,e)}},61140:function(e,t,r){"use strict";r.d(t,{X:function(){return c}});r(18111),r(20116),r(7588),r(17642),r(58004),r(33853),r(45876),r(32475),r(15024),r(31698),r(12745);var n=r(80955),i=r(37903),s=r(58843),o=r(75758),a=r(83131);class c{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,this.getCaipNetworks=e=>i.W.getCaipNetworks(e),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.getCaipNetworks(this.namespace)}setAuthProvider(e){this.addConnector({id:n.o.CONNECTOR_ID.AUTH,type:"AUTH",name:n.o.CONNECTOR_NAMES.AUTH,provider:e,imageId:o.L.ConnectorImageIds[n.o.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const t=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter((e=>!t.has(e.id)&&(t.add(e.id),!0))),this.emit("connectors",this.availableConnectors)}setStatus(e,t){s.U.setStatus(e,t)}on(e,t){this.eventListeners.has(e)||this.eventListeners.set(e,new Set),this.eventListeners.get(e)?.add(t)}off(e,t){const r=this.eventListeners.get(e);r&&r.delete(t)}removeAllEventListeners(){this.eventListeners.forEach((e=>{e.clear()}))}emit(e,t){const r=this.eventListeners.get(e);r&&r.forEach((e=>e(t)))}async connectWalletConnect(e){const t=this.getWalletConnectConnector(),r=await t.connectWalletConnect();return{clientId:r.clientId}}async switchNetwork(e){const{caipNetwork:t,providerType:r}=e;if(!e.provider)return;const n="provider"in e.provider?e.provider.provider:e.provider;if("WALLET_CONNECT"!==r){if(n&&"AUTH"===r){const e=n,r=s.U.state.preferredAccountTypes?.[t.chainNamespace];await e.switchNetwork(t.caipNetworkId);const i=await e.getUser({chainId:t.caipNetworkId,preferredAccountType:r});this.emit("switchNetwork",i)}}else n.setDefaultChain(t.caipNetworkId)}getWalletConnectConnector(){const e=this.connectors.find((e=>e instanceof a.F));if(!e)throw new Error("WalletConnectConnector not found");return e}}},61464:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Watch=void 0;class r{constructor(){this.timestamps=new Map}start(e){if(this.timestamps.has(e))throw new Error(`Watch already started for label: ${e}`);this.timestamps.set(e,{started:Date.now()})}stop(e){const t=this.get(e);if("undefined"!==typeof t.elapsed)throw new Error(`Watch already stopped for label: ${e}`);const r=Date.now()-t.started;this.timestamps.set(e,{started:t.started,elapsed:r})}get(e){const t=this.timestamps.get(e);if("undefined"===typeof t)throw new Error(`No timestamp found for label: ${e}`);return t}elapsed(e){const t=this.get(e),r=t.elapsed||Date.now()-t.started;return r}}t.Watch=r,t["default"]=r},61806:function(e,t,r){"use strict";var n=r(46518),i=r(28551),s=r(72652),o=r(1767),a=[].push;n({target:"Iterator",proto:!0,real:!0},{toArray:function(){var e=[];return s(o(i(this)),a,{that:e,IS_RECORD:!0}),e}})},62707:function(e,t,r){"use strict";r.d(t,{Y:function(){return Xr}});r(18111),r(7588);var n,i,s=r(80955),o=r(1555),a=r(91889);r(44114),r(22489),r(20116),r(61701),r(17642),r(58004),r(33853),r(45876),r(32475),r(15024),r(31698);(function(e){function t(e){}function r(e){throw new Error}function n(e,t=" | "){return e.map((e=>"string"===typeof e?`'${e}'`:e)).join(t)}e.assertEqual=e=>e,e.assertIs=t,e.assertNever=r,e.arrayToEnum=e=>{const t={};for(const r of e)t[r]=r;return t},e.getValidEnumValues=t=>{const r=e.objectKeys(t).filter((e=>"number"!==typeof t[t[e]])),n={};for(const e of r)n[e]=t[e];return e.objectValues(n)},e.objectValues=t=>e.objectKeys(t).map((function(e){return t[e]})),e.objectKeys="function"===typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},e.find=(e,t)=>{for(const r of e)if(t(r))return r},e.isInteger="function"===typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"===typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=n,e.jsonStringifyReplacer=(e,t)=>"bigint"===typeof t?t.toString():t})(n||(n={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(i||(i={}));const c=n.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),u=e=>{const t=typeof e;switch(t){case"undefined":return c.undefined;case"string":return c.string;case"number":return isNaN(e)?c.nan:c.number;case"boolean":return c.boolean;case"function":return c.function;case"bigint":return c.bigint;case"symbol":return c.symbol;case"object":return Array.isArray(e)?c.array:null===e?c.null:e.then&&"function"===typeof e.then&&e.catch&&"function"===typeof e.catch?c.promise:"undefined"!==typeof Map&&e instanceof Map?c.map:"undefined"!==typeof Set&&e instanceof Set?c.set:"undefined"!==typeof Date&&e instanceof Date?c.date:c.object;default:return c.unknown}},l=n.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),h=e=>{const t=JSON.stringify(e,null,2);return t.replace(/"([^"]+)":/g,"$1:")};class d extends Error{constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(e){return e.message},r={_errors:[]},n=e=>{for(const i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(n);else if("invalid_return_type"===i.code)n(i.returnTypeError);else if("invalid_arguments"===i.code)n(i.argumentsError);else if(0===i.path.length)r._errors.push(t(i));else{let e=r,n=0;while(n<i.path.length){const r=i.path[n],s=n===i.path.length-1;s?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(i))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,n.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){const t={},r=[];for(const n of this.issues)n.path.length>0?(t[n.path[0]]=t[n.path[0]]||[],t[n.path[0]].push(e(n))):r.push(e(n));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}d.create=e=>{const t=new d(e);return t};const p=(e,t)=>{let r;switch(e.code){case l.invalid_type:r=e.received===c.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case l.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,n.jsonStringifyReplacer)}`;break;case l.unrecognized_keys:r=`Unrecognized key(s) in object: ${n.joinValues(e.keys,", ")}`;break;case l.invalid_union:r="Invalid input";break;case l.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${n.joinValues(e.options)}`;break;case l.invalid_enum_value:r=`Invalid enum value. Expected ${n.joinValues(e.options)}, received '${e.received}'`;break;case l.invalid_arguments:r="Invalid function arguments";break;case l.invalid_return_type:r="Invalid function return type";break;case l.invalid_date:r="Invalid date";break;case l.invalid_string:"object"===typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"===typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:n.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case l.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case l.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case l.custom:r="Invalid input";break;case l.invalid_intersection_types:r="Intersection results could not be merged";break;case l.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case l.not_finite:r="Number must be finite";break;default:r=t.defaultError,n.assertNever(e)}return{message:r}};let f=p;function g(e){f=e}function m(){return f}const y=e=>{const{data:t,path:r,errorMaps:n,issueData:i}=e,s=[...r,...i.path||[]],o={...i,path:s};let a="";const c=n.filter((e=>!!e)).slice().reverse();for(const u of c)a=u(o,{data:t,defaultError:a}).message;return{...i,path:s,message:i.message||a}},w=[];function b(e,t){const r=y({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,m(),p].filter((e=>!!e))});e.common.issues.push(r)}class v{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const n of t){if("aborted"===n.status)return _;"dirty"===n.status&&e.dirty(),r.push(n.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const n of t)r.push({key:await n.key,value:await n.value});return v.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const n of t){const{key:t,value:i}=n;if("aborted"===t.status)return _;if("aborted"===i.status)return _;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),"__proto__"===t.value||"undefined"===typeof i.value&&!n.alwaysSet||(r[t.value]=i.value)}return{status:e.value,value:r}}}const _=Object.freeze({status:"aborted"}),E=e=>({status:"dirty",value:e}),A=e=>({status:"valid",value:e}),I=e=>"aborted"===e.status,S=e=>"dirty"===e.status,C=e=>"valid"===e.status,k=e=>"undefined"!==typeof Promise&&e instanceof Promise;var N;(function(e){e.errToObj=e=>"string"===typeof e?{message:e}:e||{},e.toString=e=>"string"===typeof e?e:null===e||void 0===e?void 0:e.message})(N||(N={}));class O{constructor(e,t,r,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const T=(e,t)=>{if(C(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new d(e.common.issues);return this._error=t,this._error}}};function R(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:i}=e;if(t&&(r||n))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(t)return{errorMap:t,description:i};const s=(e,t)=>"invalid_type"!==e.code?{message:t.defaultError}:"undefined"===typeof t.data?{message:null!==n&&void 0!==n?n:t.defaultError}:{message:null!==r&&void 0!==r?r:t.defaultError};return{errorMap:s,description:i}}class x{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return u(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:u(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new v,ctx:{common:e.parent.common,data:e.data,parsedType:u(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(k(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;const n={common:{issues:[],async:null!==(r=null===t||void 0===t?void 0:t.async)&&void 0!==r&&r,contextualErrorMap:null===t||void 0===t?void 0:t.errorMap},path:(null===t||void 0===t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:u(e)},i=this._parseSync({data:e,path:n.path,parent:n});return T(n,i)}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:null===t||void 0===t?void 0:t.errorMap,async:!0},path:(null===t||void 0===t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:u(e)},n=this._parse({data:e,path:r.path,parent:r}),i=await(k(n)?n:Promise.resolve(n));return T(r,i)}refine(e,t){const r=e=>"string"===typeof t||"undefined"===typeof t?{message:t}:"function"===typeof t?t(e):t;return this._refinement(((t,n)=>{const i=e(t),s=()=>n.addIssue({code:l.custom,...r(t)});return"undefined"!==typeof Promise&&i instanceof Promise?i.then((e=>!!e||(s(),!1))):!!i||(s(),!1)}))}refinement(e,t){return this._refinement(((r,n)=>!!e(r)||(n.addIssue("function"===typeof t?t(r,n):t),!1)))}_refinement(e){return new Ee({schema:this,typeName:Me.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Ae.create(this,this._def)}nullable(){return Ie.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ne.create(this,this._def)}promise(){return _e.create(this,this._def)}or(e){return oe.create([this,e],this._def)}and(e){return le.create(this,e,this._def)}transform(e){return new Ee({...R(this._def),schema:this,typeName:Me.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"===typeof e?e:()=>e;return new Se({...R(this._def),innerType:this,defaultValue:t,typeName:Me.ZodDefault})}brand(){return new Oe({typeName:Me.ZodBranded,type:this,...R(this._def)})}catch(e){const t="function"===typeof e?e:()=>e;return new Ce({...R(this._def),innerType:this,catchValue:t,typeName:Me.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return Te.create(this,e)}readonly(){return Re.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const P=/^c[^\s-]{8,}$/i,M=/^[a-z][a-z0-9]*$/,B=/^[0-9A-HJKMNP-TV-Z]{26}$/,U=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,L=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,D="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let W;const j=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,z=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,H=e=>e.precision?e.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${e.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${e.precision}}Z$`):0===e.precision?e.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):e.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function q(e,t){return!("v4"!==t&&t||!j.test(e))||!("v6"!==t&&t||!z.test(e))}class $ extends x{_parse(e){this._def.coerce&&(e.data=String(e.data));const t=this._getType(e);if(t!==c.string){const t=this._getOrReturnCtx(e);return b(t,{code:l.invalid_type,expected:c.string,received:t.parsedType}),_}const r=new v;let i;for(const o of this._def.checks)if("min"===o.kind)e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),b(i,{code:l.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if("max"===o.kind)e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),b(i,{code:l.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if("length"===o.kind){const t=e.data.length>o.value,n=e.data.length<o.value;(t||n)&&(i=this._getOrReturnCtx(e,i),t?b(i,{code:l.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):n&&b(i,{code:l.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),r.dirty())}else if("email"===o.kind)L.test(e.data)||(i=this._getOrReturnCtx(e,i),b(i,{validation:"email",code:l.invalid_string,message:o.message}),r.dirty());else if("emoji"===o.kind)W||(W=new RegExp(D,"u")),W.test(e.data)||(i=this._getOrReturnCtx(e,i),b(i,{validation:"emoji",code:l.invalid_string,message:o.message}),r.dirty());else if("uuid"===o.kind)U.test(e.data)||(i=this._getOrReturnCtx(e,i),b(i,{validation:"uuid",code:l.invalid_string,message:o.message}),r.dirty());else if("cuid"===o.kind)P.test(e.data)||(i=this._getOrReturnCtx(e,i),b(i,{validation:"cuid",code:l.invalid_string,message:o.message}),r.dirty());else if("cuid2"===o.kind)M.test(e.data)||(i=this._getOrReturnCtx(e,i),b(i,{validation:"cuid2",code:l.invalid_string,message:o.message}),r.dirty());else if("ulid"===o.kind)B.test(e.data)||(i=this._getOrReturnCtx(e,i),b(i,{validation:"ulid",code:l.invalid_string,message:o.message}),r.dirty());else if("url"===o.kind)try{new URL(e.data)}catch(s){i=this._getOrReturnCtx(e,i),b(i,{validation:"url",code:l.invalid_string,message:o.message}),r.dirty()}else if("regex"===o.kind){o.regex.lastIndex=0;const t=o.regex.test(e.data);t||(i=this._getOrReturnCtx(e,i),b(i,{validation:"regex",code:l.invalid_string,message:o.message}),r.dirty())}else if("trim"===o.kind)e.data=e.data.trim();else if("includes"===o.kind)e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),b(i,{code:l.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),r.dirty());else if("toLowerCase"===o.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===o.kind)e.data=e.data.toUpperCase();else if("startsWith"===o.kind)e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),b(i,{code:l.invalid_string,validation:{startsWith:o.value},message:o.message}),r.dirty());else if("endsWith"===o.kind)e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),b(i,{code:l.invalid_string,validation:{endsWith:o.value},message:o.message}),r.dirty());else if("datetime"===o.kind){const t=H(o);t.test(e.data)||(i=this._getOrReturnCtx(e,i),b(i,{code:l.invalid_string,validation:"datetime",message:o.message}),r.dirty())}else"ip"===o.kind?q(e.data,o.version)||(i=this._getOrReturnCtx(e,i),b(i,{validation:"ip",code:l.invalid_string,message:o.message}),r.dirty()):n.assertNever(o);return{status:r.value,value:e.data}}_regex(e,t,r){return this.refinement((t=>e.test(t)),{validation:t,code:l.invalid_string,...N.errToObj(r)})}_addCheck(e){return new $({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...N.errToObj(e)})}url(e){return this._addCheck({kind:"url",...N.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...N.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...N.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...N.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...N.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...N.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...N.errToObj(e)})}datetime(e){var t;return"string"===typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:"undefined"===typeof(null===e||void 0===e?void 0:e.precision)?null:null===e||void 0===e?void 0:e.precision,offset:null!==(t=null===e||void 0===e?void 0:e.offset)&&void 0!==t&&t,...N.errToObj(null===e||void 0===e?void 0:e.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...N.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null===t||void 0===t?void 0:t.position,...N.errToObj(null===t||void 0===t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...N.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...N.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...N.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...N.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...N.errToObj(t)})}nonempty(e){return this.min(1,N.errToObj(e))}trim(){return new $({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new $({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new $({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>"emoji"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get isULID(){return!!this._def.checks.find((e=>"ulid"===e.kind))}get isIP(){return!!this._def.checks.find((e=>"ip"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function F(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,i=r>n?r:n,s=parseInt(e.toFixed(i).replace(".","")),o=parseInt(t.toFixed(i).replace(".",""));return s%o/Math.pow(10,i)}$.create=e=>{var t;return new $({checks:[],typeName:Me.ZodString,coerce:null!==(t=null===e||void 0===e?void 0:e.coerce)&&void 0!==t&&t,...R(e)})};class K extends x{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));const t=this._getType(e);if(t!==c.number){const t=this._getOrReturnCtx(e);return b(t,{code:l.invalid_type,expected:c.number,received:t.parsedType}),_}let r;const i=new v;for(const s of this._def.checks)if("int"===s.kind)n.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),b(r,{code:l.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty());else if("min"===s.kind){const t=s.inclusive?e.data<s.value:e.data<=s.value;t&&(r=this._getOrReturnCtx(e,r),b(r,{code:l.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty())}else if("max"===s.kind){const t=s.inclusive?e.data>s.value:e.data>=s.value;t&&(r=this._getOrReturnCtx(e,r),b(r,{code:l.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty())}else"multipleOf"===s.kind?0!==F(e.data,s.value)&&(r=this._getOrReturnCtx(e,r),b(r,{code:l.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):"finite"===s.kind?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),b(r,{code:l.not_finite,message:s.message}),i.dirty()):n.assertNever(s);return{status:i.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,N.toString(t))}gt(e,t){return this.setLimit("min",e,!1,N.toString(t))}lte(e,t){return this.setLimit("max",e,!0,N.toString(t))}lt(e,t){return this.setLimit("max",e,!1,N.toString(t))}setLimit(e,t,r,n){return new K({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:N.toString(n)}]})}_addCheck(e){return new K({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:N.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:N.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:N.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:N.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:N.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:N.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:N.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:N.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:N.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind||"multipleOf"===e.kind&&n.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}K.create=e=>new K({checks:[],typeName:Me.ZodNumber,coerce:(null===e||void 0===e?void 0:e.coerce)||!1,...R(e)});class V extends x{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){this._def.coerce&&(e.data=BigInt(e.data));const t=this._getType(e);if(t!==c.bigint){const t=this._getOrReturnCtx(e);return b(t,{code:l.invalid_type,expected:c.bigint,received:t.parsedType}),_}let r;const i=new v;for(const s of this._def.checks)if("min"===s.kind){const t=s.inclusive?e.data<s.value:e.data<=s.value;t&&(r=this._getOrReturnCtx(e,r),b(r,{code:l.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty())}else if("max"===s.kind){const t=s.inclusive?e.data>s.value:e.data>=s.value;t&&(r=this._getOrReturnCtx(e,r),b(r,{code:l.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty())}else"multipleOf"===s.kind?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),b(r,{code:l.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):n.assertNever(s);return{status:i.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,N.toString(t))}gt(e,t){return this.setLimit("min",e,!1,N.toString(t))}lte(e,t){return this.setLimit("max",e,!0,N.toString(t))}lt(e,t){return this.setLimit("max",e,!1,N.toString(t))}setLimit(e,t,r,n){return new V({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:N.toString(n)}]})}_addCheck(e){return new V({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:N.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:N.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:N.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:N.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:N.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}V.create=e=>{var t;return new V({checks:[],typeName:Me.ZodBigInt,coerce:null!==(t=null===e||void 0===e?void 0:e.coerce)&&void 0!==t&&t,...R(e)})};class Y extends x{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));const t=this._getType(e);if(t!==c.boolean){const t=this._getOrReturnCtx(e);return b(t,{code:l.invalid_type,expected:c.boolean,received:t.parsedType}),_}return A(e.data)}}Y.create=e=>new Y({typeName:Me.ZodBoolean,coerce:(null===e||void 0===e?void 0:e.coerce)||!1,...R(e)});class G extends x{_parse(e){this._def.coerce&&(e.data=new Date(e.data));const t=this._getType(e);if(t!==c.date){const t=this._getOrReturnCtx(e);return b(t,{code:l.invalid_type,expected:c.date,received:t.parsedType}),_}if(isNaN(e.data.getTime())){const t=this._getOrReturnCtx(e);return b(t,{code:l.invalid_date}),_}const r=new v;let i;for(const s of this._def.checks)"min"===s.kind?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),b(i,{code:l.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):"max"===s.kind?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),b(i,{code:l.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):n.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new G({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:N.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:N.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}G.create=e=>new G({checks:[],coerce:(null===e||void 0===e?void 0:e.coerce)||!1,typeName:Me.ZodDate,...R(e)});class Z extends x{_parse(e){const t=this._getType(e);if(t!==c.symbol){const t=this._getOrReturnCtx(e);return b(t,{code:l.invalid_type,expected:c.symbol,received:t.parsedType}),_}return A(e.data)}}Z.create=e=>new Z({typeName:Me.ZodSymbol,...R(e)});class J extends x{_parse(e){const t=this._getType(e);if(t!==c.undefined){const t=this._getOrReturnCtx(e);return b(t,{code:l.invalid_type,expected:c.undefined,received:t.parsedType}),_}return A(e.data)}}J.create=e=>new J({typeName:Me.ZodUndefined,...R(e)});class X extends x{_parse(e){const t=this._getType(e);if(t!==c.null){const t=this._getOrReturnCtx(e);return b(t,{code:l.invalid_type,expected:c.null,received:t.parsedType}),_}return A(e.data)}}X.create=e=>new X({typeName:Me.ZodNull,...R(e)});class Q extends x{constructor(){super(...arguments),this._any=!0}_parse(e){return A(e.data)}}Q.create=e=>new Q({typeName:Me.ZodAny,...R(e)});class ee extends x{constructor(){super(...arguments),this._unknown=!0}_parse(e){return A(e.data)}}ee.create=e=>new ee({typeName:Me.ZodUnknown,...R(e)});class te extends x{_parse(e){const t=this._getOrReturnCtx(e);return b(t,{code:l.invalid_type,expected:c.never,received:t.parsedType}),_}}te.create=e=>new te({typeName:Me.ZodNever,...R(e)});class re extends x{_parse(e){const t=this._getType(e);if(t!==c.undefined){const t=this._getOrReturnCtx(e);return b(t,{code:l.invalid_type,expected:c.void,received:t.parsedType}),_}return A(e.data)}}re.create=e=>new re({typeName:Me.ZodVoid,...R(e)});class ne extends x{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),n=this._def;if(t.parsedType!==c.array)return b(t,{code:l.invalid_type,expected:c.array,received:t.parsedType}),_;if(null!==n.exactLength){const e=t.data.length>n.exactLength.value,i=t.data.length<n.exactLength.value;(e||i)&&(b(t,{code:e?l.too_big:l.too_small,minimum:i?n.exactLength.value:void 0,maximum:e?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),r.dirty())}if(null!==n.minLength&&t.data.length<n.minLength.value&&(b(t,{code:l.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),r.dirty()),null!==n.maxLength&&t.data.length>n.maxLength.value&&(b(t,{code:l.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map(((e,r)=>n.type._parseAsync(new O(t,e,t.path,r))))).then((e=>v.mergeArray(r,e)));const i=[...t.data].map(((e,r)=>n.type._parseSync(new O(t,e,t.path,r))));return v.mergeArray(r,i)}get element(){return this._def.type}min(e,t){return new ne({...this._def,minLength:{value:e,message:N.toString(t)}})}max(e,t){return new ne({...this._def,maxLength:{value:e,message:N.toString(t)}})}length(e,t){return new ne({...this._def,exactLength:{value:e,message:N.toString(t)}})}nonempty(e){return this.min(1,e)}}function ie(e){if(e instanceof se){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=Ae.create(ie(n))}return new se({...e._def,shape:()=>t})}return e instanceof ne?new ne({...e._def,type:ie(e.element)}):e instanceof Ae?Ae.create(ie(e.unwrap())):e instanceof Ie?Ie.create(ie(e.unwrap())):e instanceof he?he.create(e.items.map((e=>ie(e)))):e}ne.create=(e,t)=>new ne({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Me.ZodArray,...R(t)});class se extends x{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=n.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){const t=this._getType(e);if(t!==c.object){const t=this._getOrReturnCtx(e);return b(t,{code:l.invalid_type,expected:c.object,received:t.parsedType}),_}const{status:r,ctx:n}=this._processInputParams(e),{shape:i,keys:s}=this._getCached(),o=[];if(!(this._def.catchall instanceof te&&"strip"===this._def.unknownKeys))for(const c in n.data)s.includes(c)||o.push(c);const a=[];for(const c of s){const e=i[c],t=n.data[c];a.push({key:{status:"valid",value:c},value:e._parse(new O(n,t,n.path,c)),alwaysSet:c in n.data})}if(this._def.catchall instanceof te){const e=this._def.unknownKeys;if("passthrough"===e)for(const t of o)a.push({key:{status:"valid",value:t},value:{status:"valid",value:n.data[t]}});else if("strict"===e)o.length>0&&(b(n,{code:l.unrecognized_keys,keys:o}),r.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of o){const r=n.data[t];a.push({key:{status:"valid",value:t},value:e._parse(new O(n,r,n.path,t)),alwaysSet:t in n.data})}}return n.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of a){const r=await t.key;e.push({key:r,value:await t.value,alwaysSet:t.alwaysSet})}return e})).then((e=>v.mergeObjectSync(r,e))):v.mergeObjectSync(r,a)}get shape(){return this._def.shape()}strict(e){return N.errToObj,new se({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{var n,i,s,o;const a=null!==(s=null===(i=(n=this._def).errorMap)||void 0===i?void 0:i.call(n,t,r).message)&&void 0!==s?s:r.defaultError;return"unrecognized_keys"===t.code?{message:null!==(o=N.errToObj(e).message)&&void 0!==o?o:a}:{message:a}}}:{}})}strip(){return new se({...this._def,unknownKeys:"strip"})}passthrough(){return new se({...this._def,unknownKeys:"passthrough"})}extend(e){return new se({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){const t=new se({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Me.ZodObject});return t}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new se({...this._def,catchall:e})}pick(e){const t={};return n.objectKeys(e).forEach((r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])})),new se({...this._def,shape:()=>t})}omit(e){const t={};return n.objectKeys(this.shape).forEach((r=>{e[r]||(t[r]=this.shape[r])})),new se({...this._def,shape:()=>t})}deepPartial(){return ie(this)}partial(e){const t={};return n.objectKeys(this.shape).forEach((r=>{const n=this.shape[r];e&&!e[r]?t[r]=n:t[r]=n.optional()})),new se({...this._def,shape:()=>t})}required(e){const t={};return n.objectKeys(this.shape).forEach((r=>{if(e&&!e[r])t[r]=this.shape[r];else{const e=this.shape[r];let n=e;while(n instanceof Ae)n=n._def.innerType;t[r]=n}})),new se({...this._def,shape:()=>t})}keyof(){return we(n.objectKeys(this.shape))}}se.create=(e,t)=>new se({shape:()=>e,unknownKeys:"strip",catchall:te.create(),typeName:Me.ZodObject,...R(t)}),se.strictCreate=(e,t)=>new se({shape:()=>e,unknownKeys:"strict",catchall:te.create(),typeName:Me.ZodObject,...R(t)}),se.lazycreate=(e,t)=>new se({shape:e,unknownKeys:"strip",catchall:te.create(),typeName:Me.ZodObject,...R(t)});class oe extends x{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;function n(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const n of e)if("dirty"===n.result.status)return t.common.issues.push(...n.ctx.common.issues),n.result;const r=e.map((e=>new d(e.ctx.common.issues)));return b(t,{code:l.invalid_union,unionErrors:r}),_}if(t.common.async)return Promise.all(r.map((async e=>{const r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}}))).then(n);{let e;const n=[];for(const s of r){const r={...t,common:{...t.common,issues:[]},parent:null},i=s._parseSync({data:t.data,path:t.path,parent:r});if("valid"===i.status)return i;"dirty"!==i.status||e||(e={result:i,ctx:r}),r.common.issues.length&&n.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const i=n.map((e=>new d(e)));return b(t,{code:l.invalid_union,unionErrors:i}),_}}get options(){return this._def.options}}oe.create=(e,t)=>new oe({options:e,typeName:Me.ZodUnion,...R(t)});const ae=e=>e instanceof me?ae(e.schema):e instanceof Ee?ae(e.innerType()):e instanceof ye?[e.value]:e instanceof be?e.options:e instanceof ve?Object.keys(e.enum):e instanceof Se?ae(e._def.innerType):e instanceof J?[void 0]:e instanceof X?[null]:null;class ce extends x{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==c.object)return b(t,{code:l.invalid_type,expected:c.object,received:t.parsedType}),_;const r=this.discriminator,n=t.data[r],i=this.optionsMap.get(n);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(b(t,{code:l.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),_)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){const n=new Map;for(const i of t){const t=ae(i.shape[e]);if(!t)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const r of t){if(n.has(r))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(r)}`);n.set(r,i)}}return new ce({typeName:Me.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...R(r)})}}function ue(e,t){const r=u(e),i=u(t);if(e===t)return{valid:!0,data:e};if(r===c.object&&i===c.object){const r=n.objectKeys(t),i=n.objectKeys(e).filter((e=>-1!==r.indexOf(e))),s={...e,...t};for(const n of i){const r=ue(e[n],t[n]);if(!r.valid)return{valid:!1};s[n]=r.data}return{valid:!0,data:s}}if(r===c.array&&i===c.array){if(e.length!==t.length)return{valid:!1};const r=[];for(let n=0;n<e.length;n++){const i=e[n],s=t[n],o=ue(i,s);if(!o.valid)return{valid:!1};r.push(o.data)}return{valid:!0,data:r}}return r===c.date&&i===c.date&&+e===+t?{valid:!0,data:e}:{valid:!1}}class le extends x{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),n=(e,n)=>{if(I(e)||I(n))return _;const i=ue(e.value,n.value);return i.valid?((S(e)||S(n))&&t.dirty(),{status:t.value,value:i.data}):(b(r,{code:l.invalid_intersection_types}),_)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then((([e,t])=>n(e,t))):n(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}le.create=(e,t,r)=>new le({left:e,right:t,typeName:Me.ZodIntersection,...R(r)});class he extends x{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==c.array)return b(r,{code:l.invalid_type,expected:c.array,received:r.parsedType}),_;if(r.data.length<this._def.items.length)return b(r,{code:l.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),_;const n=this._def.rest;!n&&r.data.length>this._def.items.length&&(b(r,{code:l.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const i=[...r.data].map(((e,t)=>{const n=this._def.items[t]||this._def.rest;return n?n._parse(new O(r,e,r.path,t)):null})).filter((e=>!!e));return r.common.async?Promise.all(i).then((e=>v.mergeArray(t,e))):v.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new he({...this._def,rest:e})}}he.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new he({items:e,typeName:Me.ZodTuple,rest:null,...R(t)})};class de extends x{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==c.object)return b(r,{code:l.invalid_type,expected:c.object,received:r.parsedType}),_;const n=[],i=this._def.keyType,s=this._def.valueType;for(const o in r.data)n.push({key:i._parse(new O(r,o,r.path,o)),value:s._parse(new O(r,r.data[o],r.path,o))});return r.common.async?v.mergeObjectAsync(t,n):v.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,r){return new de(t instanceof x?{keyType:e,valueType:t,typeName:Me.ZodRecord,...R(r)}:{keyType:$.create(),valueType:e,typeName:Me.ZodRecord,...R(t)})}}class pe extends x{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==c.map)return b(r,{code:l.invalid_type,expected:c.map,received:r.parsedType}),_;const n=this._def.keyType,i=this._def.valueType,s=[...r.data.entries()].map((([e,t],s)=>({key:n._parse(new O(r,e,r.path,[s,"key"])),value:i._parse(new O(r,t,r.path,[s,"value"]))})));if(r.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const r of s){const n=await r.key,i=await r.value;if("aborted"===n.status||"aborted"===i.status)return _;"dirty"!==n.status&&"dirty"!==i.status||t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const r of s){const n=r.key,i=r.value;if("aborted"===n.status||"aborted"===i.status)return _;"dirty"!==n.status&&"dirty"!==i.status||t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}}}}pe.create=(e,t,r)=>new pe({valueType:t,keyType:e,typeName:Me.ZodMap,...R(r)});class fe extends x{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==c.set)return b(r,{code:l.invalid_type,expected:c.set,received:r.parsedType}),_;const n=this._def;null!==n.minSize&&r.data.size<n.minSize.value&&(b(r,{code:l.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),null!==n.maxSize&&r.data.size>n.maxSize.value&&(b(r,{code:l.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());const i=this._def.valueType;function s(e){const r=new Set;for(const n of e){if("aborted"===n.status)return _;"dirty"===n.status&&t.dirty(),r.add(n.value)}return{status:t.value,value:r}}const o=[...r.data.values()].map(((e,t)=>i._parse(new O(r,e,r.path,t))));return r.common.async?Promise.all(o).then((e=>s(e))):s(o)}min(e,t){return new fe({...this._def,minSize:{value:e,message:N.toString(t)}})}max(e,t){return new fe({...this._def,maxSize:{value:e,message:N.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}fe.create=(e,t)=>new fe({valueType:e,minSize:null,maxSize:null,typeName:Me.ZodSet,...R(t)});class ge extends x{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==c.function)return b(t,{code:l.invalid_type,expected:c.function,received:t.parsedType}),_;function r(e,r){return y({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,m(),p].filter((e=>!!e)),issueData:{code:l.invalid_arguments,argumentsError:r}})}function n(e,r){return y({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,m(),p].filter((e=>!!e)),issueData:{code:l.invalid_return_type,returnTypeError:r}})}const i={errorMap:t.common.contextualErrorMap},s=t.data;if(this._def.returns instanceof _e){const e=this;return A((async function(...t){const o=new d([]),a=await e._def.args.parseAsync(t,i).catch((e=>{throw o.addIssue(r(t,e)),o})),c=await Reflect.apply(s,this,a),u=await e._def.returns._def.type.parseAsync(c,i).catch((e=>{throw o.addIssue(n(c,e)),o}));return u}))}{const e=this;return A((function(...t){const o=e._def.args.safeParse(t,i);if(!o.success)throw new d([r(t,o.error)]);const a=Reflect.apply(s,this,o.data),c=e._def.returns.safeParse(a,i);if(!c.success)throw new d([n(a,c.error)]);return c.data}))}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ge({...this._def,args:he.create(e).rest(ee.create())})}returns(e){return new ge({...this._def,returns:e})}implement(e){const t=this.parse(e);return t}strictImplement(e){const t=this.parse(e);return t}static create(e,t,r){return new ge({args:e||he.create([]).rest(ee.create()),returns:t||ee.create(),typeName:Me.ZodFunction,...R(r)})}}class me extends x{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.getter();return r._parse({data:t.data,path:t.path,parent:t})}}me.create=(e,t)=>new me({getter:e,typeName:Me.ZodLazy,...R(t)});class ye extends x{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return b(t,{received:t.data,code:l.invalid_literal,expected:this._def.value}),_}return{status:"valid",value:e.data}}get value(){return this._def.value}}function we(e,t){return new be({values:e,typeName:Me.ZodEnum,...R(t)})}ye.create=(e,t)=>new ye({value:e,typeName:Me.ZodLiteral,...R(t)});class be extends x{_parse(e){if("string"!==typeof e.data){const t=this._getOrReturnCtx(e),r=this._def.values;return b(t,{expected:n.joinValues(r),received:t.parsedType,code:l.invalid_type}),_}if(-1===this._def.values.indexOf(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return b(t,{received:t.data,code:l.invalid_enum_value,options:r}),_}return A(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e){return be.create(e)}exclude(e){return be.create(this.options.filter((t=>!e.includes(t))))}}be.create=we;class ve extends x{_parse(e){const t=n.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==c.string&&r.parsedType!==c.number){const e=n.objectValues(t);return b(r,{expected:n.joinValues(e),received:r.parsedType,code:l.invalid_type}),_}if(-1===t.indexOf(e.data)){const e=n.objectValues(t);return b(r,{received:r.data,code:l.invalid_enum_value,options:e}),_}return A(e.data)}get enum(){return this._def.values}}ve.create=(e,t)=>new ve({values:e,typeName:Me.ZodNativeEnum,...R(t)});class _e extends x{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==c.promise&&!1===t.common.async)return b(t,{code:l.invalid_type,expected:c.promise,received:t.parsedType}),_;const r=t.parsedType===c.promise?t.data:Promise.resolve(t.data);return A(r.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}_e.create=(e,t)=>new _e({type:e,typeName:Me.ZodPromise,...R(t)});class Ee extends x{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Me.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:e=>{b(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),"preprocess"===i.type){const e=i.transform(r.data,s);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(e).then((e=>this._def.schema._parseAsync({data:e,path:r.path,parent:r}))):this._def.schema._parseSync({data:e,path:r.path,parent:r})}if("refinement"===i.type){const e=e=>{const t=i.refinement(e,s);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===r.common.async){const n=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===n.status?_:("dirty"===n.status&&t.dirty(),e(n.value),{status:t.value,value:n.value})}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then((r=>"aborted"===r.status?_:("dirty"===r.status&&t.dirty(),e(r.value).then((()=>({status:t.value,value:r.value}))))))}if("transform"===i.type){if(!1===r.common.async){const e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!C(e))return e;const n=i.transform(e.value,s);if(n instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:n}}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then((e=>C(e)?Promise.resolve(i.transform(e.value,s)).then((e=>({status:t.value,value:e}))):e))}n.assertNever(i)}}Ee.create=(e,t,r)=>new Ee({schema:e,typeName:Me.ZodEffects,effect:t,...R(r)}),Ee.createWithPreprocess=(e,t,r)=>new Ee({schema:t,effect:{type:"preprocess",transform:e},typeName:Me.ZodEffects,...R(r)});class Ae extends x{_parse(e){const t=this._getType(e);return t===c.undefined?A(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ae.create=(e,t)=>new Ae({innerType:e,typeName:Me.ZodOptional,...R(t)});class Ie extends x{_parse(e){const t=this._getType(e);return t===c.null?A(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ie.create=(e,t)=>new Ie({innerType:e,typeName:Me.ZodNullable,...R(t)});class Se extends x{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===c.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Se.create=(e,t)=>new Se({innerType:e,typeName:Me.ZodDefault,defaultValue:"function"===typeof t.default?t.default:()=>t.default,...R(t)});class Ce extends x{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return k(n)?n.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new d(r.common.issues)},input:r.data})}))):{status:"valid",value:"valid"===n.status?n.value:this._def.catchValue({get error(){return new d(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Ce.create=(e,t)=>new Ce({innerType:e,typeName:Me.ZodCatch,catchValue:"function"===typeof t.catch?t.catch:()=>t.catch,...R(t)});class ke extends x{_parse(e){const t=this._getType(e);if(t!==c.nan){const t=this._getOrReturnCtx(e);return b(t,{code:l.invalid_type,expected:c.nan,received:t.parsedType}),_}return{status:"valid",value:e.data}}}ke.create=e=>new ke({typeName:Me.ZodNaN,...R(e)});const Ne=Symbol("zod_brand");class Oe extends x{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class Te extends x{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async){const e=async()=>{const e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?_:"dirty"===e.status?(t.dirty(),E(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})};return e()}{const e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?_:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new Te({in:e,out:t,typeName:Me.ZodPipeline})}}class Re extends x{_parse(e){const t=this._def.innerType._parse(e);return C(t)&&(t.value=Object.freeze(t.value)),t}}Re.create=(e,t)=>new Re({innerType:e,typeName:Me.ZodReadonly,...R(t)});const xe=(e,t={},r)=>e?Q.create().superRefine(((n,i)=>{var s,o;if(!e(n)){const e="function"===typeof t?t(n):"string"===typeof t?{message:t}:t,a=null===(o=null!==(s=e.fatal)&&void 0!==s?s:r)||void 0===o||o,c="string"===typeof e?{message:e}:e;i.addIssue({code:"custom",...c,fatal:a})}})):Q.create(),Pe={object:se.lazycreate};var Me;(function(e){e["ZodString"]="ZodString",e["ZodNumber"]="ZodNumber",e["ZodNaN"]="ZodNaN",e["ZodBigInt"]="ZodBigInt",e["ZodBoolean"]="ZodBoolean",e["ZodDate"]="ZodDate",e["ZodSymbol"]="ZodSymbol",e["ZodUndefined"]="ZodUndefined",e["ZodNull"]="ZodNull",e["ZodAny"]="ZodAny",e["ZodUnknown"]="ZodUnknown",e["ZodNever"]="ZodNever",e["ZodVoid"]="ZodVoid",e["ZodArray"]="ZodArray",e["ZodObject"]="ZodObject",e["ZodUnion"]="ZodUnion",e["ZodDiscriminatedUnion"]="ZodDiscriminatedUnion",e["ZodIntersection"]="ZodIntersection",e["ZodTuple"]="ZodTuple",e["ZodRecord"]="ZodRecord",e["ZodMap"]="ZodMap",e["ZodSet"]="ZodSet",e["ZodFunction"]="ZodFunction",e["ZodLazy"]="ZodLazy",e["ZodLiteral"]="ZodLiteral",e["ZodEnum"]="ZodEnum",e["ZodEffects"]="ZodEffects",e["ZodNativeEnum"]="ZodNativeEnum",e["ZodOptional"]="ZodOptional",e["ZodNullable"]="ZodNullable",e["ZodDefault"]="ZodDefault",e["ZodCatch"]="ZodCatch",e["ZodPromise"]="ZodPromise",e["ZodBranded"]="ZodBranded",e["ZodPipeline"]="ZodPipeline",e["ZodReadonly"]="ZodReadonly"})(Me||(Me={}));const Be=(e,t={message:`Input not instance of ${e.name}`})=>xe((t=>t instanceof e),t),Ue=$.create,Le=K.create,De=ke.create,We=V.create,je=Y.create,ze=G.create,He=Z.create,qe=J.create,$e=X.create,Fe=Q.create,Ke=ee.create,Ve=te.create,Ye=re.create,Ge=ne.create,Ze=se.create,Je=se.strictCreate,Xe=oe.create,Qe=ce.create,et=le.create,tt=he.create,rt=de.create,nt=pe.create,it=fe.create,st=ge.create,ot=me.create,at=ye.create,ct=be.create,ut=ve.create,lt=_e.create,ht=Ee.create,dt=Ae.create,pt=Ie.create,ft=Ee.createWithPreprocess,gt=Te.create,mt=()=>Ue().optional(),yt=()=>Le().optional(),wt=()=>je().optional(),bt={string:e=>$.create({...e,coerce:!0}),number:e=>K.create({...e,coerce:!0}),boolean:e=>Y.create({...e,coerce:!0}),bigint:e=>V.create({...e,coerce:!0}),date:e=>G.create({...e,coerce:!0})},vt=_;var _t=Object.freeze({__proto__:null,defaultErrorMap:p,setErrorMap:g,getErrorMap:m,makeIssue:y,EMPTY_PATH:w,addIssueToContext:b,ParseStatus:v,INVALID:_,DIRTY:E,OK:A,isAborted:I,isDirty:S,isValid:C,isAsync:k,get util(){return n},get objectUtil(){return i},ZodParsedType:c,getParsedType:u,ZodType:x,ZodString:$,ZodNumber:K,ZodBigInt:V,ZodBoolean:Y,ZodDate:G,ZodSymbol:Z,ZodUndefined:J,ZodNull:X,ZodAny:Q,ZodUnknown:ee,ZodNever:te,ZodVoid:re,ZodArray:ne,ZodObject:se,ZodUnion:oe,ZodDiscriminatedUnion:ce,ZodIntersection:le,ZodTuple:he,ZodRecord:de,ZodMap:pe,ZodSet:fe,ZodFunction:ge,ZodLazy:me,ZodLiteral:ye,ZodEnum:be,ZodNativeEnum:ve,ZodPromise:_e,ZodEffects:Ee,ZodTransformer:Ee,ZodOptional:Ae,ZodNullable:Ie,ZodDefault:Se,ZodCatch:Ce,ZodNaN:ke,BRAND:Ne,ZodBranded:Oe,ZodPipeline:Te,ZodReadonly:Re,custom:xe,Schema:x,ZodSchema:x,late:Pe,get ZodFirstPartyTypeKind(){return Me},coerce:bt,any:Fe,array:Ge,bigint:We,boolean:je,date:ze,discriminatedUnion:Qe,effect:ht,enum:ct,function:st,instanceof:Be,intersection:et,lazy:ot,literal:at,map:nt,nan:De,nativeEnum:ut,never:Ve,null:$e,nullable:pt,number:Le,object:Ze,oboolean:wt,onumber:yt,optional:dt,ostring:mt,pipeline:gt,preprocess:ft,promise:lt,record:rt,set:it,strictObject:Je,string:Ue,symbol:He,transformer:ht,tuple:tt,undefined:qe,union:Xe,unknown:Ke,void:Ye,NEVER:vt,ZodIssueCode:l,quotelessJson:h,ZodError:d});const Et=_t.object({message:_t.string()});function At(e){return _t.literal(o.s1[e])}_t.object({accessList:_t.array(_t.string()),blockHash:_t.string().nullable(),blockNumber:_t.string().nullable(),chainId:_t.string().or(_t.number()),from:_t.string(),gas:_t.string(),hash:_t.string(),input:_t.string().nullable(),maxFeePerGas:_t.string(),maxPriorityFeePerGas:_t.string(),nonce:_t.string(),r:_t.string(),s:_t.string(),to:_t.string(),transactionIndex:_t.string().nullable(),type:_t.string(),v:_t.string(),value:_t.string()});const It=_t.object({chainId:_t.string().or(_t.number())}),St=_t.object({email:_t.string().email()}),Ct=_t.object({otp:_t.string()}),kt=_t.object({uri:_t.string()}),Nt=_t.object({chainId:_t.optional(_t.string().or(_t.number())),preferredAccountType:_t.optional(_t.string())}),Ot=_t.object({provider:_t.enum(["google","github","apple","facebook","x","discord"])}),Tt=_t.object({email:_t.string().email()}),Rt=_t.object({otp:_t.string()}),xt=_t.object({otp:_t.string()}),Pt=_t.object({themeMode:_t.optional(_t.enum(["light","dark"])),themeVariables:_t.optional(_t.record(_t.string(),_t.string().or(_t.number()))),w3mThemeVariables:_t.optional(_t.record(_t.string(),_t.string()))}),Mt=_t.object({metadata:_t.object({name:_t.string(),description:_t.string(),url:_t.string(),icons:_t.array(_t.string())}).optional(),sdkVersion:_t.string().optional(),sdkType:_t.string().optional(),projectId:_t.string()}),Bt=_t.object({type:_t.string()}),Ut=_t.object({action:_t.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),Lt=_t.object({url:_t.string()}),Dt=_t.object({userName:_t.string()}),Wt=_t.object({email:_t.string().optional().nullable(),address:_t.string(),chainId:_t.string().or(_t.number()),accounts:_t.array(_t.object({address:_t.string(),type:_t.enum([o.Vl.ACCOUNT_TYPES.EOA,o.Vl.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:_t.string().optional().nullable()}),jt=_t.object({action:_t.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),zt=_t.object({email:_t.string().email().optional().nullable(),address:_t.string(),chainId:_t.string().or(_t.number()),smartAccountDeployed:_t.optional(_t.boolean()),accounts:_t.array(_t.object({address:_t.string(),type:_t.enum([o.Vl.ACCOUNT_TYPES.EOA,o.Vl.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:_t.optional(_t.string())}),Ht=_t.object({uri:_t.string()}),qt=_t.object({isConnected:_t.boolean()}),$t=_t.object({chainId:_t.string().or(_t.number())}),Ft=_t.object({chainId:_t.string().or(_t.number())}),Kt=_t.object({newEmail:_t.string().email()}),Vt=_t.object({smartAccountEnabledNetworks:_t.array(_t.number())}),Yt=(_t.object({address:_t.string(),isDeployed:_t.boolean()}),_t.object({version:_t.string().optional()})),Gt=_t.object({type:_t.string(),address:_t.string()}),Zt=_t.any(),Jt=_t.object({method:_t.literal("eth_accounts")}),Xt=_t.object({method:_t.literal("eth_blockNumber")}),Qt=_t.object({method:_t.literal("eth_call"),params:_t.array(_t.any())}),er=_t.object({method:_t.literal("eth_chainId")}),tr=_t.object({method:_t.literal("eth_estimateGas"),params:_t.array(_t.any())}),rr=_t.object({method:_t.literal("eth_feeHistory"),params:_t.array(_t.any())}),nr=_t.object({method:_t.literal("eth_gasPrice")}),ir=_t.object({method:_t.literal("eth_getAccount"),params:_t.array(_t.any())}),sr=_t.object({method:_t.literal("eth_getBalance"),params:_t.array(_t.any())}),or=_t.object({method:_t.literal("eth_getBlockByHash"),params:_t.array(_t.any())}),ar=_t.object({method:_t.literal("eth_getBlockByNumber"),params:_t.array(_t.any())}),cr=_t.object({method:_t.literal("eth_getBlockReceipts"),params:_t.array(_t.any())}),ur=_t.object({method:_t.literal("eth_getBlockTransactionCountByHash"),params:_t.array(_t.any())}),lr=_t.object({method:_t.literal("eth_getBlockTransactionCountByNumber"),params:_t.array(_t.any())}),hr=_t.object({method:_t.literal("eth_getCode"),params:_t.array(_t.any())}),dr=_t.object({method:_t.literal("eth_getFilterChanges"),params:_t.array(_t.any())}),pr=_t.object({method:_t.literal("eth_getFilterLogs"),params:_t.array(_t.any())}),fr=_t.object({method:_t.literal("eth_getLogs"),params:_t.array(_t.any())}),gr=_t.object({method:_t.literal("eth_getProof"),params:_t.array(_t.any())}),mr=_t.object({method:_t.literal("eth_getStorageAt"),params:_t.array(_t.any())}),yr=_t.object({method:_t.literal("eth_getTransactionByBlockHashAndIndex"),params:_t.array(_t.any())}),wr=_t.object({method:_t.literal("eth_getTransactionByBlockNumberAndIndex"),params:_t.array(_t.any())}),br=_t.object({method:_t.literal("eth_getTransactionByHash"),params:_t.array(_t.any())}),vr=_t.object({method:_t.literal("eth_getTransactionCount"),params:_t.array(_t.any())}),_r=_t.object({method:_t.literal("eth_getTransactionReceipt"),params:_t.array(_t.any())}),Er=_t.object({method:_t.literal("eth_getUncleCountByBlockHash"),params:_t.array(_t.any())}),Ar=_t.object({method:_t.literal("eth_getUncleCountByBlockNumber"),params:_t.array(_t.any())}),Ir=_t.object({method:_t.literal("eth_maxPriorityFeePerGas")}),Sr=_t.object({method:_t.literal("eth_newBlockFilter")}),Cr=_t.object({method:_t.literal("eth_newFilter"),params:_t.array(_t.any())}),kr=_t.object({method:_t.literal("eth_newPendingTransactionFilter")}),Nr=_t.object({method:_t.literal("eth_sendRawTransaction"),params:_t.array(_t.any())}),Or=_t.object({method:_t.literal("eth_syncing"),params:_t.array(_t.any())}),Tr=_t.object({method:_t.literal("eth_uninstallFilter"),params:_t.array(_t.any())}),Rr=_t.object({method:_t.literal("personal_sign"),params:_t.array(_t.any())}),xr=_t.object({method:_t.literal("eth_signTypedData_v4"),params:_t.array(_t.any())}),Pr=_t.object({method:_t.literal("eth_sendTransaction"),params:_t.array(_t.any())}),Mr=_t.object({method:_t.literal("solana_signMessage"),params:_t.object({message:_t.string(),pubkey:_t.string()})}),Br=_t.object({method:_t.literal("solana_signTransaction"),params:_t.object({transaction:_t.string()})}),Ur=_t.object({method:_t.literal("solana_signAllTransactions"),params:_t.object({transactions:_t.array(_t.string())})}),Lr=_t.object({method:_t.literal("solana_signAndSendTransaction"),params:_t.object({transaction:_t.string(),options:_t.object({skipPreflight:_t.boolean().optional(),preflightCommitment:_t.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:_t.number().optional(),minContextSlot:_t.number().optional()}).optional()})}),Dr=_t.object({method:_t.literal("wallet_sendCalls"),params:_t.array(_t.object({chainId:_t.string().or(_t.number()).optional(),from:_t.string().optional(),version:_t.string().optional(),capabilities:_t.any().optional(),calls:_t.array(_t.object({to:_t.string().startsWith("0x"),data:_t.string().startsWith("0x").optional(),value:_t.string().optional()}))}))}),Wr=_t.object({method:_t.literal("wallet_getCallsStatus"),params:_t.array(_t.string())}),jr=_t.object({method:_t.literal("wallet_getCapabilities")}),zr=_t.object({method:_t.literal("wallet_grantPermissions"),params:_t.array(_t.any())}),Hr=_t.object({method:_t.literal("wallet_revokePermissions"),params:_t.any()}),qr=_t.object({method:_t.literal("wallet_getAssets"),params:_t.any()}),$r=_t.object({token:_t.string()}),Fr=_t.object({id:_t.string().optional()}),Kr={appEvent:Fr.extend({type:At("APP_SWITCH_NETWORK"),payload:It}).or(Fr.extend({type:At("APP_CONNECT_EMAIL"),payload:St})).or(Fr.extend({type:At("APP_CONNECT_DEVICE")})).or(Fr.extend({type:At("APP_CONNECT_OTP"),payload:Ct})).or(Fr.extend({type:At("APP_CONNECT_SOCIAL"),payload:kt})).or(Fr.extend({type:At("APP_GET_FARCASTER_URI")})).or(Fr.extend({type:At("APP_CONNECT_FARCASTER")})).or(Fr.extend({type:At("APP_GET_USER"),payload:_t.optional(Nt)})).or(Fr.extend({type:At("APP_GET_SOCIAL_REDIRECT_URI"),payload:Ot})).or(Fr.extend({type:At("APP_SIGN_OUT")})).or(Fr.extend({type:At("APP_IS_CONNECTED"),payload:_t.optional($r)})).or(Fr.extend({type:At("APP_GET_CHAIN_ID")})).or(Fr.extend({type:At("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(Fr.extend({type:At("APP_INIT_SMART_ACCOUNT")})).or(Fr.extend({type:At("APP_SET_PREFERRED_ACCOUNT"),payload:Bt})).or(Fr.extend({type:At("APP_RPC_REQUEST"),payload:Rr.or(qr).or(Jt).or(Xt).or(Qt).or(er).or(tr).or(rr).or(nr).or(ir).or(sr).or(or).or(ar).or(cr).or(ur).or(lr).or(hr).or(dr).or(pr).or(fr).or(gr).or(mr).or(yr).or(wr).or(br).or(vr).or(_r).or(Er).or(Ar).or(Ir).or(Sr).or(Cr).or(kr).or(Nr).or(Or).or(Tr).or(Rr).or(xr).or(Pr).or(Mr).or(Br).or(Ur).or(Lr).or(Wr).or(Dr).or(jr).or(zr).or(Hr)})).or(Fr.extend({type:At("APP_UPDATE_EMAIL"),payload:Tt})).or(Fr.extend({type:At("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:Rt})).or(Fr.extend({type:At("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:xt})).or(Fr.extend({type:At("APP_SYNC_THEME"),payload:Pt})).or(Fr.extend({type:At("APP_SYNC_DAPP_DATA"),payload:Mt})).or(Fr.extend({type:At("APP_RELOAD")})),frameEvent:Fr.extend({type:At("FRAME_SWITCH_NETWORK_ERROR"),payload:Et}).or(Fr.extend({type:At("FRAME_SWITCH_NETWORK_SUCCESS"),payload:Ft})).or(Fr.extend({type:At("FRAME_CONNECT_EMAIL_SUCCESS"),payload:Ut})).or(Fr.extend({type:At("FRAME_CONNECT_EMAIL_ERROR"),payload:Et})).or(Fr.extend({type:At("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:Lt})).or(Fr.extend({type:At("FRAME_GET_FARCASTER_URI_ERROR"),payload:Et})).or(Fr.extend({type:At("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:Dt})).or(Fr.extend({type:At("FRAME_CONNECT_FARCASTER_ERROR"),payload:Et})).or(Fr.extend({type:At("FRAME_CONNECT_OTP_ERROR"),payload:Et})).or(Fr.extend({type:At("FRAME_CONNECT_OTP_SUCCESS")})).or(Fr.extend({type:At("FRAME_CONNECT_DEVICE_ERROR"),payload:Et})).or(Fr.extend({type:At("FRAME_CONNECT_DEVICE_SUCCESS")})).or(Fr.extend({type:At("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:Wt})).or(Fr.extend({type:At("FRAME_CONNECT_SOCIAL_ERROR"),payload:Et})).or(Fr.extend({type:At("FRAME_GET_USER_ERROR"),payload:Et})).or(Fr.extend({type:At("FRAME_GET_USER_SUCCESS"),payload:zt})).or(Fr.extend({type:At("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:Et})).or(Fr.extend({type:At("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:Ht})).or(Fr.extend({type:At("FRAME_SIGN_OUT_ERROR"),payload:Et})).or(Fr.extend({type:At("FRAME_SIGN_OUT_SUCCESS")})).or(Fr.extend({type:At("FRAME_IS_CONNECTED_ERROR"),payload:Et})).or(Fr.extend({type:At("FRAME_IS_CONNECTED_SUCCESS"),payload:qt})).or(Fr.extend({type:At("FRAME_GET_CHAIN_ID_ERROR"),payload:Et})).or(Fr.extend({type:At("FRAME_GET_CHAIN_ID_SUCCESS"),payload:$t})).or(Fr.extend({type:At("FRAME_RPC_REQUEST_ERROR"),payload:Et})).or(Fr.extend({type:At("FRAME_RPC_REQUEST_SUCCESS"),payload:Zt})).or(Fr.extend({type:At("FRAME_SESSION_UPDATE"),payload:$r})).or(Fr.extend({type:At("FRAME_UPDATE_EMAIL_ERROR"),payload:Et})).or(Fr.extend({type:At("FRAME_UPDATE_EMAIL_SUCCESS"),payload:jt})).or(Fr.extend({type:At("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:Et})).or(Fr.extend({type:At("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(Fr.extend({type:At("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:Et})).or(Fr.extend({type:At("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:Kt})).or(Fr.extend({type:At("FRAME_SYNC_THEME_ERROR"),payload:Et})).or(Fr.extend({type:At("FRAME_SYNC_THEME_SUCCESS")})).or(Fr.extend({type:At("FRAME_SYNC_DAPP_DATA_ERROR"),payload:Et})).or(Fr.extend({type:At("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(Fr.extend({type:At("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:Vt})).or(Fr.extend({type:At("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:Et})).or(Fr.extend({type:At("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:Et})).or(Fr.extend({type:At("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:Gt})).or(Fr.extend({type:At("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:Et})).or(Fr.extend({type:At("FRAME_READY"),payload:Yt})).or(Fr.extend({type:At("FRAME_RELOAD_ERROR"),payload:Et})).or(Fr.extend({type:At("FRAME_RELOAD_SUCCESS")}))};function Vr(e,t={}){return"string"===typeof t?.type&&t?.type?.includes(e)}class Yr{constructor({projectId:e,isAppClient:t=!1,chainId:r="eip155:1",enableLogger:n=!0}){if(this.iframe=null,this.iframeIsReady=!1,this.rpcUrl=s.o.BLOCKCHAIN_API_RPC_URL,this.initFrame=()=>{const e=document.getElementById("w3m-iframe");this.iframe&&!e&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(e,t,r)=>{function n({data:r}){if(!Vr(o.s1.FRAME_EVENT_KEY,r))return;const i=Kr.frameEvent.parse(r);i.id===e&&(t(i),window.removeEventListener("message",n))}a.Q.isClient&&(window.addEventListener("message",n),r.addEventListener("abort",(()=>{window.removeEventListener("message",n)})))},onFrameEvent:e=>{a.Q.isClient&&window.addEventListener("message",(({data:t})=>{if(!Vr(o.s1.FRAME_EVENT_KEY,t))return;const r=Kr.frameEvent.parse(t);e(r)}))},onAppEvent:e=>{a.Q.isClient&&window.addEventListener("message",(({data:t})=>{if(!Vr(o.s1.APP_EVENT_KEY,t))return;const r=Kr.appEvent.parse(t);e(r)}))},postAppEvent:e=>{if(a.Q.isClient){if(!this.iframe?.contentWindow)throw new Error("W3mFrame: iframe is not set");Kr.appEvent.parse(e),this.iframe.contentWindow.postMessage(e,"*")}},postFrameEvent:e=>{if(a.Q.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");Kr.frameEvent.parse(e),parent.postMessage(e,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise(((e,t)=>{this.frameLoadPromiseResolver={resolve:e,reject:t}})),t&&(this.frameLoadPromise=new Promise(((e,t)=>{this.frameLoadPromiseResolver={resolve:e,reject:t}})),a.Q.isClient)){const t=document.createElement("iframe");t.id="w3m-iframe",t.src=`${o.hy}?projectId=${e}&chainId=${r}&version=${o.gS}&enableLogger=${n}`,t.name="w3m-secure-iframe",t.style.position="fixed",t.style.zIndex="999999",t.style.display="none",t.style.border="none",t.style.animationDelay="0s, 50ms",t.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",t.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=t,this.iframe.onerror=()=>{this.frameLoadPromiseResolver?.reject("Unable to load email login dependency")},this.events.onFrameEvent((e=>{"@w3m-frame/READY"===e.type&&(this.iframeIsReady=!0,this.frameLoadPromiseResolver?.resolve(void 0))}))}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map((e=>({[e]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${e}&projectId=${this.projectId}`,chainId:e}})));return Object.assign({},...e)}}var Gr=r(26351);class Zr{constructor(e){const t=(0,Gr.iP)({level:o.OH}),{logger:r,chunkLoggerController:n}=(0,Gr.D5)({opts:t});this.logger=(0,Gr.U5)(r,this.constructor.name),this.chunkLoggerController=n,"undefined"!==typeof window&&this.chunkLoggerController?.downloadLogsBlobInBrowser&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob["sdk"]=()=>{this.chunkLoggerController?.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}var Jr=r(44695);class Xr{constructor({projectId:e,chainId:t,enableLogger:r=!0,onTimeout:n,abortController:i}){this.openRpcRequests=[],r&&(this.w3mLogger=new Zr(e)),this.abortController=i,this.w3mFrame=new Yr({projectId:e,isAppClient:!0,chainId:t,enableLogger:r}),this.onTimeout=n,this.getLoginEmailUsed()&&this.w3mFrame.initFrame(),this.initPromise=new Promise((e=>{this.w3mFrame.events.onFrameEvent((async t=>{t.type===o.s1.FRAME_READY&&(this.initPromise=void 0,await new Promise((e=>{setTimeout(e,500)})),e())}))}))}async init(){this.w3mFrame.initFrame(),this.initPromise&&await this.initPromise}getLoginEmailUsed(){return Boolean(Jr.o.get(o.s1.EMAIL_LOGIN_USED_KEY))}getEmail(){return Jr.o.get(o.s1.EMAIL)}getUsername(){return Jr.o.get(o.s1.SOCIAL_USERNAME)}async reload(){try{this.w3mFrame.initFrame(),await this.appEvent({type:o.s1.APP_RELOAD})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error reloading iframe"),e}}async connectEmail(e){try{a.Q.checkIfAllowedToTriggerEmail(),this.w3mFrame.initFrame();const t=await this.appEvent({type:o.s1.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),t}catch(t){throw this.w3mLogger?.logger.error({error:t},"Error connecting email"),t}}async connectDevice(){try{return this.appEvent({type:o.s1.APP_CONNECT_DEVICE})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error connecting device"),e}}async connectOtp(e){try{return this.appEvent({type:o.s1.APP_CONNECT_OTP,payload:e})}catch(t){throw this.w3mLogger?.logger.error({error:t},"Error connecting otp"),t}}async isConnected(){try{if(!this.getLoginEmailUsed())return{isConnected:!1};const e=await this.appEvent({type:o.s1.APP_IS_CONNECTED});return e?.isConnected||this.deleteAuthLoginCache(),e}catch(e){throw this.deleteAuthLoginCache(),this.w3mLogger?.logger.error({error:e},"Error checking connection"),e}}async getChainId(){try{const e=await this.appEvent({type:o.s1.APP_GET_CHAIN_ID});return this.setLastUsedChainId(e.chainId),e}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error getting chain id"),e}}async getSocialRedirectUri(e){try{return this.w3mFrame.initFrame(),this.appEvent({type:o.s1.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(t){throw this.w3mLogger?.logger.error({error:t},"Error getting social redirect uri"),t}}async updateEmail(e){try{const t=await this.appEvent({type:o.s1.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),t}catch(t){throw this.w3mLogger?.logger.error({error:t},"Error updating email"),t}}async updateEmailPrimaryOtp(e){try{return this.appEvent({type:o.s1.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(t){throw this.w3mLogger?.logger.error({error:t},"Error updating email primary otp"),t}}async updateEmailSecondaryOtp(e){try{const t=await this.appEvent({type:o.s1.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(t.newEmail),t}catch(t){throw this.w3mLogger?.logger.error({error:t},"Error updating email secondary otp"),t}}async syncTheme(e){try{return this.appEvent({type:o.s1.APP_SYNC_THEME,payload:e})}catch(t){throw this.w3mLogger?.logger.error({error:t},"Error syncing theme"),t}}async syncDappData(e){try{return this.appEvent({type:o.s1.APP_SYNC_DAPP_DATA,payload:e})}catch(t){throw this.w3mLogger?.logger.error({error:t},"Error syncing dapp data"),t}}async getSmartAccountEnabledNetworks(){try{const e=await this.appEvent({type:o.s1.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(e.smartAccountEnabledNetworks),e}catch(e){throw this.persistSmartAccountEnabledNetworks([]),this.w3mLogger?.logger.error({error:e},"Error getting smart account enabled networks"),e}}async setPreferredAccount(e){try{return this.appEvent({type:o.s1.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(t){throw this.w3mLogger?.logger.error({error:t},"Error setting preferred account"),t}}async connect(e){try{const t=e?.chainId||this.getLastUsedChainId()||1,r=await this.getUser({chainId:t,preferredAccountType:e?.preferredAccountType});return this.setLoginSuccess(r.email),this.setLastUsedChainId(r.chainId),this.user=r,r}catch(t){throw this.w3mLogger?.logger.error({error:t},"Error connecting"),t}}async getUser(e){try{const t=e?.chainId||this.getLastUsedChainId()||1,r=await this.appEvent({type:o.s1.APP_GET_USER,payload:{...e,chainId:t}});return this.user=r,r}catch(t){throw this.w3mLogger?.logger.error({error:t},"Error connecting"),t}}async connectSocial(e){try{this.w3mFrame.initFrame();const t=await this.appEvent({type:o.s1.APP_CONNECT_SOCIAL,payload:{uri:e}});return t.userName&&this.setSocialLoginSuccess(t.userName),t}catch(t){throw this.w3mLogger?.logger.error({error:t},"Error connecting social"),t}}async getFarcasterUri(){try{this.w3mFrame.initFrame();const e=await this.appEvent({type:o.s1.APP_GET_FARCASTER_URI});return e}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error getting farcaster uri"),e}}async connectFarcaster(){try{const e=await this.appEvent({type:o.s1.APP_CONNECT_FARCASTER});return e.userName&&this.setSocialLoginSuccess(e.userName),e}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error connecting farcaster"),e}}async switchNetwork(e){try{const t=await this.appEvent({type:o.s1.APP_SWITCH_NETWORK,payload:{chainId:e}});return this.setLastUsedChainId(t.chainId),t}catch(t){throw this.w3mLogger?.logger.error({error:t},"Error switching network"),t}}async disconnect(){try{const e=await this.appEvent({type:o.s1.APP_SIGN_OUT});return this.deleteAuthLoginCache(),e}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error disconnecting"),e}}async request(e){try{if(o.Vl.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();this.rpcRequestHandler?.(e);const t=await this.appEvent({type:o.s1.APP_RPC_REQUEST,payload:e});return this.rpcSuccessHandler?.(t,e),t}catch(t){throw this.rpcErrorHandler?.(t,e),this.w3mLogger?.logger.error({error:t},"Error requesting"),t}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent((t=>{t.type===o.s1.FRAME_IS_CONNECTED_SUCCESS&&t.payload.isConnected&&e()}))}onNotConnected(e){this.w3mFrame.events.onFrameEvent((t=>{t.type===o.s1.FRAME_IS_CONNECTED_ERROR&&e(),t.type!==o.s1.FRAME_IS_CONNECTED_SUCCESS||t.payload.isConnected||e()}))}onConnect(e){this.w3mFrame.events.onFrameEvent((t=>{t.type===o.s1.FRAME_GET_USER_SUCCESS&&e(t.payload)}))}onSocialConnected(e){this.w3mFrame.events.onFrameEvent((t=>{t.type===o.s1.FRAME_CONNECT_SOCIAL_SUCCESS&&e(t.payload)}))}async getCapabilities(){try{const e=await this.request({method:"wallet_getCapabilities"});return e||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent((t=>{t.type===o.s1.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(t.payload):t.type===o.s1.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:o.Vl.ACCOUNT_TYPES.EOA})}))}onGetSmartAccountEnabledNetworks(e){this.w3mFrame.events.onFrameEvent((t=>{t.type===o.s1.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS?e(t.payload.smartAccountEnabledNetworks):t.type===o.s1.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR&&e([])}))}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}rejectRpcRequests(){try{this.openRpcRequests.forEach((({abortController:e,method:t})=>{o.Vl.SAFE_RPC_METHODS.includes(t)||e.abort()})),this.openRpcRequests=[]}catch(e){this.w3mLogger?.logger.error({error:e},"Error aborting RPC request")}}async appEvent(e){let t,r;function n(e){return e.replace("@w3m-app/","")}const i=[o.s1.APP_SYNC_DAPP_DATA,o.s1.APP_SYNC_THEME,o.s1.APP_SET_PREFERRED_ACCOUNT],s=n(e.type);this.w3mFrame.iframeIsReady||i.includes(e.type)||(r=setTimeout((()=>{this.onTimeout?.("iframe_load_failed"),this.abortController.abort()}),2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r);const a=[o.s1.APP_CONNECT_EMAIL,o.s1.APP_CONNECT_DEVICE,o.s1.APP_CONNECT_OTP,o.s1.APP_CONNECT_SOCIAL,o.s1.APP_GET_SOCIAL_REDIRECT_URI].map(n).includes(s);return a&&(t=setTimeout((()=>{this.onTimeout?.("iframe_request_timeout"),this.abortController.abort()}),3e4)),new Promise(((n,i)=>{const o=Math.random().toString(36).substring(7);this.w3mLogger?.logger.info?.({event:e,id:o},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:o});const a=new AbortController;if("RPC_REQUEST"===s){const t=e;this.openRpcRequests=[...this.openRpcRequests,{...t.payload,abortController:a}]}function c(e,a){e.id===o&&(a?.logger.info?.({framEvent:e,id:o},"Received frame response"),e.type===`@w3m-frame/${s}_SUCCESS`?(t&&clearTimeout(t),r&&clearTimeout(r),"payload"in e&&n(e.payload),n(void 0)):e.type===`@w3m-frame/${s}_ERROR`&&(t&&clearTimeout(t),r&&clearTimeout(r),"payload"in e&&i(new Error(e.payload?.message||"An error occurred")),i(new Error("An error occurred"))))}a.signal.addEventListener("abort",(()=>{"RPC_REQUEST"===s?i(new Error("Request was aborted")):"GET_FARCASTER_URI"!==s&&i(new Error("Something went wrong"))})),this.w3mFrame.events.registerFrameEventHandler(o,(e=>c(e,this.w3mLogger)),this.abortController.signal)}))}setNewLastEmailLoginTime(){Jr.o.set(o.s1.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){Jr.o.set(o.s1.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&Jr.o.set(o.s1.EMAIL,e),Jr.o.set(o.s1.EMAIL_LOGIN_USED_KEY,"true"),Jr.o.delete(o.s1.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){Jr.o.delete(o.s1.EMAIL_LOGIN_USED_KEY),Jr.o.delete(o.s1.EMAIL),Jr.o.delete(o.s1.LAST_USED_CHAIN_KEY),Jr.o.delete(o.s1.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&Jr.o.set(o.s1.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=Jr.o.get(o.s1.LAST_USED_CHAIN_KEY)??void 0,t=Number(e);return isNaN(t)?e:t}persistSmartAccountEnabledNetworks(e){Jr.o.set(o.s1.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}}},63558:function(e,t,r){"use strict";
/**
 * Support for translating between Uint8Array instances and JavaScript
 * native types.
 *
 * {@link module:Layout~Layout|Layout} is the basis of a class
 * hierarchy that associates property names with sequences of encoded
 * bytes.
 *
 * Layouts are supported for these scalar (numeric) types:
 * * {@link module:Layout~UInt|Unsigned integers in little-endian
 *   format} with {@link module:Layout.u8|8-bit}, {@link
 *   module:Layout.u16|16-bit}, {@link module:Layout.u24|24-bit},
 *   {@link module:Layout.u32|32-bit}, {@link
 *   module:Layout.u40|40-bit}, and {@link module:Layout.u48|48-bit}
 *   representation ranges;
 * * {@link module:Layout~UIntBE|Unsigned integers in big-endian
 *   format} with {@link module:Layout.u16be|16-bit}, {@link
 *   module:Layout.u24be|24-bit}, {@link module:Layout.u32be|32-bit},
 *   {@link module:Layout.u40be|40-bit}, and {@link
 *   module:Layout.u48be|48-bit} representation ranges;
 * * {@link module:Layout~Int|Signed integers in little-endian
 *   format} with {@link module:Layout.s8|8-bit}, {@link
 *   module:Layout.s16|16-bit}, {@link module:Layout.s24|24-bit},
 *   {@link module:Layout.s32|32-bit}, {@link
 *   module:Layout.s40|40-bit}, and {@link module:Layout.s48|48-bit}
 *   representation ranges;
 * * {@link module:Layout~IntBE|Signed integers in big-endian format}
 *   with {@link module:Layout.s16be|16-bit}, {@link
 *   module:Layout.s24be|24-bit}, {@link module:Layout.s32be|32-bit},
 *   {@link module:Layout.s40be|40-bit}, and {@link
 *   module:Layout.s48be|48-bit} representation ranges;
 * * 64-bit integral values that decode to an exact (if magnitude is
 *   less than 2^53) or nearby integral Number in {@link
 *   module:Layout.nu64|unsigned little-endian}, {@link
 *   module:Layout.nu64be|unsigned big-endian}, {@link
 *   module:Layout.ns64|signed little-endian}, and {@link
 *   module:Layout.ns64be|unsigned big-endian} encodings;
 * * 32-bit floating point values with {@link
 *   module:Layout.f32|little-endian} and {@link
 *   module:Layout.f32be|big-endian} representations;
 * * 64-bit floating point values with {@link
 *   module:Layout.f64|little-endian} and {@link
 *   module:Layout.f64be|big-endian} representations;
 * * {@link module:Layout.const|Constants} that take no space in the
 *   encoded expression.
 *
 * and for these aggregate types:
 * * {@link module:Layout.seq|Sequence}s of instances of a {@link
 *   module:Layout~Layout|Layout}, with JavaScript representation as
 *   an Array and constant or data-dependent {@link
 *   module:Layout~Sequence#count|length};
 * * {@link module:Layout.struct|Structure}s that aggregate a
 *   heterogeneous sequence of {@link module:Layout~Layout|Layout}
 *   instances, with JavaScript representation as an Object;
 * * {@link module:Layout.union|Union}s that support multiple {@link
 *   module:Layout~VariantLayout|variant layouts} over a fixed
 *   (padded) or variable (not padded) span of bytes, using an
 *   unsigned integer at the start of the data or a separate {@link
 *   module:Layout.unionLayoutDiscriminator|layout element} to
 *   determine which layout to use when interpreting the buffer
 *   contents;
 * * {@link module:Layout.bits|BitStructure}s that contain a sequence
 *   of individual {@link
 *   module:Layout~BitStructure#addField|BitField}s packed into an 8,
 *   16, 24, or 32-bit unsigned integer starting at the least- or
 *   most-significant bit;
 * * {@link module:Layout.cstr|C strings} of varying length;
 * * {@link module:Layout.blob|Blobs} of fixed- or variable-{@link
 *   module:Layout~Blob#length|length} raw data.
 *
 * All {@link module:Layout~Layout|Layout} instances are immutable
 * after construction, to prevent internal state from becoming
 * inconsistent.
 *
 * @local Layout
 * @local ExternalLayout
 * @local GreedyCount
 * @local OffsetLayout
 * @local UInt
 * @local UIntBE
 * @local Int
 * @local IntBE
 * @local NearUInt64
 * @local NearUInt64BE
 * @local NearInt64
 * @local NearInt64BE
 * @local Float
 * @local FloatBE
 * @local Double
 * @local DoubleBE
 * @local Sequence
 * @local Structure
 * @local UnionDiscriminator
 * @local UnionLayoutDiscriminator
 * @local Union
 * @local VariantLayout
 * @local BitStructure
 * @local BitField
 * @local Boolean
 * @local Blob
 * @local CString
 * @local Constant
 * @local bindConstructorLayout
 * @module Layout
 * @license MIT
 * @author Peter A. Bigot
 * @see {@link https://github.com/pabigot/buffer-layout|buffer-layout on GitHub}
 */
r(44114),r(18111),r(18237),t.I0=t.DH=t.NX=t.u8=t.cY=void 0,t.av=t.O6=t.w3=t.Wg=void 0;const n=r(90712);function i(e){if(!(e instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}function s(e){return i(e),n.Buffer.from(e.buffer,e.byteOffset,e.length)}class o{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}function a(e,t){return t.property?e+"["+t.property+"]":e}function c(e,t){if("function"!==typeof e)throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(e,"layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof o))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw new Error("layout is already bound to a constructor");e.layout_=t,t.boundConstructor_=e,t.makeDestinationObject=()=>new e,Object.defineProperty(e.prototype,"encode",{value(e,r){return t.encode(this,e,r)},writable:!0}),Object.defineProperty(e,"decode",{value(e,r){return t.decode(e,r)},writable:!0})}class u extends o{isCount(){throw new Error("ExternalLayout is abstract")}}class l extends u{constructor(e=1,t){if(!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,t),this.elementSpan=e}isCount(){return!0}decode(e,t=0){i(e);const r=e.length-t;return Math.floor(r/this.elementSpan)}encode(e,t,r){return 0}}class h extends u{constructor(e,t=0,r){if(!(e instanceof o))throw new TypeError("layout must be a Layout");if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,r||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof d||this.layout instanceof p}decode(e,t=0){return this.layout.decode(e,t+this.offset)}encode(e,t,r=0){return this.layout.encode(e,t,r+this.offset)}}class d extends o{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return s(e).readUIntLE(t,this.span)}encode(e,t,r=0){return s(t).writeUIntLE(e,r,this.span),this.span}}class p extends o{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return s(e).readUIntBE(t,this.span)}encode(e,t,r=0){return s(t).writeUIntBE(e,r,this.span),this.span}}class f extends o{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return s(e).readIntLE(t,this.span)}encode(e,t,r=0){return s(t).writeIntLE(e,r,this.span),this.span}}class g extends o{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return s(e).readIntBE(t,this.span)}encode(e,t,r=0){return s(t).writeIntBE(e,r,this.span),this.span}}const m=Math.pow(2,32);function y(e){const t=Math.floor(e/m),r=e-t*m;return{hi32:t,lo32:r}}function w(e,t){return e*m+t}class b extends o{constructor(e){super(8,e)}decode(e,t=0){const r=s(e),n=r.readUInt32LE(t),i=r.readUInt32LE(t+4);return w(i,n)}encode(e,t,r=0){const n=y(e),i=s(t);return i.writeUInt32LE(n.lo32,r),i.writeUInt32LE(n.hi32,r+4),8}}class v extends o{constructor(e){super(8,e)}decode(e,t=0){const r=s(e),n=r.readUInt32BE(t),i=r.readUInt32BE(t+4);return w(n,i)}encode(e,t,r=0){const n=y(e),i=s(t);return i.writeUInt32BE(n.hi32,r),i.writeUInt32BE(n.lo32,r+4),8}}class _ extends o{constructor(e){super(8,e)}decode(e,t=0){const r=s(e),n=r.readUInt32LE(t),i=r.readInt32LE(t+4);return w(i,n)}encode(e,t,r=0){const n=y(e),i=s(t);return i.writeUInt32LE(n.lo32,r),i.writeInt32LE(n.hi32,r+4),8}}class E extends o{constructor(e){super(8,e)}decode(e,t=0){const r=s(e),n=r.readInt32BE(t),i=r.readUInt32BE(t+4);return w(n,i)}encode(e,t,r=0){const n=y(e),i=s(t);return i.writeInt32BE(n.hi32,r),i.writeUInt32BE(n.lo32,r+4),8}}class A extends o{constructor(e){super(4,e)}decode(e,t=0){return s(e).readFloatLE(t)}encode(e,t,r=0){return s(t).writeFloatLE(e,r),4}}class I extends o{constructor(e){super(4,e)}decode(e,t=0){return s(e).readFloatBE(t)}encode(e,t,r=0){return s(t).writeFloatBE(e,r),4}}class S extends o{constructor(e){super(8,e)}decode(e,t=0){return s(e).readDoubleLE(t)}encode(e,t,r=0){return s(t).writeDoubleLE(e,r),8}}class C extends o{constructor(e){super(8,e)}decode(e,t=0){return s(e).readDoubleBE(t)}encode(e,t,r=0){return s(t).writeDoubleBE(e,r),8}}class k extends o{constructor(e,t,r){if(!(e instanceof o))throw new TypeError("elementLayout must be a Layout");if(!(t instanceof u&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let n=-1;!(t instanceof u)&&0<e.span&&(n=t*e.span),super(n,r),this.elementLayout=e,this.count=t}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0,n=this.count;if(n instanceof u&&(n=n.decode(e,t)),0<this.elementLayout.span)r=n*this.elementLayout.span;else{let i=0;while(i<n)r+=this.elementLayout.getSpan(e,t+r),++i}return r}decode(e,t=0){const r=[];let n=0,i=this.count;i instanceof u&&(i=i.decode(e,t));while(n<i)r.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),n+=1;return r}encode(e,t,r=0){const n=this.elementLayout,i=e.reduce(((e,i)=>e+n.encode(i,t,r+e)),0);return this.count instanceof u&&this.count.encode(e.length,t,r),i}}class N extends o{constructor(e,t,r){if(!Array.isArray(e)||!e.reduce(((e,t)=>e&&t instanceof o),!0))throw new TypeError("fields must be array of Layout instances");"boolean"===typeof t&&void 0===r&&(r=t,t=void 0);for(const s of e)if(0>s.span&&void 0===s.property)throw new Error("fields cannot contain unnamed variable-length layout");let n=-1;try{n=e.reduce(((e,t)=>e+t.getSpan()),0)}catch(i){}super(n,t),this.fields=e,this.decodePrefixes=!!r}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce(((r,n)=>{const i=n.getSpan(e,t);return t+=i,r+i}),0)}catch(n){throw new RangeError("indeterminate span")}return r}decode(e,t=0){i(e);const r=this.makeDestinationObject();for(const n of this.fields)if(void 0!==n.property&&(r[n.property]=n.decode(e,t)),t+=n.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return r}encode(e,t,r=0){const n=r;let i=0,s=0;for(const o of this.fields){let n=o.span;if(s=0<n?n:0,void 0!==o.property){const i=e[o.property];void 0!==i&&(s=o.encode(i,t,r),0>n&&(n=o.getSpan(t,r)))}i=r,r+=n}return i+s-n}fromArray(e){const t=this.makeDestinationObject();for(const r of this.fields)void 0!==r.property&&0<e.length&&(t[r.property]=e.shift());return t}layoutFor(e){if("string"!==typeof e)throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if("string"!==typeof e)throw new TypeError("property must be string");let t=0;for(const r of this.fields){if(r.property===e)return t;0>r.span?t=-1:0<=t&&(t+=r.span)}}}class O{constructor(e){this.property=e}decode(e,t){throw new Error("UnionDiscriminator is abstract")}encode(e,t,r){throw new Error("UnionDiscriminator is abstract")}}class T extends O{constructor(e,t){if(!(e instanceof u&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,r){return this.layout.encode(e,t,r)}}class R extends o{constructor(e,t,r){let n;if(e instanceof d||e instanceof p)n=new T(new h(e));else if(e instanceof u&&e.isCount())n=new T(e);else{if(!(e instanceof O))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");n=e}if(void 0===t&&(t=null),!(null===t||t instanceof o))throw new TypeError("defaultLayout must be null or a Layout");if(null!==t){if(0>t.span)throw new Error("defaultLayout must have constant span");void 0===t.property&&(t=t.replicate("content"))}let i=-1;t&&(i=t.span,0<=i&&(e instanceof d||e instanceof p)&&(i+=n.layout.span)),super(i,r),this.discriminator=n,this.usesPrefixDiscriminator=e instanceof d||e instanceof p,this.defaultLayout=t,this.registry={};let s=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(e){return s(e)},this.configGetSourceVariant=function(e){s=e.bind(this)}}getSpan(e,t=0){if(0<=this.span)return this.span;const r=this.getVariant(e,t);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(e,t)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;const t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||t.property&&Object.prototype.hasOwnProperty.call(e,t.property)))return t}else for(const t in this.registry){const r=this.registry[t];if(r.property&&Object.prototype.hasOwnProperty.call(e,r.property))return r}throw new Error("unable to infer src variant")}decode(e,t=0){let r;const n=this.discriminator,i=n.decode(e,t),s=this.registry[i];if(void 0===s){const s=this.defaultLayout;let o=0;this.usesPrefixDiscriminator&&(o=n.layout.span),r=this.makeDestinationObject(),r[n.property]=i,r[s.property]=s.decode(e,t+o)}else r=s.decode(e,t);return r}encode(e,t,r=0){const n=this.getSourceVariant(e);if(void 0===n){const n=this.discriminator,i=this.defaultLayout;let s=0;return this.usesPrefixDiscriminator&&(s=n.layout.span),n.encode(e[n.property],t,r),s+i.encode(e[i.property],t,r+s)}return n.encode(e,t,r)}addVariant(e,t,r){const n=new x(this,e,t,r);return this.registry[e]=n,n}getVariant(e,t=0){let r;return r=e instanceof Uint8Array?this.discriminator.decode(e,t):e,this.registry[r]}}class x extends o{constructor(e,t,r,n){if(!(e instanceof R))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if("string"===typeof r&&void 0===n&&(n=r,r=null),r){if(!(r instanceof o))throw new TypeError("layout must be a Layout");if(null!==e.defaultLayout&&0<=r.span&&r.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if("string"!==typeof n)throw new TypeError("variant must have a String property")}let i=e.span;0>e.span&&(i=r?r.span:0,0<=i&&e.usesPrefixDiscriminator&&(i+=e.discriminator.layout.span)),super(i,n),this.union=e,this.variant=t,this.layout=r||null}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let n=0;return this.layout&&(n=this.layout.getSpan(e,t+r)),r+n}decode(e,t=0){const r=this.makeDestinationObject();if(this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(e,t+n):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(e,t,r=0){let n=0;if(this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,r);let i=n;if(this.layout&&(this.layout.encode(e[this.property],t,r+n),i+=this.layout.getSpan(t,r+n),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}function P(e){return 0>e&&(e+=4294967296),e}class M extends o{constructor(e,t,r){if(!(e instanceof d||e instanceof p))throw new TypeError("word must be a UInt or UIntBE layout");if("string"===typeof t&&void 0===r&&(r=t,t=!1),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,r),this.word=e,this.msb=!!t,this.fields=[];let n=0;this._packedSetValue=function(e){return n=P(e),this},this._packedGetValue=function(){return n}}decode(e,t=0){const r=this.makeDestinationObject(),n=this.word.decode(e,t);this._packedSetValue(n);for(const i of this.fields)void 0!==i.property&&(r[i.property]=i.decode(e));return r}encode(e,t,r=0){const n=this.word.decode(t,r);this._packedSetValue(n);for(const i of this.fields)if(void 0!==i.property){const t=e[i.property];void 0!==t&&i.encode(t)}return this.word.encode(this._packedGetValue(),t,r)}addField(e,t){const r=new B(this,e,t);return this.fields.push(r),r}addBoolean(e){const t=new U(this,e);return this.fields.push(t),t}fieldFor(e){if("string"!==typeof e)throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}}class B{constructor(e,t,r){if(!(e instanceof M))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(t)||0>=t)throw new TypeError("bits must be positive integer");const n=8*e.span,i=e.fields.reduce(((e,t)=>e+t.bits),0);if(t+i>n)throw new Error("bits too long for span remainder ("+(n-i)+" of "+n+" remain)");this.container=e,this.bits=t,this.valueMask=(1<<t)-1,32===t&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=n-i-t),this.wordMask=P(this.valueMask<<this.start),this.property=r}decode(e,t){const r=this.container._packedGetValue(),n=P(r&this.wordMask),i=n>>>this.start;return i}encode(e){if("number"!==typeof e||!Number.isInteger(e)||e!==P(e&this.valueMask))throw new TypeError(a("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const t=this.container._packedGetValue(),r=P(e<<this.start);this.container._packedSetValue(P(t&~this.wordMask)|r)}}class U extends B{constructor(e,t){super(e,1,t)}decode(e,t){return!!super.decode(e,t)}encode(e){"boolean"===typeof e&&(e=+e),super.encode(e)}}class L extends o{constructor(e,t){if(!(e instanceof u&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;e instanceof u||(r=e),super(r,t),this.length=e}getSpan(e,t){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),r}decode(e,t=0){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),s(e).slice(t,t+r)}encode(e,t,r){let n=this.length;if(this.length instanceof u&&(n=e.length),!(e instanceof Uint8Array&&n===e.length))throw new TypeError(a("Blob.encode",this)+" requires (length "+n+") Uint8Array as src");if(r+n>t.length)throw new RangeError("encoding overruns Uint8Array");const i=s(e);return s(t).write(i.toString("hex"),r,n,"hex"),this.length instanceof u&&this.length.encode(n,t,r),n}}class D extends o{constructor(e){super(-1,e)}getSpan(e,t=0){i(e);let r=t;while(r<e.length&&0!==e[r])r+=1;return 1+r-t}decode(e,t=0){const r=this.getSpan(e,t);return s(e).slice(t,t+r-1).toString("utf-8")}encode(e,t,r=0){"string"!==typeof e&&(e=String(e));const i=n.Buffer.from(e,"utf8"),o=i.length;if(r+o>t.length)throw new RangeError("encoding overruns Buffer");const a=s(t);return i.copy(a,r),a[r+o]=0,o+1}}class W extends o{constructor(e,t){if("string"===typeof e&&void 0===t&&(t=e,e=void 0),void 0===e)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,t),this.maxSpan=e}getSpan(e,t=0){return i(e),e.length-t}decode(e,t=0){const r=this.getSpan(e,t);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return s(e).slice(t,t+r).toString("utf-8")}encode(e,t,r=0){"string"!==typeof e&&(e=String(e));const i=n.Buffer.from(e,"utf8"),o=i.length;if(0<=this.maxSpan&&this.maxSpan<o)throw new RangeError("text length exceeds maxSpan");if(r+o>t.length)throw new RangeError("encoding overruns Buffer");return i.copy(s(t),r),o}}class j extends o{constructor(e,t){super(0,t),this.value=e}decode(e,t){return this.value}encode(e,t,r){return 0}}t.cY=(e,t,r)=>new h(e,t,r),t.u8=e=>new d(1,e),t.NX=e=>new d(2,e),t.DH=e=>new d(4,e),t.I0=e=>new b(e),t.Wg=e=>new _(e),t.w3=(e,t,r)=>new N(e,t,r),t.O6=(e,t,r)=>new k(e,t,r),t.av=(e,t)=>new L(e,t)},64529:function(e,t,r){"use strict";r.d(t,{H:function(){return u}});r(18111),r(7588);var n=r(69983),i=r(28356),s=r(20169),o=(r(22489),r(81753));const a={getFeatureValue(e,t){const r=t?.[e];return void 0===r?s.oU.DEFAULT_FEATURES[e]:r},filterSocialsByPlatform(e){if(!e||!e.length)return e;if(o.w.isTelegram()){if(o.w.isIos())return e.filter((e=>"google"!==e));if(o.w.isMac())return e.filter((e=>"x"!==e));if(o.w.isAndroid())return e.filter((e=>!["facebook","x"].includes(e)))}return e}},c=(0,n.BX)({features:s.oU.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:{solana:"eoa",bip122:"payment",polkadot:"eoa",eip155:"smartAccount"},enableNetworkSwitch:!0}),u={state:c,subscribeKey(e,t){return(0,i.u$)(c,e,t)},setOptions(e){Object.assign(c,e)},setFeatures(e){if(!e)return;c.features||(c.features=s.oU.DEFAULT_FEATURES);const t={...c.features,...e};c.features=t,c.features.socials&&(c.features.socials=a.filterSocialsByPlatform(c.features.socials))},setProjectId(e){c.projectId=e},setCustomRpcUrls(e){c.customRpcUrls=e},setAllWallets(e){c.allWallets=e},setIncludeWalletIds(e){c.includeWalletIds=e},setExcludeWalletIds(e){c.excludeWalletIds=e},setFeaturedWalletIds(e){c.featuredWalletIds=e},setTokens(e){c.tokens=e},setTermsConditionsUrl(e){c.termsConditionsUrl=e},setPrivacyPolicyUrl(e){c.privacyPolicyUrl=e},setCustomWallets(e){c.customWallets=e},setIsSiweEnabled(e){c.isSiweEnabled=e},setIsUniversalProvider(e){c.isUniversalProvider=e},setSdkVersion(e){c.sdkVersion=e},setMetadata(e){c.metadata=e},setDisableAppend(e){c.disableAppend=e},setEIP6963Enabled(e){c.enableEIP6963=e},setDebug(e){c.debug=e},setEnableWalletConnect(e){c.enableWalletConnect=e},setEnableWalletGuide(e){c.enableWalletGuide=e},setEnableAuthLogger(e){c.enableAuthLogger=e},setEnableWallets(e){c.enableWallets=e},setHasMultipleAddresses(e){c.hasMultipleAddresses=e},setSIWX(e){c.siwx=e},setConnectMethodsOrder(e){c.features={...c.features,connectMethodsOrder:e}},setWalletFeaturesOrder(e){c.features={...c.features,walletFeaturesOrder:e}},setSocialsOrder(e){c.features={...c.features,socials:e}},setCollapseWallets(e){c.features={...c.features,collapseWallets:e}},setEnableEmbedded(e){c.enableEmbedded=e},setAllowUnsupportedChain(e){c.allowUnsupportedChain=e},setManualWCControl(e){c.manualWCControl=e},setEnableNetworkSwitch(e){c.enableNetworkSwitch=e},setDefaultAccountTypes(e={}){Object.entries(e).forEach((([e,t])=>{t&&(c.defaultAccountTypes[e]=t)}))},setUniversalProviderConfigOverride(e){c.universalProviderConfigOverride=e},getUniversalProviderConfigOverride(){return c.universalProviderConfigOverride},getSnapshot(){return(0,n.P9)(c)}}},64537:function(e,t,r){"use strict";r.d(t,{v:function(){return i}});var n=r(62707);class i{constructor(){}static getInstance({projectId:e,chainId:t,enableLogger:r,onTimeout:s,abortController:o}){return i.instance||(i.instance=new n.Y({projectId:e,chainId:t,enableLogger:r,onTimeout:s,abortController:o})),i.instance}}},64828:function(e){"use strict";e.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},64979:function(e,t,r){"use strict";var n=r(46518),i=r(44576),s=r(97751),o=r(6980),a=r(24913).f,c=r(39297),u=r(90679),l=r(23167),h=r(32603),d=r(55002),p=r(16193),f=r(43724),g=r(96395),m="DOMException",y=s("Error"),w=s(m),b=function(){u(this,v);var e=arguments.length,t=h(e<1?void 0:arguments[0]),r=h(e<2?void 0:arguments[1],"Error"),n=new w(t,r),i=new y(t);return i.name=m,a(n,"stack",o(1,p(i.stack,1))),l(n,this,b),n},v=b.prototype=w.prototype,_="stack"in new y(m),E="stack"in new w(1,2),A=w&&f&&Object.getOwnPropertyDescriptor(i,m),I=!!A&&!(A.writable&&A.configurable),S=_&&!I&&!E;n({global:!0,constructor:!0,forced:g||S},{DOMException:S?b:w});var C=s(m),k=C.prototype;if(k.constructor!==C)for(var N in g||a(k,"constructor",o(1,C)),d)if(c(d,N)){var O=d[N],T=O.s;c(C,T)||a(C,T,o(6,O.c))}},65146:function(e,t,r){"use strict";function n(){return(null===r.g||void 0===r.g?void 0:r.g.crypto)||(null===r.g||void 0===r.g?void 0:r.g.msCrypto)||{}}function i(){const e=n();return e.subtle||e.webkitSubtle}function s(){return!!n()&&!!i()}Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowserCryptoAvailable=t.getSubtleCrypto=t.getBrowerCrypto=void 0,t.getBrowerCrypto=n,t.getSubtleCrypto=i,t.isBrowserCryptoAvailable=s},65479:function(e,t,r){"use strict";r.d(t,{bI:function(){return O}});r(18111),r(61701);var n=r(67166),i=r(86330);class s extends i.Vw{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,(0,i.sd)(e);const r=(0,i.ZJ)(t);if(this.iHash=e.create(),"function"!==typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,s=new Uint8Array(n);s.set(r.length>n?e.create().update(r).digest():r);for(let i=0;i<s.length;i++)s[i]^=54;this.iHash.update(s),this.oHash=e.create();for(let i=0;i<s.length;i++)s[i]^=106;this.oHash.update(s),(0,i.uH)(s)}update(e){return(0,i.CC)(this),this.iHash.update(e),this}digestInto(e){(0,i.CC)(this),(0,i.DO)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:s,outputLen:o}=this;return e.finished=n,e.destroyed=i,e.blockLen=s,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const o=(e,t,r)=>new s(e,t).update(r).digest();o.create=(e,t)=>new s(e,t);r(44114);var a=r(81062),c=r(59383),u=r(75404);
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
function l(e){void 0!==e.lowS&&(0,u.e8)("lowS",e.lowS),void 0!==e.prehash&&(0,u.e8)("prehash",e.prehash)}function h(e){const t=(0,a.hp)(e);(0,u.Q5)(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if("object"!==typeof r||"bigint"!==typeof r.beta||"function"!==typeof r.splitScalar)throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}class d extends Error{constructor(e=""){super(e)}}const p={Err:d,_tlv:{encode:(e,t)=>{const{Err:r}=p;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(1&t.length)throw new r("tlv.encode: unpadded data");const n=t.length/2,i=(0,u.zW)(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");const s=n>127?(0,u.zW)(i.length/2|128):"",o=(0,u.zW)(e);return o+s+i+t},decode(e,t){const{Err:r}=p;let n=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[n++]!==e)throw new r("tlv.decode: wrong tlv");const i=t[n++],s=!!(128&i);let o=0;if(s){const e=127&i;if(!e)throw new r("tlv.decode(long): indefinite length not supported");if(e>4)throw new r("tlv.decode(long): byte length is too big");const s=t.subarray(n,n+e);if(s.length!==e)throw new r("tlv.decode: length bytes not complete");if(0===s[0])throw new r("tlv.decode(long): zero leftmost byte");for(const t of s)o=o<<8|t;if(n+=e,o<128)throw new r("tlv.decode(long): not minimal encoding")}else o=i;const a=t.subarray(n,n+o);if(a.length!==o)throw new r("tlv.decode: wrong value length");return{v:a,l:t.subarray(n+o)}}},_int:{encode(e){const{Err:t}=p;if(e<f)throw new t("integer: negative integers are not allowed");let r=(0,u.zW)(e);if(8&Number.parseInt(r[0],16)&&(r="00"+r),1&r.length)throw new t("unexpected DER parsing assertion: unpadded hex");return r},decode(e){const{Err:t}=p;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return(0,u.Ph)(e)}},toSig(e){const{Err:t,_int:r,_tlv:n}=p,i=(0,u.qj)("signature",e),{v:s,l:o}=n.decode(48,i);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:a,l:c}=n.decode(2,s),{v:l,l:h}=n.decode(2,c);if(h.length)throw new t("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(l)}},hexFromSig(e){const{_tlv:t,_int:r}=p,n=t.encode(2,r.encode(e.r)),i=t.encode(2,r.encode(e.s)),s=n+i;return t.encode(48,s)}},f=BigInt(0),g=BigInt(1),m=(BigInt(2),BigInt(3));BigInt(4);function y(e){const t=h(e),{Fp:r}=t,n=(0,c.D0)(t.n,t.nBitLength),i=t.toBytes||((e,t,n)=>{const i=t.toAffine();return(0,u.Id)(Uint8Array.from([4]),r.toBytes(i.x),r.toBytes(i.y))}),s=t.fromBytes||(e=>{const t=e.subarray(1),n=r.fromBytes(t.subarray(0,r.BYTES)),i=r.fromBytes(t.subarray(r.BYTES,2*r.BYTES));return{x:n,y:i}});function o(e){const{a:n,b:i}=t,s=r.sqr(e),o=r.mul(s,e);return r.add(r.add(o,r.mul(e,n)),i)}if(!r.eql(r.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function l(e){return(0,u.r4)(e,g,t.n)}function d(e){const{allowedPrivateKeyLengths:r,nByteLength:n,wrapPrivateKey:i,n:s}=t;if(r&&"bigint"!==typeof e){if((0,u.aY)(e)&&(e=(0,u.My)(e)),"string"!==typeof e||!r.includes(e.length))throw new Error("invalid private key");e=e.padStart(2*n,"0")}let o;try{o="bigint"===typeof e?e:(0,u.Ph)((0,u.qj)("private key",e,n))}catch(a){throw new Error("invalid private key, expected hex or "+n+" bytes, got "+typeof e)}return i&&(o=(0,c.zi)(o,s)),(0,u.aK)("private key",o,g,s),o}function p(e){if(!(e instanceof b))throw new Error("ProjectivePoint expected")}const y=(0,u.x)(((e,t)=>{const{px:n,py:i,pz:s}=e;if(r.eql(s,r.ONE))return{x:n,y:i};const o=e.is0();null==t&&(t=o?r.ONE:r.inv(s));const a=r.mul(n,t),c=r.mul(i,t),u=r.mul(s,t);if(o)return{x:r.ZERO,y:r.ZERO};if(!r.eql(u,r.ONE))throw new Error("invZ was invalid");return{x:a,y:c}})),w=(0,u.x)((e=>{if(e.is0()){if(t.allowInfinityPoint&&!r.is0(e.py))return;throw new Error("bad point: ZERO")}const{x:n,y:i}=e.toAffine();if(!r.isValid(n)||!r.isValid(i))throw new Error("bad point: x or y not FE");const s=r.sqr(i),a=o(n);if(!r.eql(s,a))throw new Error("bad point: equation left != right");if(!e.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0}));class b{constructor(e,t,n){if(null==e||!r.isValid(e))throw new Error("x required");if(null==t||!r.isValid(t)||r.is0(t))throw new Error("y required");if(null==n||!r.isValid(n))throw new Error("z required");this.px=e,this.py=t,this.pz=n,Object.freeze(this)}static fromAffine(e){const{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw new Error("invalid affine point");if(e instanceof b)throw new Error("projective point not allowed");const i=e=>r.eql(e,r.ZERO);return i(t)&&i(n)?b.ZERO:new b(t,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=(0,c.pS)(r,e.map((e=>e.pz)));return e.map(((e,r)=>e.toAffine(t[r]))).map(b.fromAffine)}static fromHex(e){const t=b.fromAffine(s((0,u.qj)("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return b.BASE.multiply(d(e))}static msm(e,t){return(0,a.Xf)(b,n,e,t)}_setWindowSize(e){_.setWindowSize(this,e)}assertValidity(){w(this)}hasEvenY(){const{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){p(e);const{px:t,py:n,pz:i}=this,{px:s,py:o,pz:a}=e,c=r.eql(r.mul(t,a),r.mul(s,i)),u=r.eql(r.mul(n,a),r.mul(o,i));return c&&u}negate(){return new b(this.px,r.neg(this.py),this.pz)}double(){const{a:e,b:n}=t,i=r.mul(n,m),{px:s,py:o,pz:a}=this;let c=r.ZERO,u=r.ZERO,l=r.ZERO,h=r.mul(s,s),d=r.mul(o,o),p=r.mul(a,a),f=r.mul(s,o);return f=r.add(f,f),l=r.mul(s,a),l=r.add(l,l),c=r.mul(e,l),u=r.mul(i,p),u=r.add(c,u),c=r.sub(d,u),u=r.add(d,u),u=r.mul(c,u),c=r.mul(f,c),l=r.mul(i,l),p=r.mul(e,p),f=r.sub(h,p),f=r.mul(e,f),f=r.add(f,l),l=r.add(h,h),h=r.add(l,h),h=r.add(h,p),h=r.mul(h,f),u=r.add(u,h),p=r.mul(o,a),p=r.add(p,p),h=r.mul(p,f),c=r.sub(c,h),l=r.mul(p,d),l=r.add(l,l),l=r.add(l,l),new b(c,u,l)}add(e){p(e);const{px:n,py:i,pz:s}=this,{px:o,py:a,pz:c}=e;let u=r.ZERO,l=r.ZERO,h=r.ZERO;const d=t.a,f=r.mul(t.b,m);let g=r.mul(n,o),y=r.mul(i,a),w=r.mul(s,c),v=r.add(n,i),_=r.add(o,a);v=r.mul(v,_),_=r.add(g,y),v=r.sub(v,_),_=r.add(n,s);let E=r.add(o,c);return _=r.mul(_,E),E=r.add(g,w),_=r.sub(_,E),E=r.add(i,s),u=r.add(a,c),E=r.mul(E,u),u=r.add(y,w),E=r.sub(E,u),h=r.mul(d,_),u=r.mul(f,w),h=r.add(u,h),u=r.sub(y,h),h=r.add(y,h),l=r.mul(u,h),y=r.add(g,g),y=r.add(y,g),w=r.mul(d,w),_=r.mul(f,_),y=r.add(y,w),w=r.sub(g,w),w=r.mul(d,w),_=r.add(_,w),g=r.mul(y,_),l=r.add(l,g),g=r.mul(E,_),u=r.mul(v,u),u=r.sub(u,g),g=r.mul(v,y),h=r.mul(E,h),h=r.add(h,g),new b(u,l,h)}subtract(e){return this.add(e.negate())}is0(){return this.equals(b.ZERO)}wNAF(e){return _.wNAFCached(this,e,b.normalizeZ)}multiplyUnsafe(e){const{endo:n,n:i}=t;(0,u.aK)("scalar",e,f,i);const s=b.ZERO;if(e===f)return s;if(this.is0()||e===g)return this;if(!n||_.hasPrecomputes(this))return _.wNAFCachedUnsafe(this,e,b.normalizeZ);let{k1neg:o,k1:a,k2neg:c,k2:l}=n.splitScalar(e),h=s,d=s,p=this;while(a>f||l>f)a&g&&(h=h.add(p)),l&g&&(d=d.add(p)),p=p.double(),a>>=g,l>>=g;return o&&(h=h.negate()),c&&(d=d.negate()),d=new b(r.mul(d.px,n.beta),d.py,d.pz),h.add(d)}multiply(e){const{endo:n,n:i}=t;let s,o;if((0,u.aK)("scalar",e,g,i),n){const{k1neg:t,k1:i,k2neg:a,k2:c}=n.splitScalar(e);let{p:u,f:l}=this.wNAF(i),{p:h,f:d}=this.wNAF(c);u=_.constTimeNegate(t,u),h=_.constTimeNegate(a,h),h=new b(r.mul(h.px,n.beta),h.py,h.pz),s=u.add(h),o=l.add(d)}else{const{p:t,f:r}=this.wNAF(e);s=t,o=r}return b.normalizeZ([s,o])[0]}multiplyAndAddUnsafe(e,t,r){const n=b.BASE,i=(e,t)=>t!==f&&t!==g&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),s=i(this,t).add(i(e,r));return s.is0()?void 0:s}toAffine(e){return y(this,e)}isTorsionFree(){const{h:e,isTorsionFree:r}=t;if(e===g)return!0;if(r)return r(b,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:r}=t;return e===g?this:r?r(b,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return(0,u.e8)("isCompressed",e),this.assertValidity(),i(b,this,e)}toHex(e=!0){return(0,u.e8)("isCompressed",e),(0,u.My)(this.toRawBytes(e))}}b.BASE=new b(t.Gx,t.Gy,r.ONE),b.ZERO=new b(r.ZERO,r.ONE,r.ZERO);const v=t.nBitLength,_=(0,a.hT)(b,t.endo?Math.ceil(v/2):v);return{CURVE:t,ProjectivePoint:b,normPrivateKeyToScalar:d,weierstrassEquation:o,isWithinCurveOrder:l}}function w(e){const t=(0,a.hp)(e);return(0,u.Q5)(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function b(e){const t=w(e),{Fp:r,n:n}=t,i=r.BYTES+1,s=2*r.BYTES+1;function o(e){return(0,c.zi)(e,n)}function a(e){return(0,c.B8)(e,n)}const{ProjectivePoint:h,normPrivateKeyToScalar:d,weierstrassEquation:m,isWithinCurveOrder:b}=y({...t,toBytes(e,t,n){const i=t.toAffine(),s=r.toBytes(i.x),o=u.Id;return(0,u.e8)("isCompressed",n),n?o(Uint8Array.from([t.hasEvenY()?2:3]),s):o(Uint8Array.from([4]),s,r.toBytes(i.y))},fromBytes(e){const t=e.length,n=e[0],o=e.subarray(1);if(t!==i||2!==n&&3!==n){if(t===s&&4===n){const e=r.fromBytes(o.subarray(0,r.BYTES)),t=r.fromBytes(o.subarray(r.BYTES,2*r.BYTES));return{x:e,y:t}}{const e=i,r=s;throw new Error("invalid Point, expected length of "+e+", or uncompressed "+r+", got "+t)}}{const e=(0,u.Ph)(o);if(!(0,u.r4)(e,g,r.ORDER))throw new Error("Point is not on curve");const t=m(e);let i;try{i=r.sqrt(t)}catch(a){const e=a instanceof Error?": "+a.message:"";throw new Error("Point is not on curve"+e)}const s=(i&g)===g,c=1===(1&n);return c!==s&&(i=r.neg(i)),{x:e,y:i}}}}),v=e=>(0,u.My)((0,u.lq)(e,t.nByteLength));function _(e){const t=n>>g;return e>t}function E(e){return _(e)?o(-e):e}const A=(e,t,r)=>(0,u.Ph)(e.slice(t,r));class I{constructor(e,t,r){(0,u.aK)("r",e,g,n),(0,u.aK)("s",t,g,n),this.r=e,this.s=t,null!=r&&(this.recovery=r),Object.freeze(this)}static fromCompact(e){const r=t.nByteLength;return e=(0,u.qj)("compactSignature",e,2*r),new I(A(e,0,r),A(e,r,2*r))}static fromDER(e){const{r:t,s:r}=p.toSig((0,u.qj)("DER",e));return new I(t,r)}assertValidity(){}addRecoveryBit(e){return new I(this.r,this.s,e)}recoverPublicKey(e){const{r:n,s:i,recovery:s}=this,c=T((0,u.qj)("msgHash",e));if(null==s||![0,1,2,3].includes(s))throw new Error("recovery id invalid");const l=2===s||3===s?n+t.n:n;if(l>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const d=0===(1&s)?"02":"03",p=h.fromHex(d+v(l)),f=a(l),g=o(-c*f),m=o(i*f),y=h.BASE.multiplyAndAddUnsafe(p,g,m);if(!y)throw new Error("point at infinify");return y.assertValidity(),y}hasHighS(){return _(this.s)}normalizeS(){return this.hasHighS()?new I(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return(0,u.aT)(this.toDERHex())}toDERHex(){return p.hexFromSig(this)}toCompactRawBytes(){return(0,u.aT)(this.toCompactHex())}toCompactHex(){return v(this.r)+v(this.s)}}const S={isValidPrivateKey(e){try{return d(e),!0}catch(t){return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const e=(0,c.Tp)(t.n);return(0,c.qy)(t.randomBytes(e),t.n)},precompute(e=8,t=h.BASE){return t._setWindowSize(e),t.multiply(BigInt(3)),t}};function C(e,t=!0){return h.fromPrivateKey(e).toRawBytes(t)}function k(e){const t=(0,u.aY)(e),r="string"===typeof e,n=(t||r)&&e.length;return t?n===i||n===s:r?n===2*i||n===2*s:e instanceof h}function N(e,t,r=!0){if(k(e))throw new Error("first arg must be private key");if(!k(t))throw new Error("second arg must be public key");const n=h.fromHex(t);return n.multiply(d(e)).toRawBytes(r)}const O=t.bits2int||function(e){if(e.length>8192)throw new Error("input is too large");const r=(0,u.Ph)(e),n=8*e.length-t.nBitLength;return n>0?r>>BigInt(n):r},T=t.bits2int_modN||function(e){return o(O(e))},R=(0,u.OG)(t.nBitLength);function x(e){return(0,u.aK)("num < 2^"+t.nBitLength,e,f,R),(0,u.lq)(e,t.nByteLength)}function P(e,n,i=M){if(["recovered","canonical"].some((e=>e in i)))throw new Error("sign() legacy options not supported");const{hash:s,randomBytes:c}=t;let{lowS:p,prehash:m,extraEntropy:y}=i;null==p&&(p=!0),e=(0,u.qj)("msgHash",e),l(i),m&&(e=(0,u.qj)("prehashed msgHash",s(e)));const w=T(e),v=d(n),A=[x(v),x(w)];if(null!=y&&!1!==y){const e=!0===y?c(r.BYTES):y;A.push((0,u.qj)("extraEntropy",e))}const S=(0,u.Id)(...A),C=w;function k(e){const t=O(e);if(!b(t))return;const r=a(t),n=h.BASE.multiply(t).toAffine(),i=o(n.x);if(i===f)return;const s=o(r*o(C+i*v));if(s===f)return;let c=(n.x===i?0:2)|Number(n.y&g),u=s;return p&&_(s)&&(u=E(s),c^=1),new I(i,u,c)}return{seed:S,k2sig:k}}const M={lowS:t.lowS,prehash:!1},B={lowS:t.lowS,prehash:!1};function U(e,r,n=M){const{seed:i,k2sig:s}=P(e,r,n),o=t,a=(0,u.fg)(o.hash.outputLen,o.nByteLength,o.hmac);return a(i,s)}function L(e,r,n,i=B){const s=e;r=(0,u.qj)("msgHash",r),n=(0,u.qj)("publicKey",n);const{lowS:c,prehash:d,format:f}=i;if(l(i),"strict"in i)throw new Error("options.strict was renamed to lowS");if(void 0!==f&&"compact"!==f&&"der"!==f)throw new Error("format must be compact or der");const g="string"===typeof s||(0,u.aY)(s),m=!g&&!f&&"object"===typeof s&&null!==s&&"bigint"===typeof s.r&&"bigint"===typeof s.s;if(!g&&!m)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let y,w;try{if(m&&(y=new I(s.r,s.s)),g){try{"compact"!==f&&(y=I.fromDER(s))}catch(N){if(!(N instanceof p.Err))throw N}y||"der"===f||(y=I.fromCompact(s))}w=h.fromHex(n)}catch(O){return!1}if(!y)return!1;if(c&&y.hasHighS())return!1;d&&(r=t.hash(r));const{r:b,s:v}=y,_=T(r),E=a(v),A=o(_*E),S=o(b*E),C=h.BASE.multiplyAndAddUnsafe(w,A,S)?.toAffine();if(!C)return!1;const k=o(C.x);return k===b}return h.BASE._setWindowSize(8),{CURVE:t,getPublicKey:C,getSharedSecret:N,sign:U,verify:L,ProjectivePoint:h,Signature:I,utils:S}}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
function v(e){return{hash:e,hmac:(t,...r)=>o(e,t,(0,i.Id)(...r)),randomBytes:i.po}}function _(e,t){const r=t=>b({...e,...v(t)});return{...r(t),create:r}}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const E=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),A=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),I=BigInt(1),S=BigInt(2),C=(e,t)=>(e+t/S)/t;function k(e){const t=E,r=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),u=BigInt(88),l=e*e*e%t,h=l*l*e%t,d=(0,c.zH)(h,r,t)*h%t,p=(0,c.zH)(d,r,t)*h%t,f=(0,c.zH)(p,S,t)*l%t,g=(0,c.zH)(f,i,t)*f%t,m=(0,c.zH)(g,s,t)*g%t,y=(0,c.zH)(m,a,t)*m%t,w=(0,c.zH)(y,u,t)*y%t,b=(0,c.zH)(w,a,t)*m%t,v=(0,c.zH)(b,r,t)*h%t,_=(0,c.zH)(v,o,t)*g%t,A=(0,c.zH)(_,n,t)*l%t,I=(0,c.zH)(A,S,t);if(!N.eql(N.sqr(I),e))throw new Error("Cannot find square root");return I}const N=(0,c.D0)(E,void 0,void 0,{sqrt:k}),O=_({a:BigInt(0),b:BigInt(7),Fp:N,n:A,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=A,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-I*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=r,o=BigInt("0x100000000000000000000000000000000"),a=C(s*e,t),u=C(-n*e,t);let l=(0,c.zi)(e-a*r-u*i,t),h=(0,c.zi)(-a*n-u*s,t);const d=l>o,p=h>o;if(d&&(l=t-l),p&&(h=t-h),l>o||h>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:d,k1:l,k2neg:p,k2:h}}}},n.sc);BigInt(0);O.ProjectivePoint},65588:function(e,t,r){"use strict";r.d(t,{r:function(){return u}});var n=r(1576),i=r(33315),s=r(97914),o=r(65736);n.extend(s),n.extend(o);const a={...i,name:"en-web3-modal",relativeTime:{future:"in %s",past:"%s ago",s:"%d sec",m:"1 min",mm:"%d min",h:"1 hr",hh:"%d hrs",d:"1 d",dd:"%d d",M:"1 mo",MM:"%d mo",y:"1 yr",yy:"%d yr"}},c=["January","February","March","April","May","June","July","August","September","October","November","December"];n.locale("en-web3-modal",a);const u={getMonthNameByIndex(e){return c[e]},getYear(e=(new Date).toISOString()){return n(e).year()},getRelativeDateFromNow(e){return n(e).locale("en-web3-modal").fromNow(!0)},formatDate(e,t="DD MMM"){return n(e).format(t)}}},65642:function(e,t,r){"use strict";r.d(t,{T:function(){return g}});var n=r(69983),i=r(20169),s=r(81753),o=r(36300),a=r(81653),c=r(58843),u=r(37903),l=r(64529),h=r(14210);const d={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},p=s.w.getBlockchainApiUrl(),f=(0,n.BX)({clientId:null,api:new o.Z({baseUrl:p,clientId:null}),supportedChains:{http:[],ws:[]}}),g={state:f,async get(e){const{st:t,sv:r}=g.getSdkProperties(),n=l.H.state.projectId,i={...e.params||{},st:t,sv:r,projectId:n};return f.api.get({...e,params:i})},getSdkProperties(){const{sdkType:e,sdkVersion:t}=l.H.state;return{st:e||"unknown",sv:t||"unknown"}},async isNetworkSupported(e){if(!e)return!1;try{f.supportedChains.http.length||await g.getSupportedNetworks()}catch(t){return!1}return f.supportedChains.http.includes(e)},async getSupportedNetworks(){const e=await g.get({path:"v1/supported-chains"});return f.supportedChains=e,e},async fetchIdentity({address:e,caipNetworkId:t}){const r=await g.isNetworkSupported(t);if(!r)return{avatar:"",name:""};const n=a.i.getIdentityFromCacheForAddress(e);if(n)return n;const i=await g.get({path:`/v1/identity/${e}`,params:{sender:u.W.state.activeCaipAddress?s.w.getPlainAddress(u.W.state.activeCaipAddress):void 0}});return a.i.updateIdentityCache({address:e,identity:i,timestamp:Date.now()}),i},async fetchTransactions({account:e,cursor:t,onramp:r,signal:n,cache:i,chainId:s}){const o=await g.isNetworkSupported(u.W.state.activeCaipNetwork?.caipNetworkId);return o?g.get({path:`/v1/account/${e}/history`,params:{cursor:t,onramp:r,chainId:s},signal:n,cache:i}):{data:[],next:void 0}},async fetchSwapQuote({amount:e,userAddress:t,from:r,to:n,gasPrice:i}){const s=await g.isNetworkSupported(u.W.state.activeCaipNetwork?.caipNetworkId);return s?g.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:e,userAddress:t,from:r,to:n,gasPrice:i}}):{quotes:[]}},async fetchSwapTokens({chainId:e}){const t=await g.isNetworkSupported(u.W.state.activeCaipNetwork?.caipNetworkId);return t?g.get({path:"/v1/convert/tokens",params:{chainId:e}}):{tokens:[]}},async fetchTokenPrice({addresses:e}){const t=await g.isNetworkSupported(u.W.state.activeCaipNetwork?.caipNetworkId);return t?f.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:e,projectId:l.H.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:e,userAddress:t}){const r=await g.isNetworkSupported(u.W.state.activeCaipNetwork?.caipNetworkId);return r?g.get({path:"/v1/convert/allowance",params:{tokenAddress:e,userAddress:t},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:e}){const{st:t,sv:r}=g.getSdkProperties(),n=await g.isNetworkSupported(u.W.state.activeCaipNetwork?.caipNetworkId);if(!n)throw new Error("Network not supported for Gas Price");return g.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:e,st:t,sv:r}})},async generateSwapCalldata({amount:e,from:t,to:r,userAddress:n,disableEstimate:s}){const o=await g.isNetworkSupported(u.W.state.activeCaipNetwork?.caipNetworkId);if(!o)throw new Error("Network not supported for Swaps");return f.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:e,eip155:{slippage:i.oU.CONVERT_SLIPPAGE_TOLERANCE},projectId:l.H.state.projectId,from:t,to:r,userAddress:n,disableEstimate:s}})},async generateApproveCalldata({from:e,to:t,userAddress:r}){const{st:n,sv:i}=g.getSdkProperties(),s=await g.isNetworkSupported(u.W.state.activeCaipNetwork?.caipNetworkId);if(!s)throw new Error("Network not supported for Swaps");return g.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:r,from:e,to:t,st:n,sv:i}})},async getBalance(e,t,r){const{st:n,sv:i}=g.getSdkProperties(),s=await g.isNetworkSupported(u.W.state.activeCaipNetwork?.caipNetworkId);if(!s)return h.P.showError("Token Balance Unavailable"),{balances:[]};const o=`${t}:${e}`,c=a.i.getBalanceCacheForCaipAddress(o);if(c)return c;const l=await g.get({path:`/v1/account/${e}/balance`,params:{currency:"usd",chainId:t,forceUpdate:r,st:n,sv:i}});return a.i.updateBalanceCache({caipAddress:o,balance:l,timestamp:Date.now()}),l},async lookupEnsName(e){const t=await g.isNetworkSupported(u.W.state.activeCaipNetwork?.caipNetworkId);return t?g.get({path:`/v1/profile/account/${e}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:e}){const t=await g.isNetworkSupported(u.W.state.activeCaipNetwork?.caipNetworkId);return t?g.get({path:`/v1/profile/reverse/${e}`,params:{sender:c.U.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(e){const t=await g.isNetworkSupported(u.W.state.activeCaipNetwork?.caipNetworkId);return t?g.get({path:`/v1/profile/suggestions/${e}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:e,address:t,message:r,signature:n}){const i=await g.isNetworkSupported(u.W.state.activeCaipNetwork?.caipNetworkId);return i?f.api.post({path:"/v1/profile/account",body:{coin_type:e,address:t,message:r,signature:n},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:e,partnerUserId:t,defaultNetwork:r,purchaseAmount:n,paymentAmount:i}){const s=await g.isNetworkSupported(u.W.state.activeCaipNetwork?.caipNetworkId);if(!s)return"";const o=await f.api.post({path:"/v1/generators/onrampurl",params:{projectId:l.H.state.projectId},body:{destinationWallets:e,defaultNetwork:r,partnerUserId:t,defaultExperience:"buy",presetCryptoAmount:n,presetFiatAmount:i}});return o.url},async getOnrampOptions(){const e=await g.isNetworkSupported(u.W.state.activeCaipNetwork?.caipNetworkId);if(!e)return{paymentCurrencies:[],purchaseCurrencies:[]};try{const e=await g.get({path:"/v1/onramp/options"});return e}catch(t){return d}},async getOnrampQuote({purchaseCurrency:e,paymentCurrency:t,amount:r,network:n}){try{const i=await g.isNetworkSupported(u.W.state.activeCaipNetwork?.caipNetworkId);if(!i)return null;const s=await f.api.post({path:"/v1/onramp/quote",params:{projectId:l.H.state.projectId},body:{purchaseCurrency:e,paymentCurrency:t,amount:r,network:n}});return s}catch(i){return{coinbaseFee:{amount:r,currency:t.id},networkFee:{amount:r,currency:t.id},paymentSubtotal:{amount:r,currency:t.id},paymentTotal:{amount:r,currency:t.id},purchaseAmount:{amount:r,currency:t.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(e){const t=await g.isNetworkSupported(u.W.state.activeCaipNetwork?.caipNetworkId);return t?g.get({path:`/v1/sessions/${e}`}):[]},async revokeSmartSession(e,t,r){const n=await g.isNetworkSupported(u.W.state.activeCaipNetwork?.caipNetworkId);return n?f.api.post({path:`/v1/sessions/${e}/revoke`,params:{projectId:l.H.state.projectId},body:{pci:t,signature:r}}):{success:!1}},setClientId(e){f.clientId=e,f.api=new o.Z({baseUrl:p,clientId:e})}}},65699:function(e,t,r){"use strict";r.d(t,{lY:function(){return E}});r(44114);var n=r(76918),i=r(86330);const s=BigInt(0),o=BigInt(1),a=BigInt(2),c=BigInt(7),u=BigInt(256),l=BigInt(113),h=[],d=[],p=[];for(let A=0,I=o,S=1,C=0;A<24;A++){[S,C]=[C,(2*S+3*C)%5],h.push(2*(5*C+S)),d.push((A+1)*(A+2)/2%64);let e=s;for(let t=0;t<7;t++)I=(I<<o^(I>>c)*l)%u,I&a&&(e^=o<<(o<<BigInt(t))-o);p.push(e)}const f=(0,n.lD)(p,!0),g=f[0],m=f[1],y=(e,t,r)=>r>32?(0,n.WM)(e,t,r):(0,n.P5)(e,t,r),w=(e,t,r)=>r>32?(0,n.im)(e,t,r):(0,n.B4)(e,t,r);function b(e,t=24){const r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let n=0;n<10;n++)r[n]=e[n]^e[n+10]^e[n+20]^e[n+30]^e[n+40];for(let n=0;n<10;n+=2){const t=(n+8)%10,i=(n+2)%10,s=r[i],o=r[i+1],a=y(s,o,1)^r[t],c=w(s,o,1)^r[t+1];for(let r=0;r<50;r+=10)e[n+r]^=a,e[n+r+1]^=c}let t=e[2],i=e[3];for(let r=0;r<24;r++){const n=d[r],s=y(t,i,n),o=w(t,i,n),a=h[r];t=e[a],i=e[a+1],e[a]=s,e[a+1]=o}for(let n=0;n<50;n+=10){for(let t=0;t<10;t++)r[t]=e[n+t];for(let t=0;t<10;t++)e[n+t]^=~r[(t+2)%10]&r[(t+4)%10]}e[0]^=g[n],e[1]^=m[n]}(0,i.uH)(r)}class v extends i.Vw{constructor(e,t,r,n=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=n,this.rounds=s,(0,i.Fe)(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=(0,i.DH)(this.state)}clone(){return this._cloneInto()}keccak(){(0,i.fd)(this.state32),b(this.state32,this.rounds),(0,i.fd)(this.state32),this.posOut=0,this.pos=0}update(e){(0,i.CC)(this),e=(0,i.ZJ)(e),(0,i.DO)(e);const{blockLen:t,state:r}=this,n=e.length;for(let i=0;i<n;){const s=Math.min(t-this.pos,n-i);for(let t=0;t<s;t++)r[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,0!==(128&t)&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){(0,i.CC)(this,!1),(0,i.DO)(e),this.finish();const t=this.state,{blockLen:r}=this;for(let n=0,i=e.length;n<i;){this.posOut>=r&&this.keccak();const s=Math.min(r-this.posOut,i-n);e.set(t.subarray(this.posOut,this.posOut+s),n),this.posOut+=s,n+=s}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return(0,i.Fe)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,i.Ht)(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,(0,i.uH)(this.state)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:n,rounds:i,enableXOF:s}=this;return e||(e=new v(t,r,n,s,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=n,e.enableXOF=s,e.destroyed=this.destroyed,e}}const _=(e,t,r)=>(0,i.qj)((()=>new v(t,e,r))),E=(()=>_(1,136,32))()},65736:function(e,t,r){r(18111),r(7588),function(t,r){e.exports=r()}(0,(function(){"use strict";return function(e,t,r){r.updateLocale=function(e,t){var n=r.Ls[e];if(n)return(t?Object.keys(t):[]).forEach((function(e){n[e]=t[e]})),n}}}))},65768:function(e,t,r){"use strict";r.d(t,{N:function(){return _}});r(44114),r(18111),r(22489),r(7588),r(61701),r(13579);var n=r(69983),i=r(28356),s=r(94732),o=r(81753),a=r(36300),c=r(81653),u=r(97180),l=r(37903),h=r(25638),d=r(31843),p=r(64529);const f=["1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79","fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa","a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393"],g=o.w.getApiUrl(),m=new a.Z({baseUrl:g,clientId:null}),y=40,w=4,b=20,v=(0,n.BX)({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),_={state:v,subscribeKey(e,t){return(0,i.u$)(v,e,t)},_getSdkProperties(){const{projectId:e,sdkType:t,sdkVersion:r}=p.H.state;return{projectId:e,st:t||"appkit",sv:r||"html-wagmi-4.2.2"}},_filterOutExtensions(e){return p.H.state.isUniversalProvider?e.filter((e=>Boolean(e.mobile_link||e.desktop_link||e.webapp_link))):e},async _fetchWalletImage(e){const t=`${m.baseUrl}/getWalletImage/${e}`,r=await m.getBlob({path:t,params:_._getSdkProperties()});u.j.setWalletImage(e,URL.createObjectURL(r))},async _fetchNetworkImage(e){const t=`${m.baseUrl}/public/getAssetImage/${e}`,r=await m.getBlob({path:t,params:_._getSdkProperties()});u.j.setNetworkImage(e,URL.createObjectURL(r))},async _fetchConnectorImage(e){const t=`${m.baseUrl}/public/getAssetImage/${e}`,r=await m.getBlob({path:t,params:_._getSdkProperties()});u.j.setConnectorImage(e,URL.createObjectURL(r))},async _fetchCurrencyImage(e){const t=`${m.baseUrl}/public/getCurrencyImage/${e}`,r=await m.getBlob({path:t,params:_._getSdkProperties()});u.j.setCurrencyImage(e,URL.createObjectURL(r))},async _fetchTokenImage(e){const t=`${m.baseUrl}/public/getTokenImage/${e}`,r=await m.getBlob({path:t,params:_._getSdkProperties()});u.j.setTokenImage(e,URL.createObjectURL(r))},async fetchAllowedOrigins(){try{const{allowedOrigins:e}=await m.get({path:"/projects/v1/origins",params:_._getSdkProperties()});return e}catch(e){return[]}},async fetchNetworkImages(){const e=l.W.getAllRequestedCaipNetworks(),t=e?.map((({assets:e})=>e?.imageId)).filter(Boolean).filter((e=>!s.$.getNetworkImageById(e)));t&&await Promise.allSettled(t.map((e=>_._fetchNetworkImage(e))))},async fetchConnectorImages(){const{connectors:e}=h.a.state,t=e.map((({imageId:e})=>e)).filter(Boolean);await Promise.allSettled(t.map((e=>_._fetchConnectorImage(e))))},async fetchCurrencyImages(e=[]){await Promise.allSettled(e.map((e=>_._fetchCurrencyImage(e))))},async fetchTokenImages(e=[]){await Promise.allSettled(e.map((e=>_._fetchTokenImage(e))))},async fetchWallets(e){const t=e.exclude??[],r=_._getSdkProperties();return r.sv.startsWith("html-core-")&&t.push(...f),await m.get({path:"/getWallets",params:{..._._getSdkProperties(),...e,page:String(e.page),entries:String(e.entries),include:e.include?.join(","),exclude:e.exclude?.join(",")}})},async fetchFeaturedWallets(){const{featuredWalletIds:e}=p.H.state;if(e?.length){const t={..._._getSdkProperties(),page:1,entries:e?.length??w,include:e},{data:r}=await _.fetchWallets(t);r.sort(((t,r)=>e.indexOf(t.id)-e.indexOf(r.id)));const n=r.map((e=>e.image_id)).filter(Boolean);await Promise.allSettled(n.map((e=>_._fetchWalletImage(e)))),v.featured=r,v.allFeatured=r}},async fetchRecommendedWallets(){try{v.isFetchingRecommendedWallets=!0;const{includeWalletIds:e,excludeWalletIds:t,featuredWalletIds:r}=p.H.state,n=[...t??[],...r??[]].filter(Boolean),i=l.W.getRequestedCaipNetworkIds().join(","),s={page:1,entries:w,include:e,exclude:n,chains:i},{data:o,count:a}=await _.fetchWallets(s),u=c.i.getRecentWallets(),h=o.map((e=>e.image_id)).filter(Boolean),d=u.map((e=>e.image_id)).filter(Boolean);await Promise.allSettled([...h,...d].map((e=>_._fetchWalletImage(e)))),v.recommended=o,v.allRecommended=o,v.count=a??0}catch{}finally{v.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:e}){const{includeWalletIds:t,excludeWalletIds:r,featuredWalletIds:n}=p.H.state,i=l.W.getRequestedCaipNetworkIds().join(","),s=[...v.recommended.map((({id:e})=>e)),...r??[],...n??[]].filter(Boolean),a={page:e,entries:y,include:t,exclude:s,chains:i},{data:c,count:u}=await _.fetchWallets(a),h=c.slice(0,b).map((e=>e.image_id)).filter(Boolean);await Promise.allSettled(h.map((e=>_._fetchWalletImage(e)))),v.wallets=o.w.uniqueBy([...v.wallets,..._._filterOutExtensions(c)],"id"),v.count=u>v.count?u:v.count,v.page=e},async initializeExcludedWallets({ids:e}){const t=l.W.getRequestedCaipNetworkIds().join(","),r={page:1,entries:e.length,include:e,chains:t},{data:n}=await _.fetchWallets(r);n&&n.forEach((e=>{v.excludedWallets.push({rdns:e.rdns,name:e.name})}))},async searchWallet({search:e,badge:t}){const{includeWalletIds:r,excludeWalletIds:n}=p.H.state,i=l.W.getRequestedCaipNetworkIds().join(",");v.search=[];const s={page:1,entries:100,search:e?.trim(),badge_type:t,include:r,exclude:n,chains:i},{data:a}=await _.fetchWallets(s);d.E.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:t??"",search:e??""}});const c=a.map((e=>e.image_id)).filter(Boolean);await Promise.allSettled([...c.map((e=>_._fetchWalletImage(e))),o.w.wait(300)]),v.search=_._filterOutExtensions(a)},initPromise(e,t){const r=v.promises[e];return r||(v.promises[e]=t())},prefetch({fetchConnectorImages:e=!0,fetchFeaturedWallets:t=!0,fetchRecommendedWallets:r=!0,fetchNetworkImages:n=!0}={}){const i=[e&&_.initPromise("connectorImages",_.fetchConnectorImages),t&&_.initPromise("featuredWallets",_.fetchFeaturedWallets),r&&_.initPromise("recommendedWallets",_.fetchRecommendedWallets),n&&_.initPromise("networkImages",_.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(i)},prefetchAnalyticsConfig(){p.H.state.features?.analytics&&_.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:e}=await m.get({path:"/getAnalyticsConfig",params:_._getSdkProperties()});p.H.setFeatures({analytics:e})}catch(e){p.H.setFeatures({analytics:!1})}},filterByNamespaces(e){if(!e?.length)return v.featured=v.allFeatured,void(v.recommended=v.allRecommended);const t=l.W.getRequestedCaipNetworkIds().join(",");v.featured=v.allFeatured.filter((e=>e.chains?.some((e=>t.includes(e))))),v.recommended=v.allRecommended.filter((e=>e.chains?.some((e=>t.includes(e))))),v.filteredWallets=v.wallets.filter((e=>e.chains?.some((e=>t.includes(e)))))},clearFilterByNamespaces(){v.filteredWallets=[]},setFilterByNamespace(e){if(!e)return v.featured=v.allFeatured,void(v.recommended=v.allRecommended);const t=l.W.getRequestedCaipNetworkIds().join(",");v.featured=v.allFeatured.filter((e=>e.chains?.some((e=>t.includes(e))))),v.recommended=v.allRecommended.filter((e=>e.chains?.some((e=>t.includes(e))))),v.filteredWallets=v.wallets.filter((e=>e.chains?.some((e=>t.includes(e)))))}}},66360:function(e,t,r){"use strict";r.d(t,{a8:function(){return h},sU:function(){return d}});r(18111),r(61701);var n,i=r(63558),s=r(93514),o=r(33580),a=r(75226),c=r(57527),u=r(53489);(function(e){e[e["Uninitialized"]=0]="Uninitialized",e[e["Initialized"]=1]="Initialized",e[e["Frozen"]=2]="Frozen"})(n||(n={}));const l=(0,i.w3)([(0,s.jE)("mint"),(0,s.jE)("owner"),(0,s._l)("amount"),(0,i.DH)("delegateOption"),(0,s.jE)("delegate"),(0,i.u8)("state"),(0,i.DH)("isNativeOption"),(0,s._l)("isNative"),(0,s._l)("delegatedAmount"),(0,i.DH)("closeAuthorityOption"),(0,s.jE)("closeAuthority")]),h=l.span;async function d(e,t,r,n=o.x5){const i=await e.getAccountInfo(t,r);return p(t,i,n)}function p(e,t,r=o.x5){if(!t)throw new a.kD;if(!t.owner.equals(r))throw new a.bY;if(t.data.length<h)throw new a.vd;const i=l.decode(t.data.slice(0,h));let s=Buffer.alloc(0);if(t.data.length>h){if(t.data.length===u.zj)throw new a.vd;if(t.data[h]!=c.C.Account)throw new a.ce;s=t.data.slice(h+c.v)}return{address:e,mint:i.mint,owner:i.owner,amount:i.amount,delegate:i.delegateOption?i.delegate:null,delegatedAmount:i.delegatedAmount,isInitialized:i.state!==n.Uninitialized,isFrozen:i.state===n.Frozen,isNative:!!i.isNativeOption,rentExemptReserve:i.isNativeOption?i.isNative:null,closeAuthority:i.closeAuthorityOption?i.closeAuthority:null,tlvData:s}}},66752:function(e,t,r){"use strict";r.d(t,{j:function(){return d}});r(44114),r(18111),r(22489),r(20116),r(61701);var n=r(6521),i=r(26676),s=(r(12745),r(48016)),o=r(75747),a=r(59761),c=r(96934),u=r(6775),l=r(99229),h=r(4545);class d extends u.F{constructor({provider:e,chains:t,getActiveChain:r}){super({caipNetworks:t,namespace:"solana",provider:e}),this.eventEmitter=new h.Y,this.emit=this.eventEmitter.emit.bind(this.eventEmitter),this.on=this.eventEmitter.on.bind(this.eventEmitter),this.removeListener=this.eventEmitter.removeListener.bind(this.eventEmitter),this.getActiveChain=r}get session(){return this.provider.session}get chains(){return this.sessionChains.map((e=>{let t=e;return t===c.w.CHAIN_IDS.Deprecated_Mainnet?t=c.w.CHAIN_IDS.Mainnet:t===c.w.CHAIN_IDS.Deprecated_Devnet&&(t=c.w.CHAIN_IDS.Devnet),this.caipNetworks.find((e=>e.caipNetworkId===t))})).filter(Boolean)}get publicKey(){const e=this.getAccount(!1);if(e)return new i.J3(e.publicKey)}async connect(){await super.connectWalletConnect();const e=this.getAccount(!0);return this.emit("connect",new i.J3(e.publicKey)),e.address}async disconnect(){await super.disconnect(),this.emit("disconnect",void 0)}async signMessage(e){this.checkIfMethodIsSupported("solana_signMessage");const t=await this.internalRequest("solana_signMessage",{message:s.A.encode(e),pubkey:this.getAccount(!0).address});return s.A.decode(t.signature)}async signTransaction(e){this.checkIfMethodIsSupported("solana_signTransaction");const t=this.serializeTransaction(e),r=await this.internalRequest("solana_signTransaction",{transaction:t,pubkey:this.getAccount(!0).address,...this.getRawRPCParams(e)});if("signature"in r){const t=s.A.decode(r.signature);return e.addSignature(new i.J3(this.getAccount(!0).publicKey),Buffer.from(t)),e}const o=Buffer.from(r.transaction,"base64");return(0,n.Y)(e)?i.Kt.deserialize(new Uint8Array(o)):i.ZX.from(o)}async signAndSendTransaction(e,t){this.checkIfMethodIsSupported("solana_signAndSendTransaction");const r=this.serializeTransaction(e),n=await this.internalRequest("solana_signAndSendTransaction",{transaction:r,pubkey:this.getAccount(!0).address,sendOptions:t});return this.emit("pendingTransaction",void 0),n.signature}async sendTransaction(e,t,r){const n=await this.signTransaction(e),i=await t.sendRawTransaction(n.serialize(),r);return this.emit("pendingTransaction",void 0),i}async signAllTransactions(e){try{this.checkIfMethodIsSupported("solana_signAllTransactions");const t=await this.internalRequest("solana_signAllTransactions",{transactions:e.map((e=>this.serializeTransaction(e)))});return t.transactions.map(((t,r)=>{const s=e[r];if(!s)throw new Error("Invalid transactions response");const o=Buffer.from(t,"base64");return(0,n.Y)(s)?i.Kt.deserialize(new Uint8Array(o)):(this.emit("pendingTransaction",void 0),i.ZX.from(o))}))}catch(t){if(t instanceof l.y){const t=[];for(const r of e)t.push(await this.signTransaction(r));return t}throw t}}request(e){return this.internalRequest(e.method,e.params)}async getAccounts(){const e=this.session?.namespaces["solana"]?.accounts||[];return Promise.resolve(e.map((e=>({namespace:this.chain,address:a.C.parseCaipAddress(e).address,type:"eoa"}))))}internalRequest(e,t){const r=this.chains.find((e=>this.getActiveChain()?.id===e.id));let n=r?.caipNetworkId;switch(n){case c.w.CHAIN_IDS.Mainnet:this.sessionChains.includes(c.w.CHAIN_IDS.Mainnet)||(n=c.w.CHAIN_IDS.Deprecated_Mainnet);break;case c.w.CHAIN_IDS.Devnet:this.sessionChains.includes(c.w.CHAIN_IDS.Devnet)||(n=c.w.CHAIN_IDS.Deprecated_Devnet);break;default:break}return this.provider?.request({method:e,params:t},n)}get sessionChains(){return o.kl.getChainsFromNamespaces(this.session?.namespaces)}serializeTransaction(e){return Buffer.from(new Uint8Array(e.serialize({verifySignatures:!1}))).toString("base64")}getAccount(e){const t=this.session?.namespaces["solana"]?.accounts[0];if(!t){if(e)throw new Error("Account not found");return}const r=t.split(":")[2];if(r)return{address:r,publicKey:s.A.decode(r)};if(e)throw new Error("Address not found")}getRawRPCParams(e){return(0,n.Y)(e)?{}:{feePayer:e.feePayer?.toBase58()??"",instructions:e.instructions.map((e=>({data:s.A.encode(new Uint8Array(e.data)),keys:e.keys.map((e=>({isWritable:e.isWritable,isSigner:e.isSigner,pubkey:e.pubkey.toBase58()}))),programId:e.programId.toBase58()}))),recentBlockhash:e.recentBlockhash??""}}checkIfMethodIsSupported(e){if(!this.session?.namespaces["solana"]?.methods.includes(e))throw new l.y(e)}}},66813:function(e,t,r){"use strict";r.d(t,{A:function(){return a}});var n=r(69983),i=r(28356);const s={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},o=(0,n.BX)({providers:{...s},providerIds:{...s}}),a={state:o,subscribeKey(e,t){return(0,i.u$)(o,e,t)},subscribe(e){return(0,n.B1)(o,(()=>{e(o)}))},subscribeProviders(e){return(0,n.B1)(o.providers,(()=>e(o.providers)))},setProvider(e,t){t&&(o.providers[e]=(0,n.KR)(t))},getProvider(e){return o.providers[e]},setProviderId(e,t){t&&(o.providerIds[e]=t)},getProviderId(e){if(e)return o.providerIds[e]},reset(){o.providers={...s},o.providerIds={...s}},resetChain(e){o.providers[e]=void 0,o.providerIds[e]=void 0}}},67166:function(e,t,r){"use strict";r.d(t,{sc:function(){return v},Zf:function(){return _}});var n=r(86330);function i(e,t,r,n){if("function"===typeof e.setBigUint64)return e.setBigUint64(t,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),c=n?4:0,u=n?0:4;e.setUint32(t+c,o,n),e.setUint32(t+u,a,n)}function s(e,t,r){return e&t^~e&r}function o(e,t,r){return e&t^e&r^t&r}class a extends n.Vw{constructor(e,t,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(e),this.view=(0,n.O8)(this.buffer)}update(e){(0,n.CC)(this),e=(0,n.ZJ)(e),(0,n.DO)(e);const{view:t,buffer:r,blockLen:i}=this,s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a!==i)r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0);else{const t=(0,n.O8)(e);for(;i<=s-o;o+=i)this.process(t,o)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,n.CC)(this),(0,n.Ht)(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:s,isLE:o}=this;let{pos:a}=this;t[a++]=128,(0,n.uH)(this.buffer.subarray(a)),this.padOffset>s-a&&(this.process(r,0),a=0);for(let n=a;n<s;n++)t[n]=0;i(r,s-8,BigInt(8*this.length),o),this.process(r,0);const c=(0,n.O8)(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=u/4,h=this.get();if(l>h.length)throw new Error("_sha2: outputLen bigger than state");for(let n=0;n<l;n++)c.setUint32(4*n,h[n],o)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:n,finished:i,destroyed:s,pos:o}=this;return e.destroyed=s,e.finished=i,e.length=n,e.pos=o,n%t&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const c=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),u=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]);var l=r(76918);const h=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),d=new Uint32Array(64);class p extends a{constructor(e=32){super(64,e,8,!1),this.A=0|c[0],this.B=0|c[1],this.C=0|c[2],this.D=0|c[3],this.E=0|c[4],this.F=0|c[5],this.G=0|c[6],this.H=0|c[7]}get(){const{A:e,B:t,C:r,D:n,E:i,F:s,G:o,H:a}=this;return[e,t,r,n,i,s,o,a]}set(e,t,r,n,i,s,o,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|s,this.G=0|o,this.H=0|a}process(e,t){for(let n=0;n<16;n++,t+=4)d[n]=e.getUint32(t,!1);for(let s=16;s<64;s++){const e=d[s-15],t=d[s-2],r=(0,n.Ow)(e,7)^(0,n.Ow)(e,18)^e>>>3,i=(0,n.Ow)(t,17)^(0,n.Ow)(t,19)^t>>>10;d[s]=i+d[s-7]+r+d[s-16]|0}let{A:r,B:i,C:a,D:c,E:u,F:l,G:p,H:f}=this;for(let g=0;g<64;g++){const e=(0,n.Ow)(u,6)^(0,n.Ow)(u,11)^(0,n.Ow)(u,25),t=f+e+s(u,l,p)+h[g]+d[g]|0,m=(0,n.Ow)(r,2)^(0,n.Ow)(r,13)^(0,n.Ow)(r,22),y=m+o(r,i,a)|0;f=p,p=l,l=u,u=c+t|0,c=a,a=i,i=r,r=t+y|0}r=r+this.A|0,i=i+this.B|0,a=a+this.C|0,c=c+this.D|0,u=u+this.E|0,l=l+this.F|0,p=p+this.G|0,f=f+this.H|0,this.set(r,i,a,c,u,l,p,f)}roundClean(){(0,n.uH)(d)}destroy(){this.set(0,0,0,0,0,0,0,0),(0,n.uH)(this.buffer)}}const f=(()=>l.lD(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))))(),g=(()=>f[0])(),m=(()=>f[1])(),y=new Uint32Array(80),w=new Uint32Array(80);class b extends a{constructor(e=64){super(128,e,16,!1),this.Ah=0|u[0],this.Al=0|u[1],this.Bh=0|u[2],this.Bl=0|u[3],this.Ch=0|u[4],this.Cl=0|u[5],this.Dh=0|u[6],this.Dl=0|u[7],this.Eh=0|u[8],this.El=0|u[9],this.Fh=0|u[10],this.Fl=0|u[11],this.Gh=0|u[12],this.Gl=0|u[13],this.Hh=0|u[14],this.Hl=0|u[15]}get(){const{Ah:e,Al:t,Bh:r,Bl:n,Ch:i,Cl:s,Dh:o,Dl:a,Eh:c,El:u,Fh:l,Fl:h,Gh:d,Gl:p,Hh:f,Hl:g}=this;return[e,t,r,n,i,s,o,a,c,u,l,h,d,p,f,g]}set(e,t,r,n,i,s,o,a,c,u,l,h,d,p,f,g){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|n,this.Ch=0|i,this.Cl=0|s,this.Dh=0|o,this.Dl=0|a,this.Eh=0|c,this.El=0|u,this.Fh=0|l,this.Fl=0|h,this.Gh=0|d,this.Gl=0|p,this.Hh=0|f,this.Hl=0|g}process(e,t){for(let l=0;l<16;l++,t+=4)y[l]=e.getUint32(t),w[l]=e.getUint32(t+=4);for(let g=16;g<80;g++){const e=0|y[g-15],t=0|w[g-15],r=l.rE(e,t,1)^l.rE(e,t,8)^l.xn(e,t,7),n=l.ry(e,t,1)^l.ry(e,t,8)^l.jm(e,t,7),i=0|y[g-2],s=0|w[g-2],o=l.rE(i,s,19)^l.qh(i,s,61)^l.xn(i,s,6),a=l.ry(i,s,19)^l.Ei(i,s,61)^l.jm(i,s,6),c=l.CW(n,a,w[g-7],w[g-16]),u=l.CQ(c,r,o,y[g-7],y[g-16]);y[g]=0|u,w[g]=0|c}let{Ah:r,Al:n,Bh:i,Bl:s,Ch:o,Cl:a,Dh:c,Dl:u,Eh:h,El:d,Fh:p,Fl:f,Gh:b,Gl:v,Hh:_,Hl:E}=this;for(let A=0;A<80;A++){const e=l.rE(h,d,14)^l.rE(h,d,18)^l.qh(h,d,41),t=l.ry(h,d,14)^l.ry(h,d,18)^l.Ei(h,d,41),I=h&p^~h&b,S=d&f^~d&v,C=l.F8(E,t,S,m[A],w[A]),k=l.TH(C,_,e,I,g[A],y[A]),N=0|C,O=l.rE(r,n,28)^l.qh(r,n,34)^l.qh(r,n,39),T=l.ry(r,n,28)^l.Ei(r,n,34)^l.Ei(r,n,39),R=r&i^r&o^i&o,x=n&s^n&a^s&a;_=0|b,E=0|v,b=0|p,v=0|f,p=0|h,f=0|d,({h:h,l:d}=l.WQ(0|c,0|u,0|k,0|N)),c=0|o,u=0|a,o=0|i,a=0|s,i=0|r,s=0|n;const P=l.Vl(N,T,x);r=l.Vr(P,k,O,R),n=0|P}({h:r,l:n}=l.WQ(0|this.Ah,0|this.Al,0|r,0|n)),({h:i,l:s}=l.WQ(0|this.Bh,0|this.Bl,0|i,0|s)),({h:o,l:a}=l.WQ(0|this.Ch,0|this.Cl,0|o,0|a)),({h:c,l:u}=l.WQ(0|this.Dh,0|this.Dl,0|c,0|u)),({h:h,l:d}=l.WQ(0|this.Eh,0|this.El,0|h,0|d)),({h:p,l:f}=l.WQ(0|this.Fh,0|this.Fl,0|p,0|f)),({h:b,l:v}=l.WQ(0|this.Gh,0|this.Gl,0|b,0|v)),({h:_,l:E}=l.WQ(0|this.Hh,0|this.Hl,0|_,0|E)),this.set(r,n,i,s,o,a,c,u,h,d,p,f,b,v,_,E)}roundClean(){(0,n.uH)(y,w)}destroy(){(0,n.uH)(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const v=(0,n.qj)((()=>new p)),_=(0,n.qj)((()=>new b))},67495:function(e,t,r){"use strict";r.d(t,{o:function(){return n}});const n={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:("undefined"!==typeof process?{NODE_ENV:"production",BASE_URL:""}["NEXT_PUBLIC_SECURE_SITE_ORIGIN"]:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}}},67925:function(e,t,r){"use strict";var n=r(60452).Buffer;function i(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(255!==t[o])throw new TypeError(s+" is ambiguous");t[o]=i}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(t){if((Array.isArray(t)||t instanceof Uint8Array)&&(t=n.from(t)),!n.isBuffer(t))throw new TypeError("Expected Buffer");if(0===t.length)return"";var r=0,i=0,s=0,o=t.length;while(s!==o&&0===t[s])s++,r++;var u=(o-s)*l+1>>>0,h=new Uint8Array(u);while(s!==o){for(var d=t[s],p=0,f=u-1;(0!==d||p<i)&&-1!==f;f--,p++)d+=256*h[f]>>>0,h[f]=d%a>>>0,d=d/a>>>0;if(0!==d)throw new Error("Non-zero carry");i=p,s++}var g=u-i;while(g!==u&&0===h[g])g++;for(var m=c.repeat(r);g<u;++g)m+=e.charAt(h[g]);return m}function d(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return n.alloc(0);var r=0,i=0,s=0;while(e[r]===c)i++,r++;var o=(e.length-r)*u+1>>>0,l=new Uint8Array(o);while(r<e.length){var h=e.charCodeAt(r);if(h>255)return;var d=t[h];if(255===d)return;for(var p=0,f=o-1;(0!==d||p<s)&&-1!==f;f--,p++)d+=a*l[f]>>>0,l[f]=d%256>>>0,d=d/256>>>0;if(0!==d)throw new Error("Non-zero carry");s=p,r++}var g=o-s;while(g!==o&&0===l[g])g++;var m=n.allocUnsafe(i+(o-g));m.fill(0,0,i);var y=i;while(g!==o)m[y++]=l[g++];return m}function p(e){var t=d(e);if(t)return t;throw new Error("Non-base"+a+" character")}return{encode:h,decodeUnsafe:d,decode:p}}e.exports=i},67979:function(e,t,r){"use strict";var n=r(28551);e.exports=function(){var e=n(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},68174:function(e,t,r){"use strict";r.d(t,{h:function(){return a}});var n=r(69983),i=r(28356),s=r(64529);const o=(0,n.BX)({message:"",variant:"info",open:!1}),a={state:o,subscribeKey(e,t){return(0,i.u$)(o,e,t)},open(e,t){const{debug:r}=s.H.state,{shortMessage:n,longMessage:i}=e;r&&(o.message=n,o.variant=t,o.open=!0),i&&console.error("function"===typeof i?i():i)},close(){o.open=!1,o.message="",o.variant="info"}}},68237:function(e,t,r){"use strict";r.d(t,{z8:function(){return n},tt:function(){return l},Zv:function(){return s.Z},EM:function(){return h.E},RF:function(){return i.RF},JX:function(){return i.JX},ds:function(){return i.ds}});const n={interpolate(e,t,r){if(2!==e.length||2!==t.length)throw new Error("inputRange and outputRange must be an array of length 2");const n=e[0]||0,i=e[1]||0,s=t[0]||0,o=t[1]||0;return r<n?s:r>i?o:(o-s)/(i-n)*(r-n)+s}};var i=r(76046),s=r(42849),o=(r(18111),r(81148),r(61701),r(65588));const a=3,c=["receive","deposit","borrow","claim"],u=["withdraw","repay","burn"],l={getTransactionGroupTitle(e,t){const r=o.r.getYear(),n=o.r.getMonthNameByIndex(t),i=e===r,s=i?n:`${n} ${e}`;return s},getTransactionImages(e){const[t,r]=e,n=Boolean(t)&&e?.every((e=>Boolean(e.nft_info))),i=e?.length>1,s=2===e?.length;return s&&!n?[this.getTransactionImage(t),this.getTransactionImage(r)]:i?e.map((e=>this.getTransactionImage(e))):[this.getTransactionImage(t)]},getTransactionImage(e){return{type:l.getTransactionTransferTokenType(e),url:l.getTransactionImageURL(e)}},getTransactionImageURL(e){let t;const r=Boolean(e?.nft_info),n=Boolean(e?.fungible_info);return e&&r?t=e?.nft_info?.content?.preview?.url:e&&n&&(t=e?.fungible_info?.icon?.url),t},getTransactionTransferTokenType(e){return e?.fungible_info?"FUNGIBLE":e?.nft_info?"NFT":void 0},getTransactionDescriptions(e){const t=e?.metadata?.operationType,r=e?.transfers,n=e?.transfers?.length>0,i=e?.transfers?.length>1,o=n&&r?.every((e=>Boolean(e?.fungible_info))),[a,l]=r;let h=this.getTransferDescription(a),d=this.getTransferDescription(l);if(!n){const r="send"===t||"receive"===t;return r&&o?(h=s.Z.getTruncateString({string:e?.metadata.sentFrom,charsStart:4,charsEnd:6,truncate:"middle"}),d=s.Z.getTruncateString({string:e?.metadata.sentTo,charsStart:4,charsEnd:6,truncate:"middle"}),[h,d]):[e.metadata.status]}if(i)return r.map((e=>this.getTransferDescription(e)));let p="";return c.includes(t)?p="+":u.includes(t)&&(p="-"),h=p.concat(h),[h]},getTransferDescription(e){let t="";return e?(e?.nft_info?t=e?.nft_info?.name||"-":e?.fungible_info&&(t=this.getFungibleTransferDescription(e)||"-"),t):t},getFungibleTransferDescription(e){if(!e)return null;const t=this.getQuantityFixedValue(e?.quantity.numeric),r=[t,e?.fungible_info?.symbol].join(" ").trim();return r},getQuantityFixedValue(e){if(!e)return null;const t=parseFloat(e);return t.toFixed(a)}};var h=r(48317)},68708:function(e,t,r){"use strict";r.d(t,{ZY:function(){return s}});var n=r(52150),i=r(78694);function s(){const e=(0,n.ref)(i.a.state);return{connection:e.value.connection}}},69759:function(e,t,r){"use strict";r.d(t,{S:function(){return I}});r(44114);var n=20,i=1,s=1e6,o=1e6,a=-7,c=21,u=!1,l="[big.js] ",h=l+"Invalid ",d=h+"decimal places",p=h+"rounding mode",f=l+"Division by zero",g={},m=void 0,y=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function w(){function e(t){var r=this;if(!(r instanceof e))return t===m?w():new e(t);if(t instanceof e)r.s=t.s,r.e=t.e,r.c=t.c.slice();else{if("string"!==typeof t){if(!0===e.strict&&"bigint"!==typeof t)throw TypeError(h+"value");t=0===t&&1/t<0?"-0":String(t)}b(r,t)}r.constructor=e}return e.prototype=g,e.DP=n,e.RM=i,e.NE=a,e.PE=c,e.strict=u,e.roundDown=0,e.roundHalfUp=1,e.roundHalfEven=2,e.roundUp=3,e}function b(e,t){var r,n,i;if(!y.test(t))throw Error(h+"number");for(e.s="-"==t.charAt(0)?(t=t.slice(1),-1):1,(r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),i=t.length,n=0;n<i&&"0"==t.charAt(n);)++n;if(n==i)e.c=[e.e=0];else{for(;i>0&&"0"==t.charAt(--i););for(e.e=r-n-1,e.c=[],r=0;n<=i;)e.c[r++]=+t.charAt(n++)}return e}function v(e,t,r,n){var i=e.c;if(r===m&&(r=e.constructor.RM),0!==r&&1!==r&&2!==r&&3!==r)throw Error(p);if(t<1)n=3===r&&(n||!!i[0])||0===t&&(1===r&&i[0]>=5||2===r&&(i[0]>5||5===i[0]&&(n||i[1]!==m))),i.length=1,n?(e.e=e.e-t+1,i[0]=1):i[0]=e.e=0;else if(t<i.length){if(n=1===r&&i[t]>=5||2===r&&(i[t]>5||5===i[t]&&(n||i[t+1]!==m||1&i[t-1]))||3===r&&(n||!!i[0]),i.length=t,n)for(;++i[--t]>9;)if(i[t]=0,0===t){++e.e,i.unshift(1);break}for(t=i.length;!i[--t];)i.pop()}return e}function _(e,t,r){var n=e.e,i=e.c.join(""),s=i.length;if(t)i=i.charAt(0)+(s>1?"."+i.slice(1):"")+(n<0?"e":"e+")+n;else if(n<0){for(;++n;)i="0"+i;i="0."+i}else if(n>0)if(++n>s)for(n-=s;n--;)i+="0";else n<s&&(i=i.slice(0,n)+"."+i.slice(n));else s>1&&(i=i.charAt(0)+"."+i.slice(1));return e.s<0&&r?"-"+i:i}g.abs=function(){var e=new this.constructor(this);return e.s=1,e},g.cmp=function(e){var t,r=this,n=r.c,i=(e=new r.constructor(e)).c,s=r.s,o=e.s,a=r.e,c=e.e;if(!n[0]||!i[0])return n[0]?s:i[0]?-o:0;if(s!=o)return s;if(t=s<0,a!=c)return a>c^t?1:-1;for(o=(a=n.length)<(c=i.length)?a:c,s=-1;++s<o;)if(n[s]!=i[s])return n[s]>i[s]^t?1:-1;return a==c?0:a>c^t?1:-1},g.div=function(e){var t=this,r=t.constructor,n=t.c,i=(e=new r(e)).c,o=t.s==e.s?1:-1,a=r.DP;if(a!==~~a||a<0||a>s)throw Error(d);if(!i[0])throw Error(f);if(!n[0])return e.s=o,e.c=[e.e=0],e;var c,u,l,h,p,g=i.slice(),y=c=i.length,w=n.length,b=n.slice(0,c),_=b.length,E=e,A=E.c=[],I=0,S=a+(E.e=t.e-e.e)+1;for(E.s=o,o=S<0?0:S,g.unshift(0);_++<c;)b.push(0);do{for(l=0;l<10;l++){if(c!=(_=b.length))h=c>_?1:-1;else for(p=-1,h=0;++p<c;)if(i[p]!=b[p]){h=i[p]>b[p]?1:-1;break}if(!(h<0))break;for(u=_==c?i:g;_;){if(b[--_]<u[_]){for(p=_;p&&!b[--p];)b[p]=9;--b[p],b[_]+=10}b[_]-=u[_]}for(;!b[0];)b.shift()}A[I++]=h?l:++l,b[0]&&h?b[_]=n[y]||0:b=[n[y]]}while((y++<w||b[0]!==m)&&o--);return A[0]||1==I||(A.shift(),E.e--,S--),I>S&&v(E,S,r.RM,b[0]!==m),E},g.eq=function(e){return 0===this.cmp(e)},g.gt=function(e){return this.cmp(e)>0},g.gte=function(e){return this.cmp(e)>-1},g.lt=function(e){return this.cmp(e)<0},g.lte=function(e){return this.cmp(e)<1},g.minus=g.sub=function(e){var t,r,n,i,s=this,o=s.constructor,a=s.s,c=(e=new o(e)).s;if(a!=c)return e.s=-c,s.plus(e);var u=s.c.slice(),l=s.e,h=e.c,d=e.e;if(!u[0]||!h[0])return h[0]?e.s=-c:u[0]?e=new o(s):e.s=1,e;if(a=l-d){for((i=a<0)?(a=-a,n=u):(d=l,n=h),n.reverse(),c=a;c--;)n.push(0);n.reverse()}else for(r=((i=u.length<h.length)?u:h).length,a=c=0;c<r;c++)if(u[c]!=h[c]){i=u[c]<h[c];break}if(i&&(n=u,u=h,h=n,e.s=-e.s),(c=(r=h.length)-(t=u.length))>0)for(;c--;)u[t++]=0;for(c=t;r>a;){if(u[--r]<h[r]){for(t=r;t&&!u[--t];)u[t]=9;--u[t],u[r]+=10}u[r]-=h[r]}for(;0===u[--c];)u.pop();for(;0===u[0];)u.shift(),--d;return u[0]||(e.s=1,u=[d=0]),e.c=u,e.e=d,e},g.mod=function(e){var t,r=this,n=r.constructor,i=r.s,s=(e=new n(e)).s;if(!e.c[0])throw Error(f);return r.s=e.s=1,t=1==e.cmp(r),r.s=i,e.s=s,t?new n(r):(i=n.DP,s=n.RM,n.DP=n.RM=0,r=r.div(e),n.DP=i,n.RM=s,this.minus(r.times(e)))},g.neg=function(){var e=new this.constructor(this);return e.s=-e.s,e},g.plus=g.add=function(e){var t,r,n,i=this,s=i.constructor;if(e=new s(e),i.s!=e.s)return e.s=-e.s,i.minus(e);var o=i.e,a=i.c,c=e.e,u=e.c;if(!a[0]||!u[0])return u[0]||(a[0]?e=new s(i):e.s=i.s),e;if(a=a.slice(),t=o-c){for(t>0?(c=o,n=u):(t=-t,n=a),n.reverse();t--;)n.push(0);n.reverse()}for(a.length-u.length<0&&(n=u,u=a,a=n),t=u.length,r=0;t;a[t]%=10)r=(a[--t]=a[t]+u[t]+r)/10|0;for(r&&(a.unshift(r),++c),t=a.length;0===a[--t];)a.pop();return e.c=a,e.e=c,e},g.pow=function(e){var t=this,r=new t.constructor("1"),n=r,i=e<0;if(e!==~~e||e<-o||e>o)throw Error(h+"exponent");for(i&&(e=-e);;){if(1&e&&(n=n.times(t)),e>>=1,!e)break;t=t.times(t)}return i?r.div(n):n},g.prec=function(e,t){if(e!==~~e||e<1||e>s)throw Error(h+"precision");return v(new this.constructor(this),e,t)},g.round=function(e,t){if(e===m)e=0;else if(e!==~~e||e<-s||e>s)throw Error(d);return v(new this.constructor(this),e+this.e+1,t)},g.sqrt=function(){var e,t,r,n=this,i=n.constructor,s=n.s,o=n.e,a=new i("0.5");if(!n.c[0])return new i(n);if(s<0)throw Error(l+"No square root");s=Math.sqrt(+_(n,!0,!0)),0===s||s===1/0?(t=n.c.join(""),t.length+o&1||(t+="0"),s=Math.sqrt(t),o=((o+1)/2|0)-(o<0||1&o),e=new i((s==1/0?"5e":(s=s.toExponential()).slice(0,s.indexOf("e")+1))+o)):e=new i(s+""),o=e.e+(i.DP+=4);do{r=e,e=a.times(r.plus(n.div(r)))}while(r.c.slice(0,o).join("")!==e.c.slice(0,o).join(""));return v(e,(i.DP-=4)+e.e+1,i.RM)},g.times=g.mul=function(e){var t,r=this,n=r.constructor,i=r.c,s=(e=new n(e)).c,o=i.length,a=s.length,c=r.e,u=e.e;if(e.s=r.s==e.s?1:-1,!i[0]||!s[0])return e.c=[e.e=0],e;for(e.e=c+u,o<a&&(t=i,i=s,s=t,u=o,o=a,a=u),t=new Array(u=o+a);u--;)t[u]=0;for(c=a;c--;){for(a=0,u=o+c;u>c;)a=t[u]+s[c]*i[u-c-1]+a,t[u--]=a%10,a=a/10|0;t[u]=a}for(a?++e.e:t.shift(),c=t.length;!t[--c];)t.pop();return e.c=t,e},g.toExponential=function(e,t){var r=this,n=r.c[0];if(e!==m){if(e!==~~e||e<0||e>s)throw Error(d);for(r=v(new r.constructor(r),++e,t);r.c.length<e;)r.c.push(0)}return _(r,!0,!!n)},g.toFixed=function(e,t){var r=this,n=r.c[0];if(e!==m){if(e!==~~e||e<0||e>s)throw Error(d);for(r=v(new r.constructor(r),e+r.e+1,t),e=e+r.e+1;r.c.length<e;)r.c.push(0)}return _(r,!1,!!n)},g[Symbol.for("nodejs.util.inspect.custom")]=g.toJSON=g.toString=function(){var e=this,t=e.constructor;return _(e,e.e<=t.NE||e.e>=t.PE,!!e.c[0])},g.toNumber=function(){var e=+_(this,!0,!0);if(!0===this.constructor.strict&&!this.eq(e.toString()))throw Error(l+"Imprecise conversion");return e},g.toPrecision=function(e,t){var r=this,n=r.constructor,i=r.c[0];if(e!==m){if(e!==~~e||e<1||e>s)throw Error(h+"precision");for(r=v(new n(r),e,t);r.c.length<e;)r.c.push(0)}return _(r,e<=r.e||r.e<=n.NE||r.e>=n.PE,!!i)},g.valueOf=function(){var e=this,t=e.constructor;if(!0===t.strict)throw Error(l+"valueOf disallowed");return _(e,e.e<=t.NE||e.e>=t.PE,!0)};var E=w(),A=E;const I={bigNumber(e){return new A(e||0)},multiply(e,t){if(void 0===e||void 0===t)return new A(0);const r=new A(e),n=new A(t);return r.times(n)},formatNumberToLocalString(e,t=2){return void 0===e?"0.00":"number"===typeof e?e.toLocaleString("en-US",{maximumFractionDigits:t,minimumFractionDigits:t}):parseFloat(e).toLocaleString("en-US",{maximumFractionDigits:t,minimumFractionDigits:t})},parseLocalStringToNumber(e){return void 0===e?0:parseFloat(e.replace(/,/gu,""))}}},69983:function(e,t,r){"use strict";r.d(t,{BX:function(){return f},KR:function(){return y},P9:function(){return m},B1:function(){return g}});r(44114),r(18111),r(7588),r(17642),r(58004),r(33853),r(45876),r(32475),r(15024),r(31698),r(13579);Symbol();const n=Symbol();const i=Object.getPrototypeOf,s=new WeakMap,o=e=>e&&(s.has(e)?s.get(e):i(e)===Object.prototype||i(e)===Array.prototype),a=e=>o(e)&&e[n]||null,c=(e,t=!0)=>{s.set(e,t)},u=e=>"object"===typeof e&&null!==e,l=new WeakMap,h=new WeakSet,d=(e=Object.is,t=(e,t)=>new Proxy(e,t),r=e=>u(e)&&!h.has(e)&&(Array.isArray(e)||!(Symbol.iterator in e))&&!(e instanceof WeakMap)&&!(e instanceof WeakSet)&&!(e instanceof Error)&&!(e instanceof Number)&&!(e instanceof Date)&&!(e instanceof String)&&!(e instanceof RegExp)&&!(e instanceof ArrayBuffer),n=e=>{switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e}},i=new WeakMap,s=(e,t,r=n)=>{const o=i.get(e);if((null==o?void 0:o[0])===t)return o[1];const a=Array.isArray(e)?[]:Object.create(Object.getPrototypeOf(e));return c(a,!0),i.set(e,[t,a]),Reflect.ownKeys(e).forEach((t=>{if(Object.getOwnPropertyDescriptor(a,t))return;const n=Reflect.get(e,t),{enumerable:i}=Reflect.getOwnPropertyDescriptor(e,t),o={value:n,enumerable:i,configurable:!0};if(h.has(n))c(n,!1);else if(n instanceof Promise)delete o.value,o.get=()=>r(n);else if(l.has(n)){const[e,t]=l.get(n);o.value=s(e,t(),r)}Object.defineProperty(a,t,o)})),Object.preventExtensions(a)},o=new WeakMap,d=[1,1],p=n=>{if(!u(n))throw new Error("object required");const i=o.get(n);if(i)return i;let c=d[0];const f=new Set,g=(e,t=++d[0])=>{c!==t&&(c=t,f.forEach((r=>r(e,t))))};let m=d[1];const y=(e=++d[1])=>(m===e||f.size||(m=e,b.forEach((([t])=>{const r=t[1](e);r>c&&(c=r)}))),c),w=e=>(t,r)=>{const n=[...t];n[1]=[e,...n[1]],g(n,r)},b=new Map,v=(e,t)=>{if(b.has(e))throw new Error("prop listener already exists");if(f.size){const r=t[3](w(e));b.set(e,[t,r])}else b.set(e,[t])},_=e=>{var t;const r=b.get(e);r&&(b.delete(e),null==(t=r[1])||t.call(r))},E=e=>{f.add(e),1===f.size&&b.forEach((([e,t],r)=>{if(t)throw new Error("remove already exists");const n=e[3](w(r));b.set(r,[e,n])}));const t=()=>{f.delete(e),0===f.size&&b.forEach((([e,t],r)=>{t&&(t(),b.set(r,[e]))}))};return t},A=Array.isArray(n)?[]:Object.create(Object.getPrototypeOf(n)),I={deleteProperty(e,t){const r=Reflect.get(e,t);_(t);const n=Reflect.deleteProperty(e,t);return n&&g(["delete",[t],r]),n},set(t,n,i,s){const c=Reflect.has(t,n),d=Reflect.get(t,n,s);if(c&&(e(d,i)||o.has(i)&&e(d,o.get(i))))return!0;_(n),u(i)&&(i=a(i)||i);let f=i;if(i instanceof Promise)i.then((e=>{i.status="fulfilled",i.value=e,g(["resolve",[n],e])})).catch((e=>{i.status="rejected",i.reason=e,g(["reject",[n],e])}));else{!l.has(i)&&r(i)&&(f=p(i));const e=!h.has(f)&&l.get(f);e&&v(n,e)}return Reflect.set(t,n,f,s),g(["set",[n],i,d]),!0}},S=t(A,I);o.set(n,S);const C=[A,y,s,E];return l.set(S,C),Reflect.ownKeys(n).forEach((e=>{const t=Object.getOwnPropertyDescriptor(n,e);"value"in t&&(S[e]=n[e],delete t.value,delete t.writable),Object.defineProperty(A,e,t)})),S})=>[p,l,h,e,t,r,n,i,s,o,d],[p]=d();function f(e={}){return p(e)}function g(e,t,r){const n=l.get(e);let i;n||console.warn("Please use proxy object");const s=[],o=n[3];let a=!1;const c=e=>{s.push(e),r?t(s.splice(0)):i||(i=Promise.resolve().then((()=>{i=void 0,a&&t(s.splice(0))})))},u=o(c);return a=!0,()=>{a=!1,u()}}function m(e,t){const r=l.get(e);r||console.warn("Please use proxy object");const[n,i,s]=r;return s(n,i(),t)}function y(e){return h.add(e),e}},70173:function(e,t,r){"use strict";r.d(t,{N:function(){return i}});var n=r(60292);const i={"solana:mainnet":n.tWt,"solana:testnet":n.gTy,"solana:devnet":n.Rn0}},71493:function(e,t,r){"use strict";r.d(t,{P:function(){return s}});var n=r(26676);const i={UNIT_PRICE_MICRO_LAMPORTS:2e7,UNIT_LIMIT:500};async function s({provider:e,to:t,value:r,connection:s}){if(!e.publicKey)throw Error("No public key found");const o=new n.J3(t),a=Math.floor(r*n.Sr),{blockhash:c,lastValidBlockHeight:u}=await s.getLatestBlockhash(),l=[n.d_.setComputeUnitPrice({microLamports:i.UNIT_PRICE_MICRO_LAMPORTS}),n.d_.setComputeUnitLimit({units:i.UNIT_LIMIT}),n.yq.transfer({fromPubkey:e.publicKey,toPubkey:o,lamports:a})];return new n.ZX({feePayer:e.publicKey,blockhash:c,lastValidBlockHeight:u}).add(...l)}},71678:function(e,t,r){"use strict";var n=r(96395),i=r(46518),s=r(44576),o=r(97751),a=r(79504),c=r(79039),u=r(33392),l=r(94901),h=r(33517),d=r(64117),p=r(20034),f=r(10757),g=r(72652),m=r(28551),y=r(36955),w=r(39297),b=r(97040),v=r(66699),_=r(26198),E=r(22812),A=r(61034),I=r(72248),S=r(94402),C=r(38469),k=r(94483),N=r(24659),O=r(1548),T=s.Object,R=s.Array,x=s.Date,P=s.Error,M=s.TypeError,B=s.PerformanceMark,U=o("DOMException"),L=I.Map,D=I.has,W=I.get,j=I.set,z=S.Set,H=S.add,q=S.has,$=o("Object","keys"),F=a([].push),K=a((!0).valueOf),V=a(1..valueOf),Y=a("".valueOf),G=a(x.prototype.getTime),Z=u("structuredClone"),J="DataCloneError",X="Transferring",Q=function(e){return!c((function(){var t=new s.Set([7]),r=e(t),n=e(T(7));return r===t||!r.has(7)||!p(n)||7!==+n}))&&e},ee=function(e,t){return!c((function(){var r=new t,n=e({a:r,b:r});return!(n&&n.a===n.b&&n.a instanceof t&&n.a.stack===r.stack)}))},te=function(e){return!c((function(){var t=e(new s.AggregateError([1],Z,{cause:3}));return"AggregateError"!==t.name||1!==t.errors[0]||t.message!==Z||3!==t.cause}))},re=s.structuredClone,ne=n||!ee(re,P)||!ee(re,U)||!te(re),ie=!re&&Q((function(e){return new B(Z,{detail:e}).detail})),se=Q(re)||ie,oe=function(e){throw new U("Uncloneable type: "+e,J)},ae=function(e,t){throw new U((t||"Cloning")+" of "+e+" cannot be properly polyfilled in this engine",J)},ce=function(e,t){return se||ae(t),se(e)},ue=function(){var e;try{e=new s.DataTransfer}catch(t){try{e=new s.ClipboardEvent("").clipboardData}catch(r){}}return e&&e.items&&e.files?e:null},le=function(e,t,r){if(D(t,e))return W(t,e);var n,i,o,a,c,u,h=r||y(e);if("SharedArrayBuffer"===h)n=se?se(e):e;else{var d=s.DataView;d||l(e.slice)||ae("ArrayBuffer");try{if(l(e.slice)&&!e.resizable)n=e.slice(0);else{i=e.byteLength,o="maxByteLength"in e?{maxByteLength:e.maxByteLength}:void 0,n=new ArrayBuffer(i,o),a=new d(e),c=new d(n);for(u=0;u<i;u++)c.setUint8(u,a.getUint8(u))}}catch(p){throw new U("ArrayBuffer is detached",J)}}return j(t,e,n),n},he=function(e,t,r,n,i){var o=s[t];return p(o)||ae(t),new o(le(e.buffer,i),r,n)},de=function(e,t){if(f(e)&&oe("Symbol"),!p(e))return e;if(t){if(D(t,e))return W(t,e)}else t=new L;var r,n,i,a,c,u,h,d,g=y(e);switch(g){case"Array":i=R(_(e));break;case"Object":i={};break;case"Map":i=new L;break;case"Set":i=new z;break;case"RegExp":i=new RegExp(e.source,A(e));break;case"Error":switch(n=e.name,n){case"AggregateError":i=new(o(n))([]);break;case"EvalError":case"RangeError":case"ReferenceError":case"SuppressedError":case"SyntaxError":case"TypeError":case"URIError":i=new(o(n));break;case"CompileError":case"LinkError":case"RuntimeError":i=new(o("WebAssembly",n));break;default:i=new P}break;case"DOMException":i=new U(e.message,e.name);break;case"ArrayBuffer":case"SharedArrayBuffer":i=le(e,t,g);break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float16Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":u="DataView"===g?e.byteLength:e.length,i=he(e,g,e.byteOffset,u,t);break;case"DOMQuad":try{i=new DOMQuad(de(e.p1,t),de(e.p2,t),de(e.p3,t),de(e.p4,t))}catch(m){i=ce(e,g)}break;case"File":if(se)try{i=se(e),y(i)!==g&&(i=void 0)}catch(m){}if(!i)try{i=new File([e],e.name,e)}catch(m){}i||ae(g);break;case"FileList":if(a=ue(),a){for(c=0,u=_(e);c<u;c++)a.items.add(de(e[c],t));i=a.files}else i=ce(e,g);break;case"ImageData":try{i=new ImageData(de(e.data,t),e.width,e.height,{colorSpace:e.colorSpace})}catch(m){i=ce(e,g)}break;default:if(se)i=se(e);else switch(g){case"BigInt":i=T(e.valueOf());break;case"Boolean":i=T(K(e));break;case"Number":i=T(V(e));break;case"String":i=T(Y(e));break;case"Date":i=new x(G(e));break;case"Blob":try{i=e.slice(0,e.size,e.type)}catch(m){ae(g)}break;case"DOMPoint":case"DOMPointReadOnly":r=s[g];try{i=r.fromPoint?r.fromPoint(e):new r(e.x,e.y,e.z,e.w)}catch(m){ae(g)}break;case"DOMRect":case"DOMRectReadOnly":r=s[g];try{i=r.fromRect?r.fromRect(e):new r(e.x,e.y,e.width,e.height)}catch(m){ae(g)}break;case"DOMMatrix":case"DOMMatrixReadOnly":r=s[g];try{i=r.fromMatrix?r.fromMatrix(e):new r(e)}catch(m){ae(g)}break;case"AudioData":case"VideoFrame":l(e.clone)||ae(g);try{i=e.clone()}catch(m){oe(g)}break;case"CropTarget":case"CryptoKey":case"FileSystemDirectoryHandle":case"FileSystemFileHandle":case"FileSystemHandle":case"GPUCompilationInfo":case"GPUCompilationMessage":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":ae(g);default:oe(g)}}switch(j(t,e,i),g){case"Array":case"Object":for(h=$(e),c=0,u=_(h);c<u;c++)d=h[c],b(i,d,de(e[d],t));break;case"Map":e.forEach((function(e,r){j(i,de(r,t),de(e,t))}));break;case"Set":e.forEach((function(e){H(i,de(e,t))}));break;case"Error":v(i,"message",de(e.message,t)),w(e,"cause")&&v(i,"cause",de(e.cause,t)),"AggregateError"===n?i.errors=de(e.errors,t):"SuppressedError"===n&&(i.error=de(e.error,t),i.suppressed=de(e.suppressed,t));case"DOMException":N&&v(i,"stack",de(e.stack,t))}return i},pe=function(e,t){if(!p(e))throw new M("Transfer option cannot be converted to a sequence");var r=[];g(e,(function(e){F(r,m(e))}));var n,i,o,a,c,u,d=0,f=_(r),w=new z;while(d<f){if(n=r[d++],i=y(n),"ArrayBuffer"===i?q(w,n):D(t,n))throw new U("Duplicate transferable",J);if("ArrayBuffer"!==i){if(O)a=re(n,{transfer:[n]});else switch(i){case"ImageBitmap":o=s.OffscreenCanvas,h(o)||ae(i,X);try{c=new o(n.width,n.height),u=c.getContext("bitmaprenderer"),u.transferFromImageBitmap(n),a=c.transferToImageBitmap()}catch(b){}break;case"AudioData":case"VideoFrame":l(n.clone)&&l(n.close)||ae(i,X);try{a=n.clone(),n.close()}catch(b){}break;case"MediaSourceHandle":case"MessagePort":case"MIDIAccess":case"OffscreenCanvas":case"ReadableStream":case"RTCDataChannel":case"TransformStream":case"WebTransportReceiveStream":case"WebTransportSendStream":case"WritableStream":ae(i,X)}if(void 0===a)throw new U("This object cannot be transferred: "+i,J);j(t,n,a)}else H(w,n)}return w},fe=function(e){C(e,(function(e){O?se(e,{transfer:[e]}):l(e.transfer)?e.transfer():k?k(e):ae("ArrayBuffer",X)}))};i({global:!0,enumerable:!0,sham:!O,forced:ne},{structuredClone:function(e){var t,r,n=E(arguments.length,1)>1&&!d(arguments[1])?m(arguments[1]):void 0,i=n?n.transfer:void 0;void 0!==i&&(t=new L,r=pe(i,t));var s=de(e,t);return r&&fe(r),s}})},72049:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(33590);n.__exportStar(r(57674),t)},72248:function(e,t,r){"use strict";var n=r(79504),i=Map.prototype;e.exports={Map:Map,set:n(i.set),get:n(i.get),has:n(i.has),remove:n(i["delete"]),proto:i}},72487:function(e,t,r){e=r.nmd(e),r(18111),r(61806),function(e,t){"use strict";function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function s(e,t,r){if(s.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var o;"object"===typeof e?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;try{o="undefined"!==typeof window&&"undefined"!==typeof window.Buffer?window.Buffer:r(47790).Buffer}catch(T){}function a(e,t){var r=e.charCodeAt(t);return r>=48&&r<=57?r-48:r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:void n(!1,"Invalid character in "+e)}function c(e,t,r){var n=a(e,r);return r-1>=t&&(n|=a(e,r-1)<<4),n}function u(e,t,r,i){for(var s=0,o=0,a=Math.min(e.length,r),c=t;c<a;c++){var u=e.charCodeAt(c)-48;s*=i,o=u>=49?u-49+10:u>=17?u-17+10:u,n(u>=0&&o<i,"Invalid character"),s+=o}return s}function l(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}if(s.isBN=function(e){return e instanceof s||null!==e&&"object"===typeof e&&e.constructor.wordSize===s.wordSize&&Array.isArray(e.words)},s.max=function(e,t){return e.cmp(t)>0?e:t},s.min=function(e,t){return e.cmp(t)<0?e:t},s.prototype._init=function(e,t,r){if("number"===typeof e)return this._initNumber(e,t,r);if("object"===typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),n(t===(0|t)&&t>=2&&t<=36),e=e.toString().replace(/\s+/g,"");var i=0;"-"===e[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,r):(this._parseBase(e,t,i),"le"===r&&this._initArray(this.toArray(),t,r)))},s.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(n(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},s.prototype._initArray=function(e,t,r){if(n("number"===typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var s,o,a=0;if("be"===r)for(i=e.length-1,s=0;i>=0;i-=3)o=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,a+=24,a>=26&&(a-=26,s++);else if("le"===r)for(i=0,s=0;i<e.length;i+=3)o=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,a+=24,a>=26&&(a-=26,s++);return this._strip()},s.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,s=0,o=0;if("be"===r)for(n=e.length-1;n>=t;n-=2)i=c(e,t,n)<<s,this.words[o]|=67108863&i,s>=18?(s-=18,o+=1,this.words[o]|=i>>>26):s+=8;else{var a=e.length-t;for(n=a%2===0?t+1:t;n<e.length;n+=2)i=c(e,t,n)<<s,this.words[o]|=67108863&i,s>=18?(s-=18,o+=1,this.words[o]|=i>>>26):s+=8}this._strip()},s.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=t)n++;n--,i=i/t|0;for(var s=e.length-r,o=s%n,a=Math.min(s,s-o)+r,c=0,l=r;l<a;l+=n)c=u(e,l,l+n,t),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==o){var h=1;for(c=u(e,l,e.length,t),l=0;l<o;l++)h*=t;this.imuln(h),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},s.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},s.prototype._move=function(e){l(e,this)},s.prototype.clone=function(){var e=new s(null);return this.copy(e),e},s.prototype._expand=function(e){while(this.length<e)this.words[this.length++]=0;return this},s.prototype._strip=function(){while(this.length>1&&0===this.words[this.length-1])this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!==typeof Symbol&&"function"===typeof Symbol.for)try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch(T){s.prototype.inspect=h}else s.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(e,t){var r;if(e=e||10,t=0|t||1,16===e||"hex"===e){r="";for(var i=0,s=0,o=0;o<this.length;o++){var a=this.words[o],c=(16777215&(a<<i|s)).toString(16);s=a>>>24-i&16777215,i+=2,i>=26&&(i-=26,o--),r=0!==s||o!==this.length-1?d[6-c.length]+c+r:c+r}0!==s&&(r=s.toString(16)+r);while(r.length%t!==0)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var u=p[e],l=f[e];r="";var h=this.clone();h.negative=0;while(!h.isZero()){var g=h.modrn(l).toString(e);h=h.idivn(l),r=h.isZero()?g+r:d[u-g.length]+g+r}this.isZero()&&(r="0"+r);while(r.length%t!==0)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(e,t){return this.toArrayLike(o,e,t)}),s.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)};var g=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)};function m(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,i=r%26;t[r]=e.words[n]>>>i&1}return t}function y(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var i=0|e.words[0],s=0|t.words[0],o=i*s,a=67108863&o,c=o/67108864|0;r.words[0]=a;for(var u=1;u<n;u++){for(var l=c>>>26,h=67108863&c,d=Math.min(u,t.length-1),p=Math.max(0,u-e.length+1);p<=d;p++){var f=u-p|0;i=0|e.words[f],s=0|t.words[p],o=i*s+h,l+=o/67108864|0,h=67108863&o}r.words[u]=0|h,c=0|l}return 0!==c?r.words[u]=0|c:r.length--,r._strip()}s.prototype.toArrayLike=function(e,t,r){this._strip();var i=this.byteLength(),s=r||Math.max(1,i);n(i<=s,"byte array longer than desired length"),n(s>0,"Requested array length <= 0");var o=g(e,s),a="le"===t?"LE":"BE";return this["_toArrayLike"+a](o,i),o},s.prototype._toArrayLikeLE=function(e,t){for(var r=0,n=0,i=0,s=0;i<this.length;i++){var o=this.words[i]<<s|n;e[r++]=255&o,r<e.length&&(e[r++]=o>>8&255),r<e.length&&(e[r++]=o>>16&255),6===s?(r<e.length&&(e[r++]=o>>24&255),n=0,s=0):(n=o>>>24,s+=2)}if(r<e.length){e[r++]=n;while(r<e.length)e[r++]=0}},s.prototype._toArrayLikeBE=function(e,t){for(var r=e.length-1,n=0,i=0,s=0;i<this.length;i++){var o=this.words[i]<<s|n;e[r--]=255&o,r>=0&&(e[r--]=o>>8&255),r>=0&&(e[r--]=o>>16&255),6===s?(r>=0&&(e[r--]=o>>24&255),n=0,s=0):(n=o>>>24,s+=2)}if(r>=0){e[r--]=n;while(r>=0)e[r--]=0}},Math.clz32?s.prototype._countBits=function(e){return 32-Math.clz32(e)}:s.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},s.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 0===(8191&t)&&(r+=13,t>>>=13),0===(127&t)&&(r+=7,t>>>=7),0===(15&t)&&(r+=4,t>>>=4),0===(3&t)&&(r+=2,t>>>=2),0===(1&t)&&r++,r},s.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},s.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(e){while(this.length<e.length)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},s.prototype.ior=function(e){return n(0===(this.negative|e.negative)),this.iuor(e)},s.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},s.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},s.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this._strip()},s.prototype.iand=function(e){return n(0===(this.negative|e.negative)),this.iuand(e)},s.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},s.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},s.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this._strip()},s.prototype.ixor=function(e){return n(0===(this.negative|e.negative)),this.iuxor(e)},s.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},s.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},s.prototype.inotn=function(e){n("number"===typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this._strip()},s.prototype.notn=function(e){return this.clone().inotn(e)},s.prototype.setn=function(e,t){n("number"===typeof e&&e>=0);var r=e/26|0,i=e%26;return this._expand(r+1),this.words[r]=t?this.words[r]|1<<i:this.words[r]&~(1<<i),this._strip()},s.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var i=0,s=0;s<n.length;s++)t=(0|r.words[s])+(0|n.words[s])+i,this.words[s]=67108863&t,i=t>>>26;for(;0!==i&&s<r.length;s++)t=(0|r.words[s])+i,this.words[s]=67108863&t,i=t>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this},s.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},s.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=e):(r=e,n=this);for(var s=0,o=0;o<n.length;o++)t=(0|r.words[o])-(0|n.words[o])+s,s=t>>26,this.words[o]=67108863&t;for(;0!==s&&o<r.length;o++)t=(0|r.words[o])+s,s=t>>26,this.words[o]=67108863&t;if(0===s&&o<r.length&&r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=Math.max(this.length,o),r!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(e){return this.clone().isub(e)};var w=function(e,t,r){var n,i,s,o=e.words,a=t.words,c=r.words,u=0,l=0|o[0],h=8191&l,d=l>>>13,p=0|o[1],f=8191&p,g=p>>>13,m=0|o[2],y=8191&m,w=m>>>13,b=0|o[3],v=8191&b,_=b>>>13,E=0|o[4],A=8191&E,I=E>>>13,S=0|o[5],C=8191&S,k=S>>>13,N=0|o[6],O=8191&N,T=N>>>13,R=0|o[7],x=8191&R,P=R>>>13,M=0|o[8],B=8191&M,U=M>>>13,L=0|o[9],D=8191&L,W=L>>>13,j=0|a[0],z=8191&j,H=j>>>13,q=0|a[1],$=8191&q,F=q>>>13,K=0|a[2],V=8191&K,Y=K>>>13,G=0|a[3],Z=8191&G,J=G>>>13,X=0|a[4],Q=8191&X,ee=X>>>13,te=0|a[5],re=8191&te,ne=te>>>13,ie=0|a[6],se=8191&ie,oe=ie>>>13,ae=0|a[7],ce=8191&ae,ue=ae>>>13,le=0|a[8],he=8191&le,de=le>>>13,pe=0|a[9],fe=8191&pe,ge=pe>>>13;r.negative=e.negative^t.negative,r.length=19,n=Math.imul(h,z),i=Math.imul(h,H),i=i+Math.imul(d,z)|0,s=Math.imul(d,H);var me=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(me>>>26)|0,me&=67108863,n=Math.imul(f,z),i=Math.imul(f,H),i=i+Math.imul(g,z)|0,s=Math.imul(g,H),n=n+Math.imul(h,$)|0,i=i+Math.imul(h,F)|0,i=i+Math.imul(d,$)|0,s=s+Math.imul(d,F)|0;var ye=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(y,z),i=Math.imul(y,H),i=i+Math.imul(w,z)|0,s=Math.imul(w,H),n=n+Math.imul(f,$)|0,i=i+Math.imul(f,F)|0,i=i+Math.imul(g,$)|0,s=s+Math.imul(g,F)|0,n=n+Math.imul(h,V)|0,i=i+Math.imul(h,Y)|0,i=i+Math.imul(d,V)|0,s=s+Math.imul(d,Y)|0;var we=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(v,z),i=Math.imul(v,H),i=i+Math.imul(_,z)|0,s=Math.imul(_,H),n=n+Math.imul(y,$)|0,i=i+Math.imul(y,F)|0,i=i+Math.imul(w,$)|0,s=s+Math.imul(w,F)|0,n=n+Math.imul(f,V)|0,i=i+Math.imul(f,Y)|0,i=i+Math.imul(g,V)|0,s=s+Math.imul(g,Y)|0,n=n+Math.imul(h,Z)|0,i=i+Math.imul(h,J)|0,i=i+Math.imul(d,Z)|0,s=s+Math.imul(d,J)|0;var be=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(A,z),i=Math.imul(A,H),i=i+Math.imul(I,z)|0,s=Math.imul(I,H),n=n+Math.imul(v,$)|0,i=i+Math.imul(v,F)|0,i=i+Math.imul(_,$)|0,s=s+Math.imul(_,F)|0,n=n+Math.imul(y,V)|0,i=i+Math.imul(y,Y)|0,i=i+Math.imul(w,V)|0,s=s+Math.imul(w,Y)|0,n=n+Math.imul(f,Z)|0,i=i+Math.imul(f,J)|0,i=i+Math.imul(g,Z)|0,s=s+Math.imul(g,J)|0,n=n+Math.imul(h,Q)|0,i=i+Math.imul(h,ee)|0,i=i+Math.imul(d,Q)|0,s=s+Math.imul(d,ee)|0;var ve=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(C,z),i=Math.imul(C,H),i=i+Math.imul(k,z)|0,s=Math.imul(k,H),n=n+Math.imul(A,$)|0,i=i+Math.imul(A,F)|0,i=i+Math.imul(I,$)|0,s=s+Math.imul(I,F)|0,n=n+Math.imul(v,V)|0,i=i+Math.imul(v,Y)|0,i=i+Math.imul(_,V)|0,s=s+Math.imul(_,Y)|0,n=n+Math.imul(y,Z)|0,i=i+Math.imul(y,J)|0,i=i+Math.imul(w,Z)|0,s=s+Math.imul(w,J)|0,n=n+Math.imul(f,Q)|0,i=i+Math.imul(f,ee)|0,i=i+Math.imul(g,Q)|0,s=s+Math.imul(g,ee)|0,n=n+Math.imul(h,re)|0,i=i+Math.imul(h,ne)|0,i=i+Math.imul(d,re)|0,s=s+Math.imul(d,ne)|0;var _e=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(O,z),i=Math.imul(O,H),i=i+Math.imul(T,z)|0,s=Math.imul(T,H),n=n+Math.imul(C,$)|0,i=i+Math.imul(C,F)|0,i=i+Math.imul(k,$)|0,s=s+Math.imul(k,F)|0,n=n+Math.imul(A,V)|0,i=i+Math.imul(A,Y)|0,i=i+Math.imul(I,V)|0,s=s+Math.imul(I,Y)|0,n=n+Math.imul(v,Z)|0,i=i+Math.imul(v,J)|0,i=i+Math.imul(_,Z)|0,s=s+Math.imul(_,J)|0,n=n+Math.imul(y,Q)|0,i=i+Math.imul(y,ee)|0,i=i+Math.imul(w,Q)|0,s=s+Math.imul(w,ee)|0,n=n+Math.imul(f,re)|0,i=i+Math.imul(f,ne)|0,i=i+Math.imul(g,re)|0,s=s+Math.imul(g,ne)|0,n=n+Math.imul(h,se)|0,i=i+Math.imul(h,oe)|0,i=i+Math.imul(d,se)|0,s=s+Math.imul(d,oe)|0;var Ee=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(x,z),i=Math.imul(x,H),i=i+Math.imul(P,z)|0,s=Math.imul(P,H),n=n+Math.imul(O,$)|0,i=i+Math.imul(O,F)|0,i=i+Math.imul(T,$)|0,s=s+Math.imul(T,F)|0,n=n+Math.imul(C,V)|0,i=i+Math.imul(C,Y)|0,i=i+Math.imul(k,V)|0,s=s+Math.imul(k,Y)|0,n=n+Math.imul(A,Z)|0,i=i+Math.imul(A,J)|0,i=i+Math.imul(I,Z)|0,s=s+Math.imul(I,J)|0,n=n+Math.imul(v,Q)|0,i=i+Math.imul(v,ee)|0,i=i+Math.imul(_,Q)|0,s=s+Math.imul(_,ee)|0,n=n+Math.imul(y,re)|0,i=i+Math.imul(y,ne)|0,i=i+Math.imul(w,re)|0,s=s+Math.imul(w,ne)|0,n=n+Math.imul(f,se)|0,i=i+Math.imul(f,oe)|0,i=i+Math.imul(g,se)|0,s=s+Math.imul(g,oe)|0,n=n+Math.imul(h,ce)|0,i=i+Math.imul(h,ue)|0,i=i+Math.imul(d,ce)|0,s=s+Math.imul(d,ue)|0;var Ae=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,n=Math.imul(B,z),i=Math.imul(B,H),i=i+Math.imul(U,z)|0,s=Math.imul(U,H),n=n+Math.imul(x,$)|0,i=i+Math.imul(x,F)|0,i=i+Math.imul(P,$)|0,s=s+Math.imul(P,F)|0,n=n+Math.imul(O,V)|0,i=i+Math.imul(O,Y)|0,i=i+Math.imul(T,V)|0,s=s+Math.imul(T,Y)|0,n=n+Math.imul(C,Z)|0,i=i+Math.imul(C,J)|0,i=i+Math.imul(k,Z)|0,s=s+Math.imul(k,J)|0,n=n+Math.imul(A,Q)|0,i=i+Math.imul(A,ee)|0,i=i+Math.imul(I,Q)|0,s=s+Math.imul(I,ee)|0,n=n+Math.imul(v,re)|0,i=i+Math.imul(v,ne)|0,i=i+Math.imul(_,re)|0,s=s+Math.imul(_,ne)|0,n=n+Math.imul(y,se)|0,i=i+Math.imul(y,oe)|0,i=i+Math.imul(w,se)|0,s=s+Math.imul(w,oe)|0,n=n+Math.imul(f,ce)|0,i=i+Math.imul(f,ue)|0,i=i+Math.imul(g,ce)|0,s=s+Math.imul(g,ue)|0,n=n+Math.imul(h,he)|0,i=i+Math.imul(h,de)|0,i=i+Math.imul(d,he)|0,s=s+Math.imul(d,de)|0;var Ie=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul(D,z),i=Math.imul(D,H),i=i+Math.imul(W,z)|0,s=Math.imul(W,H),n=n+Math.imul(B,$)|0,i=i+Math.imul(B,F)|0,i=i+Math.imul(U,$)|0,s=s+Math.imul(U,F)|0,n=n+Math.imul(x,V)|0,i=i+Math.imul(x,Y)|0,i=i+Math.imul(P,V)|0,s=s+Math.imul(P,Y)|0,n=n+Math.imul(O,Z)|0,i=i+Math.imul(O,J)|0,i=i+Math.imul(T,Z)|0,s=s+Math.imul(T,J)|0,n=n+Math.imul(C,Q)|0,i=i+Math.imul(C,ee)|0,i=i+Math.imul(k,Q)|0,s=s+Math.imul(k,ee)|0,n=n+Math.imul(A,re)|0,i=i+Math.imul(A,ne)|0,i=i+Math.imul(I,re)|0,s=s+Math.imul(I,ne)|0,n=n+Math.imul(v,se)|0,i=i+Math.imul(v,oe)|0,i=i+Math.imul(_,se)|0,s=s+Math.imul(_,oe)|0,n=n+Math.imul(y,ce)|0,i=i+Math.imul(y,ue)|0,i=i+Math.imul(w,ce)|0,s=s+Math.imul(w,ue)|0,n=n+Math.imul(f,he)|0,i=i+Math.imul(f,de)|0,i=i+Math.imul(g,he)|0,s=s+Math.imul(g,de)|0,n=n+Math.imul(h,fe)|0,i=i+Math.imul(h,ge)|0,i=i+Math.imul(d,fe)|0,s=s+Math.imul(d,ge)|0;var Se=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(D,$),i=Math.imul(D,F),i=i+Math.imul(W,$)|0,s=Math.imul(W,F),n=n+Math.imul(B,V)|0,i=i+Math.imul(B,Y)|0,i=i+Math.imul(U,V)|0,s=s+Math.imul(U,Y)|0,n=n+Math.imul(x,Z)|0,i=i+Math.imul(x,J)|0,i=i+Math.imul(P,Z)|0,s=s+Math.imul(P,J)|0,n=n+Math.imul(O,Q)|0,i=i+Math.imul(O,ee)|0,i=i+Math.imul(T,Q)|0,s=s+Math.imul(T,ee)|0,n=n+Math.imul(C,re)|0,i=i+Math.imul(C,ne)|0,i=i+Math.imul(k,re)|0,s=s+Math.imul(k,ne)|0,n=n+Math.imul(A,se)|0,i=i+Math.imul(A,oe)|0,i=i+Math.imul(I,se)|0,s=s+Math.imul(I,oe)|0,n=n+Math.imul(v,ce)|0,i=i+Math.imul(v,ue)|0,i=i+Math.imul(_,ce)|0,s=s+Math.imul(_,ue)|0,n=n+Math.imul(y,he)|0,i=i+Math.imul(y,de)|0,i=i+Math.imul(w,he)|0,s=s+Math.imul(w,de)|0,n=n+Math.imul(f,fe)|0,i=i+Math.imul(f,ge)|0,i=i+Math.imul(g,fe)|0,s=s+Math.imul(g,ge)|0;var Ce=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,n=Math.imul(D,V),i=Math.imul(D,Y),i=i+Math.imul(W,V)|0,s=Math.imul(W,Y),n=n+Math.imul(B,Z)|0,i=i+Math.imul(B,J)|0,i=i+Math.imul(U,Z)|0,s=s+Math.imul(U,J)|0,n=n+Math.imul(x,Q)|0,i=i+Math.imul(x,ee)|0,i=i+Math.imul(P,Q)|0,s=s+Math.imul(P,ee)|0,n=n+Math.imul(O,re)|0,i=i+Math.imul(O,ne)|0,i=i+Math.imul(T,re)|0,s=s+Math.imul(T,ne)|0,n=n+Math.imul(C,se)|0,i=i+Math.imul(C,oe)|0,i=i+Math.imul(k,se)|0,s=s+Math.imul(k,oe)|0,n=n+Math.imul(A,ce)|0,i=i+Math.imul(A,ue)|0,i=i+Math.imul(I,ce)|0,s=s+Math.imul(I,ue)|0,n=n+Math.imul(v,he)|0,i=i+Math.imul(v,de)|0,i=i+Math.imul(_,he)|0,s=s+Math.imul(_,de)|0,n=n+Math.imul(y,fe)|0,i=i+Math.imul(y,ge)|0,i=i+Math.imul(w,fe)|0,s=s+Math.imul(w,ge)|0;var ke=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(D,Z),i=Math.imul(D,J),i=i+Math.imul(W,Z)|0,s=Math.imul(W,J),n=n+Math.imul(B,Q)|0,i=i+Math.imul(B,ee)|0,i=i+Math.imul(U,Q)|0,s=s+Math.imul(U,ee)|0,n=n+Math.imul(x,re)|0,i=i+Math.imul(x,ne)|0,i=i+Math.imul(P,re)|0,s=s+Math.imul(P,ne)|0,n=n+Math.imul(O,se)|0,i=i+Math.imul(O,oe)|0,i=i+Math.imul(T,se)|0,s=s+Math.imul(T,oe)|0,n=n+Math.imul(C,ce)|0,i=i+Math.imul(C,ue)|0,i=i+Math.imul(k,ce)|0,s=s+Math.imul(k,ue)|0,n=n+Math.imul(A,he)|0,i=i+Math.imul(A,de)|0,i=i+Math.imul(I,he)|0,s=s+Math.imul(I,de)|0,n=n+Math.imul(v,fe)|0,i=i+Math.imul(v,ge)|0,i=i+Math.imul(_,fe)|0,s=s+Math.imul(_,ge)|0;var Ne=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,n=Math.imul(D,Q),i=Math.imul(D,ee),i=i+Math.imul(W,Q)|0,s=Math.imul(W,ee),n=n+Math.imul(B,re)|0,i=i+Math.imul(B,ne)|0,i=i+Math.imul(U,re)|0,s=s+Math.imul(U,ne)|0,n=n+Math.imul(x,se)|0,i=i+Math.imul(x,oe)|0,i=i+Math.imul(P,se)|0,s=s+Math.imul(P,oe)|0,n=n+Math.imul(O,ce)|0,i=i+Math.imul(O,ue)|0,i=i+Math.imul(T,ce)|0,s=s+Math.imul(T,ue)|0,n=n+Math.imul(C,he)|0,i=i+Math.imul(C,de)|0,i=i+Math.imul(k,he)|0,s=s+Math.imul(k,de)|0,n=n+Math.imul(A,fe)|0,i=i+Math.imul(A,ge)|0,i=i+Math.imul(I,fe)|0,s=s+Math.imul(I,ge)|0;var Oe=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,n=Math.imul(D,re),i=Math.imul(D,ne),i=i+Math.imul(W,re)|0,s=Math.imul(W,ne),n=n+Math.imul(B,se)|0,i=i+Math.imul(B,oe)|0,i=i+Math.imul(U,se)|0,s=s+Math.imul(U,oe)|0,n=n+Math.imul(x,ce)|0,i=i+Math.imul(x,ue)|0,i=i+Math.imul(P,ce)|0,s=s+Math.imul(P,ue)|0,n=n+Math.imul(O,he)|0,i=i+Math.imul(O,de)|0,i=i+Math.imul(T,he)|0,s=s+Math.imul(T,de)|0,n=n+Math.imul(C,fe)|0,i=i+Math.imul(C,ge)|0,i=i+Math.imul(k,fe)|0,s=s+Math.imul(k,ge)|0;var Te=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul(D,se),i=Math.imul(D,oe),i=i+Math.imul(W,se)|0,s=Math.imul(W,oe),n=n+Math.imul(B,ce)|0,i=i+Math.imul(B,ue)|0,i=i+Math.imul(U,ce)|0,s=s+Math.imul(U,ue)|0,n=n+Math.imul(x,he)|0,i=i+Math.imul(x,de)|0,i=i+Math.imul(P,he)|0,s=s+Math.imul(P,de)|0,n=n+Math.imul(O,fe)|0,i=i+Math.imul(O,ge)|0,i=i+Math.imul(T,fe)|0,s=s+Math.imul(T,ge)|0;var Re=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863,n=Math.imul(D,ce),i=Math.imul(D,ue),i=i+Math.imul(W,ce)|0,s=Math.imul(W,ue),n=n+Math.imul(B,he)|0,i=i+Math.imul(B,de)|0,i=i+Math.imul(U,he)|0,s=s+Math.imul(U,de)|0,n=n+Math.imul(x,fe)|0,i=i+Math.imul(x,ge)|0,i=i+Math.imul(P,fe)|0,s=s+Math.imul(P,ge)|0;var xe=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,n=Math.imul(D,he),i=Math.imul(D,de),i=i+Math.imul(W,he)|0,s=Math.imul(W,de),n=n+Math.imul(B,fe)|0,i=i+Math.imul(B,ge)|0,i=i+Math.imul(U,fe)|0,s=s+Math.imul(U,ge)|0;var Pe=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,n=Math.imul(D,fe),i=Math.imul(D,ge),i=i+Math.imul(W,fe)|0,s=Math.imul(W,ge);var Me=(u+n|0)+((8191&i)<<13)|0;return u=(s+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,c[0]=me,c[1]=ye,c[2]=we,c[3]=be,c[4]=ve,c[5]=_e,c[6]=Ee,c[7]=Ae,c[8]=Ie,c[9]=Se,c[10]=Ce,c[11]=ke,c[12]=Ne,c[13]=Oe,c[14]=Te,c[15]=Re,c[16]=xe,c[17]=Pe,c[18]=Me,0!==u&&(c[19]=u,r.length++),r};function b(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,i=0,s=0;s<r.length-1;s++){var o=i;i=0;for(var a=67108863&n,c=Math.min(s,t.length-1),u=Math.max(0,s-e.length+1);u<=c;u++){var l=s-u,h=0|e.words[l],d=0|t.words[u],p=h*d,f=67108863&p;o=o+(p/67108864|0)|0,f=f+a|0,a=67108863&f,o=o+(f>>>26)|0,i+=o>>>26,o&=67108863}r.words[s]=a,n=o,o=i}return 0!==n?r.words[s]=n:r.length--,r._strip()}function v(e,t,r){return b(e,t,r)}function _(e,t){this.x=e,this.y=t}Math.imul||(w=y),s.prototype.mulTo=function(e,t){var r,n=this.length+e.length;return r=10===this.length&&10===e.length?w(this,e,t):n<63?y(this,e,t):n<1024?b(this,e,t):v(this,e,t),r},_.prototype.makeRBT=function(e){for(var t=new Array(e),r=s.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,r,e);return t},_.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var n=0,i=0;i<t;i++)n|=(1&e)<<t-i-1,e>>=1;return n},_.prototype.permute=function(e,t,r,n,i,s){for(var o=0;o<s;o++)n[o]=t[e[o]],i[o]=r[e[o]]},_.prototype.transform=function(e,t,r,n,i,s){this.permute(s,e,t,r,n,i);for(var o=1;o<i;o<<=1)for(var a=o<<1,c=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),l=0;l<i;l+=a)for(var h=c,d=u,p=0;p<o;p++){var f=r[l+p],g=n[l+p],m=r[l+p+o],y=n[l+p+o],w=h*m-d*y;y=h*y+d*m,m=w,r[l+p]=f+m,n[l+p]=g+y,r[l+p+o]=f-m,n[l+p+o]=g-y,p!==a&&(w=c*h-u*d,d=c*d+u*h,h=w)}},_.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},_.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=e[n];e[n]=e[r-n-1],e[r-n-1]=i,i=t[n],t[n]=-t[r-n-1],t[r-n-1]=-i}},_.prototype.normalize13b=function(e,t){for(var r=0,n=0;n<t/2;n++){var i=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+r;e[n]=67108863&i,r=i<67108864?0:i/67108864|0}return e},_.prototype.convert13b=function(e,t,r,i){for(var s=0,o=0;o<t;o++)s+=0|e[o],r[2*o]=8191&s,s>>>=13,r[2*o+1]=8191&s,s>>>=13;for(o=2*t;o<i;++o)r[o]=0;n(0===s),n(0===(-8192&s))},_.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},_.prototype.mulp=function(e,t,r){var n=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(n),s=this.stub(n),o=new Array(n),a=new Array(n),c=new Array(n),u=new Array(n),l=new Array(n),h=new Array(n),d=r.words;d.length=n,this.convert13b(e.words,e.length,o,n),this.convert13b(t.words,t.length,u,n),this.transform(o,s,a,c,n,i),this.transform(u,s,l,h,n,i);for(var p=0;p<n;p++){var f=a[p]*l[p]-c[p]*h[p];c[p]=a[p]*h[p]+c[p]*l[p],a[p]=f}return this.conjugate(a,c,n),this.transform(a,c,d,s,n,i),this.conjugate(d,s,n),this.normalize13b(d,n),r.negative=e.negative^t.negative,r.length=e.length+t.length,r._strip()},s.prototype.mul=function(e){var t=new s(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},s.prototype.mulf=function(e){var t=new s(null);return t.words=new Array(this.length+e.length),v(this,e,t)},s.prototype.imul=function(e){return this.clone().mulTo(e,this)},s.prototype.imuln=function(e){var t=e<0;t&&(e=-e),n("number"===typeof e),n(e<67108864);for(var r=0,i=0;i<this.length;i++){var s=(0|this.words[i])*e,o=(67108863&s)+(67108863&r);r>>=26,r+=s/67108864|0,r+=o>>>26,this.words[i]=67108863&o}return 0!==r&&(this.words[i]=r,this.length++),this.length=0===e?1:this.length,t?this.ineg():this},s.prototype.muln=function(e){return this.clone().imuln(e)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(e){var t=m(e);if(0===t.length)return new s(1);for(var r=this,n=0;n<t.length;n++,r=r.sqr())if(0!==t[n])break;if(++n<t.length)for(var i=r.sqr();n<t.length;n++,i=i.sqr())0!==t[n]&&(r=r.mul(i));return r},s.prototype.iushln=function(e){n("number"===typeof e&&e>=0);var t,r=e%26,i=(e-r)/26,s=67108863>>>26-r<<26-r;if(0!==r){var o=0;for(t=0;t<this.length;t++){var a=this.words[t]&s,c=(0|this.words[t])-a<<r;this.words[t]=c|o,o=a>>>26-r}o&&(this.words[t]=o,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this._strip()},s.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},s.prototype.iushrn=function(e,t,r){var i;n("number"===typeof e&&e>=0),i=t?(t-t%26)/26:0;var s=e%26,o=Math.min((e-s)/26,this.length),a=67108863^67108863>>>s<<s,c=r;if(i-=o,i=Math.max(0,i),c){for(var u=0;u<o;u++)c.words[u]=this.words[u];c.length=o}if(0===o);else if(this.length>o)for(this.length-=o,u=0;u<this.length;u++)this.words[u]=this.words[u+o];else this.words[0]=0,this.length=1;var l=0;for(u=this.length-1;u>=0&&(0!==l||u>=i);u--){var h=0|this.words[u];this.words[u]=l<<26-s|h>>>s,l=h&a}return c&&0!==l&&(c.words[c.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(e,t,r){return n(0===this.negative),this.iushrn(e,t,r)},s.prototype.shln=function(e){return this.clone().ishln(e)},s.prototype.ushln=function(e){return this.clone().iushln(e)},s.prototype.shrn=function(e){return this.clone().ishrn(e)},s.prototype.ushrn=function(e){return this.clone().iushrn(e)},s.prototype.testn=function(e){n("number"===typeof e&&e>=0);var t=e%26,r=(e-t)/26,i=1<<t;if(this.length<=r)return!1;var s=this.words[r];return!!(s&i)},s.prototype.imaskn=function(e){n("number"===typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this._strip()},s.prototype.maskn=function(e){return this.clone().imaskn(e)},s.prototype.iaddn=function(e){return n("number"===typeof e),n(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},s.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},s.prototype.isubn=function(e){if(n("number"===typeof e),n(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},s.prototype.addn=function(e){return this.clone().iaddn(e)},s.prototype.subn=function(e){return this.clone().isubn(e)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(e,t,r){var i,s,o=e.length+r;this._expand(o);var a=0;for(i=0;i<e.length;i++){s=(0|this.words[i+r])+a;var c=(0|e.words[i])*t;s-=67108863&c,a=(s>>26)-(c/67108864|0),this.words[i+r]=67108863&s}for(;i<this.length-r;i++)s=(0|this.words[i+r])+a,a=s>>26,this.words[i+r]=67108863&s;if(0===a)return this._strip();for(n(-1===a),a=0,i=0;i<this.length;i++)s=-(0|this.words[i])+a,a=s>>26,this.words[i]=67108863&s;return this.negative=1,this._strip()},s.prototype._wordDiv=function(e,t){var r=this.length-e.length,n=this.clone(),i=e,o=0|i.words[i.length-1],a=this._countBits(o);r=26-a,0!==r&&(i=i.ushln(r),n.iushln(r),o=0|i.words[i.length-1]);var c,u=n.length-i.length;if("mod"!==t){c=new s(null),c.length=u+1,c.words=new Array(c.length);for(var l=0;l<c.length;l++)c.words[l]=0}var h=n.clone()._ishlnsubmul(i,1,u);0===h.negative&&(n=h,c&&(c.words[u]=1));for(var d=u-1;d>=0;d--){var p=67108864*(0|n.words[i.length+d])+(0|n.words[i.length+d-1]);p=Math.min(p/o|0,67108863),n._ishlnsubmul(i,p,d);while(0!==n.negative)p--,n.negative=0,n._ishlnsubmul(i,1,d),n.isZero()||(n.negative^=1);c&&(c.words[d]=p)}return c&&c._strip(),n._strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:c||null,mod:n}},s.prototype.divmod=function(e,t,r){return n(!e.isZero()),this.isZero()?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(i=a.div.neg()),"div"!==t&&(o=a.mod.neg(),r&&0!==o.negative&&o.iadd(e)),{div:i,mod:o}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(i=a.div.neg()),{div:i,mod:a.mod}):0!==(this.negative&e.negative)?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(o=a.mod.neg(),r&&0!==o.negative&&o.isub(e)),{div:a.div,mod:o}):e.length>this.length||this.cmp(e)<0?{div:new s(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new s(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new s(this.modrn(e.words[0]))}:this._wordDiv(e,t);var i,o,a},s.prototype.div=function(e){return this.divmod(e,"div",!1).div},s.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},s.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},s.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),i=e.andln(1),s=r.cmp(n);return s<0||1===i&&0===s?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},s.prototype.modrn=function(e){var t=e<0;t&&(e=-e),n(e<=67108863);for(var r=(1<<26)%e,i=0,s=this.length-1;s>=0;s--)i=(r*i+(0|this.words[s]))%e;return t?-i:i},s.prototype.modn=function(e){return this.modrn(e)},s.prototype.idivn=function(e){var t=e<0;t&&(e=-e),n(e<=67108863);for(var r=0,i=this.length-1;i>=0;i--){var s=(0|this.words[i])+67108864*r;this.words[i]=s/e|0,r=s%e}return this._strip(),t?this.ineg():this},s.prototype.divn=function(e){return this.clone().idivn(e)},s.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();var i=new s(1),o=new s(0),a=new s(0),c=new s(1),u=0;while(t.isEven()&&r.isEven())t.iushrn(1),r.iushrn(1),++u;var l=r.clone(),h=t.clone();while(!t.isZero()){for(var d=0,p=1;0===(t.words[0]&p)&&d<26;++d,p<<=1);if(d>0){t.iushrn(d);while(d-- >0)(i.isOdd()||o.isOdd())&&(i.iadd(l),o.isub(h)),i.iushrn(1),o.iushrn(1)}for(var f=0,g=1;0===(r.words[0]&g)&&f<26;++f,g<<=1);if(f>0){r.iushrn(f);while(f-- >0)(a.isOdd()||c.isOdd())&&(a.iadd(l),c.isub(h)),a.iushrn(1),c.iushrn(1)}t.cmp(r)>=0?(t.isub(r),i.isub(a),o.isub(c)):(r.isub(t),a.isub(i),c.isub(o))}return{a:a,b:c,gcd:r.iushln(u)}},s.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();var i,o=new s(1),a=new s(0),c=r.clone();while(t.cmpn(1)>0&&r.cmpn(1)>0){for(var u=0,l=1;0===(t.words[0]&l)&&u<26;++u,l<<=1);if(u>0){t.iushrn(u);while(u-- >0)o.isOdd()&&o.iadd(c),o.iushrn(1)}for(var h=0,d=1;0===(r.words[0]&d)&&h<26;++h,d<<=1);if(h>0){r.iushrn(h);while(h-- >0)a.isOdd()&&a.iadd(c),a.iushrn(1)}t.cmp(r)>=0?(t.isub(r),o.isub(a)):(r.isub(t),a.isub(o))}return i=0===t.cmpn(1)?o:a,i.cmpn(0)<0&&i.iadd(e),i},s.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);do{while(t.isEven())t.iushrn(1);while(r.isEven())r.iushrn(1);var i=t.cmp(r);if(i<0){var s=t;t=r,r=s}else if(0===i||0===r.cmpn(1))break;t.isub(r)}while(1);return r.iushln(n)},s.prototype.invm=function(e){return this.egcd(e).a.umod(e)},s.prototype.isEven=function(){return 0===(1&this.words[0])},s.prototype.isOdd=function(){return 1===(1&this.words[0])},s.prototype.andln=function(e){return this.words[0]&e},s.prototype.bincn=function(e){n("number"===typeof e);var t=e%26,r=(e-t)/26,i=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var s=i,o=r;0!==s&&o<this.length;o++){var a=0|this.words[o];a+=s,s=a>>>26,a&=67108863,this.words[o]=a}return 0!==s&&(this.words[o]=s,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this._strip(),this.length>1)t=1;else{r&&(e=-e),n(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},s.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},s.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|e.words[r];if(n!==i){n<i?t=-1:n>i&&(t=1);break}}return t},s.prototype.gtn=function(e){return 1===this.cmpn(e)},s.prototype.gt=function(e){return 1===this.cmp(e)},s.prototype.gten=function(e){return this.cmpn(e)>=0},s.prototype.gte=function(e){return this.cmp(e)>=0},s.prototype.ltn=function(e){return-1===this.cmpn(e)},s.prototype.lt=function(e){return-1===this.cmp(e)},s.prototype.lten=function(e){return this.cmpn(e)<=0},s.prototype.lte=function(e){return this.cmp(e)<=0},s.prototype.eqn=function(e){return 0===this.cmpn(e)},s.prototype.eq=function(e){return 0===this.cmp(e)},s.red=function(e){return new N(e)},s.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(e){return this.red=e,this},s.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},s.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},s.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},s.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},s.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},s.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},s.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},s.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var E={k256:null,p224:null,p192:null,p25519:null};function A(e,t){this.name=e,this.p=new s(t,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function I(){A.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function S(){A.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function C(){A.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function k(){A.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function N(e){if("string"===typeof e){var t=s._prime(e);this.m=t.p,this.prime=t}else n(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function O(e){N.call(this,e),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}A.prototype._tmp=function(){var e=new s(null);return e.words=new Array(Math.ceil(this.n/13)),e},A.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),r=this.imulK(r),r=r.iadd(this.tmp),t=r.bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},A.prototype.split=function(e,t){e.iushrn(this.n,0,t)},A.prototype.imulK=function(e){return e.imul(this.k)},i(I,A),I.prototype.split=function(e,t){for(var r=4194303,n=Math.min(e.length,9),i=0;i<n;i++)t.words[i]=e.words[i];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var s=e.words[9];for(t.words[t.length++]=s&r,i=10;i<e.length;i++){var o=0|e.words[i];e.words[i-10]=(o&r)<<4|s>>>22,s=o}s>>>=22,e.words[i-10]=s,0===s&&e.length>10?e.length-=10:e.length-=9},I.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(S,A),i(C,A),i(k,A),k.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,i=67108863&n;n>>>=26,e.words[r]=i,t=n}return 0!==t&&(e.words[e.length++]=t),e},s._prime=function(e){if(E[e])return E[e];var t;if("k256"===e)t=new I;else if("p224"===e)t=new S;else if("p192"===e)t=new C;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new k}return E[e]=t,t},N.prototype._verify1=function(e){n(0===e.negative,"red works only with positives"),n(e.red,"red works only with red numbers")},N.prototype._verify2=function(e,t){n(0===(e.negative|t.negative),"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},N.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(l(e,e.umod(this.m)._forceRed(this)),e)},N.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},N.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},N.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},N.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},N.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},N.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},N.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},N.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},N.prototype.isqr=function(e){return this.imul(e,e.clone())},N.prototype.sqr=function(e){return this.mul(e,e)},N.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(n(t%2===1),3===t){var r=this.m.add(new s(1)).iushrn(2);return this.pow(e,r)}var i=this.m.subn(1),o=0;while(!i.isZero()&&0===i.andln(1))o++,i.iushrn(1);n(!i.isZero());var a=new s(1).toRed(this),c=a.redNeg(),u=this.m.subn(1).iushrn(1),l=this.m.bitLength();l=new s(2*l*l).toRed(this);while(0!==this.pow(l,u).cmp(c))l.redIAdd(c);var h=this.pow(l,i),d=this.pow(e,i.addn(1).iushrn(1)),p=this.pow(e,i),f=o;while(0!==p.cmp(a)){for(var g=p,m=0;0!==g.cmp(a);m++)g=g.redSqr();n(m<f);var y=this.pow(h,new s(1).iushln(f-m-1));d=d.redMul(y),h=y.redSqr(),p=p.redMul(h),f=m}return d},N.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},N.prototype.pow=function(e,t){if(t.isZero())return new s(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=4,n=new Array(1<<r);n[0]=new s(1).toRed(this),n[1]=e;for(var i=2;i<n.length;i++)n[i]=this.mul(n[i-1],e);var o=n[0],a=0,c=0,u=t.bitLength()%26;for(0===u&&(u=26),i=t.length-1;i>=0;i--){for(var l=t.words[i],h=u-1;h>=0;h--){var d=l>>h&1;o!==n[0]&&(o=this.sqr(o)),0!==d||0!==a?(a<<=1,a|=d,c++,(c===r||0===i&&0===h)&&(o=this.mul(o,n[a]),c=0,a=0)):c=0}u=26}return o},N.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},N.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},s.mont=function(e){return new O(e)},i(O,N),O.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},O.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},O.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},O.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new s(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},O.prototype.invm=function(e){var t=this.imod(e._invmp(this.m).mul(this.r2));return t._forceRed(this)}}(e,this)},72689:function(e,t,r){"use strict";r.d(t,{O:function(){return l}});r(18111),r(22489),r(61701);var n=r(6521),i=r(26676),s=r(48016),o=r(80955),a=r(58843),c=r(21340),u=r(4545);class l extends u.Y{constructor(e){super(),this.id=o.o.CONNECTOR_ID.AUTH,this.name=o.o.CONNECTOR_NAMES.AUTH,this.type="AUTH",this.chain=o.o.CHAIN.SOLANA,this.provider=e.w3mFrameProvider,this.requestedChains=e.chains,this.getActiveChain=e.getActiveChain}get publicKey(){const e=this.provider.user?.address;return e?new i.J3(e):void 0}get chains(){const e=this.provider.getAvailableChainIds();return this.requestedChains.filter((t=>e.includes(t.caipNetworkId)))}async connect(e={}){const t=e.chainId||this.getActiveChain()?.id,r=a.U.state.preferredAccountTypes?.solana;if(await this.provider.connect({chainId:(0,c.o)(t),preferredAccountType:r}),!this.publicKey)throw new Error("Failed to connect to the wallet");return this.emit("connect",this.publicKey),this.publicKey.toBase58()}async disconnect(){await this.provider.disconnect(),this.emit("disconnect",void 0)}async signMessage(e){if(!this.publicKey)throw new Error("Wallet not connected");const t=await this.provider.request({method:"solana_signMessage",params:{message:s.A.encode(e),pubkey:this.publicKey.toBase58()}});return s.A.decode(t.signature)}async signTransaction(e){const t=await this.provider.request({method:"solana_signTransaction",params:{transaction:this.serializeTransaction(e)}}),r=s.A.decode(t.transaction);return(0,n.Y)(e)?i.Kt.deserialize(r):i.ZX.from(r)}async signAndSendTransaction(e,t){const r=this.serializeTransaction(e),n=await this.provider.request({method:"solana_signAndSendTransaction",params:{transaction:r,options:t}});return n.signature}async sendTransaction(e,t,r){const n=await this.signTransaction(e),i=await t.sendRawTransaction(n.serialize(),r);return i}async signAllTransactions(e){const t=await this.provider.request({method:"solana_signAllTransactions",params:{transactions:e.map((e=>this.serializeTransaction(e)))}});return t.transactions.map(((t,r)=>{const o=e[r];if(!o)throw new Error("Invalid solana_signAllTransactions response");const a=s.A.decode(t);return(0,n.Y)(o)?i.Kt.deserialize(a):i.ZX.from(a)}))}async request(e){return this.provider.request({method:e.method,params:e.params})}async getAccounts(){return this.publicKey?Promise.resolve([{namespace:this.chain,address:this.publicKey.toBase58(),type:"eoa"}]):Promise.resolve([])}serializeTransaction(e){return s.A.encode(new Uint8Array(e.serialize({verifySignatures:!1})))}}},73331:function(e,t,r){"use strict";r.d(t,{Fl:function(){return i}});var n=r(22626);n.C;class i extends n.C{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`,{name:"SizeExceedsPaddingSizeError"})}}n.C},73506:function(e,t,r){"use strict";var n=r(13925),i=String,s=TypeError;e.exports=function(e){if(n(e))return e;throw new s("Can't set "+i(e)+" as a prototype")}},74013:function(e,t,r){"use strict";r(44114);var n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,i=Math.ceil,s=Math.floor,o="[BigNumber Error] ",a=o+"Number primitive has more than 15 significant digits: ",c=1e14,u=14,l=9007199254740991,h=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],d=1e7,p=1e9;function f(e){var t,r,E,A=L.prototype={constructor:L,toString:null,valueOf:null},I=new L(1),S=20,C=4,k=-7,N=21,O=-1e7,T=1e7,R=!1,x=1,P=0,M={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},B="0123456789abcdefghijklmnopqrstuvwxyz",U=!0;function L(e,t){var i,o,c,h,d,p,f,g,m=this;if(!(m instanceof L))return new L(e,t);if(null==t){if(e&&!0===e._isBigNumber)return m.s=e.s,void(!e.c||e.e>T?m.c=m.e=null:e.e<O?m.c=[m.e=0]:(m.e=e.e,m.c=e.c.slice()));if((p="number"==typeof e)&&0*e==0){if(m.s=1/e<0?(e=-e,-1):1,e===~~e){for(h=0,d=e;d>=10;d/=10,h++);return void(h>T?m.c=m.e=null:(m.e=h,m.c=[e]))}g=String(e)}else{if(!n.test(g=String(e)))return E(m,g,p);m.s=45==g.charCodeAt(0)?(g=g.slice(1),-1):1}(h=g.indexOf("."))>-1&&(g=g.replace(".","")),(d=g.search(/e/i))>0?(h<0&&(h=d),h+=+g.slice(d+1),g=g.substring(0,d)):h<0&&(h=g.length)}else{if(w(t,2,B.length,"Base"),10==t&&U)return m=new L(e),z(m,S+m.e+1,C);if(g=String(e),p="number"==typeof e){if(0*e!=0)return E(m,g,p,t);if(m.s=1/e<0?(g=g.slice(1),-1):1,L.DEBUG&&g.replace(/^0\.0*|\./,"").length>15)throw Error(a+e)}else m.s=45===g.charCodeAt(0)?(g=g.slice(1),-1):1;for(i=B.slice(0,t),h=d=0,f=g.length;d<f;d++)if(i.indexOf(o=g.charAt(d))<0){if("."==o){if(d>h){h=f;continue}}else if(!c&&(g==g.toUpperCase()&&(g=g.toLowerCase())||g==g.toLowerCase()&&(g=g.toUpperCase()))){c=!0,d=-1,h=0;continue}return E(m,String(e),p,t)}p=!1,g=r(g,t,10,m.s),(h=g.indexOf("."))>-1?g=g.replace(".",""):h=g.length}for(d=0;48===g.charCodeAt(d);d++);for(f=g.length;48===g.charCodeAt(--f););if(g=g.slice(d,++f)){if(f-=d,p&&L.DEBUG&&f>15&&(e>l||e!==s(e)))throw Error(a+m.s*e);if((h=h-d-1)>T)m.c=m.e=null;else if(h<O)m.c=[m.e=0];else{if(m.e=h,m.c=[],d=(h+1)%u,h<0&&(d+=u),d<f){for(d&&m.c.push(+g.slice(0,d)),f-=u;d<f;)m.c.push(+g.slice(d,d+=u));d=u-(g=g.slice(d)).length}else d-=f;for(;d--;g+="0");m.c.push(+g)}}else m.c=[m.e=0]}function D(e,t,r,n){var i,s,o,a,c;if(null==r?r=C:w(r,0,8),!e.c)return e.toString();if(i=e.c[0],o=e.e,null==t)c=m(e.c),c=1==n||2==n&&(o<=k||o>=N)?v(c,o):_(c,o,"0");else if(e=z(new L(e),t,r),s=e.e,c=m(e.c),a=c.length,1==n||2==n&&(t<=s||s<=k)){for(;a<t;c+="0",a++);c=v(c,s)}else if(t-=o,c=_(c,s,"0"),s+1>a){if(--t>0)for(c+=".";t--;c+="0");}else if(t+=s-a,t>0)for(s+1==a&&(c+=".");t--;c+="0");return e.s<0&&i?"-"+c:c}function W(e,t){for(var r,n,i=1,s=new L(e[0]);i<e.length;i++)n=new L(e[i]),(!n.s||(r=y(s,n))===t||0===r&&s.s===t)&&(s=n);return s}function j(e,t,r){for(var n=1,i=t.length;!t[--i];t.pop());for(i=t[0];i>=10;i/=10,n++);return(r=n+r*u-1)>T?e.c=e.e=null:r<O?e.c=[e.e=0]:(e.e=r,e.c=t),e}function z(e,t,r,n){var o,a,l,d,p,f,g,m=e.c,y=h;if(m){e:{for(o=1,d=m[0];d>=10;d/=10,o++);if(a=t-o,a<0)a+=u,l=t,p=m[f=0],g=s(p/y[o-l-1]%10);else if(f=i((a+1)/u),f>=m.length){if(!n)break e;for(;m.length<=f;m.push(0));p=g=0,o=1,a%=u,l=a-u+1}else{for(p=d=m[f],o=1;d>=10;d/=10,o++);a%=u,l=a-u+o,g=l<0?0:s(p/y[o-l-1]%10)}if(n=n||t<0||null!=m[f+1]||(l<0?p:p%y[o-l-1]),n=r<4?(g||n)&&(0==r||r==(e.s<0?3:2)):g>5||5==g&&(4==r||n||6==r&&(a>0?l>0?p/y[o-l]:0:m[f-1])%10&1||r==(e.s<0?8:7)),t<1||!m[0])return m.length=0,n?(t-=e.e+1,m[0]=y[(u-t%u)%u],e.e=-t||0):m[0]=e.e=0,e;if(0==a?(m.length=f,d=1,f--):(m.length=f+1,d=y[u-a],m[f]=l>0?s(p/y[o-l]%y[l])*d:0),n)for(;;){if(0==f){for(a=1,l=m[0];l>=10;l/=10,a++);for(l=m[0]+=d,d=1;l>=10;l/=10,d++);a!=d&&(e.e++,m[0]==c&&(m[0]=1));break}if(m[f]+=d,m[f]!=c)break;m[f--]=0,d=1}for(a=m.length;0===m[--a];m.pop());}e.e>T?e.c=e.e=null:e.e<O&&(e.c=[e.e=0])}return e}function H(e){var t,r=e.e;return null===r?e.toString():(t=m(e.c),t=r<=k||r>=N?v(t,r):_(t,r,"0"),e.s<0?"-"+t:t)}return L.clone=f,L.ROUND_UP=0,L.ROUND_DOWN=1,L.ROUND_CEIL=2,L.ROUND_FLOOR=3,L.ROUND_HALF_UP=4,L.ROUND_HALF_DOWN=5,L.ROUND_HALF_EVEN=6,L.ROUND_HALF_CEIL=7,L.ROUND_HALF_FLOOR=8,L.EUCLID=9,L.config=L.set=function(e){var t,r;if(null!=e){if("object"!=typeof e)throw Error(o+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(r=e[t],w(r,0,p,t),S=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(r=e[t],w(r,0,8,t),C=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&(r=e[t],r&&r.pop?(w(r[0],-p,0,t),w(r[1],0,p,t),k=r[0],N=r[1]):(w(r,-p,p,t),k=-(N=r<0?-r:r))),e.hasOwnProperty(t="RANGE"))if(r=e[t],r&&r.pop)w(r[0],-p,-1,t),w(r[1],1,p,t),O=r[0],T=r[1];else{if(w(r,-p,p,t),!r)throw Error(o+t+" cannot be zero: "+r);O=-(T=r<0?-r:r)}if(e.hasOwnProperty(t="CRYPTO")){if(r=e[t],r!==!!r)throw Error(o+t+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw R=!r,Error(o+"crypto unavailable");R=r}else R=r}if(e.hasOwnProperty(t="MODULO_MODE")&&(r=e[t],w(r,0,9,t),x=r),e.hasOwnProperty(t="POW_PRECISION")&&(r=e[t],w(r,0,p,t),P=r),e.hasOwnProperty(t="FORMAT")){if(r=e[t],"object"!=typeof r)throw Error(o+t+" not an object: "+r);M=r}if(e.hasOwnProperty(t="ALPHABET")){if(r=e[t],"string"!=typeof r||/^.?$|[+\-.\s]|(.).*\1/.test(r))throw Error(o+t+" invalid: "+r);U="0123456789"==r.slice(0,10),B=r}}return{DECIMAL_PLACES:S,ROUNDING_MODE:C,EXPONENTIAL_AT:[k,N],RANGE:[O,T],CRYPTO:R,MODULO_MODE:x,POW_PRECISION:P,FORMAT:M,ALPHABET:B}},L.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!L.DEBUG)return!0;var t,r,n=e.c,i=e.e,a=e.s;e:if("[object Array]"=={}.toString.call(n)){if((1===a||-1===a)&&i>=-p&&i<=p&&i===s(i)){if(0===n[0]){if(0===i&&1===n.length)return!0;break e}if(t=(i+1)%u,t<1&&(t+=u),String(n[0]).length==t){for(t=0;t<n.length;t++)if(r=n[t],r<0||r>=c||r!==s(r))break e;if(0!==r)return!0}}}else if(null===n&&null===i&&(null===a||1===a||-1===a))return!0;throw Error(o+"Invalid BigNumber: "+e)},L.maximum=L.max=function(){return W(arguments,-1)},L.minimum=L.min=function(){return W(arguments,1)},L.random=function(){var e=9007199254740992,t=Math.random()*e&2097151?function(){return s(Math.random()*e)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)};return function(e){var r,n,a,c,l,d=0,f=[],g=new L(I);if(null==e?e=S:w(e,0,p),c=i(e/u),R)if(crypto.getRandomValues){for(r=crypto.getRandomValues(new Uint32Array(c*=2));d<c;)l=131072*r[d]+(r[d+1]>>>11),l>=9e15?(n=crypto.getRandomValues(new Uint32Array(2)),r[d]=n[0],r[d+1]=n[1]):(f.push(l%1e14),d+=2);d=c/2}else{if(!crypto.randomBytes)throw R=!1,Error(o+"crypto unavailable");for(r=crypto.randomBytes(c*=7);d<c;)l=281474976710656*(31&r[d])+1099511627776*r[d+1]+4294967296*r[d+2]+16777216*r[d+3]+(r[d+4]<<16)+(r[d+5]<<8)+r[d+6],l>=9e15?crypto.randomBytes(7).copy(r,d):(f.push(l%1e14),d+=7);d=c/7}if(!R)for(;d<c;)l=t(),l<9e15&&(f[d++]=l%1e14);for(c=f[--d],e%=u,c&&e&&(l=h[u-e],f[d]=s(c/l)*l);0===f[d];f.pop(),d--);if(d<0)f=[a=0];else{for(a=-1;0===f[0];f.splice(0,1),a-=u);for(d=1,l=f[0];l>=10;l/=10,d++);d<u&&(a-=u-d)}return g.e=a,g.c=f,g}}(),L.sum=function(){for(var e=1,t=arguments,r=new L(t[0]);e<t.length;)r=r.plus(t[e++]);return r},r=function(){var e="0123456789";function r(e,t,r,n){for(var i,s,o=[0],a=0,c=e.length;a<c;){for(s=o.length;s--;o[s]*=t);for(o[0]+=n.indexOf(e.charAt(a++)),i=0;i<o.length;i++)o[i]>r-1&&(null==o[i+1]&&(o[i+1]=0),o[i+1]+=o[i]/r|0,o[i]%=r)}return o.reverse()}return function(n,i,s,o,a){var c,u,l,h,d,p,f,g,y=n.indexOf("."),w=S,b=C;for(y>=0&&(h=P,P=0,n=n.replace(".",""),g=new L(i),p=g.pow(n.length-y),P=h,g.c=r(_(m(p.c),p.e,"0"),10,s,e),g.e=g.c.length),f=r(n,i,s,a?(c=B,e):(c=e,B)),l=h=f.length;0==f[--h];f.pop());if(!f[0])return c.charAt(0);if(y<0?--l:(p.c=f,p.e=l,p.s=o,p=t(p,g,w,b,s),f=p.c,d=p.r,l=p.e),u=l+w+1,y=f[u],h=s/2,d=d||u<0||null!=f[u+1],d=b<4?(null!=y||d)&&(0==b||b==(p.s<0?3:2)):y>h||y==h&&(4==b||d||6==b&&1&f[u-1]||b==(p.s<0?8:7)),u<1||!f[0])n=d?_(c.charAt(1),-w,c.charAt(0)):c.charAt(0);else{if(f.length=u,d)for(--s;++f[--u]>s;)f[u]=0,u||(++l,f=[1].concat(f));for(h=f.length;!f[--h];);for(y=0,n="";y<=h;n+=c.charAt(f[y++]));n=_(n,l,c.charAt(0))}return n}}(),t=function(){function e(e,t,r){var n,i,s,o,a=0,c=e.length,u=t%d,l=t/d|0;for(e=e.slice();c--;)s=e[c]%d,o=e[c]/d|0,n=l*s+o*u,i=u*s+n%d*d+a,a=(i/r|0)+(n/d|0)+l*o,e[c]=i%r;return a&&(e=[a].concat(e)),e}function t(e,t,r,n){var i,s;if(r!=n)s=r>n?1:-1;else for(i=s=0;i<r;i++)if(e[i]!=t[i]){s=e[i]>t[i]?1:-1;break}return s}function r(e,t,r,n){for(var i=0;r--;)e[r]-=i,i=e[r]<t[r]?1:0,e[r]=i*n+e[r]-t[r];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(n,i,o,a,l){var h,d,p,f,m,y,w,b,v,_,E,A,I,S,C,k,N,O=n.s==i.s?1:-1,T=n.c,R=i.c;if(!T||!T[0]||!R||!R[0])return new L(n.s&&i.s&&(T?!R||T[0]!=R[0]:R)?T&&0==T[0]||!R?0*O:O/0:NaN);for(b=new L(O),v=b.c=[],d=n.e-i.e,O=o+d+1,l||(l=c,d=g(n.e/u)-g(i.e/u),O=O/u|0),p=0;R[p]==(T[p]||0);p++);if(R[p]>(T[p]||0)&&d--,O<0)v.push(1),f=!0;else{for(S=T.length,k=R.length,p=0,O+=2,m=s(l/(R[0]+1)),m>1&&(R=e(R,m,l),T=e(T,m,l),k=R.length,S=T.length),I=k,_=T.slice(0,k),E=_.length;E<k;_[E++]=0);N=R.slice(),N=[0].concat(N),C=R[0],R[1]>=l/2&&C++;do{if(m=0,h=t(R,_,k,E),h<0){if(A=_[0],k!=E&&(A=A*l+(_[1]||0)),m=s(A/C),m>1){m>=l&&(m=l-1),y=e(R,m,l),w=y.length,E=_.length;while(1==t(y,_,w,E))m--,r(y,k<w?N:R,w,l),w=y.length,h=1}else 0==m&&(h=m=1),y=R.slice(),w=y.length;if(w<E&&(y=[0].concat(y)),r(_,y,E,l),E=_.length,-1==h)while(t(R,_,k,E)<1)m++,r(_,k<E?N:R,E,l),E=_.length}else 0===h&&(m++,_=[0]);v[p++]=m,_[0]?_[E++]=T[I]||0:(_=[T[I]],E=1)}while((I++<S||null!=_[0])&&O--);f=null!=_[0],v[0]||v.splice(0,1)}if(l==c){for(p=1,O=v[0];O>=10;O/=10,p++);z(b,o+(b.e=p+d*u-1)+1,a,f)}else b.e=d,b.r=+f;return b}}(),E=function(){var e=/^(-?)0([xbo])(?=\w[\w.]*$)/i,t=/^([^.]+)\.$/,r=/^\.([^.]+)$/,n=/^-?(Infinity|NaN)$/,i=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(s,a,c,u){var l,h=c?a:a.replace(i,"");if(n.test(h))s.s=isNaN(h)?null:h<0?-1:1;else{if(!c&&(h=h.replace(e,(function(e,t,r){return l="x"==(r=r.toLowerCase())?16:"b"==r?2:8,u&&u!=l?e:t})),u&&(l=u,h=h.replace(t,"$1").replace(r,"0.$1")),a!=h))return new L(h,l);if(L.DEBUG)throw Error(o+"Not a"+(u?" base "+u:"")+" number: "+a);s.s=null}s.c=s.e=null}}(),A.absoluteValue=A.abs=function(){var e=new L(this);return e.s<0&&(e.s=1),e},A.comparedTo=function(e,t){return y(this,new L(e,t))},A.decimalPlaces=A.dp=function(e,t){var r,n,i,s=this;if(null!=e)return w(e,0,p),null==t?t=C:w(t,0,8),z(new L(s),e+s.e+1,t);if(!(r=s.c))return null;if(n=((i=r.length-1)-g(this.e/u))*u,i=r[i])for(;i%10==0;i/=10,n--);return n<0&&(n=0),n},A.dividedBy=A.div=function(e,r){return t(this,new L(e,r),S,C)},A.dividedToIntegerBy=A.idiv=function(e,r){return t(this,new L(e,r),0,1)},A.exponentiatedBy=A.pow=function(e,t){var r,n,a,c,l,h,d,p,f,g=this;if(e=new L(e),e.c&&!e.isInteger())throw Error(o+"Exponent not an integer: "+H(e));if(null!=t&&(t=new L(t)),h=e.e>14,!g.c||!g.c[0]||1==g.c[0]&&!g.e&&1==g.c.length||!e.c||!e.c[0])return f=new L(Math.pow(+H(g),h?e.s*(2-b(e)):+H(e))),t?f.mod(t):f;if(d=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new L(NaN);n=!d&&g.isInteger()&&t.isInteger(),n&&(g=g.mod(t))}else{if(e.e>9&&(g.e>0||g.e<-1||(0==g.e?g.c[0]>1||h&&g.c[1]>=24e7:g.c[0]<8e13||h&&g.c[0]<=9999975e7)))return c=g.s<0&&b(e)?-0:0,g.e>-1&&(c=1/c),new L(d?1/c:c);P&&(c=i(P/u+2))}for(h?(r=new L(.5),d&&(e.s=1),p=b(e)):(a=Math.abs(+H(e)),p=a%2),f=new L(I);;){if(p){if(f=f.times(g),!f.c)break;c?f.c.length>c&&(f.c.length=c):n&&(f=f.mod(t))}if(a){if(a=s(a/2),0===a)break;p=a%2}else if(e=e.times(r),z(e,e.e+1,1),e.e>14)p=b(e);else{if(a=+H(e),0===a)break;p=a%2}g=g.times(g),c?g.c&&g.c.length>c&&(g.c.length=c):n&&(g=g.mod(t))}return n?f:(d&&(f=I.div(f)),t?f.mod(t):c?z(f,P,C,l):f)},A.integerValue=function(e){var t=new L(this);return null==e?e=C:w(e,0,8),z(t,t.e+1,e)},A.isEqualTo=A.eq=function(e,t){return 0===y(this,new L(e,t))},A.isFinite=function(){return!!this.c},A.isGreaterThan=A.gt=function(e,t){return y(this,new L(e,t))>0},A.isGreaterThanOrEqualTo=A.gte=function(e,t){return 1===(t=y(this,new L(e,t)))||0===t},A.isInteger=function(){return!!this.c&&g(this.e/u)>this.c.length-2},A.isLessThan=A.lt=function(e,t){return y(this,new L(e,t))<0},A.isLessThanOrEqualTo=A.lte=function(e,t){return-1===(t=y(this,new L(e,t)))||0===t},A.isNaN=function(){return!this.s},A.isNegative=function(){return this.s<0},A.isPositive=function(){return this.s>0},A.isZero=function(){return!!this.c&&0==this.c[0]},A.minus=function(e,t){var r,n,i,s,o=this,a=o.s;if(e=new L(e,t),t=e.s,!a||!t)return new L(NaN);if(a!=t)return e.s=-t,o.plus(e);var l=o.e/u,h=e.e/u,d=o.c,p=e.c;if(!l||!h){if(!d||!p)return d?(e.s=-t,e):new L(p?o:NaN);if(!d[0]||!p[0])return p[0]?(e.s=-t,e):new L(d[0]?o:3==C?-0:0)}if(l=g(l),h=g(h),d=d.slice(),a=l-h){for((s=a<0)?(a=-a,i=d):(h=l,i=p),i.reverse(),t=a;t--;i.push(0));i.reverse()}else for(n=(s=(a=d.length)<(t=p.length))?a:t,a=t=0;t<n;t++)if(d[t]!=p[t]){s=d[t]<p[t];break}if(s&&(i=d,d=p,p=i,e.s=-e.s),t=(n=p.length)-(r=d.length),t>0)for(;t--;d[r++]=0);for(t=c-1;n>a;){if(d[--n]<p[n]){for(r=n;r&&!d[--r];d[r]=t);--d[r],d[n]+=c}d[n]-=p[n]}for(;0==d[0];d.splice(0,1),--h);return d[0]?j(e,d,h):(e.s=3==C?-1:1,e.c=[e.e=0],e)},A.modulo=A.mod=function(e,r){var n,i,s=this;return e=new L(e,r),!s.c||!e.s||e.c&&!e.c[0]?new L(NaN):!e.c||s.c&&!s.c[0]?new L(s):(9==x?(i=e.s,e.s=1,n=t(s,e,0,3),e.s=i,n.s*=i):n=t(s,e,0,x),e=s.minus(n.times(e)),e.c[0]||1!=x||(e.s=s.s),e)},A.multipliedBy=A.times=function(e,t){var r,n,i,s,o,a,l,h,p,f,m,y,w,b,v,_=this,E=_.c,A=(e=new L(e,t)).c;if(!E||!A||!E[0]||!A[0])return!_.s||!e.s||E&&!E[0]&&!A||A&&!A[0]&&!E?e.c=e.e=e.s=null:(e.s*=_.s,E&&A?(e.c=[0],e.e=0):e.c=e.e=null),e;for(n=g(_.e/u)+g(e.e/u),e.s*=_.s,l=E.length,f=A.length,l<f&&(w=E,E=A,A=w,i=l,l=f,f=i),i=l+f,w=[];i--;w.push(0));for(b=c,v=d,i=f;--i>=0;){for(r=0,m=A[i]%v,y=A[i]/v|0,o=l,s=i+o;s>i;)h=E[--o]%v,p=E[o]/v|0,a=y*h+p*m,h=m*h+a%v*v+w[s]+r,r=(h/b|0)+(a/v|0)+y*p,w[s--]=h%b;w[s]=r}return r?++n:w.splice(0,1),j(e,w,n)},A.negated=function(){var e=new L(this);return e.s=-e.s||null,e},A.plus=function(e,t){var r,n=this,i=n.s;if(e=new L(e,t),t=e.s,!i||!t)return new L(NaN);if(i!=t)return e.s=-t,n.minus(e);var s=n.e/u,o=e.e/u,a=n.c,l=e.c;if(!s||!o){if(!a||!l)return new L(i/0);if(!a[0]||!l[0])return l[0]?e:new L(a[0]?n:0*i)}if(s=g(s),o=g(o),a=a.slice(),i=s-o){for(i>0?(o=s,r=l):(i=-i,r=a),r.reverse();i--;r.push(0));r.reverse()}for(i=a.length,t=l.length,i-t<0&&(r=l,l=a,a=r,t=i),i=0;t;)i=(a[--t]=a[t]+l[t]+i)/c|0,a[t]=c===a[t]?0:a[t]%c;return i&&(a=[i].concat(a),++o),j(e,a,o)},A.precision=A.sd=function(e,t){var r,n,i,s=this;if(null!=e&&e!==!!e)return w(e,1,p),null==t?t=C:w(t,0,8),z(new L(s),e,t);if(!(r=s.c))return null;if(i=r.length-1,n=i*u+1,i=r[i]){for(;i%10==0;i/=10,n--);for(i=r[0];i>=10;i/=10,n++);}return e&&s.e+1>n&&(n=s.e+1),n},A.shiftedBy=function(e){return w(e,-l,l),this.times("1e"+e)},A.squareRoot=A.sqrt=function(){var e,r,n,i,s,o=this,a=o.c,c=o.s,u=o.e,l=S+4,h=new L("0.5");if(1!==c||!a||!a[0])return new L(!c||c<0&&(!a||a[0])?NaN:a?o:1/0);if(c=Math.sqrt(+H(o)),0==c||c==1/0?(r=m(a),(r.length+u)%2==0&&(r+="0"),c=Math.sqrt(+r),u=g((u+1)/2)-(u<0||u%2),c==1/0?r="5e"+u:(r=c.toExponential(),r=r.slice(0,r.indexOf("e")+1)+u),n=new L(r)):n=new L(c+""),n.c[0])for(u=n.e,c=u+l,c<3&&(c=0);;)if(s=n,n=h.times(s.plus(t(o,s,l,1))),m(s.c).slice(0,c)===(r=m(n.c)).slice(0,c)){if(n.e<u&&--c,r=r.slice(c-3,c+1),"9999"!=r&&(i||"4999"!=r)){+r&&(+r.slice(1)||"5"!=r.charAt(0))||(z(n,n.e+S+2,1),e=!n.times(n).eq(o));break}if(!i&&(z(s,s.e+S+2,0),s.times(s).eq(o))){n=s;break}l+=4,c+=4,i=1}return z(n,n.e+S+1,C,e)},A.toExponential=function(e,t){return null!=e&&(w(e,0,p),e++),D(this,e,t,1)},A.toFixed=function(e,t){return null!=e&&(w(e,0,p),e=e+this.e+1),D(this,e,t)},A.toFormat=function(e,t,r){var n,i=this;if(null==r)null!=e&&t&&"object"==typeof t?(r=t,t=null):e&&"object"==typeof e?(r=e,e=t=null):r=M;else if("object"!=typeof r)throw Error(o+"Argument not an object: "+r);if(n=i.toFixed(e,t),i.c){var s,a=n.split("."),c=+r.groupSize,u=+r.secondaryGroupSize,l=r.groupSeparator||"",h=a[0],d=a[1],p=i.s<0,f=p?h.slice(1):h,g=f.length;if(u&&(s=c,c=u,u=s,g-=s),c>0&&g>0){for(s=g%c||c,h=f.substr(0,s);s<g;s+=c)h+=l+f.substr(s,c);u>0&&(h+=l+f.slice(s)),p&&(h="-"+h)}n=d?h+(r.decimalSeparator||"")+((u=+r.fractionGroupSize)?d.replace(new RegExp("\\d{"+u+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):d):h}return(r.prefix||"")+n+(r.suffix||"")},A.toFraction=function(e){var r,n,i,s,a,c,l,d,p,f,g,y,w=this,b=w.c;if(null!=e&&(l=new L(e),!l.isInteger()&&(l.c||1!==l.s)||l.lt(I)))throw Error(o+"Argument "+(l.isInteger()?"out of range: ":"not an integer: ")+H(l));if(!b)return new L(w);for(r=new L(I),p=n=new L(I),i=d=new L(I),y=m(b),a=r.e=y.length-w.e-1,r.c[0]=h[(c=a%u)<0?u+c:c],e=!e||l.comparedTo(r)>0?a>0?r:p:l,c=T,T=1/0,l=new L(y),d.c[0]=0;;){if(f=t(l,r,0,1),s=n.plus(f.times(i)),1==s.comparedTo(e))break;n=i,i=s,p=d.plus(f.times(s=p)),d=s,r=l.minus(f.times(s=r)),l=s}return s=t(e.minus(n),i,0,1),d=d.plus(s.times(p)),n=n.plus(s.times(i)),d.s=p.s=w.s,a*=2,g=t(p,i,a,C).minus(w).abs().comparedTo(t(d,n,a,C).minus(w).abs())<1?[p,i]:[d,n],T=c,g},A.toNumber=function(){return+H(this)},A.toPrecision=function(e,t){return null!=e&&w(e,1,p),D(this,e,t,2)},A.toString=function(e){var t,n=this,i=n.s,s=n.e;return null===s?i?(t="Infinity",i<0&&(t="-"+t)):t="NaN":(null==e?t=s<=k||s>=N?v(m(n.c),s):_(m(n.c),s,"0"):10===e&&U?(n=z(new L(n),S+s+1,C),t=_(m(n.c),n.e,"0")):(w(e,2,B.length,"Base"),t=r(_(m(n.c),s,"0"),10,e,i,!0)),i<0&&n.c[0]&&(t="-"+t)),t},A.valueOf=A.toJSON=function(){return H(this)},A._isBigNumber=!0,A[Symbol.toStringTag]="BigNumber",A[Symbol.for("nodejs.util.inspect.custom")]=A.valueOf,null!=e&&L.set(e),L}function g(e){var t=0|e;return e>0||e===t?t:t-1}function m(e){for(var t,r,n=1,i=e.length,s=e[0]+"";n<i;){for(t=e[n++]+"",r=u-t.length;r--;t="0"+t);s+=t}for(i=s.length;48===s.charCodeAt(--i););return s.slice(0,i+1||1)}function y(e,t){var r,n,i=e.c,s=t.c,o=e.s,a=t.s,c=e.e,u=t.e;if(!o||!a)return null;if(r=i&&!i[0],n=s&&!s[0],r||n)return r?n?0:-a:o;if(o!=a)return o;if(r=o<0,n=c==u,!i||!s)return n?0:!i^r?1:-1;if(!n)return c>u^r?1:-1;for(a=(c=i.length)<(u=s.length)?c:u,o=0;o<a;o++)if(i[o]!=s[o])return i[o]>s[o]^r?1:-1;return c==u?0:c>u^r?1:-1}function w(e,t,r,n){if(e<t||e>r||e!==s(e))throw Error(o+(n||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function b(e){var t=e.c.length-1;return g(e.e/u)==t&&e.c[t]%2!=0}function v(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function _(e,t,r){var n,i;if(t<0){for(i=r+".";++t;i+=r);e=i+e}else if(n=e.length,++t>n){for(i=r,t-=n;--t;i+=r);e+=i}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}var E=f();t.A=E},74087:function(e,t,r){"use strict";r.d(t,{h:function(){return o},j:function(){return s}});const n=e=>JSON.stringify(e,((e,t)=>"bigint"===typeof t?t.toString()+"n":t)),i=e=>{const t=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=e.replace(t,'$1"$2n"$3');return JSON.parse(r,((e,t)=>{const r="string"===typeof t&&t.match(/^\d+n$/);return r?BigInt(t.substring(0,t.length-1)):t}))};function s(e){if("string"!==typeof e)throw new Error("Cannot safe json parse value of type "+typeof e);try{return i(e)}catch(t){return e}}function o(e){return"string"===typeof e?e:n(e)||""}},74381:function(e,t,r){var n=r(67925),i="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";e.exports=n(i)},74699:function(e,t,r){"use strict";r.d(t,{L:function(){return c}});var n=r(47318),i=r(94450),s=r(11734),o=r(23597),a=r(46374);function c(e,t={}){const{batch:r,fetchOptions:c,key:u="http",methods:l,name:h="HTTP JSON-RPC",onFetchRequest:d,onFetchResponse:p,retryDelay:f,raw:g}=t;return({chain:m,retryCount:y,timeout:w})=>{const{batchSize:b=1e3,wait:v=0}="object"===typeof r?r:{},_=t.retryCount??y,E=w??t.timeout??1e4,A=e||m?.rpcUrls.default.http[0];if(!A)throw new i.b;const I=(0,o.d)(A,{fetchOptions:c,onRequest:d,onResponse:p,timeout:E});return(0,a.o)({key:u,methods:l,name:h,async request({method:e,params:t}){const i={method:e,params:t},{schedule:o}=(0,s.u)({id:A,wait:v,shouldSplitBatch(e){return e.length>b},fn:e=>I.request({body:e}),sort:(e,t)=>e.id-t.id}),a=async e=>r?o(e):[await I.request({body:e})],[{error:c,result:u}]=await a(i);if(g)return{error:c,result:u};if(c)throw new n.J8({body:i,error:c,url:A});return u},retryCount:_,retryDelay:f,timeout:E,type:"http"},{fetchOptions:c,url:A})}}},74887:function(e,t,r){"use strict";r.d(t,{sc:function(){return i}});var n=r(67166);const i=n.sc},75226:function(e,t,r){"use strict";r.d(t,{Iy:function(){return u},P$:function(){return c},bY:function(){return o},ce:function(){return s},kD:function(){return i},lu:function(){return l},vd:function(){return a}});class n extends Error{constructor(e){super(e)}}class i extends n{constructor(){super(...arguments),this.name="TokenAccountNotFoundError"}}class s extends n{constructor(){super(...arguments),this.name="TokenInvalidAccountError"}}class o extends n{constructor(){super(...arguments),this.name="TokenInvalidAccountOwnerError"}}class a extends n{constructor(){super(...arguments),this.name="TokenInvalidAccountSizeError"}}class c extends n{constructor(){super(...arguments),this.name="TokenInvalidMintError"}}class u extends n{constructor(){super(...arguments),this.name="TokenInvalidOwnerError"}}class l extends n{constructor(){super(...arguments),this.name="TokenOwnerOffCurveError"}}},75404:function(e,t,r){"use strict";r.d(t,{Id:function(){return _},My:function(){return d},OG:function(){return C},Ph:function(){return m},Q5:function(){return R},aK:function(){return I},aT:function(){return g},aY:function(){return s},dJ:function(){return S},e8:function(){return a},fg:function(){return O},lX:function(){return y},lq:function(){return w},qj:function(){return v},r4:function(){return A},x:function(){return x},z:function(){return b},zW:function(){return c}});r(44114);
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const n=BigInt(0),i=BigInt(1);function s(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function o(e){if(!s(e))throw new Error("Uint8Array expected")}function a(e,t){if("boolean"!==typeof t)throw new Error(e+" boolean expected, got "+t)}function c(e){const t=e.toString(16);return 1&t.length?"0"+t:t}function u(e){if("string"!==typeof e)throw new Error("hex string expected, got "+typeof e);return""===e?n:BigInt("0x"+e)}const l="function"===typeof Uint8Array.from([]).toHex&&"function"===typeof Uint8Array.fromHex,h=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function d(e){if(o(e),l)return e.toHex();let t="";for(let r=0;r<e.length;r++)t+=h[e[r]];return t}const p={_0:48,_9:57,A:65,F:70,a:97,f:102};function f(e){return e>=p._0&&e<=p._9?e-p._0:e>=p.A&&e<=p.F?e-(p.A-10):e>=p.a&&e<=p.f?e-(p.a-10):void 0}function g(e){if("string"!==typeof e)throw new Error("hex string expected, got "+typeof e);if(l)return Uint8Array.fromHex(e);const t=e.length,r=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let i=0,s=0;i<r;i++,s+=2){const t=f(e.charCodeAt(s)),r=f(e.charCodeAt(s+1));if(void 0===t||void 0===r){const t=e[s]+e[s+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+s)}n[i]=16*t+r}return n}function m(e){return u(d(e))}function y(e){return o(e),u(d(Uint8Array.from(e).reverse()))}function w(e,t){return g(e.toString(16).padStart(2*t,"0"))}function b(e,t){return w(e,t).reverse()}function v(e,t,r){let n;if("string"===typeof t)try{n=g(t)}catch(o){throw new Error(e+" must be hex string or Uint8Array, cause: "+o)}else{if(!s(t))throw new Error(e+" must be hex string or Uint8Array");n=Uint8Array.from(t)}const i=n.length;if("number"===typeof r&&i!==r)throw new Error(e+" of length "+r+" expected, got "+i);return n}function _(...e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];o(r),t+=r.length}const r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){const t=e[n];r.set(t,i),i+=t.length}return r}const E=e=>"bigint"===typeof e&&n<=e;function A(e,t,r){return E(e)&&E(t)&&E(r)&&t<=e&&e<r}function I(e,t,r,n){if(!A(t,r,n))throw new Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}function S(e){let t;for(t=0;e>n;e>>=i,t+=1);return t}const C=e=>(i<<BigInt(e))-i,k=e=>new Uint8Array(e),N=e=>Uint8Array.from(e);function O(e,t,r){if("number"!==typeof e||e<2)throw new Error("hashLen must be a number");if("number"!==typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!==typeof r)throw new Error("hmacFn must be a function");let n=k(e),i=k(e),s=0;const o=()=>{n.fill(1),i.fill(0),s=0},a=(...e)=>r(i,n,...e),c=(e=k(0))=>{i=a(N([0]),e),n=a(),0!==e.length&&(i=a(N([1]),e),n=a())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const r=[];while(e<t){n=a();const t=n.slice();r.push(t),e+=n.length}return _(...r)},l=(e,t)=>{let r;o(),c(e);while(!(r=t(u())))c();return o(),r};return l}const T={bigint:e=>"bigint"===typeof e,function:e=>"function"===typeof e,boolean:e=>"boolean"===typeof e,string:e=>"string"===typeof e,stringOrUint8Array:e=>"string"===typeof e||s(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"===typeof e&&Number.isSafeInteger(e.outputLen)};function R(e,t,r={}){const n=(t,r,n)=>{const i=T[r];if("function"!==typeof i)throw new Error("invalid validator function");const s=e[t];if((!n||void 0!==s)&&!i(s,e))throw new Error("param "+String(t)+" is invalid. Expected "+r+", got "+s)};for(const[i,s]of Object.entries(t))n(i,s,!1);for(const[i,s]of Object.entries(r))n(i,s,!0);return e}function x(e){const t=new WeakMap;return(r,...n)=>{const i=t.get(r);if(void 0!==i)return i;const s=e(r,...n);return t.set(r,s),s}}},75731:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(33590);n.__exportStar(r(88701),t),n.__exportStar(r(61464),t),n.__exportStar(r(72049),t),n.__exportStar(r(78725),t)},75747:function(e,t,r){"use strict";r.d(t,{kl:function(){return o.kl},sX:function(){return a}});var n=r(81753),i=r(41171),s=r(22438),o=r(51900);function a(e){return new i._({...e,sdkVersion:n.w.generateSdkVersion(e.adapters??[],"html",s.i)})}},75758:function(e,t,r){"use strict";r.d(t,{L:function(){return s}});var n=r(80955),i=r(53291);const s={ConnectorExplorerIds:{[n.o.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[n.o.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[n.o.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[n.o.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[n.o.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[i.o.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[i.o.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[i.o.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[i.o.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[i.o.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[i.o.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[i.o.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[i.o.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[i.o.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[i.o.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[i.o.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[n.o.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[n.o.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[n.o.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[n.o.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[n.o.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[n.o.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[n.o.CONNECTOR_ID.INJECTED]:"Browser Wallet",[n.o.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[n.o.CONNECTOR_ID.COINBASE]:"Coinbase",[n.o.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[n.o.CONNECTOR_ID.LEDGER]:"Ledger",[n.o.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[n.o.CONNECTOR_ID.INJECTED]:"INJECTED",[n.o.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[n.o.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[n.o.CONNECTOR_ID.AUTH]:"AUTH"},WalletConnectRpcChainIds:[1,5,11155111,10,420,42161,421613,137,80001,42220,1313161554,1313161555,56,97,43114,43113,100,8453,84531,7777777,999,324,280]}},76045:function(e,t,r){"use strict";r.d(t,{_:function(){return U}});r(44114),r(18111),r(22489),r(20116),r(30531),r(7588),r(61701),r(18237),r(13579),r(17642),r(58004),r(33853),r(45876),r(32475),r(15024),r(31698);var n=r(12745),i=r(80955),s=r(59761),o=r(46104),a=r(37903),c=r(65642),u=r(58843),l=r(64529),h=r(96577),d=r(25638),p=r(81653),f=r(39190),g=r(94732),m=r(78134),y=r(32330),w=r(65768),b=r(81753),v=r(68174),_=r(31843),E=r(19349),A=r(20169),I=r(14210),S=r(80347),C=r(96316),k=r(68237),N=r(19816),O=r(15991),T=r(53291),R=r(2843),x=r(53528),P=r(66813),M=r(29871),B=r(51900);class U{constructor(e){this.chainNamespaces=[],this.reportedAlertErrors={},this.getCaipNetwork=(e,t)=>{if(e){const r=a.W.getNetworkData(e)?.requestedCaipNetworks?.find((e=>e.id===t));if(r)return r;const n=a.W.getNetworkData(e)?.caipNetwork;return n||a.W.getRequestedCaipNetworks(e).filter((t=>t.chainNamespace===e))?.[0]}return a.W.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const e=this.getCaipNetwork();if(e)return e.id},this.getCaipNetworks=e=>a.W.getCaipNetworks(e),this.getActiveChainNamespace=()=>a.W.state.activeChain,this.setRequestedCaipNetworks=(e,t)=>{a.W.setRequestedCaipNetworks(e,t)},this.getApprovedCaipNetworkIds=()=>a.W.getAllApprovedCaipNetworkIds(),this.getCaipAddress=e=>a.W.state.activeChain!==e&&e?a.W.getAccountProp("caipAddress",e):a.W.state.activeCaipAddress,this.setClientId=e=>{c.T.setClientId(e)},this.getProvider=e=>P.A.getProvider(e),this.getProviderType=e=>P.A.getProviderId(e),this.getPreferredAccountType=e=>u.U.state.preferredAccountTypes?.[e],this.setCaipAddress=(e,t)=>{u.U.setCaipAddress(e,t)},this.setBalance=(e,t,r)=>{u.U.setBalance(e,t,r)},this.setProfileName=(e,t)=>{u.U.setProfileName(e,t)},this.setProfileImage=(e,t)=>{u.U.setProfileImage(e,t)},this.setUser=(e,t)=>{u.U.setUser(e,t),l.H.state.enableEmbedded&&h.W.close()},this.resetAccount=e=>{u.U.resetAccount(e)},this.setCaipNetwork=e=>{a.W.setActiveCaipNetwork(e)},this.setCaipNetworkOfNamespace=(e,t)=>{a.W.setChainNetworkData(t,{caipNetwork:e})},this.setAllAccounts=(e,t)=>{u.U.setAllAccounts(e,t),l.H.setHasMultipleAddresses(e?.length>1)},this.setStatus=(e,t)=>{u.U.setStatus(e,t),d.a.isConnected()?p.i.setConnectionStatus("connected"):p.i.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=e=>a.W.getAccountProp("address",e),this.setConnectors=e=>{const t=[...d.a.state.allConnectors,...e];d.a.setConnectors(t)},this.fetchIdentity=e=>c.T.fetchIdentity(e),this.getReownName=e=>f.f.getNamesForAddress(e),this.getConnectors=()=>d.a.getConnectors(),this.getConnectorImage=e=>g.$.getConnectorImage(e),this.setConnectedWalletInfo=(e,t)=>{const r=P.A.getProviderId(t),n=e?{...e,type:r}:void 0;u.U.setConnectedWalletInfo(n,t)},this.getIsConnectedState=()=>Boolean(a.W.state.activeCaipAddress),this.addAddressLabel=(e,t,r)=>{u.U.addAddressLabel(e,t,r)},this.removeAddressLabel=(e,t)=>{u.U.removeAddressLabel(e,t)},this.getAddress=e=>a.W.state.activeChain!==e&&e?a.W.getAccountProp("address",e):u.U.state.address,this.setApprovedCaipNetworksData=e=>a.W.setApprovedCaipNetworksData(e),this.resetNetwork=e=>{a.W.resetNetwork(e)},this.addConnector=e=>{d.a.addConnector(e)},this.resetWcConnection=()=>{m.x.resetWcConnection()},this.setAddressExplorerUrl=(e,t)=>{u.U.setAddressExplorerUrl(e,t)},this.setSmartAccountDeployed=(e,t)=>{u.U.setSmartAccountDeployed(e,t)},this.setSmartAccountEnabledNetworks=(e,t)=>{a.W.setSmartAccountEnabledNetworks(e,t)},this.setPreferredAccountType=(e,t)=>{u.U.setPreferredAccountType(e,t)},this.setEIP6963Enabled=e=>{l.H.setEIP6963Enabled(e)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.initialize(e)}getChainNamespacesSet(e,t){const r=e?.map((e=>e.namespace)).filter((e=>Boolean(e)));if(r?.length)return[...new Set(r)];const n=t?.map((e=>e.chainNamespace));return[...new Set(n)]}async initialize(e){this.initControllers(e),await this.initChainAdapters(),await this.injectModalUi(),this.sendInitializeEvent(e),y.z.set({initialized:!0}),await this.syncExistingConnection(),(l.H.state.features?.email||Array.isArray(l.H.state.features?.socials)&&l.H.state.features?.socials.length>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){const e=await w.N.fetchAllowedOrigins();if(e&&b.w.isClient()){const t=window.location.origin,r=B.kl.isOriginAllowed(t,e,B.E1.DEFAULT_ALLOWED_ANCESTORS);r||v.h.open(N.R.ALERT_ERRORS.INVALID_APP_CONFIGURATION,"error")}else v.h.open(N.R.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}sendInitializeEvent(e){const{...t}=e;delete t.adapters,delete t.universalProvider,_.E.sendEvent({type:"track",event:"INITIALIZE",properties:{...t,networks:e.networks.map((e=>e.id)),siweConfig:{options:e.siweConfig?.options||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&E.W.setThemeMode(e.themeMode),e.themeVariables&&E.W.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");a.W.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const t=this.getDefaultNetwork();t&&a.W.setActiveCaipNetwork(t)}initializeConnectionController(e){m.x.setWcBasic(e.basic??!1)}initializeConnectorController(){d.a.initialize(this.chainNamespaces)}initializeOptionsController(e){l.H.setDebug(!1!==e.debug),l.H.setEnableWalletConnect(!1!==e.enableWalletConnect),l.H.setEnableWalletGuide(!1!==e.enableWalletGuide),l.H.setEnableWallets(!1!==e.enableWallets),l.H.setEIP6963Enabled(!1!==e.enableEIP6963),l.H.setEnableNetworkSwitch(!1!==e.enableNetworkSwitch),l.H.setEnableAuthLogger(!1!==e.enableAuthLogger),l.H.setCustomRpcUrls(e.customRpcUrls),l.H.setSdkVersion(e.sdkVersion),l.H.setProjectId(e.projectId),l.H.setEnableEmbedded(e.enableEmbedded),l.H.setAllWallets(e.allWallets),l.H.setIncludeWalletIds(e.includeWalletIds),l.H.setExcludeWalletIds(e.excludeWalletIds),l.H.setFeaturedWalletIds(e.featuredWalletIds),l.H.setTokens(e.tokens),l.H.setTermsConditionsUrl(e.termsConditionsUrl),l.H.setPrivacyPolicyUrl(e.privacyPolicyUrl),l.H.setCustomWallets(e.customWallets),l.H.setFeatures(e.features),l.H.setAllowUnsupportedChain(e.allowUnsupportedChain),l.H.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),l.H.setDefaultAccountTypes(e.defaultAccountTypes);const t=p.i.getPreferredAccountTypes(),r={...l.H.state.defaultAccountTypes,...t};u.U.setPreferredAccountTypes(r);const n=this.getDefaultMetaData();if(!e.metadata&&n&&(e.metadata=n),l.H.setMetadata(e.metadata),l.H.setDisableAppend(e.disableAppend),l.H.setEnableEmbedded(e.enableEmbedded),l.H.setSIWX(e.siwx),!e.projectId)return void v.h.open(N.R.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");const s=e.adapters?.find((e=>e.namespace===i.o.CHAIN.EVM));if(s&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");l.H.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){return"undefined"!==typeof window&&"undefined"!==typeof document?{name:document.getElementsByTagName("title")?.[0]?.textContent||"",description:document.querySelector('meta[property="og:description"]')?.content||"",url:window.location.origin,icons:[document.querySelector('link[rel~="icon"]')?.href||""]}:null}setUnsupportedNetwork(e){const t=this.getActiveChainNamespace();if(t){const r=O.R.getUnsupportedNetwork(`${t}:${e}`);a.W.setActiveCaipNetwork(r)}}getDefaultNetwork(){return O.R.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,t){const r=O.R.extendCaipNetwork(e,{customNetworkImageUrls:t.chainImages,projectId:t.projectId});return r}extendCaipNetworks(e){const t=O.R.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId});return t}extendDefaultCaipNetwork(e){const t=e.networks.find((t=>t.id===e.defaultNetwork?.id)),r=t?O.R.extendCaipNetwork(t,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0;return r}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{const e=a.W.state.activeChain,t=this.getAdapter(e),r=this.getCaipNetwork(e)?.id;if(!t)throw new Error("Adapter not found");const n=await t.connectWalletConnect(r);this.close(),this.setClientId(n?.clientId||null),p.i.setConnectedNamespaces([...a.W.state.chains.keys()]),this.chainNamespaces.forEach((e=>{d.a.setConnectorId(T.o.CONNECTOR_TYPE_WALLET_CONNECT,e)})),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:t,type:r,provider:n,chain:i,caipNetwork:s})=>{const o=a.W.state.activeChain,c=i||o,u=this.getAdapter(c);if(i&&i!==o&&!s){const e=this.getCaipNetworks().find((e=>e.chainNamespace===i));e&&this.setCaipNetwork(e)}if(!u)throw new Error("Adapter not found");const l=this.getCaipNetwork(c),h=await u.connect({id:e,info:t,type:r,provider:n,chainId:s?.id||l?.id,rpcUrl:s?.rpcUrls?.default?.http?.[0]||l?.rpcUrls?.default?.http?.[0]});if(!h)return;p.i.addConnectedNamespace(c),this.syncProvider({...h,chainNamespace:c});const{accounts:d}=await u.getAccounts({namespace:c,id:e});this.setAllAccounts(d,c),this.setStatus("connected",c),this.syncConnectedWalletInfo(c)},reconnectExternal:async({id:e,info:t,type:r,provider:n})=>{const i=a.W.state.activeChain,s=this.getAdapter(i);s?.reconnect&&(await(s?.reconnect({id:e,info:t,type:r,provider:n,chainId:this.getCaipNetwork()?.id})),p.i.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnect:async e=>{const t=e||a.W.state.activeChain,r=this.getAdapter(t),n=P.A.getProvider(t),i=P.A.getProviderId(t);await(r?.disconnect({provider:n,providerType:i})),p.i.removeConnectedNamespace(t),P.A.resetChain(t),this.setUser(void 0,t),this.setStatus("disconnected",t),this.setConnectedWalletInfo(void 0,t)},checkInstalled:e=>e?e.some((e=>Boolean(window.ethereum?.[String(e)]))):Boolean(window.ethereum),signMessage:async e=>{const t=this.getAdapter(a.W.state.activeChain),r=await(t?.signMessage({message:e,address:u.U.state.address,provider:P.A.getProvider(a.W.state.activeChain)}));return r?.signature||""},sendTransaction:async e=>{const t=e.chainNamespace;if(A.oU.SEND_SUPPORTED_NAMESPACES.includes(t)){const r=this.getAdapter(a.W.state.activeChain),n=P.A.getProvider(t),i=await(r?.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:n}));return i?.hash||""}return""},estimateGas:async e=>{if(e.chainNamespace===i.o.CHAIN.EVM){const t=this.getAdapter(a.W.state.activeChain),r=P.A.getProvider(a.W.state.activeChain),n=this.getCaipNetwork();if(!n)throw new Error("CaipNetwork is undefined");const i=await(t?.estimateGas({...e,provider:r,caipNetwork:n}));return i?.gas||0n}return 0n},getEnsAvatar:async()=>(await this.syncIdentity({address:u.U.state.address,chainId:Number(this.getCaipNetwork()?.id),chainNamespace:a.W.state.activeChain}),u.U.state.profileImage||!1),getEnsAddress:async e=>await B.kl.resolveReownName(e),writeContract:async e=>{const t=this.getAdapter(a.W.state.activeChain),r=this.getCaipNetwork(),n=this.getCaipAddress(),i=P.A.getProvider(a.W.state.activeChain);if(!r||!n)throw new Error("CaipNetwork or CaipAddress is undefined");const s=await(t?.writeContract({...e,caipNetwork:r,provider:i,caipAddress:n}));return s?.hash},parseUnits:(e,t)=>{const r=this.getAdapter(a.W.state.activeChain);return r?.parseUnits({value:e,decimals:t})??0n},formatUnits:(e,t)=>{const r=this.getAdapter(a.W.state.activeChain);return r?.formatUnits({value:e,decimals:t})??"0"},getCapabilities:async e=>{const t=this.getAdapter(a.W.state.activeChain);return await(t?.getCapabilities(e))},grantPermissions:async e=>{const t=this.getAdapter(a.W.state.activeChain);return await(t?.grantPermissions(e))},revokePermissions:async e=>{const t=this.getAdapter(a.W.state.activeChain);return t?.revokePermissions?await t.revokePermissions(e):"0x"},walletGetAssets:async e=>{const t=this.getAdapter(a.W.state.activeChain);return await(t?.walletGetAssets(e))??{}}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},m.x.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){const e=P.A.getProviderId(a.W.state.activeChain);if(e===T.o.CONNECTOR_TYPE_WALLET_CONNECT){const e=this.universalProvider?.session?.namespaces;return{supportsAllNetworks:"MetaMask Wallet"===this.universalProvider?.session?.peer?.metadata.name,approvedCaipNetworkIds:this.getChainsFromNamespaces(e)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const t=e.chainNamespace,r=this.getAddressByChainNamespace(e.chainNamespace);if(r){const r=P.A.getProvider(t),n=P.A.getProviderId(t);if(e.chainNamespace===a.W.state.activeChain){const i=this.getAdapter(t);await(i?.switchNetwork({caipNetwork:e,provider:r,providerType:n}))}else if(this.setCaipNetwork(e),n===T.o.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const r=this.getAddressByChainNamespace(t);r&&this.syncAccount({address:r,chainId:e.id,chainNamespace:t})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap((e=>{const t=e.chains||[],r=e.accounts.map((e=>{const{chainId:t,chainNamespace:r}=s.C.parseCaipAddress(e);return`${r}:${t}`}));return Array.from(new Set([...t,...r]))}))}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce(((t,r)=>{const n=e?.find((e=>e.namespace===r));return n?(n.construct({namespace:r,projectId:this.options?.projectId,networks:this.getCaipNetworks()}),t[r]=n):t[r]=new M.n({namespace:r,networks:this.getCaipNetworks()}),t}),{})}async initChainAdapter(e){this.onConnectors(e),this.listenAdapter(e),this.chainAdapters?.[e].syncConnectors(this.options,this),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map((async e=>{await this.initChainAdapter(e)})))}onConnectors(e){const t=this.getAdapter(e);t?.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const t=this.getAdapter(e);if(!t)return;const r=p.i.getConnectionStatus();"connected"===r?this.setStatus("connecting",e):"disconnected"===r?(p.i.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),t.on("switchNetwork",(({address:t,chainId:r})=>{const n=this.getCaipNetworks().find((e=>e.id===r||e.caipNetworkId===r)),i=a.W.state.activeChain===e,s=a.W.getAccountProp("address",e);if(n){const r=i&&t?t:s;r&&this.syncAccount({address:r,chainId:n.id,chainNamespace:e})}else this.setUnsupportedNetwork(r)})),t.on("disconnect",this.disconnect.bind(this,e)),t.on("pendingTransactions",(()=>{const e=u.U.state.address,t=a.W.state.activeCaipNetwork;e&&t?.id&&this.updateNativeBalance(e,t.id,t.chainNamespace)})),t.on("accountChanged",(({address:t,chainId:r})=>{const n=a.W.state.activeChain===e;n&&r?this.syncAccount({address:t,chainId:r,chainNamespace:e}):n&&a.W.state.activeCaipNetwork?.id?this.syncAccount({address:t,chainId:a.W.state.activeCaipNetwork?.id,chainNamespace:e}):this.syncAccountInfo(t,r,e),this.syncAllAccounts(e)}))}async createUniversalProviderForAdapter(e){await this.getUniversalProvider(),this.universalProvider&&this.chainAdapters?.[e]?.setUniversalProvider?.(this.universalProvider)}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map((e=>this.syncNamespaceConnection(e))))}async syncNamespaceConnection(e){try{const t=d.a.getConnectorId(e);switch(this.setStatus("connecting",e),t){case i.o.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case i.o.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(t){console.warn("AppKit couldn't sync existing connection",t),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){const t=this.getAdapter(e),r=d.a.getConnectorId(e),n=this.getCaipNetwork(e),i=d.a.getConnectors(e).find((e=>e.id===r));try{if(!t||!i)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!n?.id)throw new Error("CaipNetwork not found");const r=await(t?.syncConnection({namespace:e,id:i.id,chainId:n.id,rpcUrl:n?.rpcUrls?.default?.http?.[0]}));if(r){const n=await(t?.getAccounts({namespace:e,id:i.id}));n&&n.accounts.length>0?this.setAllAccounts(n.accounts,e):this.setAllAccounts([b.w.createAccount(e,r.address,"eoa")],e),this.syncProvider({...r,chainNamespace:e}),await this.syncAccount({...r,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch(s){this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){const e=this.chainNamespaces.map((async e=>{const t=this.getAdapter(e),r=this.universalProvider?.session?.namespaces?.[e]?.accounts||[],n=a.W.state.activeCaipNetwork?.id,o=r.find((e=>{const{chainId:t}=s.C.parseCaipAddress(e);return t===n?.toString()}))||r[0];if(o){const r=s.C.validateCaipAddress(o),{chainId:n,address:c}=s.C.parseCaipAddress(r);if(P.A.setProviderId(e,T.o.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&a.W.state.activeCaipNetwork&&t?.namespace!==i.o.CHAIN.EVM){const r=t?.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:a.W.state.activeCaipNetwork});P.A.setProvider(e,r)}else P.A.setProvider(e,this.universalProvider);d.a.setConnectorId(i.o.CONNECTOR_ID.WALLET_CONNECT,e),p.i.addConnectedNamespace(e),this.syncWalletConnectAccounts(e),await this.syncAccount({address:c,chainId:n,chainNamespace:e})}else this.setStatus("disconnected",e);this.syncConnectedWalletInfo(e),await a.W.setApprovedCaipNetworksData(e)}));await Promise.all(e)}syncWalletConnectAccounts(e){const t=this.universalProvider?.session?.namespaces?.[e]?.accounts?.map((e=>{const{address:t}=s.C.parseCaipAddress(e);return t})).filter(((e,t,r)=>r.indexOf(e)===t));t&&this.setAllAccounts(t.map((t=>b.w.createAccount(e,t,"bip122"===e?"payment":"eoa"))),e)}syncProvider({type:e,provider:t,id:r,chainNamespace:n}){P.A.setProviderId(n,e),P.A.setProvider(n,t),d.a.setConnectorId(r,n)}async syncAllAccounts(e){const t=d.a.getConnectorId(e);if(!t)return;const r=this.getAdapter(e),n=await(r?.getAccounts({namespace:e,id:t}));n&&n.accounts.length>0&&this.setAllAccounts(n.accounts,e)}async syncAccount(e){const t=e.chainNamespace===a.W.state.activeChain,r=a.W.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:n,chainId:o,chainNamespace:c}=e,{chainId:h}=p.i.getActiveNetworkProps(),d=o||h,f=a.W.state.activeCaipNetwork?.name===i.o.UNSUPPORTED_NETWORK_NAME,g=a.W.getNetworkProp("supportsAllNetworks",c);if(this.setStatus("connected",c),(!f||g)&&d){let e=this.getCaipNetworks().find((e=>e.id.toString()===d.toString())),o=this.getCaipNetworks().find((e=>e.chainNamespace===c));if(!g&&!e&&!o){const t=this.getApprovedCaipNetworkIds()||[],r=t.find((e=>s.C.parseCaipNetworkId(e)?.chainId===d.toString())),n=t.find((e=>s.C.parseCaipNetworkId(e)?.chainNamespace===c));e=this.getCaipNetworks().find((e=>e.caipNetworkId===r)),o=this.getCaipNetworks().find((e=>e.caipNetworkId===n||"deprecatedCaipNetworkId"in e&&e.deprecatedCaipNetworkId===n))}const h=e||o;h?.chainNamespace===a.W.state.activeChain?l.H.state.enableNetworkSwitch&&!l.H.state.allowUnsupportedChain&&a.W.state.activeCaipNetwork?.name===i.o.UNSUPPORTED_NETWORK_NAME?a.W.showUnsupportedChainUI():this.setCaipNetwork(h):t||r&&this.setCaipNetworkOfNamespace(r,c),this.syncConnectedWalletInfo(c),R.y.isLowerCaseMatch(n,u.U.state.address)||this.syncAccountInfo(n,h?.id,c),t?await this.syncBalance({address:n,chainId:h?.id,chainNamespace:c}):await this.syncBalance({address:n,chainId:r?.id,chainNamespace:c})}}async syncAccountInfo(e,t,r){const n=this.getCaipAddress(r),i=t||n?.split(":")[1];if(!i)return;const s=`${r}:${i}:${e}`;this.setCaipAddress(s,r),await this.syncIdentity({address:e,chainId:i,chainNamespace:r})}async syncReownName(e,t){try{const r=await this.getReownName(e);if(r[0]){const e=r[0];this.setProfileName(e.name,t)}else this.setProfileName(null,t)}catch{this.setProfileName(null,t)}}syncConnectedWalletInfo(e){const t=d.a.getConnectorId(e),r=P.A.getProviderId(e);if(r===T.o.CONNECTOR_TYPE_ANNOUNCED||r===T.o.CONNECTOR_TYPE_INJECTED){if(t){const r=this.getConnectors().find((e=>e.id===t));if(r){const{info:t,name:n,imageUrl:i}=r,s=i||this.getConnectorImage(r);this.setConnectedWalletInfo({name:n,icon:s,...t},e)}}}else if(r===T.o.CONNECTOR_TYPE_WALLET_CONNECT){const t=P.A.getProvider(e);t?.session&&this.setConnectedWalletInfo({...t.session.peer.metadata,name:t.session.peer.metadata.name,icon:t.session.peer.metadata.icons?.[0]},e)}else if(t)if(t===i.o.CONNECTOR_ID.COINBASE){const t=this.getConnectors().find((e=>e.id===i.o.CONNECTOR_ID.COINBASE));this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(t)},e)}else this.setConnectedWalletInfo({name:t},e)}async syncBalance(e){const t=o.L.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find((t=>t.id.toString()===e.chainId?.toString()));t&&e.chainId&&await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async updateNativeBalance(e,t,r){const n=this.getAdapter(r),i=a.W.getCaipNetworkByNamespace(r,t);if(n){const s=await n.getBalance({address:e,chainId:t,caipNetwork:i,tokens:this.options.tokens});this.setBalance(s.balance,s.symbol,r)}}async initializeUniversalAdapter(){const e=x.r.createLogger(((e,...t)=>{e&&this.handleAlertError(e),console.error(...t)})),t={projectId:this.options?.projectId,metadata:{name:this.options?.metadata?this.options?.metadata.name:"",description:this.options?.metadata?this.options?.metadata.description:"",url:this.options?.metadata?this.options?.metadata.url:"",icons:this.options?.metadata?this.options?.metadata.icons:[""]},logger:e};l.H.setManualWCControl(Boolean(this.options?.manualWCControl)),this.universalProvider=this.options.universalProvider??await n.A.init(t),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",(e=>{m.x.setUri(e)})),this.universalProvider.on("connect",m.x.finalizeWcConnection),this.universalProvider.on("disconnect",(()=>{this.chainNamespaces.forEach((e=>{this.resetAccount(e)})),m.x.resetWcConnection()})),this.universalProvider.on("chainChanged",(e=>{const t=this.getCaipNetworks().find((t=>t.id==e)),r=this.getCaipNetwork();t?r?.id!==t?.id&&this.setCaipNetwork(t):this.setUnsupportedNetwork(e)})),this.universalProvider.on("session_event",(e=>{if(B.kl.isSessionEventData(e)){const{name:t,data:r}=e.params.event;"accountsChanged"===t&&Array.isArray(r)&&b.w.isCaipAddress(r[0])&&this.syncAccount(s.C.parseCaipAddress(r[0]))}})))}createUniversalProvider(){return!this.universalProviderInitPromise&&b.w.isClient()&&this.options?.projectId&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){_.E.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const t=Object.entries(N.R.UniversalProviderErrors).find((([,{message:t}])=>e.message.includes(t))),[r,n]=t??[],{message:i,alertErrorKey:s}=n??{};if(r&&i&&!this.reportedAlertErrors[r]){const e=N.R.ALERT_ERRORS[s];e&&(v.h.open(e,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){if(e)return this.chainAdapters?.[e]}createAdapter(e){if(!e)return;const t=e.namespace;if(!t)return;this.createClients();const r=e;r.namespace=t,r.construct({namespace:t,projectId:this.options?.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(t)||this.chainNamespaces.push(t),this.chainAdapters&&(this.chainAdapters[t]=r)}async open(e){if(await this.injectModalUi(),e?.uri&&m.x.setUri(e.uri),e?.arguments)switch(e?.view){case"Swap":return h.W.open({...e,data:{swap:e.arguments}});default:}return h.W.open(e)}async close(e=!1){await this.injectModalUi(),h.W.close(e)}setLoading(e,t){h.W.setLoading(e,t)}async disconnect(e){await m.x.disconnect(e)}getSIWX(){return l.H.state.siwx}getError(){return""}getChainId(){return a.W.state.activeCaipNetwork?.id}async switchNetwork(e){const t=this.getCaipNetworks().find((t=>t.id===e.id));t?await a.W.switchActiveNetwork(t):v.h.open(N.R.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error")}getWalletProvider(){return a.W.state.activeChain?P.A.state.providers[a.W.state.activeChain]:null}getWalletProviderType(){return P.A.getProviderId(a.W.state.activeChain)}subscribeProviders(e){return P.A.subscribeProviders(e)}getThemeMode(){return E.W.state.themeMode}getThemeVariables(){return E.W.state.themeVariables}setThemeMode(e){E.W.setThemeMode(e),(0,k.JX)(E.W.state.themeMode)}setTermsConditionsUrl(e){l.H.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){l.H.setPrivacyPolicyUrl(e)}setThemeVariables(e){E.W.setThemeVariables(e),(0,k.ds)(E.W.state.themeVariables)}subscribeTheme(e){return E.W.subscribe(e)}getWalletInfo(){return u.U.state.connectedWalletInfo}getAccount(e){const t=d.a.getAuthConnector(e),r=a.W.getAccountData(e),n=a.W.state.activeChain,s=p.i.getConnectedConnectorId(e);if(r)return{allAccounts:r.allAccounts,caipAddress:r.caipAddress,address:b.w.getPlainAddress(r.caipAddress),isConnected:Boolean(r.caipAddress),status:r.status,embeddedWalletInfo:t&&s===i.o.CONNECTOR_ID.AUTH?{user:r.user?{...r.user,username:p.i.getConnectedSocialUsername()}:void 0,authProvider:r.socialProvider||"email",accountType:r.preferredAccountTypes?.[e||n],isSmartAccountDeployed:Boolean(r.smartAccountDeployed)}:void 0}}subscribeAccount(e,t){const r=()=>{const r=this.getAccount(t);r&&e(r)};t?a.W.subscribeChainProp("accountState",r,t):a.W.subscribe(r),d.a.subscribe(r)}subscribeNetwork(e){return a.W.subscribe((({activeCaipNetwork:t})=>{e({caipNetwork:t,chainId:t?.id,caipNetworkId:t?.caipNetworkId})}))}subscribeWalletInfo(e){return u.U.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){u.U.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){a.W.subscribeKey("activeCaipNetwork",e)}getState(){return y.z.state}subscribeState(e){return y.z.subscribe(e)}showErrorMessage(e){I.P.showError(e)}showSuccessMessage(e){I.P.showSuccess(e)}getEvent(){return{..._.E.state}}subscribeEvents(e){return _.E.subscribe(e)}replace(e){S.I.replace(e)}redirect(e){S.I.push(e)}popTransactionStack(e){S.I.popTransactionStack(e)}isOpen(){return h.W.state.open}isTransactionStackEmpty(){return 0===S.I.state.transactionStack.length}isTransactionShouldReplaceView(){return S.I.state.transactionStack[S.I.state.transactionStack.length-1]?.replace}static getInstance(){return this.instance}updateFeatures(e){l.H.setFeatures(e)}updateOptions(e){const t=l.H.state||{},r={...t,...e};l.H.setOptions(r)}setConnectMethodsOrder(e){l.H.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){l.H.setWalletFeaturesOrder(e)}setCollapseWallets(e){l.H.setCollapseWallets(e)}setSocialsOrder(e){l.H.setSocialsOrder(e)}getConnectMethodsOrder(){return C.Aj.getConnectOrderMethod(l.H.state.features,d.a.getConnectors())}addNetwork(e,t){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(t,this.options);this.getCaipNetworks().find((e=>e.id===r.id))||a.W.addNetwork(r)}removeNetwork(e,t){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.getCaipNetworks().find((e=>e.id===t));r&&a.W.removeNetwork(e,t)}}},76046:function(e,t,r){"use strict";r.d(t,{JX:function(){return u},RF:function(){return c},W5:function(){return d},ck:function(){return f},ds:function(){return l},fD:function(){return p}});var n=r(81238),i=r(9051);let s,o,a;function c(e,t){s=document.createElement("style"),o=document.createElement("style"),a=document.createElement("style"),s.textContent=h(e).core.cssText,o.textContent=h(e).dark.cssText,a.textContent=h(e).light.cssText,document.head.appendChild(s),document.head.appendChild(o),document.head.appendChild(a),u(t)}function u(e){o&&a&&("light"===e?(o.removeAttribute("media"),a.media="enabled"):(a.removeAttribute("media"),o.media="enabled"))}function l(e){s&&o&&a&&(s.textContent=h(e).core.cssText,o.textContent=h(e).dark.cssText,a.textContent=h(e).light.cssText)}function h(e){return{core:n.AH`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${(0,n.iz)(e?.["--w3m-color-mix-strength"]?`${e["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${(0,n.iz)(e?.["--w3m-font-family"]||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${(0,n.iz)(e?.["--w3m-font-size-master"]||"10px")};
        --w3m-border-radius-master: ${(0,n.iz)(e?.["--w3m-border-radius-master"]||"4px")};
        --w3m-z-index: ${(0,n.iz)(e?.["--w3m-z-index"]||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:n.AH`
      :root {
        --w3m-color-mix: ${(0,n.iz)(e?.["--w3m-color-mix"]||"#fff")};
        --w3m-accent: ${(0,n.iz)((0,i.o)(e,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${(0,n.iz)((0,i.o)(e,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:n.AH`
      :root {
        --w3m-color-mix: ${(0,n.iz)(e?.["--w3m-color-mix"]||"#000")};
        --w3m-accent: ${(0,n.iz)((0,i.o)(e,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${(0,n.iz)((0,i.o)(e,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const d=n.AH`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,p=n.AH`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,f=n.AH`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`},76918:function(e,t,r){"use strict";r.d(t,{B4:function(){return f},CQ:function(){return _},CW:function(){return v},Ei:function(){return d},F8:function(){return E},P5:function(){return p},TH:function(){return A},Vl:function(){return w},Vr:function(){return b},WM:function(){return g},WQ:function(){return y},im:function(){return m},jm:function(){return c},lD:function(){return o},qh:function(){return h},rE:function(){return u},ry:function(){return l},xn:function(){return a}});const n=BigInt(2**32-1),i=BigInt(32);function s(e,t=!1){return t?{h:Number(e&n),l:Number(e>>i&n)}:{h:0|Number(e>>i&n),l:0|Number(e&n)}}function o(e,t=!1){const r=e.length;let n=new Uint32Array(r),i=new Uint32Array(r);for(let o=0;o<r;o++){const{h:r,l:a}=s(e[o],t);[n[o],i[o]]=[r,a]}return[n,i]}const a=(e,t,r)=>e>>>r,c=(e,t,r)=>e<<32-r|t>>>r,u=(e,t,r)=>e>>>r|t<<32-r,l=(e,t,r)=>e<<32-r|t>>>r,h=(e,t,r)=>e<<64-r|t>>>r-32,d=(e,t,r)=>e>>>r-32|t<<64-r,p=(e,t,r)=>e<<r|t>>>32-r,f=(e,t,r)=>t<<r|e>>>32-r,g=(e,t,r)=>t<<r-32|e>>>64-r,m=(e,t,r)=>e<<r-32|t>>>64-r;function y(e,t,r,n){const i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:0|i}}const w=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),b=(e,t,r,n)=>t+r+n+(e/2**32|0)|0,v=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),_=(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,E=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0),A=(e,t,r,n,i,s)=>t+r+n+i+s+(e/2**32|0)|0},77888:function(e,t,r){"use strict";r.d(t,{R:function(){return w}});r(18111),r(20116);var n=r(69983),i=r(28356),s=r(69759),o=r(48153),a=r(1555),c=r(20169),u=r(81753),l=r(44970),h=r(58843),d=r(37903),p=r(78134),f=r(31843),g=r(80347),m=r(14210);const y=(0,n.BX)({tokenBalances:[],loading:!1}),w={state:y,subscribe(e){return(0,n.B1)(y,(()=>e(y)))},subscribeKey(e,t){return(0,i.u$)(y,e,t)},setToken(e){e&&(y.token=(0,n.KR)(e))},setTokenAmount(e){y.sendTokenAmount=e},setReceiverAddress(e){y.receiverAddress=e},setReceiverProfileImageUrl(e){y.receiverProfileImageUrl=e},setReceiverProfileName(e){y.receiverProfileName=e},setNetworkBalanceInUsd(e){y.networkBalanceInUSD=e},setLoading(e){y.loading=e},async sendToken(){try{switch(this.setLoading(!0),d.W.state.activeCaipNetwork?.chainNamespace){case"eip155":return void await this.sendEvmToken();case"solana":return void await this.sendSolanaToken();default:throw new Error("Unsupported chain")}}finally{this.setLoading(!1)}},async sendEvmToken(){const e=d.W.state.activeChain,t=h.U.state.preferredAccountTypes?.[e];if(!this.state.sendTokenAmount||!this.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!this.state.token)throw new Error("A token is required");this.state.token?.address?(f.E.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:t===a.Vl.ACCOUNT_TYPES.SMART_ACCOUNT,token:this.state.token.address,amount:this.state.sendTokenAmount,network:d.W.state.activeCaipNetwork?.caipNetworkId||""}}),await this.sendERC20Token({receiverAddress:this.state.receiverAddress,tokenAddress:this.state.token.address,sendTokenAmount:this.state.sendTokenAmount,decimals:this.state.token.quantity.decimals})):(f.E.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:t===a.Vl.ACCOUNT_TYPES.SMART_ACCOUNT,token:this.state.token.symbol||"",amount:this.state.sendTokenAmount,network:d.W.state.activeCaipNetwork?.caipNetworkId||""}}),await this.sendNativeToken({receiverAddress:this.state.receiverAddress,sendTokenAmount:this.state.sendTokenAmount,decimals:this.state.token.quantity.decimals}))},async fetchTokenBalance(e){y.loading=!0;const t=d.W.state.activeCaipNetwork?.caipNetworkId,r=d.W.state.activeCaipNetwork?.chainNamespace,n=d.W.state.activeCaipAddress,i=n?u.w.getPlainAddress(n):void 0;if(y.lastRetry&&!u.w.isAllowedRetry(y.lastRetry,30*c.oU.ONE_SEC_MS))return y.loading=!1,[];try{if(i&&t&&r){const e=await l.t.getMyTokensWithBalance();return y.tokenBalances=e,y.lastRetry=void 0,e}}catch(s){y.lastRetry=Date.now(),e?.(s),m.P.showError("Token Balance Unavailable")}finally{y.loading=!1}return[]},fetchNetworkBalance(){if(0===y.tokenBalances.length)return;const e=l.t.mapBalancesToSwapTokens(y.tokenBalances);if(!e)return;const t=e.find((e=>e.address===d.W.getActiveNetworkTokenAddress()));t&&(y.networkBalanceInUSD=t?s.S.multiply(t.quantity.numeric,t.price).toString():"0")},async sendNativeToken(e){const t=d.W.state.activeChain;g.I.pushTransactionStack({view:null,goBack:!1});const r=e.receiverAddress,n=h.U.state.address,i=p.x.parseUnits(e.sendTokenAmount.toString(),Number(e.decimals)),s="0x";await p.x.sendTransaction({chainNamespace:"eip155",to:r,address:n,data:s,value:i??BigInt(0)}),f.E.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:h.U.state.preferredAccountTypes?.[t]===a.Vl.ACCOUNT_TYPES.SMART_ACCOUNT,token:this.state.token?.symbol||"",amount:e.sendTokenAmount,network:d.W.state.activeCaipNetwork?.caipNetworkId||""}}),this.resetSend()},async sendERC20Token(e){g.I.pushTransactionStack({view:"Account",goBack:!1});const t=p.x.parseUnits(e.sendTokenAmount.toString(),Number(e.decimals));if(h.U.state.address&&e.sendTokenAmount&&e.receiverAddress&&e.tokenAddress){const r=u.w.getPlainAddress(e.tokenAddress);await p.x.writeContract({fromAddress:h.U.state.address,tokenAddress:r,args:[e.receiverAddress,t??BigInt(0)],method:"transfer",abi:o.v.getERC20Abi(r),chainNamespace:"eip155"}),this.resetSend()}},async sendSolanaToken(){if(!this.state.sendTokenAmount||!this.state.receiverAddress)throw new Error("An amount and receiver address are required");g.I.pushTransactionStack({view:"Account",goBack:!1}),await p.x.sendTransaction({chainNamespace:"solana",to:this.state.receiverAddress,value:this.state.sendTokenAmount}),this.resetSend(),h.U.fetchTokenBalance()},resetSend(){y.token=void 0,y.sendTokenAmount=void 0,y.receiverAddress=void 0,y.receiverProfileImageUrl=void 0,y.receiverProfileName=void 0,y.loading=!1,y.tokenBalances=[]}}},78134:function(e,t,r){"use strict";r.d(t,{x:function(){return y}});var n=r(69983),i=r(28356),s=r(81753),o=r(27309),a=r(81653),c=r(58843),u=r(37903),l=r(25638),h=r(31843),d=r(96577),p=r(80347),f=r(12607);const g=(0,n.BX)({wcError:!1,buffering:!1,status:"disconnected"});let m;const y={state:g,subscribeKey(e,t){return(0,i.u$)(g,e,t)},_getClient(){return g._client},setClient(e){g._client=(0,n.KR)(e)},async connectWalletConnect(){if(s.w.isTelegram()||s.w.isSafari()&&s.w.isIos()){if(m)return await m,void(m=void 0);if(!s.w.isPairingExpired(g?.wcPairingExpiry)){const e=g.wcUri;return void(g.wcUri=e)}m=this._getClient()?.connectWalletConnect?.().catch((()=>{})),this.state.status="connecting",await m,m=void 0,g.wcPairingExpiry=void 0,this.state.status="connected"}else await(this._getClient()?.connectWalletConnect?.())},async connectExternal(e,t,r=!0){await(this._getClient()?.connectExternal?.(e)),r&&u.W.setActiveNamespace(t)},async reconnectExternal(e){await(this._getClient()?.reconnectExternal?.(e));const t=e.chain||u.W.state.activeChain;t&&l.a.setConnectorId(e.id,t)},async setPreferredAccountType(e,t){d.W.setLoading(!0,u.W.state.activeChain);const r=l.a.getAuthConnector();r&&(c.U.setPreferredAccountType(e,t),await r.provider.setPreferredAccount(e),a.i.setPreferredAccountTypes(c.U.state.preferredAccountTypes??{[t]:e}),await this.reconnectExternal(r),d.W.setLoading(!1,u.W.state.activeChain),h.E.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:e,network:u.W.state.activeCaipNetwork?.caipNetworkId||""}}))},async signMessage(e){return this._getClient()?.signMessage(e)},parseUnits(e,t){return this._getClient()?.parseUnits(e,t)},formatUnits(e,t){return this._getClient()?.formatUnits(e,t)},async sendTransaction(e){return this._getClient()?.sendTransaction(e)},async getCapabilities(e){return this._getClient()?.getCapabilities(e)},async grantPermissions(e){return this._getClient()?.grantPermissions(e)},async walletGetAssets(e){return this._getClient()?.walletGetAssets(e)??{}},async estimateGas(e){return this._getClient()?.estimateGas(e)},async writeContract(e){return this._getClient()?.writeContract(e)},async getEnsAddress(e){return this._getClient()?.getEnsAddress(e)},async getEnsAvatar(e){return this._getClient()?.getEnsAvatar(e)},checkInstalled(e){return this._getClient()?.checkInstalled?.(e)||!1},resetWcConnection(){g.wcUri=void 0,g.wcPairingExpiry=void 0,g.wcLinking=void 0,g.recentWallet=void 0,g.status="disconnected",f.W.resetTransactions(),a.i.deleteWalletConnectDeepLink()},resetUri(){g.wcUri=void 0,g.wcPairingExpiry=void 0,m=void 0},finalizeWcConnection(){const{wcLinking:e,recentWallet:t}=y.state;e&&a.i.setWalletConnectDeepLink(e),t&&a.i.setAppKitRecent(t),h.E.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:e?"mobile":"qrcode",name:p.I.state.data?.wallet?.name||"Unknown"}})},setWcBasic(e){g.wcBasic=e},setUri(e){g.wcUri=e,g.wcPairingExpiry=s.w.getPairingExpiry()},setWcLinking(e){g.wcLinking=e},setWcError(e){g.wcError=e,g.buffering=!1},setRecentWallet(e){g.recentWallet=e},setBuffering(e){g.buffering=e},setStatus(e){g.status=e},async disconnect(e){try{d.W.setLoading(!0,e),await o.U.clearSessions(),await u.W.disconnect(e),d.W.setLoading(!1,e),l.a.setFilterByNamespace(void 0)}catch(t){throw new Error("Failed to disconnect")}}}},78244:function(e,t,r){"use strict";r.d(t,{A:function(){return n}});class n extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const t=super.get(e);return super.has(e)&&void 0!==t&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){const e=this.keys().next().value;e&&this.delete(e)}return this}}},78694:function(e,t,r){"use strict";r.d(t,{a:function(){return o}});var n=r(69983),i=r(28356);const s=(0,n.BX)({connection:null}),o={state:s,subscribeKey(e,t){return(0,i.u$)(s,e,t)},subscribe(e){return(0,n.B1)(s,(()=>e(s)))},setConnection(e){s.connection=(0,n.KR)(e)}}},78725:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(33590);n.__exportStar(r(27169),t),n.__exportStar(r(16092),t)},80347:function(e,t,r){"use strict";r.d(t,{I:function(){return h}});r(44114);var n=r(69983),i=r(28356),s=r(58843),o=r(37903),a=r(25638),c=r(96577),u=r(64529);const l=(0,n.BX)({view:"Connect",history:["Connect"],transactionStack:[]}),h={state:l,subscribeKey(e,t){return(0,i.u$)(l,e,t)},pushTransactionStack(e){l.transactionStack.push(e)},popTransactionStack(e){const t=l.transactionStack.pop();if(t)if(e)this.goBack(),t?.onCancel?.();else{if(t.goBack)this.goBack();else if(t.replace){const e=l.history,t=e.indexOf("ConnectingSiwe");t>0?this.goBackToIndex(t-1):(c.W.close(!0),l.history=[])}else t.view&&this.reset(t.view);t?.onSuccess?.()}},push(e,t){e!==l.view&&(l.view=e,l.history.push(e),l.data=t)},reset(e,t){l.view=e,l.history=[e],l.data=t},replace(e,t){const r=l.history.at(-1),n=r===e;n||(l.view=e,l.history[l.history.length-1]=e,l.data=t)},goBack(){const e=!o.W.state.activeCaipAddress&&"ConnectingFarcaster"===this.state.view;if(l.history.length>1&&!l.history.includes("UnsupportedChain")){l.history.pop();const[e]=l.history.slice(-1);e&&(l.view=e)}else c.W.close();l.data?.wallet&&(l.data.wallet=void 0),setTimeout((()=>{if(e){s.U.setFarcasterUrl(void 0,o.W.state.activeChain);const e=a.a.getAuthConnector();e?.provider?.reload();const t=(0,n.P9)(u.H.state);e?.provider?.syncDappData?.({metadata:t.metadata,sdkVersion:t.sdkVersion,projectId:t.projectId,sdkType:t.sdkType})}}),100)},goBackToIndex(e){if(l.history.length>1){l.history=l.history.slice(0,e+1);const[t]=l.history.slice(-1);t&&(l.view=t)}}}},80699:function(e,t,r){"use strict";r.d(t,{F:function(){return n.F}});var n=r(83131)},80771:function(e,t,r){"use strict";function n(e,{strict:t=!0}={}){return!!e&&("string"===typeof e&&(t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x")))}r.d(t,{q:function(){return n}})},80955:function(e,t,r){"use strict";r.d(t,{o:function(){return n}});const n={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:("undefined"!==typeof process?{NODE_ENV:"production",BASE_URL:""}["NEXT_PUBLIC_SECURE_SITE_ORIGIN"]:void 0)||"https://secure.walletconnect.org"}},81062:function(e,t,r){"use strict";r.d(t,{Xf:function(){return y},hT:function(){return m},hp:function(){return w}});r(44114),r(18111),r(7588),r(61701);var n=r(59383),i=r(75404);
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const s=BigInt(0),o=BigInt(1);function a(e,t){const r=t.negate();return e?r:t}function c(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function u(e,t){c(e,t);const r=Math.ceil(t/e)+1,n=2**(e-1),s=2**e,o=(0,i.OG)(e),a=BigInt(e);return{windows:r,windowSize:n,mask:o,maxNumber:s,shiftBy:a}}function l(e,t,r){const{windowSize:n,mask:i,maxNumber:s,shiftBy:a}=r;let c=Number(e&i),u=e>>a;c>n&&(c-=s,u+=o);const l=t*n,h=l+Math.abs(c)-1,d=0===c,p=c<0,f=t%2!==0,g=l;return{nextN:u,offset:h,isZero:d,isNeg:p,isNegF:f,offsetF:g}}function h(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach(((e,r)=>{if(!(e instanceof t))throw new Error("invalid point at index "+r)}))}function d(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach(((e,r)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+r)}))}const p=new WeakMap,f=new WeakMap;function g(e){return f.get(e)||1}function m(e,t){return{constTimeNegate:a,hasPrecomputes(e){return 1!==g(e)},unsafeLadder(t,r,n=e.ZERO){let i=t;while(r>s)r&o&&(n=n.add(i)),i=i.double(),r>>=o;return n},precomputeWindow(e,r){const{windows:n,windowSize:i}=u(r,t),s=[];let o=e,a=o;for(let t=0;t<n;t++){a=o,s.push(a);for(let e=1;e<i;e++)a=a.add(o),s.push(a);o=a.double()}return s},wNAF(r,n,i){let s=e.ZERO,o=e.BASE;const c=u(r,t);for(let e=0;e<c.windows;e++){const{nextN:t,offset:r,isZero:u,isNeg:h,isNegF:d,offsetF:p}=l(i,e,c);i=t,u?o=o.add(a(d,n[p])):s=s.add(a(h,n[r]))}return{p:s,f:o}},wNAFUnsafe(r,n,i,o=e.ZERO){const a=u(r,t);for(let e=0;e<a.windows;e++){if(i===s)break;const{nextN:t,offset:r,isZero:c,isNeg:u}=l(i,e,a);if(i=t,!c){const e=n[r];o=o.add(u?e.negate():e)}}return o},getPrecomputes(e,t,r){let n=p.get(t);return n||(n=this.precomputeWindow(t,e),1!==e&&p.set(t,r(n))),n},wNAFCached(e,t,r){const n=g(e);return this.wNAF(n,this.getPrecomputes(n,e,r),t)},wNAFCachedUnsafe(e,t,r,n){const i=g(e);return 1===i?this.unsafeLadder(e,t,n):this.wNAFUnsafe(i,this.getPrecomputes(i,e,r),t,n)},setWindowSize(e,r){c(r,t),f.set(e,r),p.delete(e)}}}function y(e,t,r,n){if(h(r,e),d(n,t),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const s=e.ZERO,o=(0,i.dJ)(BigInt(r.length)),a=o>12?o-3:o>4?o-2:o?2:1,c=(0,i.OG)(a),u=new Array(Number(c)+1).fill(s),l=Math.floor((t.BITS-1)/a)*a;let p=s;for(let i=l;i>=0;i-=a){u.fill(s);for(let t=0;t<n.length;t++){const e=n[t],s=Number(e>>BigInt(i)&c);u[s]=u[s].add(r[t])}let e=s;for(let t=u.length-1,r=s;t>0;t--)r=r.add(u[t]),e=e.add(r);if(p=p.add(e),0!==i)for(let t=0;t<a;t++)p=p.double()}return p}function w(e){return(0,n.jr)(e.Fp),(0,i.Q5)(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,n.LH)(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}},81238:function(e,t,r){"use strict";r.d(t,{AH:function(){return n.AH},JW:function(){return n.JW},WF:function(){return n.WF},iz:function(){return n.iz},qy:function(){return n.qy}});r(58376),r(33883);var n=r(60491)},81271:function(e,t,r){"use strict";r.d(t,{e:function(){return b}});r(18111),r(22489),r(20116),r(61701);var n=r(52070),i=r(6521),s=r(9047),o=r(56740),a=r(89415),c=r(52719),u=r(26676),l=r(26364),h=r(28042),d=r(17409),p=r(48016),f=r(80955),g=r(75758),m=r(70173),y=r(99229),w=r(4545);class b extends w.Y{constructor({wallet:e,getActiveChain:t,requestedChains:r}){super(),this.chain=f.o.CHAIN.SOLANA,this.provider=this,this.wallet=e,this.getActiveChain=t,this.requestedChains=r,this.bindEvents()}get id(){const e=this.name;return g.L.ConnectorExplorerIds[e]||e}get name(){return"Trust"===this.wallet.name?"Trust Wallet":this.wallet.name}get type(){return"ANNOUNCED"}get explorerId(){return g.L.ConnectorExplorerIds[this.name]}get publicKey(){const e=this.getAccount(!1);if(e)return new u.J3(e.publicKey)}get imageUrl(){return this.wallet.icon}get chains(){return this.wallet.chains.map((e=>this.requestedChains.find((t=>t.id===e||t.id===m.N[e]?.id)))).filter(Boolean)}async connect(){const e=this.getWalletFeature(l.u);await e.connect();const t=this.getAccount(!0),r=new u.J3(t.publicKey);return this.emit("connect",r),t.address}async disconnect(){const e=this.getWalletFeature(h.w);await e.disconnect(),this.emit("disconnect",void 0)}async signMessage(e){const t=this.getWalletFeature(s.F),r=this.getAccount(!0),[i]=await t.signMessage({message:e,account:r});if(!i)throw new n.K3("Empty result");return i.signature}async signTransaction(e){const t=this.getWalletFeature(o.q),r=this.getAccount(!0),s=this.serializeTransaction(e),[a]=await t.signTransaction({account:r,transaction:new Uint8Array(s),chain:this.getActiveChainName()});if(!a)throw new n.z4("Empty result");return this.emit("pendingTransaction",void 0),(0,i.Y)(e)?u.Kt.deserialize(a.signedTransaction):u.ZX.from(a.signedTransaction)}async signAndSendTransaction(e,t){const r=this.getWalletFeature(a.R),i=this.getAccount(!0),[s]=await r.signAndSendTransaction({account:i,transaction:new Uint8Array(this.serializeTransaction(e)),options:{...t,preflightCommitment:(0,c.i)(t?.preflightCommitment)},chain:this.getActiveChainName()});if(!s)throw new n.UF("Empty result");return this.emit("pendingTransaction",void 0),p.A.encode(s.signature)}async sendTransaction(e,t,r){const n=await this.signTransaction(e),i=await t.sendRawTransaction(n.serialize(),r);return i}async signAllTransactions(e){const t=this.getWalletFeature(o.q),r=this.getAccount(!0),s=this.getActiveChainName(),a=await t.signTransaction(...e.map((e=>({transaction:new Uint8Array(this.serializeTransaction(e)),account:r,chain:s}))));return a.map((({signedTransaction:t},r)=>{const s=e[r];if(!s)throw new n.z4("Invalid transaction signature response");return this.emit("pendingTransaction",void 0),(0,i.Y)(s)?u.Kt.deserialize(t):u.ZX.from(t)}))}async request(e){return Promise.reject(new y.a("request"))}async getAccounts(){return Promise.resolve(this.wallet.accounts.map((e=>({namespace:this.chain,address:e.address,type:"eoa"}))))}serializeTransaction(e){return e.serialize({verifySignatures:!1})}getAccount(e){const t=this.wallet.accounts[0];if(e&&!t)throw new n.fk;return t}getWalletFeature(e){if(!(e in this.wallet.features))throw new y.a(e);return this.wallet.features[e]}getActiveChainName(){const e=Object.entries(m.N).find((([,e])=>e.id===this.getActiveChain()?.id));if(!e)throw new Error("Invalid chain id");return e[0]}bindEvents(){const e=this.getWalletFeature(d.j);e.on("change",(e=>{if(e.accounts){const t=e.accounts[0];t&&this.emit("accountsChanged",new u.J3(t.publicKey))}}))}}},81653:function(e,t,r){"use strict";r.d(t,{i:function(){return i}});r(44114),r(18111),r(20116),r(17642),r(58004),r(33853),r(45876),r(32475),r(15024),r(31698);var n=r(22381);const i={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(e,t){return Date.now()-e>t},getActiveNetworkProps(){const e=i.getActiveNamespace(),t=i.getActiveCaipNetworkId(),r=t?t.split(":")[1]:void 0,n=r?isNaN(Number(r))?r:Number(r):void 0;return{namespace:e,caipNetworkId:t,chainId:n}},setWalletConnectDeepLink({name:e,href:t}){try{n.Ud.setItem(n.Ws.DEEPLINK_CHOICE,JSON.stringify({href:t,name:e}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const e=n.Ud.getItem(n.Ws.DEEPLINK_CHOICE);if(e)return JSON.parse(e)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{n.Ud.removeItem(n.Ws.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(e){try{n.Ud.setItem(n.Ws.ACTIVE_NAMESPACE,e)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(e){try{n.Ud.setItem(n.Ws.ACTIVE_CAIP_NETWORK_ID,e),i.setActiveNamespace(e.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return n.Ud.getItem(n.Ws.ACTIVE_CAIP_NETWORK_ID)}catch{return void console.info("Unable to get active caip network id")}},deleteActiveCaipNetworkId(){try{n.Ud.removeItem(n.Ws.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(e){try{const t=(0,n.T8)(e);n.Ud.removeItem(t)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(e){try{const t=i.getRecentWallets(),r=t.find((t=>t.id===e.id));r||(t.unshift(e),t.length>2&&t.pop(),n.Ud.setItem(n.Ws.RECENT_WALLETS,JSON.stringify(t)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const e=n.Ud.getItem(n.Ws.RECENT_WALLETS);return e?JSON.parse(e):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(e,t){try{const r=(0,n.T8)(e);n.Ud.setItem(r,t)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{const e=n.Ud.getItem(n.Ws.ACTIVE_NAMESPACE);return e}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(e){if(e)try{const t=(0,n.T8)(e);return n.Ud.getItem(t)}catch(t){console.info("Unable to get connected connector id in namespace ",e)}},setConnectedSocialProvider(e){try{n.Ud.setItem(n.Ws.CONNECTED_SOCIAL,e)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return n.Ud.getItem(n.Ws.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{n.Ud.removeItem(n.Ws.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return n.Ud.getItem(n.Ws.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){const e=n.Ud.getItem(n.Ws.ACTIVE_CAIP_NETWORK_ID),t=e?.split(":")?.[1];return t},setConnectionStatus(e){try{n.Ud.setItem(n.Ws.CONNECTION_STATUS,e)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return n.Ud.getItem(n.Ws.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const e=n.Ud.getItem(n.Ws.CONNECTED_NAMESPACES);return e?.length?e.split(","):[]}catch{return[]}},setConnectedNamespaces(e){try{const t=Array.from(new Set(e));n.Ud.setItem(n.Ws.CONNECTED_NAMESPACES,t.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(e){try{const t=i.getConnectedNamespaces();t.includes(e)||(t.push(e),i.setConnectedNamespaces(t))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(e){try{const t=i.getConnectedNamespaces(),r=t.indexOf(e);r>-1&&(t.splice(r,1),i.setConnectedNamespaces(t))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return n.Ud.getItem(n.Ws.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(e){try{n.Ud.setItem(n.Ws.TELEGRAM_SOCIAL_PROVIDER,e)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{n.Ud.removeItem(n.Ws.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let e={};try{const t=n.Ud.getItem(n.Ws.PORTFOLIO_CACHE);e=t?JSON.parse(t):{}}catch{console.info("Unable to get balance cache")}return e},removeAddressFromBalanceCache(e){try{const t=i.getBalanceCache();n.Ud.setItem(n.Ws.PORTFOLIO_CACHE,JSON.stringify({...t,[e]:void 0}))}catch{console.info("Unable to remove address from balance cache",e)}},getBalanceCacheForCaipAddress(e){try{const t=i.getBalanceCache(),r=t[e];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.portfolio))return r.balance;i.removeAddressFromBalanceCache(e)}catch{console.info("Unable to get balance cache for address",e)}},updateBalanceCache(e){try{const t=i.getBalanceCache();t[e.caipAddress]=e,n.Ud.setItem(n.Ws.PORTFOLIO_CACHE,JSON.stringify(t))}catch{console.info("Unable to update balance cache",e)}},getNativeBalanceCache(){let e={};try{const t=n.Ud.getItem(n.Ws.NATIVE_BALANCE_CACHE);e=t?JSON.parse(t):{}}catch{console.info("Unable to get balance cache")}return e},removeAddressFromNativeBalanceCache(e){try{const t=i.getBalanceCache();n.Ud.setItem(n.Ws.NATIVE_BALANCE_CACHE,JSON.stringify({...t,[e]:void 0}))}catch{console.info("Unable to remove address from balance cache",e)}},getNativeBalanceCacheForCaipAddress(e){try{const t=i.getNativeBalanceCache(),r=t[e];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.nativeBalance))return r;console.info("Discarding cache for address",e),i.removeAddressFromBalanceCache(e)}catch{console.info("Unable to get balance cache for address",e)}},updateNativeBalanceCache(e){try{const t=i.getNativeBalanceCache();t[e.caipAddress]=e,n.Ud.setItem(n.Ws.NATIVE_BALANCE_CACHE,JSON.stringify(t))}catch{console.info("Unable to update balance cache",e)}},getEnsCache(){let e={};try{const t=n.Ud.getItem(n.Ws.ENS_CACHE);e=t?JSON.parse(t):{}}catch{console.info("Unable to get ens name cache")}return e},getEnsFromCacheForAddress(e){try{const t=i.getEnsCache(),r=t[e];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.ens))return r.ens;i.removeEnsFromCache(e)}catch{console.info("Unable to get ens name from cache",e)}},updateEnsCache(e){try{const t=i.getEnsCache();t[e.address]=e,n.Ud.setItem(n.Ws.ENS_CACHE,JSON.stringify(t))}catch{console.info("Unable to update ens name cache",e)}},removeEnsFromCache(e){try{const t=i.getEnsCache();n.Ud.setItem(n.Ws.ENS_CACHE,JSON.stringify({...t,[e]:void 0}))}catch{console.info("Unable to remove ens name from cache",e)}},getIdentityCache(){let e={};try{const t=n.Ud.getItem(n.Ws.IDENTITY_CACHE);e=t?JSON.parse(t):{}}catch{console.info("Unable to get identity cache")}return e},getIdentityFromCacheForAddress(e){try{const t=i.getIdentityCache(),r=t[e];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.identity))return r.identity;i.removeIdentityFromCache(e)}catch{console.info("Unable to get identity from cache",e)}},updateIdentityCache(e){try{const t=i.getIdentityCache();t[e.address]={identity:e.identity,timestamp:e.timestamp},n.Ud.setItem(n.Ws.IDENTITY_CACHE,JSON.stringify(t))}catch{console.info("Unable to update identity cache",e)}},removeIdentityFromCache(e){try{const t=i.getIdentityCache();n.Ud.setItem(n.Ws.IDENTITY_CACHE,JSON.stringify({...t,[e]:void 0}))}catch{console.info("Unable to remove identity from cache",e)}},clearAddressCache(){try{n.Ud.removeItem(n.Ws.PORTFOLIO_CACHE),n.Ud.removeItem(n.Ws.NATIVE_BALANCE_CACHE),n.Ud.removeItem(n.Ws.ENS_CACHE),n.Ud.removeItem(n.Ws.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(e){try{n.Ud.setItem(n.Ws.PREFERRED_ACCOUNT_TYPES,JSON.stringify(e))}catch{console.info("Unable to set preferred account types",e)}},getPreferredAccountTypes(){try{const e=n.Ud.getItem(n.Ws.PREFERRED_ACCOUNT_TYPES);return JSON.parse(e)}catch{console.info("Unable to get preferred account types")}}}},81753:function(e,t,r){"use strict";r.d(t,{w:function(){return o}});r(18111),r(22489),r(7588),r(61701),r(17642),r(58004),r(33853),r(45876),r(32475),r(15024),r(31698);var n=r(80955),i=r(20169),s=r(81653);const o={isMobile(){return!!this.isClient()&&Boolean(window?.matchMedia("(pointer:coarse)")?.matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent))},checkCaipNetwork(e,t=""){return e?.caipNetworkId.toLocaleLowerCase().includes(t.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const e=window?.navigator.userAgent.toLowerCase();return o.isMobile()&&e.includes("android")},isIos(){if(!this.isMobile())return!1;const e=window?.navigator.userAgent.toLowerCase();return e.includes("iphone")||e.includes("ipad")},isSafari(){if(!this.isClient())return!1;const e=window?.navigator.userAgent.toLowerCase();return e.includes("safari")},isClient(){return"undefined"!==typeof window},isPairingExpired(e){return!e||e-Date.now()<=i.oU.TEN_SEC_MS},isAllowedRetry(e,t=i.oU.ONE_SEC_MS){return Date.now()-e>=t},copyToClopboard(e){navigator.clipboard.writeText(e)},isIframe(){try{return window?.self!==window?.top}catch(e){return!1}},getPairingExpiry(){return Date.now()+i.oU.FOUR_MINUTES_MS},getNetworkId(e){return e?.split(":")[1]},getPlainAddress(e){return e?.split(":")[2]},async wait(e){return new Promise((t=>{setTimeout(t,e)}))},debounce(e,t=500){let r;return(...n)=>{function i(){e(...n)}r&&clearTimeout(r),r=setTimeout(i,t)}},isHttpUrl(e){return e.startsWith("http://")||e.startsWith("https://")},formatNativeUrl(e,t){if(o.isHttpUrl(e))return this.formatUniversalUrl(e,t);let r=e;r.includes("://")||(r=e.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),this.isTelegram()&&this.isAndroid()&&(t=encodeURIComponent(t));const n=encodeURIComponent(t);return{redirect:`${r}wc?uri=${n}`,href:r}},formatUniversalUrl(e,t){if(!o.isHttpUrl(e))return this.formatNativeUrl(e,t);let r=e;r.endsWith("/")||(r=`${r}/`);const n=encodeURIComponent(t);return{redirect:`${r}wc?uri=${n}`,href:r}},getOpenTargetForPlatform(e){return"popupWindow"===e?e:this.isTelegram()?s.i.getTelegramSocialProvider()?"_top":"_blank":e},openHref(e,t,r){window?.open(e,this.getOpenTargetForPlatform(t),r||"noreferrer noopener")},returnOpenHref(e,t,r){return window?.open(e,this.getOpenTargetForPlatform(t),r||"noreferrer noopener")},isTelegram(){return"undefined"!==typeof window&&(Boolean(window.TelegramWebviewProxy)||Boolean(window.Telegram)||Boolean(window.TelegramWebviewProxyProto))},isPWA(){if("undefined"===typeof window)return!1;const e=window.matchMedia?.("(display-mode: standalone)")?.matches,t=window?.navigator?.standalone;return Boolean(e||t)},async preloadImage(e){const t=new Promise(((t,r)=>{const n=new Image;n.onload=t,n.onerror=r,n.crossOrigin="anonymous",n.src=e}));return Promise.race([t,o.wait(2e3)])},formatBalance(e,t){let r="0.000";if("string"===typeof e){const t=Number(e);if(t){const e=Math.floor(1e3*t)/1e3;e&&(r=e.toString())}}return`${r}${t?` ${t}`:""}`},formatBalance2(e,t){let r;if("0"===e)r="0";else if("string"===typeof e){const t=Number(e);t&&(r=t.toString().match(/^-?\d+(?:\.\d{0,3})?/u)?.[0])}return{value:r??"0",rest:"0"===r?"000":"",symbol:t}},getApiUrl(){return n.o.W3M_API_URL},getBlockchainApiUrl(){return n.o.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return n.o.PULSE_API_URL},getUUID(){return crypto?.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,(e=>{const t=16*Math.random()|0,r="x"===e?t:3&t|8;return r.toString(16)}))},parseError(e){return"string"===typeof e?e:"string"===typeof e?.issues?.[0]?.message?e.issues[0].message:e instanceof Error?e.message:"Unknown error"},sortRequestedNetworks(e,t=[]){const r={};return t&&e&&(e.forEach(((e,t)=>{r[e]=t})),t.sort(((e,t)=>{const n=r[e.id],i=r[t.id];return void 0!==n&&void 0!==i?n-i:void 0!==n?-1:void 0!==i?1:0}))),t},calculateBalance(e){let t=0;for(const r of e)t+=r.value??0;return t},formatTokenBalance(e){const t=e.toFixed(2),[r,n]=t.split(".");return{dollars:r,pennies:n}},isAddress(e,t="eip155"){switch(t){case"eip155":return!!/^(?:0x)?[0-9a-f]{40}$/iu.test(e)&&!(!/^(?:0x)?[0-9a-f]{40}$/iu.test(e)&&!/^(?:0x)?[0-9A-F]{40}$/iu.test(e));case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(e);default:return!1}},uniqueBy(e,t){const r=new Set;return e.filter((e=>{const n=e[t];return!r.has(n)&&(r.add(n),!0)}))},generateSdkVersion(e,t,r){const n=0===e.length,s=n?i.oU.ADAPTER_TYPES.UNIVERSAL:e.map((e=>e.adapterType)).join(",");return`${t}-${s}-${r}`},createAccount(e,t,r,n,i){return{namespace:e,address:t,type:r,publicKey:n,path:i}},isCaipAddress(e){if("string"!==typeof e)return!1;const t=e.split(":"),r=t[0];return 3===t.filter(Boolean).length&&r in n.o.CHAIN_NAME_MAP},isMac(){const e=window?.navigator.userAgent.toLowerCase();return e.includes("macintosh")&&!e.includes("safari")},formatTelegramSocialLoginUrl(e){const t=`--${encodeURIComponent(window?.location.href)}`,r="state=",n=new URL(e);if("auth.magic.link"===n.host){const n="provider_authorization_url=",i=e.substring(e.indexOf(n)+n.length),s=this.injectIntoUrl(decodeURIComponent(i),r,t);return e.replace(i,encodeURIComponent(s))}return this.injectIntoUrl(e,r,t)},injectIntoUrl(e,t,r){const n=e.indexOf(t);if(-1===n)throw new Error(`${t} parameter not found in the URL: ${e}`);const i=e.indexOf("&",n),s=t.length,o=-1!==i?i:e.length,a=e.substring(0,n+s),c=e.substring(n+s,o),u=e.substring(i),l=c+r,h=a+l+u;return h}}},82029:function(e,t,r){"use strict";r.d(t,{i3:function(){return d},nj:function(){return a}});var n=r(27578),i=r(8639),s=r(37986);const o=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function a(e,t={}){return"number"===typeof e||"bigint"===typeof e?l(e,t):"string"===typeof e?d(e,t):"boolean"===typeof e?c(e,t):u(e,t)}function c(e,t={}){const r=`0x${Number(e)}`;return"number"===typeof t.size?((0,s.Sl)(r,{size:t.size}),(0,i.eV)(r,{size:t.size})):r}function u(e,t={}){let r="";for(let i=0;i<e.length;i++)r+=o[e[i]];const n=`0x${r}`;return"number"===typeof t.size?((0,s.Sl)(n,{size:t.size}),(0,i.eV)(n,{dir:"right",size:t.size})):n}function l(e,t={}){const{signed:r,size:s}=t,o=BigInt(e);let a;s?a=r?(1n<<8n*BigInt(s)-1n)-1n:2n**(8n*BigInt(s))-1n:"number"===typeof e&&(a=BigInt(Number.MAX_SAFE_INTEGER));const c="bigint"===typeof a&&r?-a-1n:0;if(a&&o>a||o<c){const t="bigint"===typeof e?"n":"";throw new n.Ty({max:a?`${a}${t}`:void 0,min:`${c}${t}`,signed:r,size:s,value:`${e}${t}`})}const u=`0x${(r&&o<0?(1n<<BigInt(8*s))+BigInt(o):o).toString(16)}`;return s?(0,i.eV)(u,{size:s}):u}const h=new TextEncoder;function d(e,t={}){const r=h.encode(e);return u(r,t)}},83131:function(e,t,r){"use strict";r.d(t,{F:function(){return u}});r(18111),r(61701),r(12745);var n=r(80955),i=r(37903),s=r(64529),o=r(27309),a=r(75758),c=r(51900);class u{constructor({provider:e,namespace:t}){this.id=n.o.CONNECTOR_ID.WALLET_CONNECT,this.name=a.L.ConnectorNamesMap[n.o.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=a.L.ConnectorImageIds[n.o.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=i.W.getCaipNetworks.bind(i.W),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=t}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){const e=await this.authenticate();if(!e){const e=this.getCaipNetworks(),t=s.H.state.universalProviderConfigOverride,r=c.kl.createNamespaces(e,t);await this.provider.connect({optionalNamespaces:r})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map((e=>e.caipNetworkId));return o.U.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:l})}}const l=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"]},84215:function(e,t,r){"use strict";var n=r(44576),i=r(82839),s=r(22195),o=function(e){return i.slice(0,e.length)===e};e.exports=function(){return o("Bun/")?"BUN":o("Cloudflare-Workers")?"CLOUDFLARE":o("Deno/")?"DENO":o("Node.js/")?"NODE":n.Bun&&"string"==typeof Bun.version?"BUN":n.Deno&&"object"==typeof Deno.version?"DENO":"process"===s(n.process)?"NODE":n.window&&n.document?"BROWSER":"REST"}()},85645:function(e,t,r){"use strict";r.d(t,{t:function(){return i}});var n=r(31937);const i=(0,n.x)({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"})},85731:function(e,t,r){"use strict";r.d(t,{Ob:function(){return g},Xt:function(){return m},b6:function(){return p}});var n=r(63558),i=r(93514),s=r(96030),o=r(33580),a=r(75226),c=r(57527),u=r(66360),l=r(53489);const h=(0,n.w3)([(0,n.DH)("mintAuthorityOption"),(0,i.jE)("mintAuthority"),(0,i._l)("supply"),(0,n.u8)("decimals"),(0,i.lc)("isInitialized"),(0,n.DH)("freezeAuthorityOption"),(0,i.jE)("freezeAuthority")]),d=h.span;async function p(e,t,r,n=o.x5){const i=await e.getAccountInfo(t,r);return f(t,i,n)}function f(e,t,r=o.x5){if(!t)throw new a.kD;if(!t.owner.equals(r))throw new a.bY;if(t.data.length<d)throw new a.vd;const n=h.decode(t.data.slice(0,d));let i=Buffer.alloc(0);if(t.data.length>d){if(t.data.length<=u.a8)throw new a.vd;if(t.data.length===l.zj)throw new a.vd;if(t.data[u.a8]!=c.C.Mint)throw new a.P$;i=t.data.slice(u.a8+c.v)}return{address:e,mintAuthority:n.mintAuthorityOption?n.mintAuthority:null,supply:n.supply,decimals:n.decimals,isInitialized:n.isInitialized,freezeAuthority:n.freezeAuthorityOption?n.freezeAuthority:null,tlvData:i}}async function g(e,t,r=!1,n=o.x5,i=o.EK){if(!r&&!s.PublicKey.isOnCurve(t.toBuffer()))throw new a.lu;const[c]=await s.PublicKey.findProgramAddress([t.toBuffer(),n.toBuffer(),e.toBuffer()],i);return c}function m(e,t,r=!1,n=o.x5,i=o.EK){if(!r&&!s.PublicKey.isOnCurve(t.toBuffer()))throw new a.lu;const[c]=s.PublicKey.findProgramAddressSync([t.toBuffer(),n.toBuffer(),e.toBuffer()],i);return c}},86103:function(e,t,r){"use strict";r(44114),t.byteLength=l,t.toByteArray=d,t.fromByteArray=g;for(var n=[],i=[],s="undefined"!==typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=o.length;a<c;++a)n[a]=o[a],i[o.charCodeAt(a)]=a;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var n=r===t?0:4-r%4;return[r,n]}function l(e){var t=u(e),r=t[0],n=t[1];return 3*(r+n)/4-n}function h(e,t,r){return 3*(t+r)/4-r}function d(e){var t,r,n=u(e),o=n[0],a=n[1],c=new s(h(e,o,a)),l=0,d=a>0?o-4:o;for(r=0;r<d;r+=4)t=i[e.charCodeAt(r)]<<18|i[e.charCodeAt(r+1)]<<12|i[e.charCodeAt(r+2)]<<6|i[e.charCodeAt(r+3)],c[l++]=t>>16&255,c[l++]=t>>8&255,c[l++]=255&t;return 2===a&&(t=i[e.charCodeAt(r)]<<2|i[e.charCodeAt(r+1)]>>4,c[l++]=255&t),1===a&&(t=i[e.charCodeAt(r)]<<10|i[e.charCodeAt(r+1)]<<4|i[e.charCodeAt(r+2)]>>2,c[l++]=t>>8&255,c[l++]=255&t),c}function p(e){return n[e>>18&63]+n[e>>12&63]+n[e>>6&63]+n[63&e]}function f(e,t,r){for(var n,i=[],s=t;s<r;s+=3)n=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),i.push(p(n));return i.join("")}function g(e){for(var t,r=e.length,i=r%3,s=[],o=16383,a=0,c=r-i;a<c;a+=o)s.push(f(e,a,a+o>c?c:a+o));return 1===i?(t=e[r-1],s.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],s.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},86330:function(e,t,r){"use strict";r.d(t,{Vw:function(){return _},DO:function(){return o},CC:function(){return c},sd:function(){return a},Fe:function(){return s},Ht:function(){return u},uH:function(){return h},Id:function(){return v},qj:function(){return E},O8:function(){return d},po:function(){return A},Ow:function(){return p},fd:function(){return y},ZJ:function(){return b},DH:function(){return l}});const n="object"===typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */
function i(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function s(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function o(e,...t){if(!i(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function a(e){if("function"!==typeof e||"function"!==typeof e.create)throw new Error("Hash should be wrapped by utils.createHasher");s(e.outputLen),s(e.blockLen)}function c(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function u(e,t){o(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function l(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function h(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function d(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function p(e,t){return e<<32-t|e>>>t}const f=(()=>68===new Uint8Array(new Uint32Array([287454020]).buffer)[0])();function g(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}function m(e){for(let t=0;t<e.length;t++)e[t]=g(e[t]);return e}const y=f?e=>e:m;function w(e){if("string"!==typeof e)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(e))}function b(e){return"string"===typeof e&&(e=w(e)),o(e),e}function v(...e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];o(r),t+=r.length}const r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){const t=e[n];r.set(t,i),i+=t.length}return r}class _{}function E(e){const t=t=>e().update(b(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function A(e=32){if(n&&"function"===typeof n.getRandomValues)return n.getRandomValues(new Uint8Array(e));if(n&&"function"===typeof n.randomBytes)return Uint8Array.from(n.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}},87850:function(e,t,r){"use strict";var n=r(60452).Buffer;function i(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(255!==t[o])throw new TypeError(s+" is ambiguous");t[o]=i}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(t){if((Array.isArray(t)||t instanceof Uint8Array)&&(t=n.from(t)),!n.isBuffer(t))throw new TypeError("Expected Buffer");if(0===t.length)return"";var r=0,i=0,s=0,o=t.length;while(s!==o&&0===t[s])s++,r++;var u=(o-s)*l+1>>>0,h=new Uint8Array(u);while(s!==o){for(var d=t[s],p=0,f=u-1;(0!==d||p<i)&&-1!==f;f--,p++)d+=256*h[f]>>>0,h[f]=d%a>>>0,d=d/a>>>0;if(0!==d)throw new Error("Non-zero carry");i=p,s++}var g=u-i;while(g!==u&&0===h[g])g++;for(var m=c.repeat(r);g<u;++g)m+=e.charAt(h[g]);return m}function d(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return n.alloc(0);var r=0,i=0,s=0;while(e[r]===c)i++,r++;var o=(e.length-r)*u+1>>>0,l=new Uint8Array(o);while(r<e.length){var h=e.charCodeAt(r);if(h>255)return;var d=t[h];if(255===d)return;for(var p=0,f=o-1;(0!==d||p<s)&&-1!==f;f--,p++)d+=a*l[f]>>>0,l[f]=d%256>>>0,d=d/256>>>0;if(0!==d)throw new Error("Non-zero carry");s=p,r++}var g=o-s;while(g!==o&&0===l[g])g++;var m=n.allocUnsafe(i+(o-g));m.fill(0,0,i);var y=i;while(g!==o)m[y++]=l[g++];return m}function p(e){var t=d(e);if(t)return t;throw new Error("Non-base"+a+" character")}return{encode:h,decodeUnsafe:d,decode:p}}e.exports=i},88701:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(33590);n.__exportStar(r(28338),t),n.__exportStar(r(9574),t)},88809:function(e,t,r){"use strict";r.d(t,{Rn:function(){return i.R},gT:function(){return s.g},tW:function(){return n.t}});var n=r(85645),i=r(91643),s=r(54630)},89046:function(e,t){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,r,n,i){var s,o,a=8*i-n-1,c=(1<<a)-1,u=c>>1,l=-7,h=r?i-1:0,d=r?-1:1,p=e[t+h];for(h+=d,s=p&(1<<-l)-1,p>>=-l,l+=a;l>0;s=256*s+e[t+h],h+=d,l-=8);for(o=s&(1<<-l)-1,s>>=-l,l+=n;l>0;o=256*o+e[t+h],h+=d,l-=8);if(0===s)s=1-u;else{if(s===c)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,n),s-=u}return(p?-1:1)*o*Math.pow(2,s-n)},t.write=function(e,t,r,n,i,s){var o,a,c,u=8*s-i-1,l=(1<<u)-1,h=l>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:s-1,f=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-o))<1&&(o--,c*=2),t+=o+h>=1?d/c:d*Math.pow(2,1-h),t*c>=2&&(o++,c/=2),o+h>=l?(a=0,o=l):o+h>=1?(a=(t*c-1)*Math.pow(2,i),o+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;e[r+p]=255&a,p+=f,a/=256,i-=8);for(o=o<<i|a,u+=i;u>0;e[r+p]=255&o,p+=f,o/=256,u-=8);e[r+p-f]|=128*g}},89415:function(e,t,r){"use strict";r.d(t,{R:function(){return n}});const n="solana:signAndSendTransaction"},89429:function(e,t,r){"use strict";var n=r(44576),i=r(38574);e.exports=function(e){if(i){try{return n.process.getBuiltinModule(e)}catch(t){}try{return Function('return require("'+e+'")')()}catch(t){}}}},90712:function(e,t,r){"use strict";
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */r(44114);const n=r(86103),i=r(89046),s="function"===typeof Symbol&&"function"===typeof Symbol["for"]?Symbol["for"]("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=v,t.INSPECT_MAX_BYTES=50;const o=2147483647;function a(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}function c(e){if(e>o)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,u.prototype),t}function u(e,t,r){if("number"===typeof e){if("string"===typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return p(e)}return l(e,t,r)}function l(e,t,r){if("string"===typeof e)return f(e,t);if(ArrayBuffer.isView(e))return m(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(oe(e,ArrayBuffer)||e&&oe(e.buffer,ArrayBuffer))return y(e,t,r);if("undefined"!==typeof SharedArrayBuffer&&(oe(e,SharedArrayBuffer)||e&&oe(e.buffer,SharedArrayBuffer)))return y(e,t,r);if("number"===typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return u.from(n,t,r);const i=w(e);if(i)return i;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof e[Symbol.toPrimitive])return u.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function h(e){if("number"!==typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function d(e,t,r){return h(e),e<=0?c(e):void 0!==t?"string"===typeof r?c(e).fill(t,r):c(e).fill(t):c(e)}function p(e){return h(e),c(e<0?0:0|b(e))}function f(e,t){if("string"===typeof t&&""!==t||(t="utf8"),!u.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|_(e,t);let n=c(r);const i=n.write(e,t);return i!==r&&(n=n.slice(0,i)),n}function g(e){const t=e.length<0?0:0|b(e.length),r=c(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function m(e){if(oe(e,Uint8Array)){const t=new Uint8Array(e);return y(t.buffer,t.byteOffset,t.byteLength)}return g(e)}function y(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,u.prototype),n}function w(e){if(u.isBuffer(e)){const t=0|b(e.length),r=c(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!==typeof e.length||ae(e.length)?c(0):g(e):"Buffer"===e.type&&Array.isArray(e.data)?g(e.data):void 0}function b(e){if(e>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function v(e){return+e!=e&&(e=0),u.alloc(+e)}function _(e,t){if(u.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||oe(e,ArrayBuffer))return e.byteLength;if("string"!==typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return te(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return ie(e).length;default:if(i)return n?-1:te(e).length;t=(""+t).toLowerCase(),i=!0}}function E(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,t>>>=0,r<=t)return"";e||(e="utf8");while(1)switch(e){case"hex":return L(this,t,r);case"utf8":case"utf-8":return x(this,t,r);case"ascii":return B(this,t,r);case"latin1":case"binary":return U(this,t,r);case"base64":return R(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function A(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function I(e,t,r,n,i){if(0===e.length)return-1;if("string"===typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,ae(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"===typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:S(e,t,r,n,i);if("number"===typeof t)return t&=255,"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):S(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function S(e,t,r,n,i){let s,o=1,a=e.length,c=t.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,a/=2,c/=2,r/=2}function u(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){let n=-1;for(s=r;s<a;s++)if(u(e,s)===u(t,-1===n?0:s-n)){if(-1===n&&(n=s),s-n+1===c)return n*o}else-1!==n&&(s-=s-n),n=-1}else for(r+c>a&&(r=a-c),s=r;s>=0;s--){let r=!0;for(let n=0;n<c;n++)if(u(e,s+n)!==u(t,n)){r=!1;break}if(r)return s}return-1}function C(e,t,r,n){r=Number(r)||0;const i=e.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;const s=t.length;let o;for(n>s/2&&(n=s/2),o=0;o<n;++o){const n=parseInt(t.substr(2*o,2),16);if(ae(n))return o;e[r+o]=n}return o}function k(e,t,r,n){return se(te(t,e.length-r),e,r,n)}function N(e,t,r,n){return se(re(t),e,r,n)}function O(e,t,r,n){return se(ie(t),e,r,n)}function T(e,t,r,n){return se(ne(t,e.length-r),e,r,n)}function R(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function x(e,t,r){r=Math.min(e.length,r);const n=[];let i=t;while(i<r){const t=e[i];let s=null,o=t>239?4:t>223?3:t>191?2:1;if(i+o<=r){let r,n,a,c;switch(o){case 1:t<128&&(s=t);break;case 2:r=e[i+1],128===(192&r)&&(c=(31&t)<<6|63&r,c>127&&(s=c));break;case 3:r=e[i+1],n=e[i+2],128===(192&r)&&128===(192&n)&&(c=(15&t)<<12|(63&r)<<6|63&n,c>2047&&(c<55296||c>57343)&&(s=c));break;case 4:r=e[i+1],n=e[i+2],a=e[i+3],128===(192&r)&&128===(192&n)&&128===(192&a)&&(c=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&a,c>65535&&c<1114112&&(s=c))}}null===s?(s=65533,o=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),i+=o}return M(n)}t.kMaxLength=o,u.TYPED_ARRAY_SUPPORT=a(),u.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(e,t,r){return l(e,t,r)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(e,t,r){return d(e,t,r)},u.allocUnsafe=function(e){return p(e)},u.allocUnsafeSlow=function(e){return p(e)},u.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==u.prototype},u.compare=function(e,t){if(oe(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),oe(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,s=Math.min(r,n);i<s;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const n=u.allocUnsafe(t);let i=0;for(r=0;r<e.length;++r){let t=e[r];if(oe(t,Uint8Array))i+t.length>n.length?(u.isBuffer(t)||(t=u.from(t)),t.copy(n,i)):Uint8Array.prototype.set.call(n,t,i);else{if(!u.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(n,i)}i+=t.length}return n},u.byteLength=_,u.prototype._isBuffer=!0,u.prototype.swap16=function(){const e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)A(this,t,t+1);return this},u.prototype.swap32=function(){const e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)A(this,t,t+3),A(this,t+1,t+2);return this},u.prototype.swap64=function(){const e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)A(this,t,t+7),A(this,t+1,t+6),A(this,t+2,t+5),A(this,t+3,t+4);return this},u.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?x(this,0,e):E.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){let e="";const r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},s&&(u.prototype[s]=u.prototype.inspect),u.prototype.compare=function(e,t,r,n,i){if(oe(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;let s=i-n,o=r-t;const a=Math.min(s,o),c=this.slice(n,i),l=e.slice(t,r);for(let u=0;u<a;++u)if(c[u]!==l[u]){s=c[u],o=l[u];break}return s<o?-1:o<s?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return I(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return I(this,e,t,r,!1)},u.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"===typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let s=!1;for(;;)switch(n){case"hex":return C(this,e,t,r);case"utf8":case"utf-8":return k(this,e,t,r);case"ascii":case"latin1":case"binary":return N(this,e,t,r);case"base64":return O(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,t,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const P=4096;function M(e){const t=e.length;if(t<=P)return String.fromCharCode.apply(String,e);let r="",n=0;while(n<t)r+=String.fromCharCode.apply(String,e.slice(n,n+=P));return r}function B(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function U(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function L(e,t,r){const n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let s=t;s<r;++s)i+=ce[e[s]];return i}function D(e,t,r){const n=e.slice(t,r);let i="";for(let s=0;s<n.length-1;s+=2)i+=String.fromCharCode(n[s]+256*n[s+1]);return i}function W(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function j(e,t,r,n,i,s){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function z(e,t,r,n,i){Z(t,n,i,e,r,7);let s=Number(t&BigInt(4294967295));e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,r}function H(e,t,r,n,i){Z(t,n,i,e,r,7);let s=Number(t&BigInt(4294967295));e[r+7]=s,s>>=8,e[r+6]=s,s>>=8,e[r+5]=s,s>>=8,e[r+4]=s;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=o,o>>=8,e[r+2]=o,o>>=8,e[r+1]=o,o>>=8,e[r]=o,r+8}function q(e,t,r,n,i,s){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function $(e,t,r,n,s){return t=+t,r>>>=0,s||q(e,t,r,4,34028234663852886e22,-34028234663852886e22),i.write(e,t,r,n,23,4),r+4}function F(e,t,r,n,s){return t=+t,r>>>=0,s||q(e,t,r,8,17976931348623157e292,-17976931348623157e292),i.write(e,t,r,n,52,8),r+8}u.prototype.slice=function(e,t){const r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),t<e&&(t=e);const n=this.subarray(e,t);return Object.setPrototypeOf(n,u.prototype),n},u.prototype.readUintLE=u.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||W(e,t,this.length);let n=this[e],i=1,s=0;while(++s<t&&(i*=256))n+=this[e+s]*i;return n},u.prototype.readUintBE=u.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||W(e,t,this.length);let n=this[e+--t],i=1;while(t>0&&(i*=256))n+=this[e+--t]*i;return n},u.prototype.readUint8=u.prototype.readUInt8=function(e,t){return e>>>=0,t||W(e,1,this.length),this[e]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(e,t){return e>>>=0,t||W(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(e,t){return e>>>=0,t||W(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(e,t){return e>>>=0,t||W(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(e,t){return e>>>=0,t||W(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readBigUInt64LE=ue((function(e){e>>>=0,J(e,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||X(e,this.length-8);const n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),u.prototype.readBigUInt64BE=ue((function(e){e>>>=0,J(e,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||X(e,this.length-8);const n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),u.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||W(e,t,this.length);let n=this[e],i=1,s=0;while(++s<t&&(i*=256))n+=this[e+s]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||W(e,t,this.length);let n=t,i=1,s=this[e+--n];while(n>0&&(i*=256))s+=this[e+--n]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*t)),s},u.prototype.readInt8=function(e,t){return e>>>=0,t||W(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){e>>>=0,t||W(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){e>>>=0,t||W(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return e>>>=0,t||W(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return e>>>=0,t||W(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readBigInt64LE=ue((function(e){e>>>=0,J(e,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||X(e,this.length-8);const n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),u.prototype.readBigInt64BE=ue((function(e){e>>>=0,J(e,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||X(e,this.length-8);const n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)})),u.prototype.readFloatLE=function(e,t){return e>>>=0,t||W(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return e>>>=0,t||W(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return e>>>=0,t||W(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return e>>>=0,t||W(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){const n=Math.pow(2,8*r)-1;j(this,e,t,r,n,0)}let i=1,s=0;this[t]=255&e;while(++s<r&&(i*=256))this[t+s]=e/i&255;return t+r},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){const n=Math.pow(2,8*r)-1;j(this,e,t,r,n,0)}let i=r-1,s=1;this[t+i]=255&e;while(--i>=0&&(s*=256))this[t+i]=e/s&255;return t+r},u.prototype.writeUint8=u.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,1,255,0),this[t]=255&e,t+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigUInt64LE=ue((function(e,t=0){return z(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeBigUInt64BE=ue((function(e,t=0){return H(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);j(this,e,t,r,n-1,-n)}let i=0,s=1,o=0;this[t]=255&e;while(++i<r&&(s*=256))e<0&&0===o&&0!==this[t+i-1]&&(o=1),this[t+i]=(e/s|0)-o&255;return t+r},u.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);j(this,e,t,r,n-1,-n)}let i=r-1,s=1,o=0;this[t+i]=255&e;while(--i>=0&&(s*=256))e<0&&0===o&&0!==this[t+i+1]&&(o=1),this[t+i]=(e/s|0)-o&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigInt64LE=ue((function(e,t=0){return z(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeBigInt64BE=ue((function(e,t=0){return H(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeFloatLE=function(e,t,r){return $(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return $(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return F(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return F(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,n){if(!u.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);const i=n-r;return this===e&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},u.prototype.fill=function(e,t,r,n){if("string"===typeof e){if("string"===typeof t?(n=t,t=0,r=this.length):"string"===typeof r&&(n=r,r=this.length),void 0!==n&&"string"!==typeof n)throw new TypeError("encoding must be a string");if("string"===typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){const t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"===typeof e?e&=255:"boolean"===typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"===typeof e)for(i=t;i<r;++i)this[i]=e;else{const s=u.isBuffer(e)?e:u.from(e,n),o=s.length;if(0===o)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=s[i%o]}return this};const K={};function V(e,t,r){K[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function Y(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function G(e,t,r){J(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||X(t,e.length-(r+1))}function Z(e,t,r,n,i,s){if(e>r||e<t){const n="bigint"===typeof t?"n":"";let i;throw i=s>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(s+1)}${n}`:`>= -(2${n} ** ${8*(s+1)-1}${n}) and < 2 ** ${8*(s+1)-1}${n}`:`>= ${t}${n} and <= ${r}${n}`,new K.ERR_OUT_OF_RANGE("value",i,e)}G(n,i,s)}function J(e,t){if("number"!==typeof e)throw new K.ERR_INVALID_ARG_TYPE(t,"number",e)}function X(e,t,r){if(Math.floor(e)!==e)throw J(e,r),new K.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new K.ERR_BUFFER_OUT_OF_BOUNDS;throw new K.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}V("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),V("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),V("ERR_OUT_OF_RANGE",(function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=Y(String(r)):"bigint"===typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=Y(i)),i+="n"),n+=` It must be ${t}. Received ${i}`,n}),RangeError);const Q=/[^+/0-9A-Za-z-_]/g;function ee(e){if(e=e.split("=")[0],e=e.trim().replace(Q,""),e.length<2)return"";while(e.length%4!==0)e+="=";return e}function te(e,t){let r;t=t||1/0;const n=e.length;let i=null;const s=[];for(let o=0;o<n;++o){if(r=e.charCodeAt(o),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function re(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function ne(e,t){let r,n,i;const s=[];for(let o=0;o<e.length;++o){if((t-=2)<0)break;r=e.charCodeAt(o),n=r>>8,i=r%256,s.push(i),s.push(n)}return s}function ie(e){return n.toByteArray(ee(e))}function se(e,t,r,n){let i;for(i=0;i<n;++i){if(i+r>=t.length||i>=e.length)break;t[i+r]=e[i]}return i}function oe(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function ae(e){return e!==e}const ce=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function ue(e){return"undefined"===typeof BigInt?le:e}function le(){throw new Error("BigInt not supported")}},91114:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function s(e){var t=i(e,"string");return"symbol"==n(t)?t:t+""}function o(e,t,r){return(t=s(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{A:function(){return o}})},91643:function(e,t,r){"use strict";r.d(t,{R:function(){return i}});var n=r(31937);const i=(0,n.x)({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"})},91889:function(e,t,r){"use strict";r.d(t,{Q:function(){return a}});const n={address:/^0x(?:[A-Fa-f0-9]{40})$/u,transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u};var i=r(1555),s=r(44695);const o=3e4,a={checkIfAllowedToTriggerEmail(){const e=s.o.get(i.s1.LAST_EMAIL_LOGIN_TIME);if(e){const t=Date.now()-Number(e);if(t<o){const e=Math.ceil((o-t)/1e3);throw new Error(`Please try again after ${e} seconds`)}}},getTimeToNextEmailLogin(){const e=s.o.get(i.s1.LAST_EMAIL_LOGIN_TIME);if(e){const t=Date.now()-Number(e);if(t<o)return Math.ceil((o-t)/1e3)}return 0},checkIfRequestExists(e){return i.Vl.NOT_SAFE_RPC_METHODS.includes(e.method)||i.Vl.SAFE_RPC_METHODS.includes(e.method)},getResponseType(e){const t="string"===typeof e,r=t&&(e?.match(n.transactionHash)||e?.match(n.signedMessage));return r?i.s1.RPC_RESPONSE_TYPE_TX:i.s1.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(e){return i.Vl.SAFE_RPC_METHODS.includes(e.method)},isClient:"undefined"!==typeof window}},93203:function(e,t){"use strict";function r(e){{const t=Buffer.from(e);t.reverse();const r=t.toString("hex");return 0===r.length?BigInt(0):BigInt(`0x${r}`)}}function n(e){{const t=e.toString("hex");return 0===t.length?BigInt(0):BigInt(`0x${t}`)}}function i(e,t){{const r=e.toString(16),n=Buffer.from(r.padStart(2*t,"0").slice(0,2*t),"hex");return n.reverse(),n}}function s(e,t){{const r=e.toString(16);return Buffer.from(r.padStart(2*t,"0").slice(0,2*t),"hex")}}t.k5=r,t.cI=n,t.Bq=i,t.zy=s},93514:function(e,t,r){"use strict";r.d(t,{_l:function(){return n._l},jE:function(){return s.j},lc:function(){return i.l}});var n=r(16371),i=(r(3819),r(1255)),s=r(20035)},94450:function(e,t,r){"use strict";r.d(t,{b:function(){return i}});var n=r(22626);class i extends n.C{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}},94483:function(e,t,r){"use strict";var n,i,s,o,a=r(44576),c=r(89429),u=r(1548),l=a.structuredClone,h=a.ArrayBuffer,d=a.MessageChannel,p=!1;if(u)p=function(e){l(e,{transfer:[e]})};else if(h)try{d||(n=c("worker_threads"),n&&(d=n.MessageChannel)),d&&(i=new d,s=new h(2),o=function(e){i.port1.postMessage(null,[e])},2===s.byteLength&&(o(s),0===s.byteLength&&(p=o)))}catch(f){}e.exports=p},94732:function(e,t,r){"use strict";r.d(t,{$:function(){return c}});var n=r(69983),i=r(65768),s=r(97180);const o={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},a=(0,n.BX)({networkImagePromises:{}}),c={async fetchWalletImage(e){if(e)return await i.N._fetchWalletImage(e),this.getWalletImageById(e)},async fetchNetworkImage(e){if(!e)return;const t=this.getNetworkImageById(e);return t||(a.networkImagePromises[e]||(a.networkImagePromises[e]=i.N._fetchNetworkImage(e)),await a.networkImagePromises[e],this.getNetworkImageById(e))},getWalletImageById(e){if(e)return s.j.state.walletImages[e]},getWalletImage(e){return e?.image_url?e?.image_url:e?.image_id?s.j.state.walletImages[e.image_id]:void 0},getNetworkImage(e){return e?.assets?.imageUrl?e?.assets?.imageUrl:e?.assets?.imageId?s.j.state.networkImages[e.assets.imageId]:void 0},getNetworkImageById(e){if(e)return s.j.state.networkImages[e]},getConnectorImage(e){return e?.imageUrl?e.imageUrl:e?.imageId?s.j.state.connectorImages[e.imageId]:void 0},getChainImage(e){return s.j.state.networkImages[o[e]]}}},96030:function(e,t,r){"use strict";r.r(t),r.d(t,{Account:function(){return ae},AddressLookupTableAccount:function(){return xt},AddressLookupTableInstruction:function(){return Ln},AddressLookupTableProgram:function(){return Dn},Authorized:function(){return ni},BLOCKHASH_CACHE_TIMEOUT_MS:function(){return Wt},BPF_LOADER_DEPRECATED_PROGRAM_ID:function(){return ce},BPF_LOADER_PROGRAM_ID:function(){return mt},BpfLoader:function(){return yt},COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:function(){return jn},ComputeBudgetInstruction:function(){return Wn},ComputeBudgetProgram:function(){return zn},Connection:function(){return Mn},Ed25519Program:function(){return Kn},Enum:function(){return Q},EpochSchedule:function(){return kt},FeeCalculatorLayout:function(){return ot},Keypair:function(){return Bn},LAMPORTS_PER_SOL:function(){return Ci},LOOKUP_TABLE_INSTRUCTION_LAYOUTS:function(){return Un},Loader:function(){return gt},Lockup:function(){return ii},MAX_SEED_LENGTH:function(){return re},Message:function(){return Re},MessageAccountKeys:function(){return ge},MessageV0:function(){return xe},NONCE_ACCOUNT_LENGTH:function(){return ct},NonceAccount:function(){return ut},PACKET_DATA_SIZE:function(){return ue},PUBLIC_KEY_LENGTH:function(){return ne},PublicKey:function(){return oe},SIGNATURE_LENGTH_IN_BYTES:function(){return he},SOLANA_SCHEMA:function(){return ee},STAKE_CONFIG_ID:function(){return ri},STAKE_INSTRUCTION_LAYOUTS:function(){return oi},SYSTEM_INSTRUCTION_LAYOUTS:function(){return dt},SYSVAR_CLOCK_PUBKEY:function(){return $e},SYSVAR_EPOCH_SCHEDULE_PUBKEY:function(){return Fe},SYSVAR_INSTRUCTIONS_PUBKEY:function(){return Ke},SYSVAR_RECENT_BLOCKHASHES_PUBKEY:function(){return Ve},SYSVAR_RENT_PUBKEY:function(){return Ye},SYSVAR_REWARDS_PUBKEY:function(){return Ge},SYSVAR_SLOT_HASHES_PUBKEY:function(){return Ze},SYSVAR_SLOT_HISTORY_PUBKEY:function(){return Je},SYSVAR_STAKE_HISTORY_PUBKEY:function(){return Xe},Secp256k1Program:function(){return ei},SendTransactionError:function(){return Qe},SolanaJSONRPCError:function(){return tt},SolanaJSONRPCErrorCode:function(){return et},StakeAuthorizationLayout:function(){return ai},StakeInstruction:function(){return si},StakeProgram:function(){return ci},Struct:function(){return X},SystemInstruction:function(){return ht},SystemProgram:function(){return pt},Transaction:function(){return Le},TransactionExpiredBlockheightExceededError:function(){return de},TransactionExpiredNonceInvalidError:function(){return fe},TransactionExpiredTimeoutError:function(){return pe},TransactionInstruction:function(){return Ue},TransactionMessage:function(){return De},TransactionStatus:function(){return Me},VALIDATOR_INFO_KEY:function(){return fi},VERSION_PREFIX_MASK:function(){return le},VOTE_PROGRAM_ID:function(){return yi},ValidatorInfo:function(){return mi},VersionedMessage:function(){return Pe},VersionedTransaction:function(){return We},VoteAccount:function(){return bi},VoteAuthorizationLayout:function(){return di},VoteInit:function(){return ui},VoteInstruction:function(){return li},VoteProgram:function(){return pi},clusterApiUrl:function(){return Ii},sendAndConfirmRawTransaction:function(){return Si},sendAndConfirmTransaction:function(){return rt}});r(44114),r(18111),r(81148),r(22489),r(20116),r(7588),r(61701),r(18237),r(13579),r(17642),r(58004),r(33853),r(45876),r(32475),r(15024),r(31698);var n=r(90712),i=r(9306),s=r(72487),o=r.n(s),a=r(6147),c=r.n(a),u=r(74887),l=r(59930),h=r(63558),d=r(91114),p=(r(64979),8078e3),f=8078001,g=8078004,m=8078005,y=8078006,w=8078011;function b(e){if(Array.isArray(e)){const t=e.map(b).join("%2C%20");return"%5B"+t+"%5D"}return"bigint"===typeof e?`${e}n`:encodeURIComponent(String(null!=e&&null===Object.getPrototypeOf(e)?{...e}:e))}function v([e,t]){return`${e}=${b(t)}`}function _(e){const t=Object.entries(e).map(v).join("&");return btoa(t)}function E(e,t={}){{let r=`Solana error #${e}; Decode this error by running \`npx @solana/errors decode -- ${e}`;return Object.keys(t).length&&(r+=` '${_(t)}'`),`${r}\``}}var A=class extends Error{constructor(...[e,t]){let r,n;if(t){const{cause:e,...i}=t;e&&(n={cause:e}),Object.keys(i).length>0&&(r=i)}const i=E(e,r);super(i,n),(0,d.A)(this,"cause",this.cause),(0,d.A)(this,"context",void 0),this.context={__code:e,...r},this.name="SolanaError"}};function I(e,t){return"fixedSize"in t?t.fixedSize:t.getSizeFromValue(e)}function S(e){return Object.freeze({...e,encode:t=>{const r=new Uint8Array(I(t,e));return e.write(t,r,0),r}})}function C(e){return Object.freeze({...e,decode:(t,r=0)=>e.read(t,r)[0]})}function k(e){return"fixedSize"in e&&"number"===typeof e.fixedSize}function N(e,t){if(k(e)!==k(t))throw new A(g);if(k(e)&&k(t)&&e.fixedSize!==t.fixedSize)throw new A(m,{decoderFixedSize:t.fixedSize,encoderFixedSize:e.fixedSize});if(!k(e)&&!k(t)&&e.maxSize!==t.maxSize)throw new A(y,{decoderMaxSize:t.maxSize,encoderMaxSize:e.maxSize});return{...t,...e,decode:t.decode,encode:e.encode,read:t.read,write:e.write}}function O(e,t,r=0){if(t.length-r<=0)throw new A(p,{codecDescription:e})}function T(e,t,r,n=0){const i=r.length-n;if(i<t)throw new A(f,{bytesLength:i,codecDescription:e,expected:t})}function R(e,t,r,n){if(n<t||n>r)throw new A(w,{codecDescription:e,max:r,min:t,value:n})}function x(e){return 1!==e?.endian}function P(e){return S({fixedSize:e.size,write(t,r,n){e.range&&R(e.name,e.range[0],e.range[1],t);const i=new ArrayBuffer(e.size);return e.set(new DataView(i),t,x(e.config)),r.set(new Uint8Array(i),n),n+e.size}})}function M(e){return C({fixedSize:e.size,read(t,r=0){O(e.name,t,r),T(e.name,e.size,t,r);const n=new DataView(B(t,r,e.size));return[e.get(n,x(e.config)),r+e.size]}})}function B(e,t,r){const n=e.byteOffset+(t??0),i=r??e.byteLength;return e.buffer.slice(n,n+i)}var U=(e={})=>P({config:e,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,t,r)=>e.setBigUint64(0,BigInt(t),r),size:8}),L=(e={})=>M({config:e,get:(e,t)=>e.getBigUint64(0,t),name:"u64",size:8}),D=(e={})=>N(U(e),L(e)),W=r(17945),j=r(18571),z=r.n(j),H=r(37056),q=r(65699),$=r(65479);const F=i.ev.utils.randomPrivateKey,K=()=>{const e=i.ev.utils.randomPrivateKey(),t=V(e),r=new Uint8Array(64);return r.set(e),r.set(t,32),{publicKey:t,secretKey:r}},V=i.ev.getPublicKey;function Y(e){try{return i.ev.ExtendedPoint.fromHex(e),!0}catch{return!1}}const G=(e,t)=>i.ev.sign(e,t.slice(0,32)),Z=i.ev.verify,J=e=>n.Buffer.isBuffer(e)?e:e instanceof Uint8Array?n.Buffer.from(e.buffer,e.byteOffset,e.byteLength):n.Buffer.from(e);class X{constructor(e){Object.assign(this,e)}encode(){return n.Buffer.from((0,l.serialize)(ee,this))}static decode(e){return(0,l.deserialize)(ee,this,e)}static decodeUnchecked(e){return(0,l.deserializeUnchecked)(ee,this,e)}}class Q extends X{constructor(e){if(super(e),this.enum="",1!==Object.keys(e).length)throw new Error("Enum can only take single value");Object.keys(e).map((e=>{this.enum=e}))}}const ee=new Map;var te;const re=32,ne=32;function ie(e){return void 0!==e._bn}let se=1;class oe extends X{constructor(e){if(super({}),this._bn=void 0,ie(e))this._bn=e._bn;else{if("string"===typeof e){const t=c().decode(e);if(t.length!=ne)throw new Error("Invalid public key input");this._bn=new(o())(t)}else this._bn=new(o())(e);if(this._bn.byteLength()>ne)throw new Error("Invalid public key input")}}static unique(){const e=new oe(se);return se+=1,new oe(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return c().encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(n.Buffer);if(e.length===ne)return e;const t=n.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,r){const i=n.Buffer.concat([e.toBuffer(),n.Buffer.from(t),r.toBuffer()]),s=(0,u.sc)(i);return new oe(s)}static createProgramAddressSync(e,t){let r=n.Buffer.alloc(0);e.forEach((function(e){if(e.length>re)throw new TypeError("Max seed length exceeded");r=n.Buffer.concat([r,J(e)])})),r=n.Buffer.concat([r,t.toBuffer(),n.Buffer.from("ProgramDerivedAddress")]);const i=(0,u.sc)(r);if(Y(i))throw new Error("Invalid seeds, address must fall off the curve");return new oe(i)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let r,i=255;while(0!=i){try{const s=e.concat(n.Buffer.from([i]));r=this.createProgramAddressSync(s,t)}catch(s){if(s instanceof TypeError)throw s;i--;continue}return[r,i]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){const t=new oe(e);return Y(t.toBytes())}}te=oe,oe.default=new te("11111111111111111111111111111111"),ee.set(oe,{kind:"struct",fields:[["_bn","u256"]]});class ae{constructor(e){if(this._publicKey=void 0,this._secretKey=void 0,e){const t=J(e);if(64!==e.length)throw new Error("bad secret key size");this._publicKey=t.slice(32,64),this._secretKey=t.slice(0,32)}else this._secretKey=J(F()),this._publicKey=J(V(this._secretKey))}get publicKey(){return new oe(this._publicKey)}get secretKey(){return n.Buffer.concat([this._secretKey,this._publicKey],64)}}const ce=new oe("BPFLoader1111111111111111111111111111111111"),ue=1232,le=127,he=64;class de extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(de.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class pe extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(pe.prototype,"name",{value:"TransactionExpiredTimeoutError"});class fe extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(fe.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class ge{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){const t=255;if(this.length>t+1)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach(((e,t)=>{r.set(e.toBase58(),t)}));const n=e=>{const t=r.get(e.toBase58());if(void 0===t)throw new Error("Encountered an unknown instruction account key during compilation");return t};return e.map((e=>({programIdIndex:n(e.programId),accountKeyIndexes:e.keys.map((e=>n(e.pubkey))),data:e.data})))}}const me=(e="publicKey")=>h.av(32,e),ye=(e="signature")=>h.av(64,e),we=(e="string")=>{const t=h.w3([h.DH("length"),h.DH("lengthPadding"),h.av(h.cY(h.DH(),-8),"chars")],e),r=t.decode.bind(t),i=t.encode.bind(t),s=t;return s.decode=(e,t)=>{const n=r(e,t);return n["chars"].toString()},s.encode=(e,t,r)=>{const s={chars:n.Buffer.from(e,"utf8")};return i(s,t,r)},s.alloc=e=>h.DH().span+h.DH().span+n.Buffer.from(e,"utf8").length,s},be=(e="authorized")=>h.w3([me("staker"),me("withdrawer")],e),ve=(e="lockup")=>h.w3([h.Wg("unixTimestamp"),h.Wg("epoch"),me("custodian")],e),_e=(e="voteInit")=>h.w3([me("nodePubkey"),me("authorizedVoter"),me("authorizedWithdrawer"),h.u8("commission")],e),Ee=(e="voteAuthorizeWithSeedArgs")=>h.w3([h.DH("voteAuthorizationType"),me("currentAuthorityDerivedKeyOwnerPubkey"),we("currentAuthorityDerivedKeySeed"),me("newAuthorized")],e);function Ae(e,t){const r=e=>{if(e.span>=0)return e.span;if("function"===typeof e.alloc)return e.alloc(t[e.property]);if("count"in e&&"elementLayout"in e){const n=t[e.property];if(Array.isArray(n))return n.length*r(e.elementLayout)}else if("fields"in e)return Ae({layout:e},t[e.property]);return 0};let n=0;return e.layout.fields.forEach((e=>{n+=r(e)})),n}function Ie(e){let t=0,r=0;for(;;){let n=e.shift();if(t|=(127&n)<<7*r,r+=1,0===(128&n))break}return t}function Se(e,t){let r=t;for(;;){let t=127&r;if(r>>=7,0==r){e.push(t);break}t|=128,e.push(t)}}function Ce(e,t){if(!e)throw new Error(t||"Assertion failed")}class ke{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const r=new Map,n=e=>{const t=e.toBase58();let n=r.get(t);return void 0===n&&(n={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(t,n)),n},i=n(t);i.isSigner=!0,i.isWritable=!0;for(const s of e){n(s.programId).isInvoked=!0;for(const e of s.keys){const t=n(e.pubkey);t.isSigner||=e.isSigner,t.isWritable||=e.isWritable}}return new ke(t,r)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];Ce(e.length<=256,"Max static account keys length exceeded");const t=e.filter((([,e])=>e.isSigner&&e.isWritable)),r=e.filter((([,e])=>e.isSigner&&!e.isWritable)),n=e.filter((([,e])=>!e.isSigner&&e.isWritable)),i=e.filter((([,e])=>!e.isSigner&&!e.isWritable)),s={numRequiredSignatures:t.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{Ce(t.length>0,"Expected at least one writable signer key");const[e]=t[0];Ce(e===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const o=[...t.map((([e])=>new oe(e))),...r.map((([e])=>new oe(e))),...n.map((([e])=>new oe(e))),...i.map((([e])=>new oe(e)))];return[s,o]}extractTableLookup(e){const[t,r]=this.drainKeysFoundInLookupTable(e.state.addresses,(e=>!e.isSigner&&!e.isInvoked&&e.isWritable)),[n,i]=this.drainKeysFoundInLookupTable(e.state.addresses,(e=>!e.isSigner&&!e.isInvoked&&!e.isWritable));if(0!==t.length||0!==n.length)return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:n},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(e,t){const r=new Array,n=new Array;for(const[i,s]of this.keyMetaMap.entries())if(t(s)){const t=new oe(i),s=e.findIndex((e=>e.equals(t)));s>=0&&(Ce(s<256,"Max lookup table index exceeded"),r.push(s),n.push(t),this.keyMetaMap.delete(i))}return[r,n]}}const Ne="Reached end of buffer unexpectedly";function Oe(e){if(0===e.length)throw new Error(Ne);return e.shift()}function Te(e,...t){const[r]=t;if(2===t.length?r+(t[1]??0)>e.length:r>=e.length)throw new Error(Ne);return e.splice(...t)}class Re{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map((e=>new oe(e))),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach((e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex])))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map((e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:c().decode(e.data)})))}get addressTableLookups(){return[]}getAccountKeys(){return new ge(this.staticAccountKeys)}static compile(e){const t=ke.compile(e.instructions,e.payerKey),[r,n]=t.getMessageComponents(),i=new ge(n),s=i.compileInstructions(e.instructions).map((e=>({programIdIndex:e.programIdIndex,accounts:e.accountKeyIndexes,data:c().encode(e.data)})));return new Re({header:r,accountKeys:n,recentBlockhash:e.recentBlockhash,instructions:s})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const r=e-t,n=this.accountKeys.length-t,i=n-this.header.numReadonlyUnsignedAccounts;return r<i}{const r=t-this.header.numReadonlySignedAccounts;return e<r}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter(((e,t)=>!this.isProgramId(t)))}serialize(){const e=this.accountKeys.length;let t=[];Se(t,e);const r=this.instructions.map((e=>{const{accounts:t,programIdIndex:r}=e,i=Array.from(c().decode(e.data));let s=[];Se(s,t.length);let o=[];return Se(o,i.length),{programIdIndex:r,keyIndicesCount:n.Buffer.from(s),keyIndices:t,dataLength:n.Buffer.from(o),data:i}}));let i=[];Se(i,r.length);let s=n.Buffer.alloc(ue);n.Buffer.from(i).copy(s);let o=i.length;r.forEach((e=>{const t=h.w3([h.u8("programIdIndex"),h.av(e.keyIndicesCount.length,"keyIndicesCount"),h.O6(h.u8("keyIndex"),e.keyIndices.length,"keyIndices"),h.av(e.dataLength.length,"dataLength"),h.O6(h.u8("userdatum"),e.data.length,"data")]),r=t.encode(e,s,o);o+=r})),s=s.slice(0,o);const a=h.w3([h.av(1,"numRequiredSignatures"),h.av(1,"numReadonlySignedAccounts"),h.av(1,"numReadonlyUnsignedAccounts"),h.av(t.length,"keyCount"),h.O6(me("key"),e,"keys"),me("recentBlockhash")]),u={numRequiredSignatures:n.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:n.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:n.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:n.Buffer.from(t),keys:this.accountKeys.map((e=>J(e.toBytes()))),recentBlockhash:c().decode(this.recentBlockhash)};let l=n.Buffer.alloc(2048);const d=a.encode(u,l);return s.copy(l,d),l.slice(0,d+s.length)}static from(e){let t=[...e];const r=Oe(t);if(r!==(r&le))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=Oe(t),s=Oe(t),o=Ie(t);let a=[];for(let c=0;c<o;c++){const e=Te(t,0,ne);a.push(new oe(n.Buffer.from(e)))}const u=Te(t,0,ne),l=Ie(t);let h=[];for(let p=0;p<l;p++){const e=Oe(t),r=Ie(t),i=Te(t,0,r),s=Ie(t),o=Te(t,0,s),a=c().encode(n.Buffer.from(o));h.push({programIdIndex:e,accounts:i,data:a})}const d={header:{numRequiredSignatures:r,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:c().encode(n.Buffer.from(u)),accountKeys:a,instructions:h};return new Re(d)}}class xe{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new ge(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(e>=r){const t=e-r,n=this.addressTableLookups.reduce(((e,t)=>e+t.writableIndexes.length),0);return t<n}if(e>=this.header.numRequiredSignatures){const n=e-t,i=r-t,s=i-this.header.numReadonlyUnsignedAccounts;return n<s}{const r=t-this.header.numReadonlySignedAccounts;return e<r}}resolveAddressTableLookups(e){const t={writable:[],readonly:[]};for(const r of this.addressTableLookups){const n=e.find((e=>e.key.equals(r.accountKey)));if(!n)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const e of r.writableIndexes){if(!(e<n.state.addresses.length))throw new Error(`Failed to find address for index ${e} in address lookup table ${r.accountKey.toBase58()}`);t.writable.push(n.state.addresses[e])}for(const e of r.readonlyIndexes){if(!(e<n.state.addresses.length))throw new Error(`Failed to find address for index ${e} in address lookup table ${r.accountKey.toBase58()}`);t.readonly.push(n.state.addresses[e])}}return t}static compile(e){const t=ke.compile(e.instructions,e.payerKey),r=new Array,n={writable:new Array,readonly:new Array},i=e.addressLookupTableAccounts||[];for(const u of i){const e=t.extractTableLookup(u);if(void 0!==e){const[t,{writable:i,readonly:s}]=e;r.push(t),n.writable.push(...i),n.readonly.push(...s)}}const[s,o]=t.getMessageComponents(),a=new ge(o,n),c=a.compileInstructions(e.instructions);return new xe({header:s,staticAccountKeys:o,recentBlockhash:e.recentBlockhash,compiledInstructions:c,addressTableLookups:r})}serialize(){const e=Array();Se(e,this.staticAccountKeys.length);const t=this.serializeInstructions(),r=Array();Se(r,this.compiledInstructions.length);const n=this.serializeAddressTableLookups(),i=Array();Se(i,this.addressTableLookups.length);const s=h.w3([h.u8("prefix"),h.w3([h.u8("numRequiredSignatures"),h.u8("numReadonlySignedAccounts"),h.u8("numReadonlyUnsignedAccounts")],"header"),h.av(e.length,"staticAccountKeysLength"),h.O6(me(),this.staticAccountKeys.length,"staticAccountKeys"),me("recentBlockhash"),h.av(r.length,"instructionsLength"),h.av(t.length,"serializedInstructions"),h.av(i.length,"addressTableLookupsLength"),h.av(n.length,"serializedAddressTableLookups")]),o=new Uint8Array(ue),a=128,u=s.encode({prefix:a,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map((e=>e.toBytes())),recentBlockhash:c().decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:n},o);return o.slice(0,u)}serializeInstructions(){let e=0;const t=new Uint8Array(ue);for(const r of this.compiledInstructions){const n=Array();Se(n,r.accountKeyIndexes.length);const i=Array();Se(i,r.data.length);const s=h.w3([h.u8("programIdIndex"),h.av(n.length,"encodedAccountKeyIndexesLength"),h.O6(h.u8(),r.accountKeyIndexes.length,"accountKeyIndexes"),h.av(i.length,"encodedDataLength"),h.av(r.data.length,"data")]);e+=s.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(n),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0;const t=new Uint8Array(ue);for(const r of this.addressTableLookups){const n=Array();Se(n,r.writableIndexes.length);const i=Array();Se(i,r.readonlyIndexes.length);const s=h.w3([me("accountKey"),h.av(n.length,"encodedWritableIndexesLength"),h.O6(h.u8(),r.writableIndexes.length,"writableIndexes"),h.av(i.length,"encodedReadonlyIndexesLength"),h.O6(h.u8(),r.readonlyIndexes.length,"readonlyIndexes")]);e+=s.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(n),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e];const r=Oe(t),n=r&le;Ce(r!==n,"Expected versioned message but received legacy message");const i=n;Ce(0===i,`Expected versioned message with version 0 but found version ${i}`);const s={numRequiredSignatures:Oe(t),numReadonlySignedAccounts:Oe(t),numReadonlyUnsignedAccounts:Oe(t)},o=[],a=Ie(t);for(let c=0;c<a;c++)o.push(new oe(Te(t,0,ne)));const u=c().encode(Te(t,0,ne)),l=Ie(t),h=[];for(let c=0;c<l;c++){const e=Oe(t),r=Ie(t),n=Te(t,0,r),i=Ie(t),s=new Uint8Array(Te(t,0,i));h.push({programIdIndex:e,accountKeyIndexes:n,data:s})}const d=Ie(t),p=[];for(let c=0;c<d;c++){const e=new oe(Te(t,0,ne)),r=Ie(t),n=Te(t,0,r),i=Ie(t),s=Te(t,0,i);p.push({accountKey:e,writableIndexes:n,readonlyIndexes:s})}return new xe({header:s,staticAccountKeys:o,recentBlockhash:u,compiledInstructions:h,addressTableLookups:p})}}const Pe={deserializeMessageVersion(e){const t=e[0],r=t&le;return r===t?"legacy":r},deserialize:e=>{const t=Pe.deserializeMessageVersion(e);if("legacy"===t)return Re.from(e);if(0===t)return xe.deserialize(e);throw new Error(`Transaction message version ${t} deserialization is not supported`)}};let Me=function(e){return e[e["BLOCKHEIGHT_EXCEEDED"]=0]="BLOCKHEIGHT_EXCEEDED",e[e["PROCESSED"]=1]="PROCESSED",e[e["TIMED_OUT"]=2]="TIMED_OUT",e[e["NONCE_INVALID"]=3]="NONCE_INVALID",e}({});const Be=n.Buffer.alloc(he).fill(0);class Ue{constructor(e){this.keys=void 0,this.programId=void 0,this.data=n.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map((({pubkey:e,isSigner:t,isWritable:r})=>({pubkey:e.toJSON(),isSigner:t,isWritable:r}))),programId:this.programId.toJSON(),data:[...this.data]}}}class Le{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:r}=e;this.minNonceContextSlot=t,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:r}=e;this.recentBlockhash=t,this.lastValidBlockHeight=r}else{const{recentBlockhash:t,nonceInfo:r}=e;r&&(this.nonceInfo=r),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map((e=>e.toJSON())),signers:this.signatures.map((({publicKey:e})=>e.toJSON()))}}add(...e){if(0===e.length)throw new Error("No instructions");return e.forEach((e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new Ue(e))})),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t,r;if(this.nonceInfo?(e=this.nonceInfo.nonce,t=this.instructions[0]!=this.nonceInfo.nonceInstruction?[this.nonceInfo.nonceInstruction,...this.instructions]:this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");if(t.length<1&&console.warn("No instructions provided"),this.feePayer)r=this.feePayer;else{if(!(this.signatures.length>0&&this.signatures[0].publicKey))throw new Error("Transaction fee payer required");r=this.signatures[0].publicKey}for(let c=0;c<t.length;c++)if(void 0===t[c].programId)throw new Error(`Transaction instruction index ${c} has undefined program id`);const n=[],i=[];t.forEach((e=>{e.keys.forEach((e=>{i.push({...e})}));const t=e.programId.toString();n.includes(t)||n.push(t)})),n.forEach((e=>{i.push({pubkey:new oe(e),isSigner:!1,isWritable:!1})}));const s=[];i.forEach((e=>{const t=e.pubkey.toString(),r=s.findIndex((e=>e.pubkey.toString()===t));r>-1?(s[r].isWritable=s[r].isWritable||e.isWritable,s[r].isSigner=s[r].isSigner||e.isSigner):s.push(e)})),s.sort((function(e,t){if(e.isSigner!==t.isSigner)return e.isSigner?-1:1;if(e.isWritable!==t.isWritable)return e.isWritable?-1:1;const r={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return e.pubkey.toBase58().localeCompare(t.pubkey.toBase58(),"en",r)}));const o=s.findIndex((e=>e.pubkey.equals(r)));if(o>-1){const[e]=s.splice(o,1);e.isSigner=!0,e.isWritable=!0,s.unshift(e)}else s.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const c of this.signatures){const e=s.findIndex((e=>e.pubkey.equals(c.publicKey)));if(!(e>-1))throw new Error(`unknown signer: ${c.publicKey.toString()}`);s[e].isSigner||(s[e].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."))}let a=0,u=0,l=0;const h=[],d=[];s.forEach((({pubkey:e,isSigner:t,isWritable:r})=>{t?(h.push(e.toString()),a+=1,r||(u+=1)):(d.push(e.toString()),r||(l+=1))}));const p=h.concat(d),f=t.map((e=>{const{data:t,programId:r}=e;return{programIdIndex:p.indexOf(r.toString()),accounts:e.keys.map((e=>p.indexOf(e.pubkey.toString()))),data:c().encode(t)}}));return f.forEach((e=>{Ce(e.programIdIndex>=0),e.accounts.forEach((e=>Ce(e>=0)))})),new Re({header:{numRequiredSignatures:a,numReadonlySignedAccounts:u,numReadonlyUnsignedAccounts:l},accountKeys:p,recentBlockhash:e,instructions:f})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);if(this.signatures.length===t.length){const r=this.signatures.every(((e,r)=>t[r].equals(e.publicKey)));if(r)return e}return this.signatures=t.map((e=>({signature:null,publicKey:e}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(0===e.length)throw new Error("No signers");const t=new Set;this.signatures=e.filter((e=>{const r=e.toString();return!t.has(r)&&(t.add(r),!0)})).map((e=>({signature:null,publicKey:e})))}sign(...e){if(0===e.length)throw new Error("No signers");const t=new Set,r=[];for(const i of e){const e=i.publicKey.toString();t.has(e)||(t.add(e),r.push(i))}this.signatures=r.map((e=>({signature:null,publicKey:e.publicKey})));const n=this._compile();this._partialSign(n,...r)}partialSign(...e){if(0===e.length)throw new Error("No signers");const t=new Set,r=[];for(const i of e){const e=i.publicKey.toString();t.has(e)||(t.add(e),r.push(i))}const n=this._compile();this._partialSign(n,...r)}_partialSign(e,...t){const r=e.serialize();t.forEach((e=>{const t=G(r,e.secretKey);this._addSignature(e.publicKey,J(t))}))}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){Ce(64===t.length);const r=this.signatures.findIndex((t=>e.equals(t.publicKey)));if(r<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[r].signature=n.Buffer.from(t)}verifySignatures(e=!0){const t=this._getMessageSignednessErrors(this.serializeMessage(),e);return!t}_getMessageSignednessErrors(e,t){const r={};for(const{signature:n,publicKey:i}of this.signatures)null===n?t&&(r.missing||=[]).push(i):Z(n,e,i.toBytes())||(r.invalid||=[]).push(i);return r.invalid||r.missing?r:void 0}serialize(e){const{requireAllSignatures:t,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),n=this.serializeMessage();if(r){const e=this._getMessageSignednessErrors(n,t);if(e){let t="Signature verification failed.";throw e.invalid&&(t+=`\nInvalid signature for public key${1===e.invalid.length?"":"(s)"} [\`${e.invalid.map((e=>e.toBase58())).join("`, `")}\`].`),e.missing&&(t+=`\nMissing signature for public key${1===e.missing.length?"":"(s)"} [\`${e.missing.map((e=>e.toBase58())).join("`, `")}\`].`),new Error(t)}}return this._serialize(n)}_serialize(e){const{signatures:t}=this,r=[];Se(r,t.length);const i=r.length+64*t.length+e.length,s=n.Buffer.alloc(i);return Ce(t.length<256),n.Buffer.from(r).copy(s,0),t.forEach((({signature:e},t)=>{null!==e&&(Ce(64===e.length,"signature has invalid length"),n.Buffer.from(e).copy(s,r.length+64*t))})),e.copy(s,r.length+64*t.length),Ce(s.length<=ue,`Transaction too large: ${s.length} > ${ue}`),s}get keys(){return Ce(1===this.instructions.length),this.instructions[0].keys.map((e=>e.pubkey))}get programId(){return Ce(1===this.instructions.length),this.instructions[0].programId}get data(){return Ce(1===this.instructions.length),this.instructions[0].data}static from(e){let t=[...e];const r=Ie(t);let i=[];for(let s=0;s<r;s++){const e=Te(t,0,he);i.push(c().encode(n.Buffer.from(e)))}return Le.populate(Re.from(t),i)}static populate(e,t=[]){const r=new Le;return r.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(r.feePayer=e.accountKeys[0]),t.forEach(((t,n)=>{const i={signature:t==c().encode(Be)?null:c().decode(t),publicKey:e.accountKeys[n]};r.signatures.push(i)})),e.instructions.forEach((t=>{const n=t.accounts.map((t=>{const n=e.accountKeys[t];return{pubkey:n,isSigner:r.signatures.some((e=>e.publicKey.toString()===n.toString()))||e.isAccountSigner(t),isWritable:e.isAccountWritable(t)}}));r.instructions.push(new Ue({keys:n,programId:e.accountKeys[t.programIdIndex],data:c().decode(t.data)}))})),r._message=e,r._json=r.toJSON(),r}}class De{constructor(e){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=e.payerKey,this.instructions=e.instructions,this.recentBlockhash=e.recentBlockhash}static decompile(e,t){const{header:r,compiledInstructions:n,recentBlockhash:i}=e,{numRequiredSignatures:s,numReadonlySignedAccounts:o,numReadonlyUnsignedAccounts:a}=r,c=s-o;Ce(c>0,"Message header is invalid");const u=e.staticAccountKeys.length-s-a;Ce(u>=0,"Message header is invalid");const l=e.getAccountKeys(t),h=l.get(0);if(void 0===h)throw new Error("Failed to decompile message because no account keys were found");const d=[];for(const p of n){const e=[];for(const n of p.accountKeyIndexes){const t=l.get(n);if(void 0===t)throw new Error(`Failed to find key for account key index ${n}`);const i=n<s;let o;o=i?n<c:n<l.staticAccountKeys.length?n-s<u:n-l.staticAccountKeys.length<l.accountKeysFromLookups.writable.length,e.push({pubkey:t,isSigner:n<r.numRequiredSignatures,isWritable:o})}const t=l.get(p.programIdIndex);if(void 0===t)throw new Error(`Failed to find program id for program id index ${p.programIdIndex}`);d.push(new Ue({programId:t,data:J(p.data),keys:e}))}return new De({payerKey:h,instructions:d,recentBlockhash:i})}compileToLegacyMessage(){return Re.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(e){return xe.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:e})}}class We{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,void 0!==t)Ce(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{const t=[];for(let r=0;r<e.header.numRequiredSignatures;r++)t.push(new Uint8Array(he));this.signatures=t}this.message=e}serialize(){const e=this.message.serialize(),t=Array();Se(t,this.signatures.length);const r=h.w3([h.av(t.length,"encodedSignaturesLength"),h.O6(ye(),this.signatures.length,"signatures"),h.av(e.length,"serializedMessage")]),n=new Uint8Array(2048),i=r.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},n);return n.slice(0,i)}static deserialize(e){let t=[...e];const r=[],n=Ie(t);for(let s=0;s<n;s++)r.push(new Uint8Array(Te(t,0,he)));const i=Pe.deserialize(new Uint8Array(t));return new We(i,r)}sign(e){const t=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const n of e){const e=r.findIndex((e=>e.equals(n.publicKey)));Ce(e>=0,`Cannot sign with non signer key ${n.publicKey.toBase58()}`),this.signatures[e]=G(t,n.secretKey)}}addSignature(e,t){Ce(64===t.byteLength,"Signature must be 64 bytes long");const r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures),n=r.findIndex((t=>t.equals(e)));Ce(n>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[n]=t}}const je=160,ze=64,He=je/ze,qe=1e3/He,$e=new oe("SysvarC1ock11111111111111111111111111111111"),Fe=new oe("SysvarEpochSchedu1e111111111111111111111111"),Ke=new oe("Sysvar1nstructions1111111111111111111111111"),Ve=new oe("SysvarRecentB1ockHashes11111111111111111111"),Ye=new oe("SysvarRent111111111111111111111111111111111"),Ge=new oe("SysvarRewards111111111111111111111111111111"),Ze=new oe("SysvarS1otHashes111111111111111111111111111"),Je=new oe("SysvarS1otHistory11111111111111111111111111"),Xe=new oe("SysvarStakeHistory1111111111111111111111111");class Qe extends Error{constructor({action:e,signature:t,transactionMessage:r,logs:n}){const i=n?`Logs: \n${JSON.stringify(n.slice(-10),null,2)}. `:"",s="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let o;switch(e){case"send":o=`Transaction ${t} resulted in an error. \n${r}. `+i+s;break;case"simulate":o=`Simulation failed. \nMessage: ${r}. \n`+i+s;break;default:o=`Unknown action '${(e=>e)(e)}'`}super(o),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=t,this.transactionMessage=r,this.transactionLogs=n||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(null==e||"object"!==typeof e||!("then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise(((t,r)=>{e.getTransaction(this.signature).then((e=>{if(e&&e.meta&&e.meta.logMessages){const r=e.meta.logMessages;this.transactionLogs=r,t(r)}else r(new Error("Log messages not found"))})).catch(r)}))),await this.transactionLogs}}const et={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class tt extends Error{constructor({code:e,message:t,data:r},n){super(null!=n?`${n}: ${t}`:t),this.code=void 0,this.data=void 0,this.code=e,this.data=r,this.name="SolanaJSONRPCError"}}async function rt(e,t,r,n){const i=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},s=await e.sendTransaction(t,r,i);let o;if(null!=t.recentBlockhash&&null!=t.lastValidBlockHeight)o=(await e.confirmTransaction({abortSignal:n?.abortSignal,signature:s,blockhash:t.recentBlockhash,lastValidBlockHeight:t.lastValidBlockHeight},n&&n.commitment)).value;else if(null!=t.minNonceContextSlot&&null!=t.nonceInfo){const{nonceInstruction:r}=t.nonceInfo,i=r.keys[0].pubkey;o=(await e.confirmTransaction({abortSignal:n?.abortSignal,minContextSlot:t.minNonceContextSlot,nonceAccountPubkey:i,nonceValue:t.nonceInfo.nonce,signature:s},n&&n.commitment)).value}else null!=n?.abortSignal&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),o=(await e.confirmTransaction(s,n&&n.commitment)).value;if(o.err){if(null!=s)throw new Qe({action:"send",signature:s,transactionMessage:`Status: (${JSON.stringify(o)})`});throw new Error(`Transaction ${s} failed (${JSON.stringify(o)})`)}return s}function nt(e){return new Promise((t=>setTimeout(t,e)))}function it(e,t){const r=e.layout.span>=0?e.layout.span:Ae(e,t),i=n.Buffer.alloc(r),s=Object.assign({instruction:e.index},t);return e.layout.encode(s,i),i}function st(e,t){let r;try{r=e.layout.decode(t)}catch(n){throw new Error("invalid instruction; "+n)}if(r.instruction!==e.index)throw new Error(`invalid instruction; instruction index mismatch ${r.instruction} != ${e.index}`);return r}const ot=h.I0("lamportsPerSignature"),at=h.w3([h.DH("version"),h.DH("state"),me("authorizedPubkey"),me("nonce"),h.w3([ot],"feeCalculator")]),ct=at.span;class ut{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const t=at.decode(J(e),0);return new ut({authorizedPubkey:new oe(t.authorizedPubkey),nonce:new oe(t.nonce).toString(),feeCalculator:t.feeCalculator})}}function lt(e){const t=(0,h.av)(8,e),r=t.decode.bind(t),n=t.encode.bind(t),i=t,s=D();return i.decode=(e,t)=>{const n=r(e,t);return s.decode(n)},i.encode=(e,t,r)=>{const i=s.encode(e);return n(i,t,r)},i}class ht{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const t=h.DH("instruction"),r=t.decode(e.data);let n;for(const[i,s]of Object.entries(dt))if(s.index==r){n=i;break}if(!n)throw new Error("Instruction type incorrect; not a SystemInstruction");return n}static decodeCreateAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t,space:r,programId:n}=st(dt.Create,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,lamports:t,space:r,programId:new oe(n)}}static decodeTransfer(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t}=st(dt.Transfer,e.data);return{fromPubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,lamports:t}}static decodeTransferWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t,seed:r,programId:n}=st(dt.TransferWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,basePubkey:e.keys[1].pubkey,toPubkey:e.keys[2].pubkey,lamports:t,seed:r,programId:new oe(n)}}static decodeAllocate(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{space:t}=st(dt.Allocate,e.data);return{accountPubkey:e.keys[0].pubkey,space:t}}static decodeAllocateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:r,space:n,programId:i}=st(dt.AllocateWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new oe(t),seed:r,space:n,programId:new oe(i)}}static decodeAssign(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{programId:t}=st(dt.Assign,e.data);return{accountPubkey:e.keys[0].pubkey,programId:new oe(t)}}static decodeAssignWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:r,programId:n}=st(dt.AssignWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new oe(t),seed:r,programId:new oe(n)}}static decodeCreateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{base:t,seed:r,lamports:n,space:i,programId:s}=st(dt.CreateWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,basePubkey:new oe(t),seed:r,lamports:n,space:i,programId:new oe(s)}}static decodeNonceInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{authorized:t}=st(dt.InitializeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:new oe(t)}}static decodeNonceAdvance(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),st(dt.AdvanceNonceAccount,e.data),{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static decodeNonceWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=st(dt.WithdrawNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t}}static decodeNonceAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t}=st(dt.AuthorizeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[1].pubkey,newAuthorizedPubkey:new oe(t)}}static checkProgramId(e){if(!e.equals(pt.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const dt=Object.freeze({Create:{index:0,layout:h.w3([h.DH("instruction"),h.Wg("lamports"),h.Wg("space"),me("programId")])},Assign:{index:1,layout:h.w3([h.DH("instruction"),me("programId")])},Transfer:{index:2,layout:h.w3([h.DH("instruction"),lt("lamports")])},CreateWithSeed:{index:3,layout:h.w3([h.DH("instruction"),me("base"),we("seed"),h.Wg("lamports"),h.Wg("space"),me("programId")])},AdvanceNonceAccount:{index:4,layout:h.w3([h.DH("instruction")])},WithdrawNonceAccount:{index:5,layout:h.w3([h.DH("instruction"),h.Wg("lamports")])},InitializeNonceAccount:{index:6,layout:h.w3([h.DH("instruction"),me("authorized")])},AuthorizeNonceAccount:{index:7,layout:h.w3([h.DH("instruction"),me("authorized")])},Allocate:{index:8,layout:h.w3([h.DH("instruction"),h.Wg("space")])},AllocateWithSeed:{index:9,layout:h.w3([h.DH("instruction"),me("base"),we("seed"),h.Wg("space"),me("programId")])},AssignWithSeed:{index:10,layout:h.w3([h.DH("instruction"),me("base"),we("seed"),me("programId")])},TransferWithSeed:{index:11,layout:h.w3([h.DH("instruction"),lt("lamports"),we("seed"),me("programId")])},UpgradeNonceAccount:{index:12,layout:h.w3([h.DH("instruction")])}});class pt{constructor(){}static createAccount(e){const t=dt.Create,r=it(t,{lamports:e.lamports,space:e.space,programId:J(e.programId.toBuffer())});return new Ue({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(e){let t,r;if("basePubkey"in e){const n=dt.TransferWithSeed;t=it(n,{lamports:BigInt(e.lamports),seed:e.seed,programId:J(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const n=dt.Transfer;t=it(n,{lamports:BigInt(e.lamports)}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new Ue({keys:r,programId:this.programId,data:t})}static assign(e){let t,r;if("basePubkey"in e){const n=dt.AssignWithSeed;t=it(n,{base:J(e.basePubkey.toBuffer()),seed:e.seed,programId:J(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const n=dt.Assign;t=it(n,{programId:J(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new Ue({keys:r,programId:this.programId,data:t})}static createAccountWithSeed(e){const t=dt.CreateWithSeed,r=it(t,{base:J(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:J(e.programId.toBuffer())});let n=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||n.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new Ue({keys:n,programId:this.programId,data:r})}static createNonceAccount(e){const t=new Le;"basePubkey"in e&&"seed"in e?t.add(pt.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:ct,programId:this.programId})):t.add(pt.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:ct,programId:this.programId}));const r={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(r)),t}static nonceInitialize(e){const t=dt.InitializeNonceAccount,r=it(t,{authorized:J(e.authorizedPubkey.toBuffer())}),n={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Ve,isSigner:!1,isWritable:!1},{pubkey:Ye,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new Ue(n)}static nonceAdvance(e){const t=dt.AdvanceNonceAccount,r=it(t),n={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Ve,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new Ue(n)}static nonceWithdraw(e){const t=dt.WithdrawNonceAccount,r=it(t,{lamports:e.lamports});return new Ue({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:Ve,isSigner:!1,isWritable:!1},{pubkey:Ye,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(e){const t=dt.AuthorizeNonceAccount,r=it(t,{authorized:J(e.newAuthorizedPubkey.toBuffer())});return new Ue({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(e){let t,r;if("basePubkey"in e){const n=dt.AllocateWithSeed;t=it(n,{base:J(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:J(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const n=dt.Allocate;t=it(n,{space:e.space}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new Ue({keys:r,programId:this.programId,data:t})}}pt.programId=new oe("11111111111111111111111111111111");const ft=ue-300;class gt{constructor(){}static getMinNumSignatures(e){return 2*(Math.ceil(e/gt.chunkSize)+1+1)}static async load(e,t,r,i,s){{const n=await e.getMinimumBalanceForRentExemption(s.length),o=await e.getAccountInfo(r.publicKey,"confirmed");let a=null;if(null!==o){if(o.executable)return console.error("Program load failed, account is already executable"),!1;o.data.length!==s.length&&(a=a||new Le,a.add(pt.allocate({accountPubkey:r.publicKey,space:s.length}))),o.owner.equals(i)||(a=a||new Le,a.add(pt.assign({accountPubkey:r.publicKey,programId:i}))),o.lamports<n&&(a=a||new Le,a.add(pt.transfer({fromPubkey:t.publicKey,toPubkey:r.publicKey,lamports:n-o.lamports})))}else a=(new Le).add(pt.createAccount({fromPubkey:t.publicKey,newAccountPubkey:r.publicKey,lamports:n>0?n:1,space:s.length,programId:i}));null!==a&&await rt(e,a,[t,r],{commitment:"confirmed"})}const o=h.w3([h.DH("instruction"),h.DH("offset"),h.DH("bytesLength"),h.DH("bytesLengthPadding"),h.O6(h.u8("byte"),h.cY(h.DH(),-8),"bytes")]),a=gt.chunkSize;let c=0,u=s,l=[];while(u.length>0){const s=u.slice(0,a),h=n.Buffer.alloc(a+16);o.encode({instruction:0,offset:c,bytes:s,bytesLength:0,bytesLengthPadding:0},h);const d=(new Le).add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0}],programId:i,data:h});if(l.push(rt(e,d,[t,r],{commitment:"confirmed"})),e._rpcEndpoint.includes("solana.com")){const e=4;await nt(1e3/e)}c+=a,u=u.slice(a)}await Promise.all(l);{const s=h.w3([h.DH("instruction")]),o=n.Buffer.alloc(s.span);s.encode({instruction:1},o);const a=(new Le).add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:Ye,isSigner:!1,isWritable:!1}],programId:i,data:o}),c="processed",u=await e.sendTransaction(a,[t,r],{preflightCommitment:c}),{context:l,value:d}=await e.confirmTransaction({signature:u,lastValidBlockHeight:a.lastValidBlockHeight,blockhash:a.recentBlockhash},c);if(d.err)throw new Error(`Transaction ${u} failed (${JSON.stringify(d)})`);while(1){try{const t=await e.getSlot({commitment:c});if(t>l.slot)break}catch{}await new Promise((e=>setTimeout(e,Math.round(qe/2))))}}return!0}}gt.chunkSize=ft;const mt=new oe("BPFLoader2111111111111111111111111111111111");class yt{static getMinNumSignatures(e){return gt.getMinNumSignatures(e)}static load(e,t,r,n,i){return gt.load(e,t,r,i,n)}}function wt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e}var bt,vt;function _t(){if(vt)return bt;vt=1;var e=Object.prototype.toString,t=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};function r(n,i){var s,o,a,c,u,l,h;if(!0===n)return"true";if(!1===n)return"false";switch(typeof n){case"object":if(null===n)return null;if(n.toJSON&&"function"===typeof n.toJSON)return r(n.toJSON(),i);if(h=e.call(n),"[object Array]"===h){for(a="[",o=n.length-1,s=0;s<o;s++)a+=r(n[s],!0)+",";return o>-1&&(a+=r(n[s],!0)),a+"]"}if("[object Object]"===h){c=t(n).sort(),o=c.length,a="",s=0;while(s<o)u=c[s],l=r(n[u],!1),void 0!==l&&(a&&(a+=","),a+=JSON.stringify(u)+":"+l),s++;return"{"+a+"}"}return JSON.stringify(n);case"function":case"undefined":return i?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}return bt=function(e){var t=r(e,!1);if(void 0!==t)return""+t},bt}var Et=_t(),At=wt(Et);const It=32;function St(e){let t=0;while(e>1)e/=2,t++;return t}function Ct(e){return 0===e?1:(e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e|=e>>32,e+1)}class kt{constructor(e,t,r,n,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=r,this.firstNormalEpoch=n,this.firstNormalSlot=i}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const t=St(Ct(e+It+1))-St(It)-1,r=this.getSlotsInEpoch(t),n=e-(r-It);return[t,n]}{const t=e-this.firstNormalSlot,r=Math.floor(t/this.slotsPerEpoch),n=this.firstNormalEpoch+r,i=t%this.slotsPerEpoch;return[n,i]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*It:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+St(It)):this.slotsPerEpoch}}var Nt=globalThis.fetch;class Ot extends H.vE{constructor(e,t,r){const n=e=>{const r=(0,H.kb)(e,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return this.underlyingSocket="socket"in r?r.socket:r,r};super(n,e,t,r),this.underlyingSocket=void 0}call(...e){const t=this.underlyingSocket?.readyState;return 1===t?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}notify(...e){const t=this.underlyingSocket?.readyState;return 1===t?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}}function Tt(e,t){let r;try{r=e.layout.decode(t)}catch(n){throw new Error("invalid instruction; "+n)}if(r.typeIndex!==e.index)throw new Error(`invalid account data; account type mismatch ${r.typeIndex} != ${e.index}`);return r}const Rt=56;class xt{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const t=Tt(Pt,e),r=e.length-Rt;Ce(r>=0,"lookup table is invalid"),Ce(r%32===0,"lookup table is invalid");const n=r/32,{addresses:i}=h.w3([h.O6(me(),n,"addresses")]).decode(e.slice(Rt));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:0!==t.authority.length?new oe(t.authority[0]):void 0,addresses:i.map((e=>new oe(e)))}}}const Pt={index:1,layout:h.w3([h.DH("typeIndex"),lt("deactivationSlot"),h.I0("lastExtendedSlot"),h.u8("lastExtendedStartIndex"),h.u8(),h.O6(me(),h.cY(h.u8(),-1),"authority")])},Mt=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function Bt(e){const t=e.match(Mt);if(null==t)throw TypeError(`Failed to validate endpoint URL \`${e}\``);const[r,n,i,s]=t,o=e.startsWith("https:")?"wss:":"ws:",a=null==i?null:parseInt(i.slice(1),10),c=null==a?"":`:${a+1}`;return`${o}//${n}${c}${s}`}const Ut=(0,W.au)((0,W.KJ)(oe),(0,W.Yj)(),(e=>new oe(e))),Lt=(0,W.PV)([(0,W.Yj)(),(0,W.eu)("base64")]),Dt=(0,W.au)((0,W.KJ)(n.Buffer),Lt,(e=>n.Buffer.from(e[0],"base64"))),Wt=3e4;function jt(e){if(!1===/^https?:/.test(e))throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return e}function zt(e){let t,r;if("string"===typeof e)t=e;else if(e){const{commitment:n,...i}=e;t=n,r=i}return{commitment:t,config:r}}function Ht(e){return e.map((e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e))}function qt(e){return(0,W.KC)([(0,W.NW)({jsonrpc:(0,W.eu)("2.0"),id:(0,W.Yj)(),result:e}),(0,W.NW)({jsonrpc:(0,W.eu)("2.0"),id:(0,W.Yj)(),error:(0,W.NW)({code:(0,W.L5)(),message:(0,W.Yj)(),data:(0,W.lq)((0,W.bz)())})})])}const $t=qt((0,W.L5)());function Ft(e){return(0,W.au)(qt(e),$t,(t=>"error"in t?t:{...t,result:(0,W.vt)(t.result,e)}))}function Kt(e){return Ft((0,W.NW)({context:(0,W.NW)({slot:(0,W.ai)()}),value:e}))}function Vt(e){return(0,W.NW)({context:(0,W.NW)({slot:(0,W.ai)()}),value:e})}function Yt(e,t){return 0===e?new xe({header:t.header,staticAccountKeys:t.accountKeys.map((e=>new oe(e))),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map((e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:c().decode(e.data)}))),addressTableLookups:t.addressTableLookups}):new Re(t)}const Gt=(0,W.NW)({foundation:(0,W.ai)(),foundationTerm:(0,W.ai)(),initial:(0,W.ai)(),taper:(0,W.ai)(),terminal:(0,W.ai)()}),Zt=Ft((0,W.YO)((0,W.me)((0,W.NW)({epoch:(0,W.ai)(),effectiveSlot:(0,W.ai)(),amount:(0,W.ai)(),postBalance:(0,W.ai)(),commission:(0,W.lq)((0,W.me)((0,W.ai)()))})))),Jt=(0,W.YO)((0,W.NW)({slot:(0,W.ai)(),prioritizationFee:(0,W.ai)()})),Xt=(0,W.NW)({total:(0,W.ai)(),validator:(0,W.ai)(),foundation:(0,W.ai)(),epoch:(0,W.ai)()}),Qt=(0,W.NW)({epoch:(0,W.ai)(),slotIndex:(0,W.ai)(),slotsInEpoch:(0,W.ai)(),absoluteSlot:(0,W.ai)(),blockHeight:(0,W.lq)((0,W.ai)()),transactionCount:(0,W.lq)((0,W.ai)())}),er=(0,W.NW)({slotsPerEpoch:(0,W.ai)(),leaderScheduleSlotOffset:(0,W.ai)(),warmup:(0,W.zM)(),firstNormalEpoch:(0,W.ai)(),firstNormalSlot:(0,W.ai)()}),tr=(0,W.g1)((0,W.Yj)(),(0,W.YO)((0,W.ai)())),rr=(0,W.me)((0,W.KC)([(0,W.NW)({}),(0,W.Yj)()])),nr=(0,W.NW)({err:rr}),ir=(0,W.eu)("receivedSignature"),sr=(0,W.NW)({"solana-core":(0,W.Yj)(),"feature-set":(0,W.lq)((0,W.ai)())}),or=(0,W.NW)({program:(0,W.Yj)(),programId:Ut,parsed:(0,W.L5)()}),ar=(0,W.NW)({programId:Ut,accounts:(0,W.YO)(Ut),data:(0,W.Yj)()}),cr=Kt((0,W.NW)({err:(0,W.me)((0,W.KC)([(0,W.NW)({}),(0,W.Yj)()])),logs:(0,W.me)((0,W.YO)((0,W.Yj)())),accounts:(0,W.lq)((0,W.me)((0,W.YO)((0,W.me)((0,W.NW)({executable:(0,W.zM)(),owner:(0,W.Yj)(),lamports:(0,W.ai)(),data:(0,W.YO)((0,W.Yj)()),rentEpoch:(0,W.lq)((0,W.ai)())}))))),unitsConsumed:(0,W.lq)((0,W.ai)()),returnData:(0,W.lq)((0,W.me)((0,W.NW)({programId:(0,W.Yj)(),data:(0,W.PV)([(0,W.Yj)(),(0,W.eu)("base64")])}))),innerInstructions:(0,W.lq)((0,W.me)((0,W.YO)((0,W.NW)({index:(0,W.ai)(),instructions:(0,W.YO)((0,W.KC)([or,ar]))}))))})),ur=Kt((0,W.NW)({byIdentity:(0,W.g1)((0,W.Yj)(),(0,W.YO)((0,W.ai)())),range:(0,W.NW)({firstSlot:(0,W.ai)(),lastSlot:(0,W.ai)()})}));function lr(e,t,r,n,i,s){const o=r||Nt;let a,c;null!=s&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments."),n&&(c=async(e,t)=>{const r=await new Promise(((r,i)=>{try{n(e,t,((e,t)=>r([e,t])))}catch(s){i(s)}}));return await o(...r)});const u=new(z())((async(r,n)=>{const s={method:"POST",body:r,agent:a,headers:Object.assign({"Content-Type":"application/json"},t||{},Pn)};try{let t,r=5,a=500;for(;;){if(t=c?await c(e,s):await o(e,s),429!==t.status)break;if(!0===i)break;if(r-=1,0===r)break;console.error(`Server responded with ${t.status} ${t.statusText}.  Retrying after ${a}ms delay...`),await nt(a),a*=2}const u=await t.text();t.ok?n(null,u):n(new Error(`${t.status} ${t.statusText}: ${u}`))}catch(u){u instanceof Error&&n(u)}}),{});return u}function hr(e){return(t,r)=>new Promise(((n,i)=>{e.request(t,r,((e,t)=>{e?i(e):n(t)}))}))}function dr(e){return t=>new Promise(((r,n)=>{0===t.length&&r([]);const i=t.map((t=>e.request(t.methodName,t.args)));e.request(i,((e,t)=>{e?n(e):r(t)}))}))}const pr=Ft(Gt),fr=Ft(Xt),gr=Ft(Jt),mr=Ft(Qt),yr=Ft(er),wr=Ft(tr),br=Ft((0,W.ai)()),vr=Kt((0,W.NW)({total:(0,W.ai)(),circulating:(0,W.ai)(),nonCirculating:(0,W.ai)(),nonCirculatingAccounts:(0,W.YO)(Ut)})),_r=(0,W.NW)({amount:(0,W.Yj)(),uiAmount:(0,W.me)((0,W.ai)()),decimals:(0,W.ai)(),uiAmountString:(0,W.lq)((0,W.Yj)())}),Er=Kt((0,W.YO)((0,W.NW)({address:Ut,amount:(0,W.Yj)(),uiAmount:(0,W.me)((0,W.ai)()),decimals:(0,W.ai)(),uiAmountString:(0,W.lq)((0,W.Yj)())}))),Ar=Kt((0,W.YO)((0,W.NW)({pubkey:Ut,account:(0,W.NW)({executable:(0,W.zM)(),owner:Ut,lamports:(0,W.ai)(),data:Dt,rentEpoch:(0,W.ai)()})}))),Ir=(0,W.NW)({program:(0,W.Yj)(),parsed:(0,W.L5)(),space:(0,W.ai)()}),Sr=Kt((0,W.YO)((0,W.NW)({pubkey:Ut,account:(0,W.NW)({executable:(0,W.zM)(),owner:Ut,lamports:(0,W.ai)(),data:Ir,rentEpoch:(0,W.ai)()})}))),Cr=Kt((0,W.YO)((0,W.NW)({lamports:(0,W.ai)(),address:Ut}))),kr=(0,W.NW)({executable:(0,W.zM)(),owner:Ut,lamports:(0,W.ai)(),data:Dt,rentEpoch:(0,W.ai)()}),Nr=(0,W.NW)({pubkey:Ut,account:kr}),Or=(0,W.au)((0,W.KC)([(0,W.KJ)(n.Buffer),Ir]),(0,W.KC)([Lt,Ir]),(e=>Array.isArray(e)?(0,W.vt)(e,Dt):e)),Tr=(0,W.NW)({executable:(0,W.zM)(),owner:Ut,lamports:(0,W.ai)(),data:Or,rentEpoch:(0,W.ai)()}),Rr=(0,W.NW)({pubkey:Ut,account:Tr}),xr=(0,W.NW)({state:(0,W.KC)([(0,W.eu)("active"),(0,W.eu)("inactive"),(0,W.eu)("activating"),(0,W.eu)("deactivating")]),active:(0,W.ai)(),inactive:(0,W.ai)()}),Pr=Ft((0,W.YO)((0,W.NW)({signature:(0,W.Yj)(),slot:(0,W.ai)(),err:rr,memo:(0,W.me)((0,W.Yj)()),blockTime:(0,W.lq)((0,W.me)((0,W.ai)()))}))),Mr=Ft((0,W.YO)((0,W.NW)({signature:(0,W.Yj)(),slot:(0,W.ai)(),err:rr,memo:(0,W.me)((0,W.Yj)()),blockTime:(0,W.lq)((0,W.me)((0,W.ai)()))}))),Br=(0,W.NW)({subscription:(0,W.ai)(),result:Vt(kr)}),Ur=(0,W.NW)({pubkey:Ut,account:kr}),Lr=(0,W.NW)({subscription:(0,W.ai)(),result:Vt(Ur)}),Dr=(0,W.NW)({parent:(0,W.ai)(),slot:(0,W.ai)(),root:(0,W.ai)()}),Wr=(0,W.NW)({subscription:(0,W.ai)(),result:Dr}),jr=(0,W.KC)([(0,W.NW)({type:(0,W.KC)([(0,W.eu)("firstShredReceived"),(0,W.eu)("completed"),(0,W.eu)("optimisticConfirmation"),(0,W.eu)("root")]),slot:(0,W.ai)(),timestamp:(0,W.ai)()}),(0,W.NW)({type:(0,W.eu)("createdBank"),parent:(0,W.ai)(),slot:(0,W.ai)(),timestamp:(0,W.ai)()}),(0,W.NW)({type:(0,W.eu)("frozen"),slot:(0,W.ai)(),timestamp:(0,W.ai)(),stats:(0,W.NW)({numTransactionEntries:(0,W.ai)(),numSuccessfulTransactions:(0,W.ai)(),numFailedTransactions:(0,W.ai)(),maxTransactionsPerEntry:(0,W.ai)()})}),(0,W.NW)({type:(0,W.eu)("dead"),slot:(0,W.ai)(),timestamp:(0,W.ai)(),err:(0,W.Yj)()})]),zr=(0,W.NW)({subscription:(0,W.ai)(),result:jr}),Hr=(0,W.NW)({subscription:(0,W.ai)(),result:Vt((0,W.KC)([nr,ir]))}),qr=(0,W.NW)({subscription:(0,W.ai)(),result:(0,W.ai)()}),$r=(0,W.NW)({pubkey:(0,W.Yj)(),gossip:(0,W.me)((0,W.Yj)()),tpu:(0,W.me)((0,W.Yj)()),rpc:(0,W.me)((0,W.Yj)()),version:(0,W.me)((0,W.Yj)())}),Fr=(0,W.NW)({votePubkey:(0,W.Yj)(),nodePubkey:(0,W.Yj)(),activatedStake:(0,W.ai)(),epochVoteAccount:(0,W.zM)(),epochCredits:(0,W.YO)((0,W.PV)([(0,W.ai)(),(0,W.ai)(),(0,W.ai)()])),commission:(0,W.ai)(),lastVote:(0,W.ai)(),rootSlot:(0,W.me)((0,W.ai)())}),Kr=Ft((0,W.NW)({current:(0,W.YO)(Fr),delinquent:(0,W.YO)(Fr)})),Vr=(0,W.KC)([(0,W.eu)("processed"),(0,W.eu)("confirmed"),(0,W.eu)("finalized")]),Yr=(0,W.NW)({slot:(0,W.ai)(),confirmations:(0,W.me)((0,W.ai)()),err:rr,confirmationStatus:(0,W.lq)(Vr)}),Gr=Kt((0,W.YO)((0,W.me)(Yr))),Zr=Ft((0,W.ai)()),Jr=(0,W.NW)({accountKey:Ut,writableIndexes:(0,W.YO)((0,W.ai)()),readonlyIndexes:(0,W.YO)((0,W.ai)())}),Xr=(0,W.NW)({signatures:(0,W.YO)((0,W.Yj)()),message:(0,W.NW)({accountKeys:(0,W.YO)((0,W.Yj)()),header:(0,W.NW)({numRequiredSignatures:(0,W.ai)(),numReadonlySignedAccounts:(0,W.ai)(),numReadonlyUnsignedAccounts:(0,W.ai)()}),instructions:(0,W.YO)((0,W.NW)({accounts:(0,W.YO)((0,W.ai)()),data:(0,W.Yj)(),programIdIndex:(0,W.ai)()})),recentBlockhash:(0,W.Yj)(),addressTableLookups:(0,W.lq)((0,W.YO)(Jr))})}),Qr=(0,W.NW)({pubkey:Ut,signer:(0,W.zM)(),writable:(0,W.zM)(),source:(0,W.lq)((0,W.KC)([(0,W.eu)("transaction"),(0,W.eu)("lookupTable")]))}),en=(0,W.NW)({accountKeys:(0,W.YO)(Qr),signatures:(0,W.YO)((0,W.Yj)())}),tn=(0,W.NW)({parsed:(0,W.L5)(),program:(0,W.Yj)(),programId:Ut}),rn=(0,W.NW)({accounts:(0,W.YO)(Ut),data:(0,W.Yj)(),programId:Ut}),nn=(0,W.KC)([rn,tn]),sn=(0,W.KC)([(0,W.NW)({parsed:(0,W.L5)(),program:(0,W.Yj)(),programId:(0,W.Yj)()}),(0,W.NW)({accounts:(0,W.YO)((0,W.Yj)()),data:(0,W.Yj)(),programId:(0,W.Yj)()})]),on=(0,W.au)(nn,sn,(e=>"accounts"in e?(0,W.vt)(e,rn):(0,W.vt)(e,tn))),an=(0,W.NW)({signatures:(0,W.YO)((0,W.Yj)()),message:(0,W.NW)({accountKeys:(0,W.YO)(Qr),instructions:(0,W.YO)(on),recentBlockhash:(0,W.Yj)(),addressTableLookups:(0,W.lq)((0,W.me)((0,W.YO)(Jr)))})}),cn=(0,W.NW)({accountIndex:(0,W.ai)(),mint:(0,W.Yj)(),owner:(0,W.lq)((0,W.Yj)()),programId:(0,W.lq)((0,W.Yj)()),uiTokenAmount:_r}),un=(0,W.NW)({writable:(0,W.YO)(Ut),readonly:(0,W.YO)(Ut)}),ln=(0,W.NW)({err:rr,fee:(0,W.ai)(),innerInstructions:(0,W.lq)((0,W.me)((0,W.YO)((0,W.NW)({index:(0,W.ai)(),instructions:(0,W.YO)((0,W.NW)({accounts:(0,W.YO)((0,W.ai)()),data:(0,W.Yj)(),programIdIndex:(0,W.ai)()}))})))),preBalances:(0,W.YO)((0,W.ai)()),postBalances:(0,W.YO)((0,W.ai)()),logMessages:(0,W.lq)((0,W.me)((0,W.YO)((0,W.Yj)()))),preTokenBalances:(0,W.lq)((0,W.me)((0,W.YO)(cn))),postTokenBalances:(0,W.lq)((0,W.me)((0,W.YO)(cn))),loadedAddresses:(0,W.lq)(un),computeUnitsConsumed:(0,W.lq)((0,W.ai)())}),hn=(0,W.NW)({err:rr,fee:(0,W.ai)(),innerInstructions:(0,W.lq)((0,W.me)((0,W.YO)((0,W.NW)({index:(0,W.ai)(),instructions:(0,W.YO)(on)})))),preBalances:(0,W.YO)((0,W.ai)()),postBalances:(0,W.YO)((0,W.ai)()),logMessages:(0,W.lq)((0,W.me)((0,W.YO)((0,W.Yj)()))),preTokenBalances:(0,W.lq)((0,W.me)((0,W.YO)(cn))),postTokenBalances:(0,W.lq)((0,W.me)((0,W.YO)(cn))),loadedAddresses:(0,W.lq)(un),computeUnitsConsumed:(0,W.lq)((0,W.ai)())}),dn=(0,W.KC)([(0,W.eu)(0),(0,W.eu)("legacy")]),pn=(0,W.NW)({pubkey:(0,W.Yj)(),lamports:(0,W.ai)(),postBalance:(0,W.me)((0,W.ai)()),rewardType:(0,W.me)((0,W.Yj)()),commission:(0,W.lq)((0,W.me)((0,W.ai)()))}),fn=Ft((0,W.me)((0,W.NW)({blockhash:(0,W.Yj)(),previousBlockhash:(0,W.Yj)(),parentSlot:(0,W.ai)(),transactions:(0,W.YO)((0,W.NW)({transaction:Xr,meta:(0,W.me)(ln),version:(0,W.lq)(dn)})),rewards:(0,W.lq)((0,W.YO)(pn)),blockTime:(0,W.me)((0,W.ai)()),blockHeight:(0,W.me)((0,W.ai)())}))),gn=Ft((0,W.me)((0,W.NW)({blockhash:(0,W.Yj)(),previousBlockhash:(0,W.Yj)(),parentSlot:(0,W.ai)(),rewards:(0,W.lq)((0,W.YO)(pn)),blockTime:(0,W.me)((0,W.ai)()),blockHeight:(0,W.me)((0,W.ai)())}))),mn=Ft((0,W.me)((0,W.NW)({blockhash:(0,W.Yj)(),previousBlockhash:(0,W.Yj)(),parentSlot:(0,W.ai)(),transactions:(0,W.YO)((0,W.NW)({transaction:en,meta:(0,W.me)(ln),version:(0,W.lq)(dn)})),rewards:(0,W.lq)((0,W.YO)(pn)),blockTime:(0,W.me)((0,W.ai)()),blockHeight:(0,W.me)((0,W.ai)())}))),yn=Ft((0,W.me)((0,W.NW)({blockhash:(0,W.Yj)(),previousBlockhash:(0,W.Yj)(),parentSlot:(0,W.ai)(),transactions:(0,W.YO)((0,W.NW)({transaction:an,meta:(0,W.me)(hn),version:(0,W.lq)(dn)})),rewards:(0,W.lq)((0,W.YO)(pn)),blockTime:(0,W.me)((0,W.ai)()),blockHeight:(0,W.me)((0,W.ai)())}))),wn=Ft((0,W.me)((0,W.NW)({blockhash:(0,W.Yj)(),previousBlockhash:(0,W.Yj)(),parentSlot:(0,W.ai)(),transactions:(0,W.YO)((0,W.NW)({transaction:en,meta:(0,W.me)(hn),version:(0,W.lq)(dn)})),rewards:(0,W.lq)((0,W.YO)(pn)),blockTime:(0,W.me)((0,W.ai)()),blockHeight:(0,W.me)((0,W.ai)())}))),bn=Ft((0,W.me)((0,W.NW)({blockhash:(0,W.Yj)(),previousBlockhash:(0,W.Yj)(),parentSlot:(0,W.ai)(),rewards:(0,W.lq)((0,W.YO)(pn)),blockTime:(0,W.me)((0,W.ai)()),blockHeight:(0,W.me)((0,W.ai)())}))),vn=Ft((0,W.me)((0,W.NW)({blockhash:(0,W.Yj)(),previousBlockhash:(0,W.Yj)(),parentSlot:(0,W.ai)(),transactions:(0,W.YO)((0,W.NW)({transaction:Xr,meta:(0,W.me)(ln)})),rewards:(0,W.lq)((0,W.YO)(pn)),blockTime:(0,W.me)((0,W.ai)())}))),_n=Ft((0,W.me)((0,W.NW)({blockhash:(0,W.Yj)(),previousBlockhash:(0,W.Yj)(),parentSlot:(0,W.ai)(),signatures:(0,W.YO)((0,W.Yj)()),blockTime:(0,W.me)((0,W.ai)())}))),En=Ft((0,W.me)((0,W.NW)({slot:(0,W.ai)(),meta:(0,W.me)(ln),blockTime:(0,W.lq)((0,W.me)((0,W.ai)())),transaction:Xr,version:(0,W.lq)(dn)}))),An=Ft((0,W.me)((0,W.NW)({slot:(0,W.ai)(),transaction:an,meta:(0,W.me)(hn),blockTime:(0,W.lq)((0,W.me)((0,W.ai)())),version:(0,W.lq)(dn)}))),In=Kt((0,W.NW)({blockhash:(0,W.Yj)(),lastValidBlockHeight:(0,W.ai)()})),Sn=Kt((0,W.zM)()),Cn=(0,W.NW)({slot:(0,W.ai)(),numTransactions:(0,W.ai)(),numSlots:(0,W.ai)(),samplePeriodSecs:(0,W.ai)()}),kn=Ft((0,W.YO)(Cn)),Nn=Kt((0,W.me)((0,W.NW)({feeCalculator:(0,W.NW)({lamportsPerSignature:(0,W.ai)()})}))),On=Ft((0,W.Yj)()),Tn=Ft((0,W.Yj)()),Rn=(0,W.NW)({err:rr,logs:(0,W.YO)((0,W.Yj)()),signature:(0,W.Yj)()}),xn=(0,W.NW)({result:Vt(Rn),subscription:(0,W.ai)()}),Pn={"solana-client":"js/1.0.0-maintenance"};class Mn{constructor(e,t){let r,n,i,s,o,a;this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const e={};return async t=>{const{commitment:r,config:n}=zt(t),i=this._buildArgs([],r,void 0,n),s=At(i);return e[s]=e[s]??(async()=>{try{const e=await this._rpcRequest("getBlockHeight",i),t=(0,W.vt)(e,Ft((0,W.ai)()));if("error"in t)throw new tt(t.error,"failed to get block height information");return t.result}finally{delete e[s]}})(),await e[s]}})(),t&&"string"===typeof t?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,r=t.wsEndpoint,n=t.httpHeaders,i=t.fetch,s=t.fetchMiddleware,o=t.disableRetryOnRateLimit,a=t.httpAgent),this._rpcEndpoint=jt(e),this._rpcWsEndpoint=r||Bt(e),this._rpcClient=lr(e,n,i,s,o,a),this._rpcRequest=hr(this._rpcClient),this._rpcBatchRequest=dr(this._rpcClient),this._rpcWebSocket=new Ot(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){const{commitment:r,config:n}=zt(t),i=this._buildArgs([e.toBase58()],r,void 0,n),s=await this._rpcRequest("getBalance",i),o=(0,W.vt)(s,Kt((0,W.ai)()));if("error"in o)throw new tt(o.error,`failed to get balance for ${e.toBase58()}`);return o.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then((e=>e.value)).catch((t=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+t)}))}async getBlockTime(e){const t=await this._rpcRequest("getBlockTime",[e]),r=(0,W.vt)(t,Ft((0,W.me)((0,W.ai)())));if("error"in r)throw new tt(r.error,`failed to get block time for slot ${e}`);return r.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),t=(0,W.vt)(e,Ft((0,W.ai)()));if("error"in t)throw new tt(t.error,"failed to get minimum ledger slot");return t.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),t=(0,W.vt)(e,br);if("error"in t)throw new tt(t.error,"failed to get first available block");return t.result}async getSupply(e){let t={};t="string"===typeof e?{commitment:e}:e?{...e,commitment:e&&e.commitment||this.commitment}:{commitment:this.commitment};const r=await this._rpcRequest("getSupply",[t]),n=(0,W.vt)(r,vr);if("error"in n)throw new tt(n.error,"failed to get supply");return n.result}async getTokenSupply(e,t){const r=this._buildArgs([e.toBase58()],t),n=await this._rpcRequest("getTokenSupply",r),i=(0,W.vt)(n,Kt(_r));if("error"in i)throw new tt(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(e,t){const r=this._buildArgs([e.toBase58()],t),n=await this._rpcRequest("getTokenAccountBalance",r),i=(0,W.vt)(n,Kt(_r));if("error"in i)throw new tt(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(e,t,r){const{commitment:n,config:i}=zt(r);let s=[e.toBase58()];"mint"in t?s.push({mint:t.mint.toBase58()}):s.push({programId:t.programId.toBase58()});const o=this._buildArgs(s,n,"base64",i),a=await this._rpcRequest("getTokenAccountsByOwner",o),c=(0,W.vt)(a,Ar);if("error"in c)throw new tt(c.error,`failed to get token accounts owned by account ${e.toBase58()}`);return c.result}async getParsedTokenAccountsByOwner(e,t,r){let n=[e.toBase58()];"mint"in t?n.push({mint:t.mint.toBase58()}):n.push({programId:t.programId.toBase58()});const i=this._buildArgs(n,r,"jsonParsed"),s=await this._rpcRequest("getTokenAccountsByOwner",i),o=(0,W.vt)(s,Sr);if("error"in o)throw new tt(o.error,`failed to get token accounts owned by account ${e.toBase58()}`);return o.result}async getLargestAccounts(e){const t={...e,commitment:e&&e.commitment||this.commitment},r=t.filter||t.commitment?[t]:[],n=await this._rpcRequest("getLargestAccounts",r),i=(0,W.vt)(n,Cr);if("error"in i)throw new tt(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(e,t){const r=this._buildArgs([e.toBase58()],t),n=await this._rpcRequest("getTokenLargestAccounts",r),i=(0,W.vt)(n,Er);if("error"in i)throw new tt(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(e,t){const{commitment:r,config:n}=zt(t),i=this._buildArgs([e.toBase58()],r,"base64",n),s=await this._rpcRequest("getAccountInfo",i),o=(0,W.vt)(s,Kt((0,W.me)(kr)));if("error"in o)throw new tt(o.error,`failed to get info about account ${e.toBase58()}`);return o.result}async getParsedAccountInfo(e,t){const{commitment:r,config:n}=zt(t),i=this._buildArgs([e.toBase58()],r,"jsonParsed",n),s=await this._rpcRequest("getAccountInfo",i),o=(0,W.vt)(s,Kt((0,W.me)(Tr)));if("error"in o)throw new tt(o.error,`failed to get info about account ${e.toBase58()}`);return o.result}async getAccountInfo(e,t){try{const r=await this.getAccountInfoAndContext(e,t);return r.value}catch(r){throw new Error("failed to get info about account "+e.toBase58()+": "+r)}}async getMultipleParsedAccounts(e,t){const{commitment:r,config:n}=zt(t),i=e.map((e=>e.toBase58())),s=this._buildArgs([i],r,"jsonParsed",n),o=await this._rpcRequest("getMultipleAccounts",s),a=(0,W.vt)(o,Kt((0,W.YO)((0,W.me)(Tr))));if("error"in a)throw new tt(a.error,`failed to get info for accounts ${i}`);return a.result}async getMultipleAccountsInfoAndContext(e,t){const{commitment:r,config:n}=zt(t),i=e.map((e=>e.toBase58())),s=this._buildArgs([i],r,"base64",n),o=await this._rpcRequest("getMultipleAccounts",s),a=(0,W.vt)(o,Kt((0,W.YO)((0,W.me)(kr))));if("error"in a)throw new tt(a.error,`failed to get info for accounts ${i}`);return a.result}async getMultipleAccountsInfo(e,t){const r=await this.getMultipleAccountsInfoAndContext(e,t);return r.value}async getStakeActivation(e,t,r){const{commitment:n,config:i}=zt(t),s=this._buildArgs([e.toBase58()],n,void 0,{...i,epoch:null!=r?r:i?.epoch}),o=await this._rpcRequest("getStakeActivation",s),a=(0,W.vt)(o,Ft(xr));if("error"in a)throw new tt(a.error,`failed to get Stake Activation ${e.toBase58()}`);return a.result}async getProgramAccounts(e,t){const{commitment:r,config:n}=zt(t),{encoding:i,...s}=n||{},o=this._buildArgs([e.toBase58()],r,i||"base64",{...s,...s.filters?{filters:Ht(s.filters)}:null}),a=await this._rpcRequest("getProgramAccounts",o),c=(0,W.YO)(Nr),u=!0===s.withContext?(0,W.vt)(a,Kt(c)):(0,W.vt)(a,Ft(c));if("error"in u)throw new tt(u.error,`failed to get accounts owned by program ${e.toBase58()}`);return u.result}async getParsedProgramAccounts(e,t){const{commitment:r,config:n}=zt(t),i=this._buildArgs([e.toBase58()],r,"jsonParsed",n),s=await this._rpcRequest("getProgramAccounts",i),o=(0,W.vt)(s,Ft((0,W.YO)(Rr)));if("error"in o)throw new tt(o.error,`failed to get accounts owned by program ${e.toBase58()}`);return o.result}async confirmTransaction(e,t){let r,n;if("string"==typeof e)r=e;else{const t=e;if(t.abortSignal?.aborted)return Promise.reject(t.abortSignal.reason);r=t.signature}try{n=c().decode(r)}catch(i){throw new Error("signature must be base58 encoded: "+r)}return Ce(64===n.length,"signature has invalid length"),"string"===typeof e?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:r}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise(((t,r)=>{null!=e&&(e.aborted?r(e.reason):e.addEventListener("abort",(()=>{r(e.reason)})))}))}getTransactionConfirmationPromise({commitment:e,signature:t}){let r,n,i=!1;const s=new Promise(((s,o)=>{try{r=this.onSignature(t,((e,t)=>{r=void 0;const n={context:t,value:e};s({__type:Me.PROCESSED,response:n})}),e);const a=new Promise((e=>{null==r?e():n=this._onSubscriptionStateChange(r,(t=>{"subscribed"===t&&e()}))}));(async()=>{if(await a,i)return;const r=await this.getSignatureStatus(t);if(i)return;if(null==r)return;const{context:n,value:c}=r;if(null!=c)if(c?.err)o(c.err);else{switch(e){case"confirmed":case"single":case"singleGossip":if("processed"===c.confirmationStatus)return;break;case"finalized":case"max":case"root":if("processed"===c.confirmationStatus||"confirmed"===c.confirmationStatus)return;break;case"processed":case"recent":}i=!0,s({__type:Me.PROCESSED,response:{context:n,value:c}})}})()}catch(a){o(a)}})),o=()=>{n&&(n(),n=void 0),null!=r&&(this.removeSignatureListener(r),r=void 0)};return{abortConfirmation:o,confirmationPromise:s}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:t,lastValidBlockHeight:r,signature:n}}){let i=!1;const s=new Promise((t=>{const n=async()=>{try{const t=await this.getBlockHeight(e);return t}catch(t){return-1}};(async()=>{let e=await n();if(!i){while(e<=r){if(await nt(1e3),i)return;if(e=await n(),i)return}t({__type:Me.BLOCKHEIGHT_EXCEEDED})}})()})),{abortConfirmation:o,confirmationPromise:a}=this.getTransactionConfirmationPromise({commitment:e,signature:n}),c=this.getCancellationPromise(t);let u;try{const e=await Promise.race([c,a,s]);if(e.__type!==Me.PROCESSED)throw new de(n);u=e.response}finally{i=!0,o()}return u}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:t,minContextSlot:r,nonceAccountPubkey:n,nonceValue:i,signature:s}}){let o=!1;const a=new Promise((t=>{let s=i,a=null;const c=async()=>{try{const{context:t,value:i}=await this.getNonceAndContext(n,{commitment:e,minContextSlot:r});return a=t.slot,i?.nonce}catch(t){return s}};(async()=>{if(s=await c(),!o)while(1){if(i!==s)return void t({__type:Me.NONCE_INVALID,slotInWhichNonceDidAdvance:a});if(await nt(2e3),o)return;if(s=await c(),o)return}})()})),{abortConfirmation:c,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:e,signature:s}),l=this.getCancellationPromise(t);let h;try{const t=await Promise.race([l,u,a]);if(t.__type===Me.PROCESSED)h=t.response;else{let n;while(1){const e=await this.getSignatureStatus(s);if(null==e)break;if(!(e.context.slot<(t.slotInWhichNonceDidAdvance??r))){n=e;break}await nt(400)}if(!n?.value)throw new fe(s);{const t=e||"finalized",{confirmationStatus:r}=n.value;switch(t){case"processed":case"recent":if("processed"!==r&&"confirmed"!==r&&"finalized"!==r)throw new fe(s);break;case"confirmed":case"single":case"singleGossip":if("confirmed"!==r&&"finalized"!==r)throw new fe(s);break;case"finalized":case"max":case"root":if("finalized"!==r)throw new fe(s);break;default:}h={context:n.context,value:{err:n.value.err}}}}}finally{o=!0,c()}return h}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:t}){let r;const n=new Promise((t=>{let n=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":n=this._confirmTransactionInitialTimeout||3e4;break}r=setTimeout((()=>t({__type:Me.TIMED_OUT,timeoutMs:n})),n)})),{abortConfirmation:i,confirmationPromise:s}=this.getTransactionConfirmationPromise({commitment:e,signature:t});let o;try{const e=await Promise.race([s,n]);if(e.__type!==Me.PROCESSED)throw new pe(t,e.timeoutMs/1e3);o=e.response}finally{clearTimeout(r),i()}return o}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),t=(0,W.vt)(e,Ft((0,W.YO)($r)));if("error"in t)throw new tt(t.error,"failed to get cluster nodes");return t.result}async getVoteAccounts(e){const t=this._buildArgs([],e),r=await this._rpcRequest("getVoteAccounts",t),n=(0,W.vt)(r,Kr);if("error"in n)throw new tt(n.error,"failed to get vote accounts");return n.result}async getSlot(e){const{commitment:t,config:r}=zt(e),n=this._buildArgs([],t,void 0,r),i=await this._rpcRequest("getSlot",n),s=(0,W.vt)(i,Ft((0,W.ai)()));if("error"in s)throw new tt(s.error,"failed to get slot");return s.result}async getSlotLeader(e){const{commitment:t,config:r}=zt(e),n=this._buildArgs([],t,void 0,r),i=await this._rpcRequest("getSlotLeader",n),s=(0,W.vt)(i,Ft((0,W.Yj)()));if("error"in s)throw new tt(s.error,"failed to get slot leader");return s.result}async getSlotLeaders(e,t){const r=[e,t],n=await this._rpcRequest("getSlotLeaders",r),i=(0,W.vt)(n,Ft((0,W.YO)(Ut)));if("error"in i)throw new tt(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(e,t){const{context:r,value:n}=await this.getSignatureStatuses([e],t);Ce(1===n.length);const i=n[0];return{context:r,value:i}}async getSignatureStatuses(e,t){const r=[e];t&&r.push(t);const n=await this._rpcRequest("getSignatureStatuses",r),i=(0,W.vt)(n,Gr);if("error"in i)throw new tt(i.error,"failed to get signature status");return i.result}async getTransactionCount(e){const{commitment:t,config:r}=zt(e),n=this._buildArgs([],t,void 0,r),i=await this._rpcRequest("getTransactionCount",n),s=(0,W.vt)(i,Ft((0,W.ai)()));if("error"in s)throw new tt(s.error,"failed to get transaction count");return s.result}async getTotalSupply(e){const t=await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0});return t.value.total}async getInflationGovernor(e){const t=this._buildArgs([],e),r=await this._rpcRequest("getInflationGovernor",t),n=(0,W.vt)(r,pr);if("error"in n)throw new tt(n.error,"failed to get inflation");return n.result}async getInflationReward(e,t,r){const{commitment:n,config:i}=zt(r),s=this._buildArgs([e.map((e=>e.toBase58()))],n,void 0,{...i,epoch:null!=t?t:i?.epoch}),o=await this._rpcRequest("getInflationReward",s),a=(0,W.vt)(o,Zt);if("error"in a)throw new tt(a.error,"failed to get inflation reward");return a.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),t=(0,W.vt)(e,fr);if("error"in t)throw new tt(t.error,"failed to get inflation rate");return t.result}async getEpochInfo(e){const{commitment:t,config:r}=zt(e),n=this._buildArgs([],t,void 0,r),i=await this._rpcRequest("getEpochInfo",n),s=(0,W.vt)(i,mr);if("error"in s)throw new tt(s.error,"failed to get epoch info");return s.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),t=(0,W.vt)(e,yr);if("error"in t)throw new tt(t.error,"failed to get epoch schedule");const r=t.result;return new kt(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),t=(0,W.vt)(e,wr);if("error"in t)throw new tt(t.error,"failed to get leader schedule");return t.result}async getMinimumBalanceForRentExemption(e,t){const r=this._buildArgs([e],t),n=await this._rpcRequest("getMinimumBalanceForRentExemption",r),i=(0,W.vt)(n,Zr);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(e){const{context:t,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(e),n={get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}};return{context:t,value:{blockhash:r,feeCalculator:n}}}async getRecentPerformanceSamples(e){const t=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),r=(0,W.vt)(t,kn);if("error"in r)throw new tt(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(e,t){const r=this._buildArgs([e],t),n=await this._rpcRequest("getFeeCalculatorForBlockhash",r),i=(0,W.vt)(n,Nn);if("error"in i)throw new tt(i.error,"failed to get fee calculator");const{context:s,value:o}=i.result;return{context:s,value:null!==o?o.feeCalculator:null}}async getFeeForMessage(e,t){const r=J(e.serialize()).toString("base64"),n=this._buildArgs([r],t),i=await this._rpcRequest("getFeeForMessage",n),s=(0,W.vt)(i,Kt((0,W.me)((0,W.ai)())));if("error"in s)throw new tt(s.error,"failed to get fee for message");if(null===s.result)throw new Error("invalid blockhash");return s.result}async getRecentPrioritizationFees(e){const t=e?.lockedWritableAccounts?.map((e=>e.toBase58())),r=t?.length?[t]:[],n=await this._rpcRequest("getRecentPrioritizationFees",r),i=(0,W.vt)(n,gr);if("error"in i)throw new tt(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(e){try{const t=await this.getRecentBlockhashAndContext(e);return t.value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhash(e){try{const t=await this.getLatestBlockhashAndContext(e);return t.value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhashAndContext(e){const{commitment:t,config:r}=zt(e),n=this._buildArgs([],t,void 0,r),i=await this._rpcRequest("getLatestBlockhash",n),s=(0,W.vt)(i,In);if("error"in s)throw new tt(s.error,"failed to get latest blockhash");return s.result}async isBlockhashValid(e,t){const{commitment:r,config:n}=zt(t),i=this._buildArgs([e],r,void 0,n),s=await this._rpcRequest("isBlockhashValid",i),o=(0,W.vt)(s,Sn);if("error"in o)throw new tt(o.error,"failed to determine if the blockhash `"+e+"`is valid");return o.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),t=(0,W.vt)(e,Ft(sr));if("error"in t)throw new tt(t.error,"failed to get version");return t.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),t=(0,W.vt)(e,Ft((0,W.Yj)()));if("error"in t)throw new tt(t.error,"failed to get genesis hash");return t.result}async getBlock(e,t){const{commitment:r,config:n}=zt(t),i=this._buildArgsAtLeastConfirmed([e],r,void 0,n),s=await this._rpcRequest("getBlock",i);try{switch(n?.transactionDetails){case"accounts":{const e=(0,W.vt)(s,mn);if("error"in e)throw e.error;return e.result}case"none":{const e=(0,W.vt)(s,gn);if("error"in e)throw e.error;return e.result}default:{const e=(0,W.vt)(s,fn);if("error"in e)throw e.error;const{result:t}=e;return t?{...t,transactions:t.transactions.map((({transaction:e,meta:t,version:r})=>({meta:t,transaction:{...e,message:Yt(r,e.message)},version:r})))}:null}}}catch(o){throw new tt(o,"failed to get confirmed block")}}async getParsedBlock(e,t){const{commitment:r,config:n}=zt(t),i=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",n),s=await this._rpcRequest("getBlock",i);try{switch(n?.transactionDetails){case"accounts":{const e=(0,W.vt)(s,wn);if("error"in e)throw e.error;return e.result}case"none":{const e=(0,W.vt)(s,bn);if("error"in e)throw e.error;return e.result}default:{const e=(0,W.vt)(s,yn);if("error"in e)throw e.error;return e.result}}}catch(o){throw new tt(o,"failed to get block")}}async getBlockProduction(e){let t,r;if("string"===typeof e)r=e;else if(e){const{commitment:n,...i}=e;r=n,t=i}const n=this._buildArgs([],r,"base64",t),i=await this._rpcRequest("getBlockProduction",n),s=(0,W.vt)(i,ur);if("error"in s)throw new tt(s.error,"failed to get block production information");return s.result}async getTransaction(e,t){const{commitment:r,config:n}=zt(t),i=this._buildArgsAtLeastConfirmed([e],r,void 0,n),s=await this._rpcRequest("getTransaction",i),o=(0,W.vt)(s,En);if("error"in o)throw new tt(o.error,"failed to get transaction");const a=o.result;return a?{...a,transaction:{...a.transaction,message:Yt(a.version,a.transaction.message)}}:a}async getParsedTransaction(e,t){const{commitment:r,config:n}=zt(t),i=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",n),s=await this._rpcRequest("getTransaction",i),o=(0,W.vt)(s,An);if("error"in o)throw new tt(o.error,"failed to get transaction");return o.result}async getParsedTransactions(e,t){const{commitment:r,config:n}=zt(t),i=e.map((e=>{const t=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",n);return{methodName:"getTransaction",args:t}})),s=await this._rpcBatchRequest(i),o=s.map((e=>{const t=(0,W.vt)(e,An);if("error"in t)throw new tt(t.error,"failed to get transactions");return t.result}));return o}async getTransactions(e,t){const{commitment:r,config:n}=zt(t),i=e.map((e=>{const t=this._buildArgsAtLeastConfirmed([e],r,void 0,n);return{methodName:"getTransaction",args:t}})),s=await this._rpcBatchRequest(i),o=s.map((e=>{const t=(0,W.vt)(e,En);if("error"in t)throw new tt(t.error,"failed to get transactions");const r=t.result;return r?{...r,transaction:{...r.transaction,message:Yt(r.version,r.transaction.message)}}:r}));return o}async getConfirmedBlock(e,t){const r=this._buildArgsAtLeastConfirmed([e],t),n=await this._rpcRequest("getBlock",r),i=(0,W.vt)(n,vn);if("error"in i)throw new tt(i.error,"failed to get confirmed block");const s=i.result;if(!s)throw new Error("Confirmed block "+e+" not found");const o={...s,transactions:s.transactions.map((({transaction:e,meta:t})=>{const r=new Re(e.message);return{meta:t,transaction:{...e,message:r}}}))};return{...o,transactions:o.transactions.map((({transaction:e,meta:t})=>({meta:t,transaction:Le.populate(e.message,e.signatures)})))}}async getBlocks(e,t,r){const n=this._buildArgsAtLeastConfirmed(void 0!==t?[e,t]:[e],r),i=await this._rpcRequest("getBlocks",n),s=(0,W.vt)(i,Ft((0,W.YO)((0,W.ai)())));if("error"in s)throw new tt(s.error,"failed to get blocks");return s.result}async getBlockSignatures(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),n=await this._rpcRequest("getBlock",r),i=(0,W.vt)(n,_n);if("error"in i)throw new tt(i.error,"failed to get block");const s=i.result;if(!s)throw new Error("Block "+e+" not found");return s}async getConfirmedBlockSignatures(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),n=await this._rpcRequest("getBlock",r),i=(0,W.vt)(n,_n);if("error"in i)throw new tt(i.error,"failed to get confirmed block");const s=i.result;if(!s)throw new Error("Confirmed block "+e+" not found");return s}async getConfirmedTransaction(e,t){const r=this._buildArgsAtLeastConfirmed([e],t),n=await this._rpcRequest("getTransaction",r),i=(0,W.vt)(n,En);if("error"in i)throw new tt(i.error,"failed to get transaction");const s=i.result;if(!s)return s;const o=new Re(s.transaction.message),a=s.transaction.signatures;return{...s,transaction:Le.populate(o,a)}}async getParsedConfirmedTransaction(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),n=await this._rpcRequest("getTransaction",r),i=(0,W.vt)(n,An);if("error"in i)throw new tt(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(e,t){const r=e.map((e=>{const r=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed");return{methodName:"getTransaction",args:r}})),n=await this._rpcBatchRequest(r),i=n.map((e=>{const t=(0,W.vt)(e,An);if("error"in t)throw new tt(t.error,"failed to get confirmed transactions");return t.result}));return i}async getConfirmedSignaturesForAddress(e,t,r){let n={},i=await this.getFirstAvailableBlock();while(!("until"in n)){if(t--,t<=0||t<i)break;try{const e=await this.getConfirmedBlockSignatures(t,"finalized");e.signatures.length>0&&(n.until=e.signatures[e.signatures.length-1].toString())}catch(a){if(a instanceof Error&&a.message.includes("skipped"))continue;throw a}}let s=await this.getSlot("finalized");while(!("before"in n)){if(r++,r>s)break;try{const e=await this.getConfirmedBlockSignatures(r);e.signatures.length>0&&(n.before=e.signatures[e.signatures.length-1].toString())}catch(a){if(a instanceof Error&&a.message.includes("skipped"))continue;throw a}}const o=await this.getConfirmedSignaturesForAddress2(e,n);return o.map((e=>e.signature))}async getConfirmedSignaturesForAddress2(e,t,r){const n=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",n),s=(0,W.vt)(i,Pr);if("error"in s)throw new tt(s.error,"failed to get confirmed signatures for address");return s.result}async getSignaturesForAddress(e,t,r){const n=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),i=await this._rpcRequest("getSignaturesForAddress",n),s=(0,W.vt)(i,Mr);if("error"in s)throw new tt(s.error,"failed to get signatures for address");return s.result}async getAddressLookupTable(e,t){const{context:r,value:n}=await this.getAccountInfoAndContext(e,t);let i=null;return null!==n&&(i=new xt({key:e,state:xt.deserialize(n.data)})),{context:r,value:i}}async getNonceAndContext(e,t){const{context:r,value:n}=await this.getAccountInfoAndContext(e,t);let i=null;return null!==n&&(i=ut.fromAccountData(n.data)),{context:r,value:i}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then((e=>e.value)).catch((t=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+t)}))}async requestAirdrop(e,t){const r=await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),n=(0,W.vt)(r,On);if("error"in n)throw new tt(n.error,`airdrop to ${e.toBase58()} failed`);return n.result}async _blockhashWithExpiryBlockHeight(e){if(!e){while(this._pollingBlockhash)await nt(100);const e=Date.now()-this._blockhashInfo.lastFetch,t=e>=Wt;if(null!==this._blockhashInfo.latestBlockhash&&!t)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),t=this._blockhashInfo.latestBlockhash,r=t?t.blockhash:null;for(let n=0;n<50;n++){const e=await this.getLatestBlockhash("finalized");if(r!==e.blockhash)return this._blockhashInfo={latestBlockhash:e,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},e;await nt(qe/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:t,config:r}=zt(e),n=this._buildArgs([],t,"base64",r),i=await this._rpcRequest("getStakeMinimumDelegation",n),s=(0,W.vt)(i,Kt((0,W.ai)()));if("error"in s)throw new tt(s.error,"failed to get stake minimum delegation");return s.result}async simulateTransaction(e,t,r){if("message"in e){const i=e,s=i.serialize(),o=n.Buffer.from(s).toString("base64");if(Array.isArray(t)||void 0!==r)throw new Error("Invalid arguments");const a=t||{};a.encoding="base64","commitment"in a||(a.commitment=this.commitment),t&&"object"===typeof t&&"innerInstructions"in t&&(a.innerInstructions=t.innerInstructions);const c=[o,a],u=await this._rpcRequest("simulateTransaction",c),l=(0,W.vt)(u,cr);if("error"in l)throw new Error("failed to simulate transaction: "+l.error.message);return l.result}let i;if(e instanceof Le){let t=e;i=new Le,i.feePayer=t.feePayer,i.instructions=e.instructions,i.nonceInfo=t.nonceInfo,i.signatures=t.signatures}else i=Le.populate(e),i._message=i._json=void 0;if(void 0!==t&&!Array.isArray(t))throw new Error("Invalid arguments");const s=t;if(i.nonceInfo&&s)i.sign(...s);else{let e=this._disableBlockhashCaching;for(;;){const t=await this._blockhashWithExpiryBlockHeight(e);if(i.lastValidBlockHeight=t.lastValidBlockHeight,i.recentBlockhash=t.blockhash,!s)break;if(i.sign(...s),!i.signature)throw new Error("!signature");const r=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(r)&&!this._blockhashInfo.transactionSignatures.includes(r)){this._blockhashInfo.simulatedSignatures.push(r);break}e=!0}}const o=i._compile(),a=o.serialize(),c=i._serialize(a),u=c.toString("base64"),l={encoding:"base64",commitment:this.commitment};if(r){const e=(Array.isArray(r)?r:o.nonProgramIds()).map((e=>e.toBase58()));l["accounts"]={encoding:"base64",addresses:e}}s&&(l.sigVerify=!0),t&&"object"===typeof t&&"innerInstructions"in t&&(l.innerInstructions=t.innerInstructions);const h=[u,l],d=await this._rpcRequest("simulateTransaction",h),p=(0,W.vt)(d,cr);if("error"in p){let e;if("data"in p.error&&(e=p.error.data.logs,e&&Array.isArray(e))){const t="\n    ",r=t+e.join(t);console.error(p.error.message,r)}throw new Qe({action:"simulate",signature:"",transactionMessage:p.error.message,logs:e})}return p.result}async sendTransaction(e,t,r){if("version"in e){if(t&&Array.isArray(t))throw new Error("Invalid arguments");const r=e.serialize();return await this.sendRawTransaction(r,t)}if(void 0===t||!Array.isArray(t))throw new Error("Invalid arguments");const n=t;if(e.nonceInfo)e.sign(...n);else{let t=this._disableBlockhashCaching;for(;;){const r=await this._blockhashWithExpiryBlockHeight(t);if(e.lastValidBlockHeight=r.lastValidBlockHeight,e.recentBlockhash=r.blockhash,e.sign(...n),!e.signature)throw new Error("!signature");const i=e.signature.toString("base64");if(!this._blockhashInfo.transactionSignatures.includes(i)){this._blockhashInfo.transactionSignatures.push(i);break}t=!0}}const i=e.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(e,t){const r=J(e).toString("base64"),n=await this.sendEncodedTransaction(r,t);return n}async sendEncodedTransaction(e,t){const r={encoding:"base64"},n=t&&t.skipPreflight,i=!0===n?"processed":t&&t.preflightCommitment||this.commitment;t&&null!=t.maxRetries&&(r.maxRetries=t.maxRetries),t&&null!=t.minContextSlot&&(r.minContextSlot=t.minContextSlot),n&&(r.skipPreflight=n),i&&(r.preflightCommitment=i);const s=[e,r],o=await this._rpcRequest("sendTransaction",s),a=(0,W.vt)(o,Tn);if("error"in a){let e;throw"data"in a.error&&(e=a.error.data.logs),new Qe({action:n?"send":"simulate",signature:"",transactionMessage:a.error.message,logs:e})}return a.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval((()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()}),5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),1e3!==e?(this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach((([e,t])=>{this._setSubscription(e,{...t,state:"pending"})}))):this._updateSubscriptions()}_setSubscription(e,t){const r=this._subscriptionsByHash[e]?.state;if(this._subscriptionsByHash[e]=t,r!==t.state){const r=this._subscriptionStateChangeCallbacksByHash[e];r&&r.forEach((e=>{try{e(t.state)}catch{}}))}}_onSubscriptionStateChange(e,t){const r=this._subscriptionHashByClientSubscriptionId[e];if(null==r)return()=>{};const n=this._subscriptionStateChangeCallbacksByHash[r]||=new Set;return n.add(t),()=>{n.delete(t),0===n.size&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(0===Object.keys(this._subscriptionsByHash).length)return void(this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout((()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(e){e instanceof Error&&console.log(`Error when closing socket connection: ${e.message}`)}}),500)));if(null!==this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected)return void this._rpcWebSocket.connect();const e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map((async e=>{const r=this._subscriptionsByHash[e];if(void 0!==r)switch(r.state){case"pending":case"unsubscribed":if(0===r.callbacks.size)return delete this._subscriptionsByHash[e],"unsubscribed"===r.state&&delete this._subscriptionCallbacksByServerSubscriptionId[r.serverSubscriptionId],void await this._updateSubscriptions();await(async()=>{const{args:n,method:i}=r;try{this._setSubscription(e,{...r,state:"subscribing"});const t=await this._rpcWebSocket.call(i,n);this._setSubscription(e,{...r,serverSubscriptionId:t,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[t]=r.callbacks,await this._updateSubscriptions()}catch(s){if(console.error(`Received ${s instanceof Error?"":"JSON-RPC "}error calling \`${i}\``,{args:n,error:s}),!t())return;this._setSubscription(e,{...r,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":0===r.callbacks.size&&await(async()=>{const{serverSubscriptionId:n,unsubscribeMethod:i}=r;if(this._subscriptionsAutoDisposedByRpc.has(n))this._subscriptionsAutoDisposedByRpc.delete(n);else{this._setSubscription(e,{...r,state:"unsubscribing"}),this._setSubscription(e,{...r,state:"unsubscribing"});try{await this._rpcWebSocket.call(i,[n])}catch(s){if(s instanceof Error&&console.error(`${i} error:`,s.message),!t())return;return this._setSubscription(e,{...r,state:"subscribed"}),void await this._updateSubscriptions()}}this._setSubscription(e,{...r,state:"unsubscribed"}),await this._updateSubscriptions()})();break}})))}_handleServerNotification(e,t){const r=this._subscriptionCallbacksByServerSubscriptionId[e];void 0!==r&&r.forEach((e=>{try{e(...t)}catch(r){console.error(r)}}))}_wsOnAccountNotification(e){const{result:t,subscription:r}=(0,W.vt)(e,Br);this._handleServerNotification(r,[t.value,t.context])}_makeSubscription(e,t){const r=this._nextClientSubscriptionId++,n=At([e.method,t]),i=this._subscriptionsByHash[n];return void 0===i?this._subscriptionsByHash[n]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:i.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[r]=n,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const t=this._subscriptionsByHash[n];Ce(void 0!==t,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),t.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(e,t,r){const{commitment:n,config:i}=zt(r),s=this._buildArgs([e.toBase58()],n||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},s)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:t,subscription:r}=(0,W.vt)(e,Lr);this._handleServerNotification(r,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,r,n){const{commitment:i,config:s}=zt(r),o=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",s||(n?{filters:Ht(n)}:void 0));return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},o)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,r){const n=this._buildArgs(["object"===typeof e?{mentions:[e.toString()]}:e],r||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},n)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:t,subscription:r}=(0,W.vt)(e,xn);this._handleServerNotification(r,[t.value,t.context])}_wsOnSlotNotification(e){const{result:t,subscription:r}=(0,W.vt)(e,Wr);this._handleServerNotification(r,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:t,subscription:r}=(0,W.vt)(e,zr);this._handleServerNotification(r,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,r,n){const i=t||this._commitment;if(i||r||n){let t={};r&&(t.encoding=r),i&&(t.commitment=i),n&&(t=Object.assign(t,n)),e.push(t)}return e}_buildArgsAtLeastConfirmed(e,t,r,n){const i=t||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,r,n)}_wsOnSignatureNotification(e){const{result:t,subscription:r}=(0,W.vt)(e,Hr);"receivedSignature"!==t.value&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,"receivedSignature"===t.value?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,r){const n=this._buildArgs([e],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(e,r)=>{if("status"===e.type){t(e.result,r);try{this.removeSignatureListener(i)}catch(n){}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},n);return i}onSignatureWithOptions(e,t,r){const{commitment:n,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},s=this._buildArgs([e],n,void 0,i),o=this._makeSubscription({callback:(e,r)=>{t(e,r);try{this.removeSignatureListener(o)}catch(n){}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return o}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:t,subscription:r}=(0,W.vt)(e,qr);this._handleServerNotification(r,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}class Bn{constructor(e){this._keypair=void 0,this._keypair=e??K()}static generate(){return new Bn(K())}static fromSecretKey(e,t){if(64!==e.byteLength)throw new Error("bad secret key size");const r=e.slice(32,64);if(!t||!t.skipValidation){const t=e.slice(0,32),n=V(t);for(let e=0;e<32;e++)if(r[e]!==n[e])throw new Error("provided secretKey is invalid")}return new Bn({publicKey:r,secretKey:e})}static fromSeed(e){const t=V(e),r=new Uint8Array(64);return r.set(e),r.set(t,32),new Bn({publicKey:t,secretKey:r})}get publicKey(){return new oe(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const Un=Object.freeze({CreateLookupTable:{index:0,layout:h.w3([h.DH("instruction"),lt("recentSlot"),h.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:h.w3([h.DH("instruction")])},ExtendLookupTable:{index:2,layout:h.w3([h.DH("instruction"),lt(),h.O6(me(),h.cY(h.DH(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:h.w3([h.DH("instruction")])},CloseLookupTable:{index:4,layout:h.w3([h.DH("instruction")])}});class Ln{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const t=h.DH("instruction"),r=t.decode(e.data);let n;for(const[i,s]of Object.entries(Un))if(s.index==r){n=i;break}if(!n)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return n}static decodeCreateLookupTable(e){this.checkProgramId(e.programId),this.checkKeysLength(e.keys,4);const{recentSlot:t}=st(Un.CreateLookupTable,e.data);return{authority:e.keys[1].pubkey,payer:e.keys[2].pubkey,recentSlot:Number(t)}}static decodeExtendLookupTable(e){if(this.checkProgramId(e.programId),e.keys.length<2)throw new Error(`invalid instruction; found ${e.keys.length} keys, expected at least 2`);const{addresses:t}=st(Un.ExtendLookupTable,e.data);return{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,payer:e.keys.length>2?e.keys[2].pubkey:void 0,addresses:t.map((e=>new oe(e)))}}static decodeCloseLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,3),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,recipient:e.keys[2].pubkey}}static decodeFreezeLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static decodeDeactivateLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(Dn.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}class Dn{constructor(){}static createLookupTable(e){const[t,r]=oe.findProgramAddressSync([e.authority.toBuffer(),U().encode(e.recentSlot)],this.programId),n=Un.CreateLookupTable,i=it(n,{recentSlot:BigInt(e.recentSlot),bumpSeed:r}),s=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:pt.programId,isSigner:!1,isWritable:!1}];return[new Ue({programId:this.programId,keys:s,data:i}),t]}static freezeLookupTable(e){const t=Un.FreezeLookupTable,r=it(t),n=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new Ue({programId:this.programId,keys:n,data:r})}static extendLookupTable(e){const t=Un.ExtendLookupTable,r=it(t,{addresses:e.addresses.map((e=>e.toBytes()))}),n=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return e.payer&&n.push({pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:pt.programId,isSigner:!1,isWritable:!1}),new Ue({programId:this.programId,keys:n,data:r})}static deactivateLookupTable(e){const t=Un.DeactivateLookupTable,r=it(t),n=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new Ue({programId:this.programId,keys:n,data:r})}static closeLookupTable(e){const t=Un.CloseLookupTable,r=it(t),n=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.recipient,isSigner:!1,isWritable:!0}];return new Ue({programId:this.programId,keys:n,data:r})}}Dn.programId=new oe("AddressLookupTab1e1111111111111111111111111");class Wn{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const t=h.u8("instruction"),r=t.decode(e.data);let n;for(const[i,s]of Object.entries(jn))if(s.index==r){n=i;break}if(!n)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return n}static decodeRequestUnits(e){this.checkProgramId(e.programId);const{units:t,additionalFee:r}=st(jn.RequestUnits,e.data);return{units:t,additionalFee:r}}static decodeRequestHeapFrame(e){this.checkProgramId(e.programId);const{bytes:t}=st(jn.RequestHeapFrame,e.data);return{bytes:t}}static decodeSetComputeUnitLimit(e){this.checkProgramId(e.programId);const{units:t}=st(jn.SetComputeUnitLimit,e.data);return{units:t}}static decodeSetComputeUnitPrice(e){this.checkProgramId(e.programId);const{microLamports:t}=st(jn.SetComputeUnitPrice,e.data);return{microLamports:t}}static checkProgramId(e){if(!e.equals(zn.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const jn=Object.freeze({RequestUnits:{index:0,layout:h.w3([h.u8("instruction"),h.DH("units"),h.DH("additionalFee")])},RequestHeapFrame:{index:1,layout:h.w3([h.u8("instruction"),h.DH("bytes")])},SetComputeUnitLimit:{index:2,layout:h.w3([h.u8("instruction"),h.DH("units")])},SetComputeUnitPrice:{index:3,layout:h.w3([h.u8("instruction"),lt("microLamports")])}});class zn{constructor(){}static requestUnits(e){const t=jn.RequestUnits,r=it(t,e);return new Ue({keys:[],programId:this.programId,data:r})}static requestHeapFrame(e){const t=jn.RequestHeapFrame,r=it(t,e);return new Ue({keys:[],programId:this.programId,data:r})}static setComputeUnitLimit(e){const t=jn.SetComputeUnitLimit,r=it(t,e);return new Ue({keys:[],programId:this.programId,data:r})}static setComputeUnitPrice(e){const t=jn.SetComputeUnitPrice,r=it(t,{microLamports:BigInt(e.microLamports)});return new Ue({keys:[],programId:this.programId,data:r})}}zn.programId=new oe("ComputeBudget111111111111111111111111111111");const Hn=64,qn=32,$n=64,Fn=h.w3([h.u8("numSignatures"),h.u8("padding"),h.NX("signatureOffset"),h.NX("signatureInstructionIndex"),h.NX("publicKeyOffset"),h.NX("publicKeyInstructionIndex"),h.NX("messageDataOffset"),h.NX("messageDataSize"),h.NX("messageInstructionIndex")]);class Kn{constructor(){}static createInstructionWithPublicKey(e){const{publicKey:t,message:r,signature:i,instructionIndex:s}=e;Ce(t.length===qn,`Public Key must be ${qn} bytes but received ${t.length} bytes`),Ce(i.length===$n,`Signature must be ${$n} bytes but received ${i.length} bytes`);const o=Fn.span,a=o+t.length,c=a+i.length,u=1,l=n.Buffer.alloc(c+r.length),h=null==s?65535:s;return Fn.encode({numSignatures:u,padding:0,signatureOffset:a,signatureInstructionIndex:h,publicKeyOffset:o,publicKeyInstructionIndex:h,messageDataOffset:c,messageDataSize:r.length,messageInstructionIndex:h},l),l.fill(t,o),l.fill(i,a),l.fill(r,c),new Ue({keys:[],programId:Kn.programId,data:l})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:r,instructionIndex:n}=e;Ce(t.length===Hn,`Private key must be ${Hn} bytes but received ${t.length} bytes`);try{const e=Bn.fromSecretKey(t),i=e.publicKey.toBytes(),s=G(r,e.secretKey);return this.createInstructionWithPublicKey({publicKey:i,message:r,signature:s,instructionIndex:n})}catch(i){throw new Error(`Error creating instruction; ${i}`)}}}Kn.programId=new oe("Ed25519SigVerify111111111111111111111111111");const Vn=(e,t)=>{const r=$.bI.sign(e,t);return[r.toCompactRawBytes(),r.recovery]};$.bI.utils.isValidPrivateKey;const Yn=$.bI.getPublicKey,Gn=32,Zn=20,Jn=64,Xn=11,Qn=h.w3([h.u8("numSignatures"),h.NX("signatureOffset"),h.u8("signatureInstructionIndex"),h.NX("ethAddressOffset"),h.u8("ethAddressInstructionIndex"),h.NX("messageDataOffset"),h.NX("messageDataSize"),h.u8("messageInstructionIndex"),h.av(20,"ethAddress"),h.av(64,"signature"),h.u8("recoveryId")]);class ei{constructor(){}static publicKeyToEthAddress(e){Ce(e.length===Jn,`Public key must be ${Jn} bytes but received ${e.length} bytes`);try{return n.Buffer.from((0,q.lY)(J(e))).slice(-Zn)}catch(t){throw new Error(`Error constructing Ethereum address: ${t}`)}}static createInstructionWithPublicKey(e){const{publicKey:t,message:r,signature:n,recoveryId:i,instructionIndex:s}=e;return ei.createInstructionWithEthAddress({ethAddress:ei.publicKeyToEthAddress(t),message:r,signature:n,recoveryId:i,instructionIndex:s})}static createInstructionWithEthAddress(e){const{ethAddress:t,message:r,signature:i,recoveryId:s,instructionIndex:o=0}=e;let a;a="string"===typeof t?t.startsWith("0x")?n.Buffer.from(t.substr(2),"hex"):n.Buffer.from(t,"hex"):t,Ce(a.length===Zn,`Address must be ${Zn} bytes but received ${a.length} bytes`);const c=1+Xn,u=c,l=c+a.length,h=l+i.length+1,d=1,p=n.Buffer.alloc(Qn.span+r.length);return Qn.encode({numSignatures:d,signatureOffset:l,signatureInstructionIndex:o,ethAddressOffset:u,ethAddressInstructionIndex:o,messageDataOffset:h,messageDataSize:r.length,messageInstructionIndex:o,signature:J(i),ethAddress:J(a),recoveryId:s},p),p.fill(J(r),Qn.span),new Ue({keys:[],programId:ei.programId,data:p})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:r,instructionIndex:i}=e;Ce(t.length===Gn,`Private key must be ${Gn} bytes but received ${t.length} bytes`);try{const e=J(t),s=Yn(e,!1).slice(1),o=n.Buffer.from((0,q.lY)(J(r))),[a,c]=Vn(o,e);return this.createInstructionWithPublicKey({publicKey:s,message:r,signature:a,recoveryId:c,instructionIndex:i})}catch(s){throw new Error(`Error creating instruction; ${s}`)}}}var ti;ei.programId=new oe("KeccakSecp256k11111111111111111111111111111");const ri=new oe("StakeConfig11111111111111111111111111111111");class ni{constructor(e,t){this.staker=void 0,this.withdrawer=void 0,this.staker=e,this.withdrawer=t}}class ii{constructor(e,t,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=r}}ti=ii,ii.default=new ti(0,0,oe.default);class si{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const t=h.DH("instruction"),r=t.decode(e.data);let n;for(const[i,s]of Object.entries(oi))if(s.index==r){n=i;break}if(!n)throw new Error("Instruction type incorrect; not a StakeInstruction");return n}static decodeInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t,lockup:r}=st(oi.Initialize,e.data);return{stakePubkey:e.keys[0].pubkey,authorized:new ni(new oe(t.staker),new oe(t.withdrawer)),lockup:new ii(r.unixTimestamp,r.epoch,new oe(r.custodian))}}static decodeDelegate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,6),st(oi.Delegate,e.data),{stakePubkey:e.keys[0].pubkey,votePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[5].pubkey}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,stakeAuthorizationType:r}=st(oi.Authorize,e.data),n={stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new oe(t),stakeAuthorizationType:{index:r}};return e.keys.length>3&&(n.custodianPubkey=e.keys[3].pubkey),n}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{newAuthorized:t,stakeAuthorizationType:r,authoritySeed:n,authorityOwner:i}=st(oi.AuthorizeWithSeed,e.data),s={stakePubkey:e.keys[0].pubkey,authorityBase:e.keys[1].pubkey,authoritySeed:n,authorityOwner:new oe(i),newAuthorizedPubkey:new oe(t),stakeAuthorizationType:{index:r}};return e.keys.length>3&&(s.custodianPubkey=e.keys[3].pubkey),s}static decodeSplit(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=st(oi.Split,e.data);return{stakePubkey:e.keys[0].pubkey,splitStakePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[2].pubkey,lamports:t}}static decodeMerge(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),st(oi.Merge,e.data),{stakePubkey:e.keys[0].pubkey,sourceStakePubKey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=st(oi.Withdraw,e.data),r={stakePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t};return e.keys.length>5&&(r.custodianPubkey=e.keys[5].pubkey),r}static decodeDeactivate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),st(oi.Deactivate,e.data),{stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static checkProgramId(e){if(!e.equals(ci.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const oi=Object.freeze({Initialize:{index:0,layout:h.w3([h.DH("instruction"),be(),ve()])},Authorize:{index:1,layout:h.w3([h.DH("instruction"),me("newAuthorized"),h.DH("stakeAuthorizationType")])},Delegate:{index:2,layout:h.w3([h.DH("instruction")])},Split:{index:3,layout:h.w3([h.DH("instruction"),h.Wg("lamports")])},Withdraw:{index:4,layout:h.w3([h.DH("instruction"),h.Wg("lamports")])},Deactivate:{index:5,layout:h.w3([h.DH("instruction")])},Merge:{index:7,layout:h.w3([h.DH("instruction")])},AuthorizeWithSeed:{index:8,layout:h.w3([h.DH("instruction"),me("newAuthorized"),h.DH("stakeAuthorizationType"),we("authoritySeed"),me("authorityOwner")])}}),ai=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class ci{constructor(){}static initialize(e){const{stakePubkey:t,authorized:r,lockup:n}=e,i=n||ii.default,s=oi.Initialize,o=it(s,{authorized:{staker:J(r.staker.toBuffer()),withdrawer:J(r.withdrawer.toBuffer())},lockup:{unixTimestamp:i.unixTimestamp,epoch:i.epoch,custodian:J(i.custodian.toBuffer())}}),a={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Ye,isSigner:!1,isWritable:!1}],programId:this.programId,data:o};return new Ue(a)}static createAccountWithSeed(e){const t=new Le;t.add(pt.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:n,lockup:i}=e;return t.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}static createAccount(e){const t=new Le;t.add(pt.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:n,lockup:i}=e;return t.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}static delegate(e){const{stakePubkey:t,authorizedPubkey:r,votePubkey:n}=e,i=oi.Delegate,s=it(i);return(new Le).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:$e,isSigner:!1,isWritable:!1},{pubkey:Xe,isSigner:!1,isWritable:!1},{pubkey:ri,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}static authorize(e){const{stakePubkey:t,authorizedPubkey:r,newAuthorizedPubkey:n,stakeAuthorizationType:i,custodianPubkey:s}=e,o=oi.Authorize,a=it(o,{newAuthorized:J(n.toBuffer()),stakeAuthorizationType:i.index}),c=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:$e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return s&&c.push({pubkey:s,isSigner:!0,isWritable:!1}),(new Le).add({keys:c,programId:this.programId,data:a})}static authorizeWithSeed(e){const{stakePubkey:t,authorityBase:r,authoritySeed:n,authorityOwner:i,newAuthorizedPubkey:s,stakeAuthorizationType:o,custodianPubkey:a}=e,c=oi.AuthorizeWithSeed,u=it(c,{newAuthorized:J(s.toBuffer()),stakeAuthorizationType:o.index,authoritySeed:n,authorityOwner:J(i.toBuffer())}),l=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:$e,isSigner:!1,isWritable:!1}];return a&&l.push({pubkey:a,isSigner:!0,isWritable:!1}),(new Le).add({keys:l,programId:this.programId,data:u})}static splitInstruction(e){const{stakePubkey:t,authorizedPubkey:r,splitStakePubkey:n,lamports:i}=e,s=oi.Split,o=it(s,{lamports:i});return new Ue({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static split(e,t){const r=new Le;return r.add(pt.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:t,space:this.space,programId:this.programId})),r.add(this.splitInstruction(e))}static splitWithSeed(e,t){const{stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,basePubkey:s,seed:o,lamports:a}=e,c=new Le;return c.add(pt.allocate({accountPubkey:i,basePubkey:s,seed:o,space:this.space,programId:this.programId})),t&&t>0&&c.add(pt.transfer({fromPubkey:e.authorizedPubkey,toPubkey:i,lamports:t})),c.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,lamports:a}))}static merge(e){const{stakePubkey:t,sourceStakePubKey:r,authorizedPubkey:n}=e,i=oi.Merge,s=it(i);return(new Le).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:$e,isSigner:!1,isWritable:!1},{pubkey:Xe,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}static withdraw(e){const{stakePubkey:t,authorizedPubkey:r,toPubkey:n,lamports:i,custodianPubkey:s}=e,o=oi.Withdraw,a=it(o,{lamports:i}),c=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:$e,isSigner:!1,isWritable:!1},{pubkey:Xe,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return s&&c.push({pubkey:s,isSigner:!0,isWritable:!1}),(new Le).add({keys:c,programId:this.programId,data:a})}static deactivate(e){const{stakePubkey:t,authorizedPubkey:r}=e,n=oi.Deactivate,i=it(n);return(new Le).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:$e,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}}ci.programId=new oe("Stake11111111111111111111111111111111111111"),ci.space=200;class ui{constructor(e,t,r,n){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=e,this.authorizedVoter=t,this.authorizedWithdrawer=r,this.commission=n}}class li{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const t=h.DH("instruction"),r=t.decode(e.data);let n;for(const[i,s]of Object.entries(hi))if(s.index==r){n=i;break}if(!n)throw new Error("Instruction type incorrect; not a VoteInstruction");return n}static decodeInitializeAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,4);const{voteInit:t}=st(hi.InitializeAccount,e.data);return{votePubkey:e.keys[0].pubkey,nodePubkey:e.keys[3].pubkey,voteInit:new ui(new oe(t.nodePubkey),new oe(t.authorizedVoter),new oe(t.authorizedWithdrawer),t.commission)}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,voteAuthorizationType:r}=st(hi.Authorize,e.data);return{votePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new oe(t),voteAuthorizationType:{index:r}}}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:t,currentAuthorityDerivedKeySeed:r,newAuthorized:n,voteAuthorizationType:i}}=st(hi.AuthorizeWithSeed,e.data);return{currentAuthorityDerivedKeyBasePubkey:e.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new oe(t),currentAuthorityDerivedKeySeed:r,newAuthorizedPubkey:new oe(n),voteAuthorizationType:{index:i},votePubkey:e.keys[0].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=st(hi.Withdraw,e.data);return{votePubkey:e.keys[0].pubkey,authorizedWithdrawerPubkey:e.keys[2].pubkey,lamports:t,toPubkey:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(pi.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const hi=Object.freeze({InitializeAccount:{index:0,layout:h.w3([h.DH("instruction"),_e()])},Authorize:{index:1,layout:h.w3([h.DH("instruction"),me("newAuthorized"),h.DH("voteAuthorizationType")])},Withdraw:{index:3,layout:h.w3([h.DH("instruction"),h.Wg("lamports")])},UpdateValidatorIdentity:{index:4,layout:h.w3([h.DH("instruction")])},AuthorizeWithSeed:{index:10,layout:h.w3([h.DH("instruction"),Ee()])}}),di=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class pi{constructor(){}static initializeAccount(e){const{votePubkey:t,nodePubkey:r,voteInit:n}=e,i=hi.InitializeAccount,s=it(i,{voteInit:{nodePubkey:J(n.nodePubkey.toBuffer()),authorizedVoter:J(n.authorizedVoter.toBuffer()),authorizedWithdrawer:J(n.authorizedWithdrawer.toBuffer()),commission:n.commission}}),o={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Ye,isSigner:!1,isWritable:!1},{pubkey:$e,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:s};return new Ue(o)}static createAccount(e){const t=new Le;return t.add(pt.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),t.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}static authorize(e){const{votePubkey:t,authorizedPubkey:r,newAuthorizedPubkey:n,voteAuthorizationType:i}=e,s=hi.Authorize,o=it(s,{newAuthorized:J(n.toBuffer()),voteAuthorizationType:i.index}),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:$e,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return(new Le).add({keys:a,programId:this.programId,data:o})}static authorizeWithSeed(e){const{currentAuthorityDerivedKeyBasePubkey:t,currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:i,voteAuthorizationType:s,votePubkey:o}=e,a=hi.AuthorizeWithSeed,c=it(a,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:J(r.toBuffer()),currentAuthorityDerivedKeySeed:n,newAuthorized:J(i.toBuffer()),voteAuthorizationType:s.index}}),u=[{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:$e,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!0,isWritable:!1}];return(new Le).add({keys:u,programId:this.programId,data:c})}static withdraw(e){const{votePubkey:t,authorizedWithdrawerPubkey:r,lamports:n,toPubkey:i}=e,s=hi.Withdraw,o=it(s,{lamports:n}),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return(new Le).add({keys:a,programId:this.programId,data:o})}static safeWithdraw(e,t,r){if(e.lamports>t-r)throw new Error("Withdraw will leave vote account with insufficient funds.");return pi.withdraw(e)}static updateValidatorIdentity(e){const{votePubkey:t,authorizedWithdrawerPubkey:r,nodePubkey:n}=e,i=hi.UpdateValidatorIdentity,s=it(i),o=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return(new Le).add({keys:o,programId:this.programId,data:s})}}pi.programId=new oe("Vote111111111111111111111111111111111111111"),pi.space=3762;const fi=new oe("Va1idator1nfo111111111111111111111111111111"),gi=(0,W.NW)({name:(0,W.Yj)(),website:(0,W.lq)((0,W.Yj)()),details:(0,W.lq)((0,W.Yj)()),iconUrl:(0,W.lq)((0,W.Yj)()),keybaseUsername:(0,W.lq)((0,W.Yj)())});class mi{constructor(e,t){this.key=void 0,this.info=void 0,this.key=e,this.info=t}static fromConfigData(e){let t=[...e];const r=Ie(t);if(2!==r)return null;const i=[];for(let n=0;n<2;n++){const e=new oe(Te(t,0,ne)),r=1===Oe(t);i.push({publicKey:e,isSigner:r})}if(i[0].publicKey.equals(fi)&&i[1].isSigner){const e=we().decode(n.Buffer.from(t)),r=JSON.parse(e);return(0,W.vA)(r,gi),new mi(i[1].publicKey,r)}return null}}const yi=new oe("Vote111111111111111111111111111111111111111"),wi=h.w3([me("nodePubkey"),me("authorizedWithdrawer"),h.u8("commission"),h.I0(),h.O6(h.w3([h.I0("slot"),h.DH("confirmationCount")]),h.cY(h.DH(),-8),"votes"),h.u8("rootSlotValid"),h.I0("rootSlot"),h.I0(),h.O6(h.w3([h.I0("epoch"),me("authorizedVoter")]),h.cY(h.DH(),-8),"authorizedVoters"),h.w3([h.O6(h.w3([me("authorizedPubkey"),h.I0("epochOfLastAuthorizedSwitch"),h.I0("targetEpoch")]),32,"buf"),h.I0("idx"),h.u8("isEmpty")],"priorVoters"),h.I0(),h.O6(h.w3([h.I0("epoch"),h.I0("credits"),h.I0("prevCredits")]),h.cY(h.DH(),-8),"epochCredits"),h.w3([h.I0("slot"),h.I0("timestamp")],"lastTimestamp")]);class bi{constructor(e){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=e.nodePubkey,this.authorizedWithdrawer=e.authorizedWithdrawer,this.commission=e.commission,this.rootSlot=e.rootSlot,this.votes=e.votes,this.authorizedVoters=e.authorizedVoters,this.priorVoters=e.priorVoters,this.epochCredits=e.epochCredits,this.lastTimestamp=e.lastTimestamp}static fromAccountData(e){const t=4,r=wi.decode(J(e),t);let n=r.rootSlot;return r.rootSlotValid||(n=null),new bi({nodePubkey:new oe(r.nodePubkey),authorizedWithdrawer:new oe(r.authorizedWithdrawer),commission:r.commission,votes:r.votes,rootSlot:n,authorizedVoters:r.authorizedVoters.map(vi),priorVoters:Ei(r.priorVoters),epochCredits:r.epochCredits,lastTimestamp:r.lastTimestamp})}}function vi({authorizedVoter:e,epoch:t}){return{epoch:t,authorizedVoter:new oe(e)}}function _i({authorizedPubkey:e,epochOfLastAuthorizedSwitch:t,targetEpoch:r}){return{authorizedPubkey:new oe(e),epochOfLastAuthorizedSwitch:t,targetEpoch:r}}function Ei({buf:e,idx:t,isEmpty:r}){return r?[]:[...e.slice(t+1).map(_i),...e.slice(0,t).map(_i)]}const Ai={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function Ii(e,t){const r=!1===t?"http":"https";if(!e)return Ai[r]["devnet"];const n=Ai[r][e];if(!n)throw new Error(`Unknown ${r} cluster: ${e}`);return n}async function Si(e,t,r,n){let i,s;r&&Object.prototype.hasOwnProperty.call(r,"lastValidBlockHeight")||r&&Object.prototype.hasOwnProperty.call(r,"nonceValue")?(i=r,s=n):s=r;const o=s&&{skipPreflight:s.skipPreflight,preflightCommitment:s.preflightCommitment||s.commitment,minContextSlot:s.minContextSlot},a=await e.sendRawTransaction(t,o),c=s&&s.commitment,u=i?e.confirmTransaction(i,c):e.confirmTransaction(a,c),l=(await u).value;if(l.err){if(null!=a)throw new Qe({action:o?.skipPreflight?"send":"simulate",signature:a,transactionMessage:`Status: (${JSON.stringify(l)})`});throw new Error(`Raw transaction ${a} failed (${JSON.stringify(l)})`)}return a}const Ci=1e9},96316:function(e,t,r){"use strict";r.d(t,{Aj:function(){return n.A}});r(7085),r(67495);var n=r(3413)},96577:function(e,t,r){"use strict";r.d(t,{W:function(){return m}});r(44114);var n=r(69983),i=r(28356),s=r(81753),o=r(58843),a=r(65768),c=r(37903),u=r(78134),l=r(25638),h=r(31843),d=r(64529),p=r(32330),f=r(80347);const g=(0,n.BX)({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),m={state:g,subscribe(e){return(0,n.B1)(g,(()=>e(g)))},subscribeKey(e,t){return(0,i.u$)(g,e,t)},async open(e){const t="connected"===o.U.state.status;u.x.state.wcBasic?a.N.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await a.N.prefetch({fetchConnectorImages:!t,fetchFeaturedWallets:!t,fetchRecommendedWallets:!t}),e?.namespace?(await c.W.switchActiveNamespace(e.namespace),m.setLoading(!0,e.namespace)):m.setLoading(!0),l.a.setFilterByNamespace(e?.namespace);const r=c.W.getAccountData(e?.namespace)?.caipAddress,n=c.W.state.noAdapters;d.H.state.manualWCControl||n&&!r?s.w.isMobile()?f.I.reset("AllWallets"):f.I.reset("ConnectingWalletConnectBasic"):e?.view?f.I.reset(e.view,e.data):r?f.I.reset("Account"):f.I.reset("Connect"),g.open=!0,p.z.set({open:!0}),h.E.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:Boolean(r)}})},close(e=!1){if(e||"ApproveTransaction"!==f.I.state.view){const e=d.H.state.enableEmbedded,t=Boolean(c.W.state.activeCaipAddress);g.open&&h.E.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:t}}),g.open=!1,m.clearLoading(),e?t?f.I.replace("Account"):f.I.push("Connect"):p.z.set({open:!1})}u.x.resetUri()},setLoading(e,t){t&&g.loadingNamespaceMap.set(t,e),g.loading=e,p.z.set({loading:e})},clearLoading(){g.loadingNamespaceMap.clear(),g.loading=!1},shake(){g.shake||(g.shake=!0,setTimeout((()=>{g.shake=!1}),500))}}},96934:function(e,t,r){"use strict";r.d(t,{w:function(){return s}});var n=r(96030),i=r(80955);const s={UNIVERSAL_PROVIDER_RELAY_URL:"wss://relay.walletconnect.org",HASH_PREFIX:"SPL Name Service",ROOT_DOMAIN_ACCOUNT:new n.PublicKey("58PwtjSDuFHuUkYjH9BYnnQKHfwo9reZhC2zMJv9JPkx"),NAME_PROGRAM_ID:new n.PublicKey("namesLPneVptA9Z5rqUDD9tMTWEJwofgaYwp8cawRkX"),REVERSE_LOOKUP_CLASS:new n.PublicKey("33m47vH6Eav6jr5Ry86XjhRft2jRBLDnDgPSHoquXi2Z"),DEFAULT_CHAIN:{id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",chainNamespace:i.o.CHAIN.SOLANA,nativeCurrency:{name:"Solana",decimals:9,symbol:"SOL"},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},rpcUrls:{default:{http:[`${i.o.BLOCKCHAIN_API_RPC_URL}/v1`]}}},CHAIN_IDS:{Mainnet:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",Devnet:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",Testnet:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",Deprecated_Mainnet:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ",Deprecated_Devnet:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"},LAMPORTS_PER_SOL:1e9}},97180:function(e,t,r){"use strict";r.d(t,{j:function(){return o}});var n=r(69983),i=r(28356);const s=(0,n.BX)({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),o={state:s,subscribeNetworkImages(e){return(0,n.B1)(s.networkImages,(()=>e(s.networkImages)))},subscribeKey(e,t){return(0,i.u$)(s,e,t)},subscribe(e){return(0,n.B1)(s,(()=>e(s)))},setWalletImage(e,t){s.walletImages[e]=t},setNetworkImage(e,t){s.networkImages[e]=t},setChainImage(e,t){s.chainImages[e]=t},setConnectorImage(e,t){s.connectorImages={...s.connectorImages,[e]:t}},setTokenImage(e,t){s.tokenImages[e]=t},setCurrencyImage(e,t){s.currencyImages[e]=t}}},97532:function(e,t,r){"use strict";r.r(t),r.d(t,{TextDecoder:function(){return f},TextEncoder:function(){return g}});r(44114);function n(e,t,r){return t<=e&&e<=r}function i(e){if(void 0===e)return{};if(e===Object(e))return e;throw TypeError("Could not convert argument to dictionary")}function s(e){var t=String(e),r=t.length,n=0,i=[];while(n<r){var s=t.charCodeAt(n);if(s<55296||s>57343)i.push(s);else if(56320<=s&&s<=57343)i.push(65533);else if(55296<=s&&s<=56319)if(n===r-1)i.push(65533);else{var o=e.charCodeAt(n+1);if(56320<=o&&o<=57343){var a=1023&s,c=1023&o;i.push(65536+(a<<10)+c),n+=1}else i.push(65533)}n+=1}return i}function o(e){for(var t="",r=0;r<e.length;++r){var n=e[r];n<=65535?t+=String.fromCharCode(n):(n-=65536,t+=String.fromCharCode(55296+(n>>10),56320+(1023&n)))}return t}var a=-1;function c(e){this.tokens=[].slice.call(e)}c.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():a},prepend:function(e){if(Array.isArray(e)){var t=e;while(t.length)this.tokens.unshift(t.pop())}else this.tokens.unshift(e)},push:function(e){if(Array.isArray(e)){var t=e;while(t.length)this.tokens.push(t.shift())}else this.tokens.push(e)}};var u=-1;function l(e,t){if(e)throw TypeError("Decoder error");return t||65533}function h(){}function d(){}h.prototype={handler:function(e,t){}},d.prototype={handler:function(e,t){}};var p="utf-8";function f(e,t){if(!(this instanceof f))return new f(e,t);if(e=void 0!==e?String(e).toLowerCase():p,e!==p)throw new Error("Encoding not supported. Only utf-8 is supported");t=i(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=Boolean(t["fatal"]),this._ignoreBOM=Boolean(t["ignoreBOM"]),Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function g(e,t){if(!(this instanceof g))return new g(e,t);if(e=void 0!==e?String(e).toLowerCase():p,e!==p)throw new Error("Encoding not supported. Only utf-8 is supported");t=i(t),this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(t["fatal"])},Object.defineProperty(this,"encoding",{value:"utf-8"})}function m(e){var t=e.fatal,r=0,i=0,s=0,o=128,c=191;this.handler=function(e,h){if(h===a&&0!==s)return s=0,l(t);if(h===a)return u;if(0===s){if(n(h,0,127))return h;if(n(h,194,223))s=1,r=h-192;else if(n(h,224,239))224===h&&(o=160),237===h&&(c=159),s=2,r=h-224;else{if(!n(h,240,244))return l(t);240===h&&(o=144),244===h&&(c=143),s=3,r=h-240}return r<<=6*s,null}if(!n(h,o,c))return r=s=i=0,o=128,c=191,e.prepend(h),l(t);if(o=128,c=191,i+=1,r+=h-128<<6*(s-i),i!==s)return null;var d=r;return r=s=i=0,d}}function y(e){e.fatal;this.handler=function(e,t){if(t===a)return u;if(n(t,0,127))return t;var r,i;n(t,128,2047)?(r=1,i=192):n(t,2048,65535)?(r=2,i=224):n(t,65536,1114111)&&(r=3,i=240);var s=[(t>>6*r)+i];while(r>0){var o=t>>6*(r-1);s.push(128|63&o),r-=1}return s}}f.prototype={decode:function(e,t){var r;r="object"===typeof e&&e instanceof ArrayBuffer?new Uint8Array(e):"object"===typeof e&&"buffer"in e&&e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(0),t=i(t),this._streaming||(this._decoder=new m({fatal:this._fatal}),this._BOMseen=!1),this._streaming=Boolean(t["stream"]);var n,s=new c(r),a=[];while(!s.endOfStream()){if(n=this._decoder.handler(s,s.read()),n===u)break;null!==n&&(Array.isArray(n)?a.push.apply(a,n):a.push(n))}if(!this._streaming){do{if(n=this._decoder.handler(s,s.read()),n===u)break;null!==n&&(Array.isArray(n)?a.push.apply(a,n):a.push(n))}while(!s.endOfStream());this._decoder=null}return a.length&&(-1===["utf-8"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===a[0]?(this._BOMseen=!0,a.shift()):this._BOMseen=!0)),o(a)}},g.prototype={encode:function(e,t){e=e?String(e):"",t=i(t),this._streaming||(this._encoder=new y(this._options)),this._streaming=Boolean(t["stream"]);var r,n=[],o=new c(s(e));while(!o.endOfStream()){if(r=this._encoder.handler(o,o.read()),r===u)break;Array.isArray(r)?n.push.apply(n,r):n.push(r)}if(!this._streaming){while(1){if(r=this._encoder.handler(o,o.read()),r===u)break;Array.isArray(r)?n.push.apply(n,r):n.push(r)}this._encoder=null}return new Uint8Array(n)}}},97615:function(e,t,r){"use strict";r(18111),r(22489),r(61701);const n=/[\p{Lu}]/u,i=/[\p{Ll}]/u,s=/^[\p{Lu}](?![\p{Lu}])/gu,o=/([\p{Alpha}\p{N}_]|$)/u,a=/[_.\- ]+/,c=new RegExp("^"+a.source),u=new RegExp(a.source+o.source,"gu"),l=new RegExp("\\d+"+o.source,"gu"),h=(e,t,r)=>{let s=!1,o=!1,a=!1;for(let c=0;c<e.length;c++){const u=e[c];s&&n.test(u)?(e=e.slice(0,c)+"-"+e.slice(c),s=!1,a=o,o=!0,c++):o&&a&&i.test(u)?(e=e.slice(0,c-1)+"-"+e.slice(c-1),a=o,o=!1,s=!0):(s=t(u)===u&&r(u)!==u,a=o,o=r(u)===u&&t(u)!==u)}return e},d=(e,t)=>(s.lastIndex=0,e.replace(s,(e=>t(e)))),p=(e,t)=>(u.lastIndex=0,l.lastIndex=0,e.replace(u,((e,r)=>t(r))).replace(l,(e=>t(e)))),f=(e,t)=>{if("string"!==typeof e&&!Array.isArray(e))throw new TypeError("Expected the input to be `string | string[]`");if(t={pascalCase:!1,preserveConsecutiveUppercase:!1,...t},e=Array.isArray(e)?e.map((e=>e.trim())).filter((e=>e.length)).join("-"):e.trim(),0===e.length)return"";const r=!1===t.locale?e=>e.toLowerCase():e=>e.toLocaleLowerCase(t.locale),n=!1===t.locale?e=>e.toUpperCase():e=>e.toLocaleUpperCase(t.locale);if(1===e.length)return t.pascalCase?n(e):r(e);const i=e!==r(e);return i&&(e=h(e,r,n)),e=e.replace(c,""),e=t.preserveConsecutiveUppercase?d(e,r):r(e),t.pascalCase&&(e=n(e.charAt(0))+e.slice(1)),p(e,n)};e.exports=f,e.exports["default"]=f},97914:function(e){!function(t,r){e.exports=r()}(0,(function(){"use strict";return function(e,t,r){e=e||{};var n=t.prototype,i={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function s(e,t,r,i){return n.fromToBase(e,t,r,i)}r.en.relativeTime=i,n.fromToBase=function(t,n,s,o,a){for(var c,u,l,h=s.$locale().relativeTime||i,d=e.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],p=d.length,f=0;f<p;f+=1){var g=d[f];g.d&&(c=o?r(t).diff(s,g.d,!0):s.diff(t,g.d,!0));var m=(e.rounding||Math.round)(Math.abs(c));if(l=c>0,m<=g.r||!g.r){m<=1&&f>0&&(g=d[f-1]);var y=h[g.l];a&&(m=a(""+m)),u="string"==typeof y?y.replace("%d",m):y(m,n,g.l,l);break}}if(n)return u;var w=l?h.future:h.past;return"function"==typeof w?w(u):w.replace("%s",u)},n.to=function(e,t){return s(e,t,this,!0)},n.from=function(e,t){return s(e,t,this)};var o=function(e){return e.$u?r.utc():r()};n.toNow=function(e){return this.to(o(this),e)},n.fromNow=function(e){return this.from(o(this),e)}}}))},99229:function(e,t,r){"use strict";r.d(t,{a:function(){return n},y:function(){return i}});class n extends Error{constructor(e){super(`The wallet does not support the "${e}" feature`)}}class i extends Error{constructor(e){super(`The method "${e}" is not supported by the wallet`)}}},99590:function(e,t,r){"use strict";var n=r(91291),i=RangeError;e.exports=function(e){var t=n(e);if(t<0)throw new i("The argument can't be less than 0");return t}},99774:function(e,t,r){"use strict";r(44114);var n,i="object"===typeof Reflect?Reflect:null,s=i&&"function"===typeof i.apply?i.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};function o(e){console&&console.warn&&console.warn(e)}n=i&&"function"===typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!==e};function c(){c.init.call(this)}e.exports=c,e.exports.once=v,c.EventEmitter=c,c.prototype._events=void 0,c.prototype._eventsCount=0,c.prototype._maxListeners=void 0;var u=10;function l(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function h(e){return void 0===e._maxListeners?c.defaultMaxListeners:e._maxListeners}function d(e,t,r,n){var i,s,a;if(l(r),s=e._events,void 0===s?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),s=e._events),a=s[t]),void 0===a)a=s[t]=r,++e._eventsCount;else if("function"===typeof a?a=s[t]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),i=h(e),i>0&&a.length>i&&!a.warned){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=a.length,o(c)}return e}function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=p.bind(n);return i.listener=r,n.wrapFn=i,i}function g(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"===typeof i?r?[i.listener||i]:[i]:r?b(i):y(i,i.length)}function m(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"===typeof r)return 1;if(void 0!==r)return r.length}return 0}function y(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function w(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function b(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function v(e,t){return new Promise((function(r,n){function i(r){e.removeListener(t,s),n(r)}function s(){"function"===typeof e.removeListener&&e.removeListener("error",i),r([].slice.call(arguments))}E(e,t,s,{once:!0}),"error"!==t&&_(e,i,{once:!0})}))}function _(e,t,r){"function"===typeof e.on&&E(e,"error",t,r)}function E(e,t,r,n){if("function"===typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!==typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(s){n.once&&e.removeEventListener(t,i),r(s)}))}}Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!==typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),c.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},c.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},c.prototype.getMaxListeners=function(){return h(this)},c.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=i[e];if(void 0===c)return!1;if("function"===typeof c)s(c,this,t);else{var u=c.length,l=y(c,u);for(r=0;r<u;++r)s(l[r],this,t)}return!0},c.prototype.addListener=function(e,t){return d(this,e,t,!1)},c.prototype.on=c.prototype.addListener,c.prototype.prependListener=function(e,t){return d(this,e,t,!0)},c.prototype.once=function(e,t){return l(t),this.on(e,f(this,e,t)),this},c.prototype.prependOnceListener=function(e,t){return l(t),this.prependListener(e,f(this,e,t)),this},c.prototype.removeListener=function(e,t){var r,n,i,s,o;if(l(t),n=this._events,void 0===n)return this;if(r=n[e],void 0===r)return this;if(r===t||r.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!==typeof r){for(i=-1,s=r.length-1;s>=0;s--)if(r[s]===t||r[s].listener===t){o=r[s].listener,i=s;break}if(i<0)return this;0===i?r.shift():w(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,o||t)}return this},c.prototype.off=c.prototype.removeListener,c.prototype.removeAllListeners=function(e){var t,r,n;if(r=this._events,void 0===r)return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,s=Object.keys(r);for(n=0;n<s.length;++n)i=s[n],"removeListener"!==i&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=r[e],"function"===typeof t)this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},c.prototype.listeners=function(e){return g(this,e,!0)},c.prototype.rawListeners=function(e){return g(this,e,!1)},c.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},c.prototype.listenerCount=m,c.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}}}]);