<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marb - iOS</title>
    <link rel="manifest" href="/manifest.json">
    <script src="/registerServiceWorker.js" module></script>
</head>
<style>
    body,
    html {
        margin: 0;
    }

    body {
        position: relative;
    }

    .flex-row {
        display: flex;
        flex-direction: row;
    }

    .flex-column {
        display: flex;
        flex-direction: column;
    }

    .flex-center {
        align-items: center;
        justify-content: center;
    }

    .g {
        aspect-ratio: 2.9;
    }
</style>

<body>
    <div class="flex-row flex-center" style="width: 100%;">
        <div class="flex-column flex-center" style="position: relative;max-width: 750px;">
            <img style="object-fit: cover;width: 100%;" src="./img/ios.png" alt="">
            <div class="g"
                style="position: absolute;width: 14%;background-color: #ff000000;z-index: 10;top: 8%;left: 34%;"
                onclick="downloadClick('iOS')">
            </div>
            <div class="g"
                style="position: absolute;width: 13%;background-color: #ff000000;z-index: 10;top: 8%;left: 52%;">
            </div>
        </div>
        <script>
            let deferredPrompt;
            window.addEventListener('beforeinstallprompt', (e) => {
                e.preventDefault();
                deferredPrompt = e;
            });
            function downloadClick(info) {
                if (info === 'iOS') {
                    window.open('/marb.mobileconfig')
                    return;
                }
                // if (!deferredPrompt) {
                //     return;
                // }
                // if (deferredPrompt == undefined) {
                //     return;
                // }
                // deferredPrompt.prompt();
                // deferredPrompt.userChoice.then((choice) => {
                //     if (choice.outcome === 'accepted') {
                //         console.log('Web App installed.');
                //     } else {
                //         console.log('User cancelled home screen install.');
                //     }
                //     // deferredPrompt = null; // 重置提示变量。
                // });
            }
        </script>
</body>

</html>